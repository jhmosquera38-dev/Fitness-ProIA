(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hx={exports:{}},Xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=Symbol.for("react.transitional.element"),u_=Symbol.for("react.fragment");function Vx(e,t,n){var r=null;if(n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:c_,type:e,key:r,ref:t!==void 0?t:null,props:n}}Xl.Fragment=u_;Xl.jsx=Vx;Xl.jsxs=Vx;Hx.exports=Xl;var i=Hx.exports,Fx={exports:{}},se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh=Symbol.for("react.transitional.element"),d_=Symbol.for("react.portal"),h_=Symbol.for("react.fragment"),f_=Symbol.for("react.strict_mode"),m_=Symbol.for("react.profiler"),p_=Symbol.for("react.consumer"),g_=Symbol.for("react.context"),x_=Symbol.for("react.forward_ref"),y_=Symbol.for("react.suspense"),v_=Symbol.for("react.memo"),$x=Symbol.for("react.lazy"),b_=Symbol.for("react.activity"),am=Symbol.iterator;function w_(e){return e===null||typeof e!="object"?null:(e=am&&e[am]||e["@@iterator"],typeof e=="function"?e:null)}var Jx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yx=Object.assign,Kx={};function ba(e,t,n){this.props=e,this.context=t,this.refs=Kx,this.updater=n||Jx}ba.prototype.isReactComponent={};ba.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ba.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wx(){}Wx.prototype=ba.prototype;function wh(e,t,n){this.props=e,this.context=t,this.refs=Kx,this.updater=n||Jx}var _h=wh.prototype=new Wx;_h.constructor=wh;Yx(_h,ba.prototype);_h.isPureReactComponent=!0;var im=Array.isArray;function qu(){}var Ae={H:null,A:null,T:null,S:null},Xx=Object.prototype.hasOwnProperty;function Sh(e,t,n){var r=n.ref;return{$$typeof:bh,type:e,key:t,ref:r!==void 0?r:null,props:n}}function __(e,t){return Sh(e.type,t,e.props)}function Nh(e){return typeof e=="object"&&e!==null&&e.$$typeof===bh}function S_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var om=/\/+/g;function Ac(e,t){return typeof e=="object"&&e!==null&&e.key!=null?S_(""+e.key):t.toString(36)}function N_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(qu,qu):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function js(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case bh:case d_:o=!0;break;case $x:return o=e._init,js(o(e._payload),t,n,r,s)}}if(o)return s=s(e),o=r===""?"."+Ac(e,0):r,im(s)?(n="",o!=null&&(n=o.replace(om,"$&/")+"/"),js(s,t,n,"",function(u){return u})):s!=null&&(Nh(s)&&(s=__(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(om,"$&/")+"/")+o)),t.push(s)),1;o=0;var l=r===""?".":r+":";if(im(e))for(var c=0;c<e.length;c++)r=e[c],a=l+Ac(r,c),o+=js(r,t,n,a,s);else if(c=w_(e),typeof c=="function")for(e=c.call(e),c=0;!(r=e.next()).done;)r=r.value,a=l+Ac(r,c++),o+=js(r,t,n,a,s);else if(a==="object"){if(typeof e.then=="function")return js(N_(e),t,n,r,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function io(e,t,n){if(e==null)return e;var r=[],s=0;return js(e,r,"","",function(a){return t.call(n,a,s++)}),r}function E_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},C_={map:io,forEach:function(e,t,n){io(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return io(e,function(){t++}),t},toArray:function(e){return io(e,function(t){return t})||[]},only:function(e){if(!Nh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Activity=b_;se.Children=C_;se.Component=ba;se.Fragment=h_;se.Profiler=m_;se.PureComponent=wh;se.StrictMode=f_;se.Suspense=y_;se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae;se.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ae.H.useMemoCache(e)}};se.cache=function(e){return function(){return e.apply(null,arguments)}};se.cacheSignal=function(){return null};se.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=Yx({},e.props),s=e.key;if(t!=null)for(a in t.key!==void 0&&(s=""+t.key),t)!Xx.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}return Sh(e.type,s,r)};se.createContext=function(e){return e={$$typeof:g_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:p_,_context:e},e};se.createElement=function(e,t,n){var r,s={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=""+t.key),t)Xx.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return Sh(e,a,s)};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:x_,render:e}};se.isValidElement=Nh;se.lazy=function(e){return{$$typeof:$x,_payload:{_status:-1,_result:e},_init:E_}};se.memo=function(e,t){return{$$typeof:v_,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Ae.T,n={};Ae.T=n;try{var r=e(),s=Ae.S;s!==null&&s(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(qu,lm)}catch(a){lm(a)}finally{t!==null&&n.types!==null&&(t.types=n.types),Ae.T=t}};se.unstable_useCacheRefresh=function(){return Ae.H.useCacheRefresh()};se.use=function(e){return Ae.H.use(e)};se.useActionState=function(e,t,n){return Ae.H.useActionState(e,t,n)};se.useCallback=function(e,t){return Ae.H.useCallback(e,t)};se.useContext=function(e){return Ae.H.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e,t){return Ae.H.useDeferredValue(e,t)};se.useEffect=function(e,t){return Ae.H.useEffect(e,t)};se.useEffectEvent=function(e){return Ae.H.useEffectEvent(e)};se.useId=function(){return Ae.H.useId()};se.useImperativeHandle=function(e,t,n){return Ae.H.useImperativeHandle(e,t,n)};se.useInsertionEffect=function(e,t){return Ae.H.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return Ae.H.useLayoutEffect(e,t)};se.useMemo=function(e,t){return Ae.H.useMemo(e,t)};se.useOptimistic=function(e,t){return Ae.H.useOptimistic(e,t)};se.useReducer=function(e,t,n){return Ae.H.useReducer(e,t,n)};se.useRef=function(e){return Ae.H.useRef(e)};se.useState=function(e){return Ae.H.useState(e)};se.useSyncExternalStore=function(e,t,n){return Ae.H.useSyncExternalStore(e,t,n)};se.useTransition=function(){return Ae.H.useTransition()};se.version="19.2.3";Fx.exports=se;var E=Fx.exports;const Xe=Wl(E);var Qx={exports:{}},Ql={},Zx={exports:{}},ey={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,P){var L=B.length;B.push(P);e:for(;0<L;){var V=L-1>>>1,k=B[V];if(0<s(k,P))B[V]=P,B[L]=k,L=V;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var P=B[0],L=B.pop();if(L!==P){B[0]=L;e:for(var V=0,k=B.length,q=k>>>1;V<q;){var $=2*(V+1)-1,j=B[$],ne=$+1,_e=B[ne];if(0>s(j,L))ne<k&&0>s(_e,j)?(B[V]=_e,B[ne]=L,V=ne):(B[V]=j,B[$]=L,V=$);else if(ne<k&&0>s(_e,L))B[V]=_e,B[ne]=L,V=ne;else break e}}return P}function s(B,P){var L=B.sortIndex-P.sortIndex;return L!==0?L:B.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,p=null,m=3,g=!1,v=!1,x=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function S(B){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=B)r(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=n(u)}}function T(B){if(x=!1,S(B),!v)if(n(c)!==null)v=!0,N||(N=!0,D());else{var P=n(u);P!==null&&K(T,P.startTime-B)}}var N=!1,C=-1,I=5,A=-1;function R(){return w?!0:!(e.unstable_now()-A<I)}function O(){if(w=!1,N){var B=e.unstable_now();A=B;var P=!0;try{e:{v=!1,x&&(x=!1,b(C),C=-1),g=!0;var L=m;try{t:{for(S(B),p=n(c);p!==null&&!(p.expirationTime>B&&R());){var V=p.callback;if(typeof V=="function"){p.callback=null,m=p.priorityLevel;var k=V(p.expirationTime<=B);if(B=e.unstable_now(),typeof k=="function"){p.callback=k,S(B),P=!0;break t}p===n(c)&&r(c),S(B)}else r(c);p=n(c)}if(p!==null)P=!0;else{var q=n(u);q!==null&&K(T,q.startTime-B),P=!1}}break e}finally{p=null,m=L,g=!1}P=void 0}}finally{P?D():N=!1}}}var D;if(typeof _=="function")D=function(){_(O)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=O,D=function(){W.postMessage(null)}}else D=function(){y(O,0)};function K(B,P){C=y(function(){B(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var P=3;break;default:P=m}var L=m;m=P;try{return B()}finally{m=L}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(B,P){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var L=m;m=B;try{return P()}finally{m=L}},e.unstable_scheduleCallback=function(B,P,L){var V=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,B){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=L+k,B={id:d++,callback:P,priorityLevel:B,startTime:L,expirationTime:k,sortIndex:-1},L>V?(B.sortIndex=L,t(u,B),n(c)===null&&B===n(u)&&(x?(b(C),C=-1):x=!0,K(T,L-V))):(B.sortIndex=k,t(c,B),v||g||(v=!0,N||(N=!0,D()))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var P=m;return function(){var L=m;m=P;try{return B.apply(this,arguments)}finally{m=L}}}})(ey);Zx.exports=ey;var k_=Zx.exports,ty={exports:{}},yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_=E;function ny(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rr(){}var gt={d:{f:rr,r:function(){throw Error(ny(522))},D:rr,C:rr,L:rr,m:rr,X:rr,S:rr,M:rr},p:0,findDOMNode:null},j_=Symbol.for("react.portal");function A_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}var ni=T_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Zl(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gt;yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(ny(299));return A_(e,t,null,n)};yt.flushSync=function(e){var t=ni.T,n=gt.p;try{if(ni.T=null,gt.p=2,e)return e()}finally{ni.T=t,gt.p=n,gt.d.f()}};yt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,gt.d.C(e,t))};yt.prefetchDNS=function(e){typeof e=="string"&&gt.d.D(e)};yt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,r=Zl(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?gt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:a}):n==="script"&&gt.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};yt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Zl(t.as,t.crossOrigin);gt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&gt.d.M(e)};yt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,r=Zl(n,t.crossOrigin);gt.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};yt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Zl(t.as,t.crossOrigin);gt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else gt.d.m(e)};yt.requestFormReset=function(e){gt.d.r(e)};yt.unstable_batchedUpdates=function(e,t){return e(t)};yt.useFormState=function(e,t,n){return ni.H.useFormState(e,t,n)};yt.useFormStatus=function(){return ni.H.useHostTransitionStatus()};yt.version="19.2.3";function ry(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ry)}catch(e){console.error(e)}}ry(),ty.exports=yt;var sy=ty.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=k_,ay=E,R_=sy;function z(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function iy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function oy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ly(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cm(e){if(Hi(e)!==e)throw Error(z(188))}function I_(e){var t=e.alternate;if(!t){if(t=Hi(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return cm(s),e;if(a===r)return cm(s),t;a=a.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function cy(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=cy(e),t!==null)return t;e=e.sibling}return null}var Re=Object.assign,M_=Symbol.for("react.element"),oo=Symbol.for("react.transitional.element"),Ka=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),uy=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),dy=Symbol.for("react.consumer"),qn=Symbol.for("react.context"),Eh=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),Vu=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Fu=Symbol.for("react.activity"),D_=Symbol.for("react.memo_cache_sentinel"),um=Symbol.iterator;function Ua(e){return e===null||typeof e!="object"?null:(e=um&&e[um]||e["@@iterator"],typeof e=="function"?e:null)}var P_=Symbol.for("react.client.reference");function $u(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ls:return"Fragment";case Gu:return"Profiler";case uy:return"StrictMode";case Hu:return"Suspense";case Vu:return"SuspenseList";case Fu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ka:return"Portal";case qn:return e.displayName||"Context";case dy:return(e._context.displayName||"Context")+".Consumer";case Eh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ch:return t=e.displayName||null,t!==null?t:$u(e.type)||"Memo";case ar:t=e._payload,e=e._init;try{return $u(e(t))}catch{}}return null}var Wa=Array.isArray,Z=ay.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=R_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zr={pending:!1,data:null,method:null,action:null},Ju=[],Us=-1;function kn(e){return{current:e}}function tt(e){0>Us||(e.current=Ju[Us],Ju[Us]=null,Us--)}function ke(e,t){Us++,Ju[Us]=e.current,e.current=t}var En=kn(null),wi=kn(null),br=kn(null),cl=kn(null);function ul(e,t){switch(ke(br,t),ke(wi,e),ke(En,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gp(t),e=Rb(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}tt(En),ke(En,e)}function ca(){tt(En),tt(wi),tt(br)}function Yu(e){e.memoizedState!==null&&ke(cl,e);var t=En.current,n=Rb(t,e.type);t!==n&&(ke(wi,e),ke(En,n))}function dl(e){wi.current===e&&(tt(En),tt(wi)),cl.current===e&&(tt(cl),Ii._currentValue=Zr)}var Rc,dm;function Gr(e){if(Rc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rc=t&&t[1]||"",dm=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rc+e+dm}var Ic=!1;function Mc(e,t){if(!e||Ic)return"";Ic=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(g){var m=g}Reflect.construct(e,[],p)}else{try{p.call()}catch(g){m=g}e.call(p.prototype)}}else{try{throw Error()}catch(g){m=g}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],l=a[1];if(o&&l){var c=o.split(`
`),u=l.split(`
`);for(s=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(r===c.length||s===u.length)for(r=c.length-1,s=u.length-1;1<=r&&0<=s&&c[r]!==u[s];)s--;for(;1<=r&&0<=s;r--,s--)if(c[r]!==u[s]){if(r!==1||s!==1)do if(r--,s--,0>s||c[r]!==u[s]){var d=`
`+c[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=r&&0<=s);break}}}finally{Ic=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Gr(n):""}function L_(e,t){switch(e.tag){case 26:case 27:case 5:return Gr(e.type);case 16:return Gr("Lazy");case 13:return e.child!==t&&t!==null?Gr("Suspense Fallback"):Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 15:return Mc(e.type,!1);case 11:return Mc(e.type.render,!1);case 1:return Mc(e.type,!0);case 31:return Gr("Activity");default:return""}}function hm(e){try{var t="",n=null;do t+=L_(e,n),n=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Ku=Object.prototype.hasOwnProperty,kh=We.unstable_scheduleCallback,Dc=We.unstable_cancelCallback,U_=We.unstable_shouldYield,O_=We.unstable_requestPaint,qt=We.unstable_now,z_=We.unstable_getCurrentPriorityLevel,hy=We.unstable_ImmediatePriority,fy=We.unstable_UserBlockingPriority,hl=We.unstable_NormalPriority,B_=We.unstable_LowPriority,my=We.unstable_IdlePriority,q_=We.log,G_=We.unstable_setDisableYieldValue,Vi=null,Gt=null;function fr(e){if(typeof q_=="function"&&G_(e),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Vi,e)}catch{}}var Ht=Math.clz32?Math.clz32:F_,H_=Math.log,V_=Math.LN2;function F_(e){return e>>>=0,e===0?32:31-(H_(e)/V_|0)|0}var lo=256,co=262144,uo=4194304;function Hr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ec(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var l=r&134217727;return l!==0?(r=l&~a,r!==0?s=Hr(r):(o&=l,o!==0?s=Hr(o):n||(n=l&~e,n!==0&&(s=Hr(n))))):(l=r&~a,l!==0?s=Hr(l):o!==0?s=Hr(o):n||(n=r&~e,n!==0&&(s=Hr(n)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:s}function Fi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function $_(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function py(){var e=uo;return uo<<=1,!(uo&62914560)&&(uo=4194304),e}function Pc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $i(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function J_(e,t,n,r,s,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var d=31-Ht(n),p=1<<d;l[d]=0,c[d]=-1;var m=u[d];if(m!==null)for(u[d]=null,d=0;d<m.length;d++){var g=m[d];g!==null&&(g.lane&=-536870913)}n&=~p}r!==0&&gy(e,r,0),a!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function gy(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ht(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function xy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ht(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function yy(e,t){var n=t&-t;return n=n&42?1:Th(n),n&(e.suspendedLanes|t)?0:n}function Th(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function jh(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function vy(){var e=pe.p;return e!==0?e:(e=window.event,e===void 0?32:Gb(e.type))}function fm(e,t){var n=pe.p;try{return pe.p=e,t()}finally{pe.p=n}}var Mr=Math.random().toString(36).slice(2),ot="__reactFiber$"+Mr,kt="__reactProps$"+Mr,wa="__reactContainer$"+Mr,Wu="__reactEvents$"+Mr,Y_="__reactListeners$"+Mr,K_="__reactHandles$"+Mr,mm="__reactResources$"+Mr,Ji="__reactMarker$"+Mr;function Ah(e){delete e[ot],delete e[kt],delete e[Wu],delete e[Y_],delete e[K_]}function Os(e){var t=e[ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wa]||n[ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wp(e);e!==null;){if(n=e[ot])return n;e=wp(e)}return t}e=n,n=e.parentNode}return null}function _a(e){if(e=e[ot]||e[wa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(z(33))}function Xs(e){var t=e[mm];return t||(t=e[mm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ji]=!0}var by=new Set,wy={};function us(e,t){ua(e,t),ua(e+"Capture",t)}function ua(e,t){for(wy[e]=t,e=0;e<t.length;e++)by.add(t[e])}var W_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pm={},gm={};function X_(e){return Ku.call(gm,e)?!0:Ku.call(pm,e)?!1:W_.test(e)?gm[e]=!0:(pm[e]=!0,!1)}function Go(e,t,n){if(X_(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ho(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function In(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _y(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q_(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xu(e){if(!e._valueTracker){var t=_y(e)?"checked":"value";e._valueTracker=Q_(e,t,""+e[t])}}function Sy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_y(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Z_=/[\n"\\]/g;function en(e){return e.replace(Z_,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Qu(e,t,n,r,s,a,o,l){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Wt(t)):e.value!==""+Wt(t)&&(e.value=""+Wt(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?Zu(e,o,Wt(t)):n!=null?Zu(e,o,Wt(n)):r!=null&&e.removeAttribute("value"),s==null&&a!=null&&(e.defaultChecked=!!a),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Wt(l):e.removeAttribute("name")}function Ny(e,t,n,r,s,a,o,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){Xu(e);return}n=n!=null?""+Wt(n):"",t=t!=null?""+Wt(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),Xu(e)}function Zu(e,t,n){t==="number"&&fl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Qs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Wt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ey(e,t,n){if(t!=null&&(t=""+Wt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Wt(n):""}function Cy(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(z(92));if(Wa(r)){if(1<r.length)throw Error(z(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=Wt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r),Xu(e)}function da(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var eS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xm(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||eS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function ky(e,t,n){if(t!=null&&typeof t!="object")throw Error(z(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&xm(e,s,r)}else for(var a in t)t.hasOwnProperty(a)&&xm(e,a,t[a])}function Rh(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(e){return nS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Gn(){}var ed=null;function Ih(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zs=null,Zs=null;function ym(e){var t=_a(e);if(t&&(e=t.stateNode)){var n=e[kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Qu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+en(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[kt]||null;if(!s)throw Error(z(90));Qu(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Sy(r)}break e;case"textarea":Ey(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Qs(e,!!n.multiple,t,!1)}}}var Lc=!1;function Ty(e,t,n){if(Lc)return e(t,n);Lc=!0;try{var r=e(t);return r}finally{if(Lc=!1,(zs!==null||Zs!==null)&&(hc(),zs&&(t=zs,e=Zs,Zs=zs=null,ym(t),e)))for(t=0;t<e.length;t++)ym(e[t])}}function _i(e,t){var n=e.stateNode;if(n===null)return null;var r=n[kt]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=!1;if(Jn)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){td=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{td=!1}var mr=null,Mh=null,Vo=null;function jy(){if(Vo)return Vo;var e,t=Mh,n=t.length,r,s="value"in mr?mr.value:mr.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[a-r];r++);return Vo=s.slice(e,1<r?1-r:void 0)}function Fo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fo(){return!0}function vm(){return!1}function Tt(e){function t(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fo:vm,this.isPropagationStopped=vm,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),t}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=Tt(ds),Yi=Re({},ds,{view:0,detail:0}),rS=Tt(Yi),Uc,Oc,za,nc=Re({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==za&&(za&&e.type==="mousemove"?(Uc=e.screenX-za.screenX,Oc=e.screenY-za.screenY):Oc=Uc=0,za=e),Uc)},movementY:function(e){return"movementY"in e?e.movementY:Oc}}),bm=Tt(nc),sS=Re({},nc,{dataTransfer:0}),aS=Tt(sS),iS=Re({},Yi,{relatedTarget:0}),zc=Tt(iS),oS=Re({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),lS=Tt(oS),cS=Re({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uS=Tt(cS),dS=Re({},ds,{data:0}),wm=Tt(dS),hS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mS[e])?!!t[e]:!1}function Dh(){return pS}var gS=Re({},Yi,{key:function(e){if(e.key){var t=hS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(e){return e.type==="keypress"?Fo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xS=Tt(gS),yS=Re({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_m=Tt(yS),vS=Re({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),bS=Tt(vS),wS=Re({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),_S=Tt(wS),SS=Re({},nc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NS=Tt(SS),ES=Re({},ds,{newState:0,oldState:0}),CS=Tt(ES),kS=[9,13,27,32],Ph=Jn&&"CompositionEvent"in window,ri=null;Jn&&"documentMode"in document&&(ri=document.documentMode);var TS=Jn&&"TextEvent"in window&&!ri,Ay=Jn&&(!Ph||ri&&8<ri&&11>=ri),Sm=" ",Nm=!1;function Ry(e,t){switch(e){case"keyup":return kS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function jS(e,t){switch(e){case"compositionend":return Iy(t);case"keypress":return t.which!==32?null:(Nm=!0,Sm);case"textInput":return e=t.data,e===Sm&&Nm?null:e;default:return null}}function AS(e,t){if(Bs)return e==="compositionend"||!Ph&&Ry(e,t)?(e=jy(),Vo=Mh=mr=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ay&&t.locale!=="ko"?null:t.data;default:return null}}var RS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RS[e.type]:t==="textarea"}function My(e,t,n,r){zs?Zs?Zs.push(r):Zs=[r]:zs=r,t=Rl(t,"onChange"),0<t.length&&(n=new tc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var si=null,Si=null;function IS(e){Tb(e,0)}function rc(e){var t=Xa(e);if(Sy(t))return e}function Cm(e,t){if(e==="change")return t}var Dy=!1;if(Jn){var Bc;if(Jn){var qc="oninput"in document;if(!qc){var km=document.createElement("div");km.setAttribute("oninput","return;"),qc=typeof km.oninput=="function"}Bc=qc}else Bc=!1;Dy=Bc&&(!document.documentMode||9<document.documentMode)}function Tm(){si&&(si.detachEvent("onpropertychange",Py),Si=si=null)}function Py(e){if(e.propertyName==="value"&&rc(Si)){var t=[];My(t,Si,e,Ih(e)),Ty(IS,t)}}function MS(e,t,n){e==="focusin"?(Tm(),si=t,Si=n,si.attachEvent("onpropertychange",Py)):e==="focusout"&&Tm()}function DS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rc(Si)}function PS(e,t){if(e==="click")return rc(t)}function LS(e,t){if(e==="input"||e==="change")return rc(t)}function US(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:US;function Ni(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ku.call(t,s)||!Ft(e[s],t[s]))return!1}return!0}function jm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Am(e,t){var n=jm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jm(n)}}function Ly(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ly(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=fl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fl(e.document)}return t}function Lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var OS=Jn&&"documentMode"in document&&11>=document.documentMode,qs=null,nd=null,ai=null,rd=!1;function Rm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rd||qs==null||qs!==fl(r)||(r=qs,"selectionStart"in r&&Lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ai&&Ni(ai,r)||(ai=r,r=Rl(nd,"onSelect"),0<r.length&&(t=new tc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qs)))}function Or(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gs={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},Gc={},Oy={};Jn&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function hs(e){if(Gc[e])return Gc[e];if(!Gs[e])return e;var t=Gs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Oy)return Gc[e]=t[n];return e}var zy=hs("animationend"),By=hs("animationiteration"),qy=hs("animationstart"),zS=hs("transitionrun"),BS=hs("transitionstart"),qS=hs("transitioncancel"),Gy=hs("transitionend"),Hy=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function xn(e,t){Hy.set(e,t),us(t,[e])}var ml=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kt=[],Hs=0,Uh=0;function sc(){for(var e=Hs,t=Uh=Hs=0;t<e;){var n=Kt[t];Kt[t++]=null;var r=Kt[t];Kt[t++]=null;var s=Kt[t];Kt[t++]=null;var a=Kt[t];if(Kt[t++]=null,r!==null&&s!==null){var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}a!==0&&Vy(n,s,a)}}function ac(e,t,n,r){Kt[Hs++]=e,Kt[Hs++]=t,Kt[Hs++]=n,Kt[Hs++]=r,Uh|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Oh(e,t,n,r){return ac(e,t,n,r),pl(e)}function fs(e,t){return ac(e,null,null,t),pl(e)}function Vy(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var s=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(s=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,s&&t!==null&&(s=31-Ht(n),e=a.hiddenUpdates,r=e[s],r===null?e[s]=[t]:r.push(t),t.lane=n|536870912),a):null}function pl(e){if(50<mi)throw mi=0,Ed=null,Error(z(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Vs={};function GS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new GS(e,t,n,r)}function zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vn(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fy(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $o(e,t,n,r,s,a){var o=0;if(r=e,typeof e=="function")zh(e)&&(o=1);else if(typeof e=="string")o=J2(e,n,En.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Fu:return e=Lt(31,n,t,s),e.elementType=Fu,e.lanes=a,e;case Ls:return es(n.children,s,a,t);case uy:o=8,s|=24;break;case Gu:return e=Lt(12,n,t,s|2),e.elementType=Gu,e.lanes=a,e;case Hu:return e=Lt(13,n,t,s),e.elementType=Hu,e.lanes=a,e;case Vu:return e=Lt(19,n,t,s),e.elementType=Vu,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qn:o=10;break e;case dy:o=9;break e;case Eh:o=11;break e;case Ch:o=14;break e;case ar:o=16,r=null;break e}o=29,n=Error(z(130,e===null?"null":typeof e,"")),r=null}return t=Lt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function es(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function Hc(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function $y(e){var t=Lt(18,null,null,0);return t.stateNode=e,t}function Vc(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Im=new WeakMap;function tn(e,t){if(typeof e=="object"&&e!==null){var n=Im.get(e);return n!==void 0?n:(t={value:e,source:t,stack:hm(t)},Im.set(e,t),t)}return{value:e,source:t,stack:hm(t)}}var Fs=[],$s=0,gl=null,Ei=0,Xt=[],Qt=0,jr=null,_n=1,Sn="";function zn(e,t){Fs[$s++]=Ei,Fs[$s++]=gl,gl=e,Ei=t}function Jy(e,t,n){Xt[Qt++]=_n,Xt[Qt++]=Sn,Xt[Qt++]=jr,jr=e;var r=_n;e=Sn;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var a=32-Ht(t)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_n=1<<32-Ht(t)+s|n<<s|r,Sn=a+e}else _n=1<<a|n<<s|r,Sn=e}function Bh(e){e.return!==null&&(zn(e,1),Jy(e,1,0))}function qh(e){for(;e===gl;)gl=Fs[--$s],Fs[$s]=null,Ei=Fs[--$s],Fs[$s]=null;for(;e===jr;)jr=Xt[--Qt],Xt[Qt]=null,Sn=Xt[--Qt],Xt[Qt]=null,_n=Xt[--Qt],Xt[Qt]=null}function Yy(e,t){Xt[Qt++]=_n,Xt[Qt++]=Sn,Xt[Qt++]=jr,_n=t.id,Sn=t.overflow,jr=e}var lt=null,je=null,de=!1,wr=null,nn=!1,ad=Error(z(519));function Ar(e){var t=Error(z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ci(tn(t,e)),ad}function Mm(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ot]=e,t[kt]=r,n){case"dialog":oe("cancel",t),oe("close",t);break;case"iframe":case"object":case"embed":oe("load",t);break;case"video":case"audio":for(n=0;n<Ai.length;n++)oe(Ai[n],t);break;case"source":oe("error",t);break;case"img":case"image":case"link":oe("error",t),oe("load",t);break;case"details":oe("toggle",t);break;case"input":oe("invalid",t),Ny(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":oe("invalid",t);break;case"textarea":oe("invalid",t),Cy(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||Ab(t.textContent,n)?(r.popover!=null&&(oe("beforetoggle",t),oe("toggle",t)),r.onScroll!=null&&oe("scroll",t),r.onScrollEnd!=null&&oe("scrollend",t),r.onClick!=null&&(t.onclick=Gn),t=!0):t=!1,t||Ar(e,!0)}function Dm(e){for(lt=e.return;lt;)switch(lt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:lt=lt.return}}function vs(e){if(e!==lt)return!1;if(!de)return Dm(e),de=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ad(e.type,e.memoizedProps)),n=!n),n&&je&&Ar(e),Dm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));je=bp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));je=bp(e)}else t===27?(t=je,Dr(e.type)?(e=Dd,Dd=null,je=e):je=t):je=lt?sn(e.stateNode.nextSibling):null;return!0}function as(){je=lt=null,de=!1}function Fc(){var e=wr;return e!==null&&(St===null?St=e:St.push.apply(St,e),wr=null),e}function Ci(e){wr===null?wr=[e]:wr.push(e)}var id=kn(null),ms=null,Hn=null;function lr(e,t,n){ke(id,t._currentValue),t._currentValue=n}function Fn(e){e._currentValue=id.current,tt(id)}function od(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ld(e,t,n,r){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){var o=s.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),od(a.return,n,e),r||(o=null);break e}a=l.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),od(o,n,e),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function Sa(e,t,n,r){e=null;for(var s=t,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(z(387));if(o=o.memoizedProps,o!==null){var l=s.type;Ft(s.pendingProps.value,o.value)||(e!==null?e.push(l):e=[l])}}else if(s===cl.current){if(o=s.alternate,o===null)throw Error(z(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Ii):e=[Ii])}s=s.return}e!==null&&ld(t,e,n,r),t.flags|=262144}function xl(e){for(e=e.firstContext;e!==null;){if(!Ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function is(e){ms=e,Hn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ct(e){return Ky(ms,e)}function mo(e,t){return ms===null&&is(e),Ky(e,t)}function Ky(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Hn===null){if(e===null)throw Error(z(308));Hn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hn=Hn.next=t;return n}var HS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},VS=We.unstable_scheduleCallback,FS=We.unstable_NormalPriority,Fe={$$typeof:qn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new HS,data:new Map,refCount:0}}function Ki(e){e.refCount--,e.refCount===0&&VS(FS,function(){e.controller.abort()})}var ii=null,cd=0,ha=0,ea=null;function $S(e,t){if(ii===null){var n=ii=[];cd=0,ha=mf(),ea={status:"pending",value:void 0,then:function(r){n.push(r)}}}return cd++,t.then(Pm,Pm),t}function Pm(){if(--cd===0&&ii!==null){ea!==null&&(ea.status="fulfilled");var e=ii;ii=null,ha=0,ea=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function JS(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(r.status="rejected",r.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),r}var Lm=Z.S;Z.S=function(e,t){cb=qt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&$S(e,t),Lm!==null&&Lm(e,t)};var ts=kn(null);function Hh(){var e=ts.current;return e!==null?e:we.pooledCache}function Jo(e,t){t===null?ke(ts,ts.current):ke(ts,t.pool)}function Wy(){var e=Hh();return e===null?null:{parent:Fe._currentValue,pool:e}}var Na=Error(z(460)),Vh=Error(z(474)),ic=Error(z(542)),yl={then:function(){}};function Um(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Gn,Gn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,zm(e),e;default:if(typeof t.status=="string")t.then(Gn,Gn);else{if(e=we,e!==null&&100<e.shellSuspendCounter)throw Error(z(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=r}},function(r){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,zm(e),e}throw ns=t,Na}}function Vr(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ns=n,Na):n}}var ns=null;function Om(){if(ns===null)throw Error(z(459));var e=ns;return ns=null,e}function zm(e){if(e===Na||e===ic)throw Error(z(483))}var ta=null,ki=0;function po(e){var t=ki;return ki+=1,ta===null&&(ta=[]),Xy(ta,e,t)}function Ba(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function go(e,t){throw t.$$typeof===M_?Error(z(525)):(e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Qy(e){function t(y,b){if(e){var _=y.deletions;_===null?(y.deletions=[b],y.flags|=16):_.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y){for(var b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function s(y,b){return y=Vn(y,b),y.index=0,y.sibling=null,y}function a(y,b,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<b?(y.flags|=67108866,b):_):(y.flags|=67108866,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,b,_,S){return b===null||b.tag!==6?(b=Hc(_,y.mode,S),b.return=y,b):(b=s(b,_),b.return=y,b)}function c(y,b,_,S){var T=_.type;return T===Ls?d(y,b,_.props.children,S,_.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ar&&Vr(T)===b.type)?(b=s(b,_.props),Ba(b,_),b.return=y,b):(b=$o(_.type,_.key,_.props,null,y.mode,S),Ba(b,_),b.return=y,b)}function u(y,b,_,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Vc(_,y.mode,S),b.return=y,b):(b=s(b,_.children||[]),b.return=y,b)}function d(y,b,_,S,T){return b===null||b.tag!==7?(b=es(_,y.mode,S,T),b.return=y,b):(b=s(b,_),b.return=y,b)}function p(y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Hc(""+b,y.mode,_),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case oo:return _=$o(b.type,b.key,b.props,null,y.mode,_),Ba(_,b),_.return=y,_;case Ka:return b=Vc(b,y.mode,_),b.return=y,b;case ar:return b=Vr(b),p(y,b,_)}if(Wa(b)||Ua(b))return b=es(b,y.mode,_,null),b.return=y,b;if(typeof b.then=="function")return p(y,po(b),_);if(b.$$typeof===qn)return p(y,mo(y,b),_);go(y,b)}return null}function m(y,b,_,S){var T=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return T!==null?null:l(y,b,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case oo:return _.key===T?c(y,b,_,S):null;case Ka:return _.key===T?u(y,b,_,S):null;case ar:return _=Vr(_),m(y,b,_,S)}if(Wa(_)||Ua(_))return T!==null?null:d(y,b,_,S,null);if(typeof _.then=="function")return m(y,b,po(_),S);if(_.$$typeof===qn)return m(y,b,mo(y,_),S);go(y,_)}return null}function g(y,b,_,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(_)||null,l(b,y,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case oo:return y=y.get(S.key===null?_:S.key)||null,c(b,y,S,T);case Ka:return y=y.get(S.key===null?_:S.key)||null,u(b,y,S,T);case ar:return S=Vr(S),g(y,b,_,S,T)}if(Wa(S)||Ua(S))return y=y.get(_)||null,d(b,y,S,T,null);if(typeof S.then=="function")return g(y,b,_,po(S),T);if(S.$$typeof===qn)return g(y,b,_,mo(b,S),T);go(b,S)}return null}function v(y,b,_,S){for(var T=null,N=null,C=b,I=b=0,A=null;C!==null&&I<_.length;I++){C.index>I?(A=C,C=null):A=C.sibling;var R=m(y,C,_[I],S);if(R===null){C===null&&(C=A);break}e&&C&&R.alternate===null&&t(y,C),b=a(R,b,I),N===null?T=R:N.sibling=R,N=R,C=A}if(I===_.length)return n(y,C),de&&zn(y,I),T;if(C===null){for(;I<_.length;I++)C=p(y,_[I],S),C!==null&&(b=a(C,b,I),N===null?T=C:N.sibling=C,N=C);return de&&zn(y,I),T}for(C=r(C);I<_.length;I++)A=g(C,y,I,_[I],S),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?I:A.key),b=a(A,b,I),N===null?T=A:N.sibling=A,N=A);return e&&C.forEach(function(O){return t(y,O)}),de&&zn(y,I),T}function x(y,b,_,S){if(_==null)throw Error(z(151));for(var T=null,N=null,C=b,I=b=0,A=null,R=_.next();C!==null&&!R.done;I++,R=_.next()){C.index>I?(A=C,C=null):A=C.sibling;var O=m(y,C,R.value,S);if(O===null){C===null&&(C=A);break}e&&C&&O.alternate===null&&t(y,C),b=a(O,b,I),N===null?T=O:N.sibling=O,N=O,C=A}if(R.done)return n(y,C),de&&zn(y,I),T;if(C===null){for(;!R.done;I++,R=_.next())R=p(y,R.value,S),R!==null&&(b=a(R,b,I),N===null?T=R:N.sibling=R,N=R);return de&&zn(y,I),T}for(C=r(C);!R.done;I++,R=_.next())R=g(C,y,I,R.value,S),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?I:R.key),b=a(R,b,I),N===null?T=R:N.sibling=R,N=R);return e&&C.forEach(function(D){return t(y,D)}),de&&zn(y,I),T}function w(y,b,_,S){if(typeof _=="object"&&_!==null&&_.type===Ls&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case oo:e:{for(var T=_.key;b!==null;){if(b.key===T){if(T=_.type,T===Ls){if(b.tag===7){n(y,b.sibling),S=s(b,_.props.children),S.return=y,y=S;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ar&&Vr(T)===b.type){n(y,b.sibling),S=s(b,_.props),Ba(S,_),S.return=y,y=S;break e}n(y,b);break}else t(y,b);b=b.sibling}_.type===Ls?(S=es(_.props.children,y.mode,S,_.key),S.return=y,y=S):(S=$o(_.type,_.key,_.props,null,y.mode,S),Ba(S,_),S.return=y,y=S)}return o(y);case Ka:e:{for(T=_.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(y,b.sibling),S=s(b,_.children||[]),S.return=y,y=S;break e}else{n(y,b);break}else t(y,b);b=b.sibling}S=Vc(_,y.mode,S),S.return=y,y=S}return o(y);case ar:return _=Vr(_),w(y,b,_,S)}if(Wa(_))return v(y,b,_,S);if(Ua(_)){if(T=Ua(_),typeof T!="function")throw Error(z(150));return _=T.call(_),x(y,b,_,S)}if(typeof _.then=="function")return w(y,b,po(_),S);if(_.$$typeof===qn)return w(y,b,mo(y,_),S);go(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,b!==null&&b.tag===6?(n(y,b.sibling),S=s(b,_),S.return=y,y=S):(n(y,b),S=Hc(_,y.mode,S),S.return=y,y=S),o(y)):n(y,b)}return function(y,b,_,S){try{ki=0;var T=w(y,b,_,S);return ta=null,T}catch(C){if(C===Na||C===ic)throw C;var N=Lt(29,C,null,y.mode);return N.lanes=S,N.return=y,N}finally{}}}var os=Qy(!0),Zy=Qy(!1),ir=!1;function Fh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=pl(e),Vy(e,null,n),t}return ac(e,r,t,n),pl(e)}function oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xy(e,n)}}function $c(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var dd=!1;function li(){if(dd){var e=ea;if(e!==null)throw e}}function ci(e,t,n,r){dd=!1;var s=e.updateQueue;ir=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var p=s.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane&-536870913,g=m!==l.lane;if(g?(ce&m)===m:(r&m)===m){m!==0&&m===ha&&(dd=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=e,x=l;m=t;var w=n;switch(x.tag){case 1:if(v=x.payload,typeof v=="function"){p=v.call(w,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v=="function"?v.call(w,p,m):v,m==null)break e;p=Re({},p,m);break e;case 2:ir=!0}}m=l.callback,m!==null&&(e.flags|=64,g&&(e.flags|=8192),g=s.callbacks,g===null?s.callbacks=[m]:g.push(m))}else g={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=p):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);d===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,a===null&&(s.shared.lanes=0),Ir|=o,e.lanes=o,e.memoizedState=p}}function ev(e,t){if(typeof e!="function")throw Error(z(191,e));e.call(t)}function tv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ev(n[e],t)}var fa=kn(null),vl=kn(0);function Bm(e,t){e=Xn,ke(vl,e),ke(fa,t),Xn=e|t.baseLanes}function hd(){ke(vl,Xn),ke(fa,fa.current)}function $h(){Xn=vl.current,tt(fa),tt(vl)}var $t=kn(null),rn=null;function cr(e){var t=e.alternate;ke(ze,ze.current&1),ke($t,e),rn===null&&(t===null||fa.current!==null||t.memoizedState!==null)&&(rn=e)}function fd(e){ke(ze,ze.current),ke($t,e),rn===null&&(rn=e)}function nv(e){e.tag===22?(ke(ze,ze.current),ke($t,e),rn===null&&(rn=e)):ur()}function ur(){ke(ze,ze.current),ke($t,$t.current)}function Pt(e){tt($t),rn===e&&(rn=null),tt(ze)}var ze=kn(0);function bl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Id(n)||Md(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yn=0,ae=null,ve=null,He=null,wl=!1,na=!1,ls=!1,_l=0,Ti=0,ra=null,YS=0;function Pe(){throw Error(z(321))}function Jh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function Yh(e,t,n,r,s,a){return Yn=a,ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?Mv:af,ls=!1,a=n(r,s),ls=!1,na&&(a=sv(t,n,r,s)),rv(e),a}function rv(e){Z.H=ji;var t=ve!==null&&ve.next!==null;if(Yn=0,He=ve=ae=null,wl=!1,Ti=0,ra=null,t)throw Error(z(300));e===null||$e||(e=e.dependencies,e!==null&&xl(e)&&($e=!0))}function sv(e,t,n,r){ae=e;var s=0;do{if(na&&(ra=null),Ti=0,na=!1,25<=s)throw Error(z(301));if(s+=1,He=ve=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}Z.H=Dv,a=t(n,r)}while(na);return a}function KS(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?Wi(t):t,e=e.useState()[0],(ve!==null?ve.memoizedState:null)!==e&&(ae.flags|=1024),t}function Kh(){var e=_l!==0;return _l=0,e}function Wh(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Xh(e){if(wl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wl=!1}Yn=0,He=ve=ae=null,na=!1,Ti=_l=0,ra=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?ae.memoizedState=He=e:He=He.next=e,He}function Be(){if(ve===null){var e=ae.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=He===null?ae.memoizedState:He.next;if(t!==null)He=t,ve=e;else{if(e===null)throw ae.alternate===null?Error(z(467)):Error(z(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},He===null?ae.memoizedState=He=e:He=He.next=e}return He}function oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wi(e){var t=Ti;return Ti+=1,ra===null&&(ra=[]),e=Xy(ra,e,t),t=ae,(He===null?t.memoizedState:He.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?Mv:af),e}function lc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wi(e);if(e.$$typeof===qn)return ct(e)}throw Error(z(438,String(e)))}function Qh(e){var t=null,n=ae.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=ae.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=oc(),ae.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=D_;return t.index++,n}function Kn(e,t){return typeof t=="function"?t(e):t}function Yo(e){var t=Be();return Zh(t,ve,e)}function Zh(e,t,n){var r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=n;var s=e.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,r.pending=null}if(a=e.baseState,s===null)e.memoizedState=a;else{t=s.next;var l=o=null,c=null,u=t,d=!1;do{var p=u.lane&-536870913;if(p!==u.lane?(ce&p)===p:(Yn&p)===p){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===ha&&(d=!0);else if((Yn&m)===m){u=u.next,m===ha&&(d=!0);continue}else p={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=p,o=a):c=c.next=p,ae.lanes|=m,Ir|=m;p=u.action,ls&&n(a,p),a=u.hasEagerState?u.eagerState:n(a,p)}else m={lane:p,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=m,o=a):c=c.next=m,ae.lanes|=p,Ir|=p;u=u.next}while(u!==null&&u!==t);if(c===null?o=a:c.next=l,!Ft(a,e.memoizedState)&&($e=!0,d&&(n=ea,n!==null)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return s===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Jc(e){var t=Be(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);Ft(a,t.memoizedState)||($e=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function av(e,t,n){var r=ae,s=Be(),a=de;if(a){if(n===void 0)throw Error(z(407));n=n()}else n=t();var o=!Ft((ve||s).memoizedState,n);if(o&&(s.memoizedState=n,$e=!0),s=s.queue,ef(lv.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||He!==null&&He.memoizedState.tag&1){if(r.flags|=2048,ma(9,{destroy:void 0},ov.bind(null,r,s,n,t),null),we===null)throw Error(z(349));a||Yn&127||iv(r,t,n)}return n}function iv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ae.updateQueue,t===null?(t=oc(),ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ov(e,t,n,r){t.value=n,t.getSnapshot=r,cv(t)&&uv(e)}function lv(e,t,n){return n(function(){cv(t)&&uv(e)})}function cv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function uv(e){var t=fs(e,2);t!==null&&Et(t,e,2)}function md(e){var t=mt();if(typeof e=="function"){var n=e;if(e=n(),ls){fr(!0);try{n()}finally{fr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:e},t}function dv(e,t,n,r){return e.baseState=n,Zh(e,ve,typeof r=="function"?r:Kn)}function WS(e,t,n,r,s){if(uc(e))throw Error(z(485));if(e=t.action,e!==null){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){a.listeners.push(o)}};Z.T!==null?n(!0):a.isTransition=!1,r(a),n=t.pending,n===null?(a.next=t.pending=a,hv(t,a)):(a.next=n.next,t.pending=n.next=a)}}function hv(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=Z.T,o={};Z.T=o;try{var l=n(s,r),c=Z.S;c!==null&&c(o,l),qm(e,t,l)}catch(u){pd(e,t,u)}finally{a!==null&&o.types!==null&&(a.types=o.types),Z.T=a}}else try{a=n(s,r),qm(e,t,a)}catch(u){pd(e,t,u)}}function qm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){Gm(e,t,r)},function(r){return pd(e,t,r)}):Gm(e,t,n)}function Gm(e,t,n){t.status="fulfilled",t.value=n,fv(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,hv(e,n)))}function pd(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,fv(t),t=t.next;while(t!==r)}e.action=null}function fv(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function mv(e,t){return t}function Hm(e,t){if(de){var n=we.formState;if(n!==null){e:{var r=ae;if(de){if(je){t:{for(var s=je,a=nn;s.nodeType!==8;){if(!a){s=null;break t}if(s=sn(s.nextSibling),s===null){s=null;break t}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){je=sn(s.nextSibling),r=s.data==="F!";break e}}Ar(r)}r=!1}r&&(t=n[0])}}return n=mt(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mv,lastRenderedState:t},n.queue=r,n=Av.bind(null,ae,r),r.dispatch=n,r=md(!1),a=sf.bind(null,ae,!1,r.queue),r=mt(),s={state:t,dispatch:null,action:e,pending:null},r.queue=s,n=WS.bind(null,ae,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Vm(e){var t=Be();return pv(t,ve,e)}function pv(e,t,n){if(t=Zh(e,t,mv)[0],e=Yo(Kn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Wi(t)}catch(o){throw o===Na?ic:o}else r=t;t=Be();var s=t.queue,a=s.dispatch;return n!==t.memoizedState&&(ae.flags|=2048,ma(9,{destroy:void 0},XS.bind(null,s,n),null)),[r,a,e]}function XS(e,t){e.action=t}function Fm(e){var t=Be(),n=ve;if(n!==null)return pv(t,n,e);Be(),t=t.memoizedState,n=Be();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=ae.updateQueue,t===null&&(t=oc(),ae.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gv(){return Be().memoizedState}function Ko(e,t,n,r){var s=mt();ae.flags|=e,s.memoizedState=ma(1|t,{destroy:void 0},n,r===void 0?null:r)}function cc(e,t,n,r){var s=Be();r=r===void 0?null:r;var a=s.memoizedState.inst;ve!==null&&r!==null&&Jh(r,ve.memoizedState.deps)?s.memoizedState=ma(t,a,n,r):(ae.flags|=e,s.memoizedState=ma(1|t,a,n,r))}function $m(e,t){Ko(8390656,8,e,t)}function ef(e,t){cc(2048,8,e,t)}function QS(e){ae.flags|=4;var t=ae.updateQueue;if(t===null)t=oc(),ae.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function xv(e){var t=Be().memoizedState;return QS({ref:t,nextImpl:e}),function(){if(me&2)throw Error(z(440));return t.impl.apply(void 0,arguments)}}function yv(e,t){return cc(4,2,e,t)}function vv(e,t){return cc(4,4,e,t)}function bv(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wv(e,t,n){n=n!=null?n.concat([e]):null,cc(4,4,bv.bind(null,t,e),n)}function tf(){}function _v(e,t){var n=Be();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Jh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Sv(e,t){var n=Be();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Jh(t,r[1]))return r[0];if(r=e(),ls){fr(!0);try{e()}finally{fr(!1)}}return n.memoizedState=[r,t],r}function nf(e,t,n){return n===void 0||Yn&1073741824&&!(ce&261930)?e.memoizedState=t:(e.memoizedState=n,e=db(),ae.lanes|=e,Ir|=e,n)}function Nv(e,t,n,r){return Ft(n,t)?n:fa.current!==null?(e=nf(e,n,r),Ft(e,t)||($e=!0),e):!(Yn&42)||Yn&1073741824&&!(ce&261930)?($e=!0,e.memoizedState=n):(e=db(),ae.lanes|=e,Ir|=e,t)}function Ev(e,t,n,r,s){var a=pe.p;pe.p=a!==0&&8>a?a:8;var o=Z.T,l={};Z.T=l,sf(e,!1,t,n);try{var c=s(),u=Z.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=JS(c,r);ui(e,t,d,Vt(e))}else ui(e,t,r,Vt(e))}catch(p){ui(e,t,{then:function(){},status:"rejected",reason:p},Vt())}finally{pe.p=a,o!==null&&l.types!==null&&(o.types=l.types),Z.T=o}}function ZS(){}function gd(e,t,n,r){if(e.tag!==5)throw Error(z(476));var s=Cv(e).queue;Ev(e,s,t,Zr,n===null?ZS:function(){return kv(e),n(r)})}function Cv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Zr,baseState:Zr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:Zr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function kv(e){var t=Cv(e);t.next===null&&(t=e.alternate.memoizedState),ui(e,t.next.queue,{},Vt())}function rf(){return ct(Ii)}function Tv(){return Be().memoizedState}function jv(){return Be().memoizedState}function e2(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Vt();e=_r(n);var r=Sr(t,e,n);r!==null&&(Et(r,t,n),oi(r,t,n)),t={cache:Gh()},e.payload=t;return}t=t.return}}function t2(e,t,n){var r=Vt();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},uc(e)?Rv(t,n):(n=Oh(e,t,n,r),n!==null&&(Et(n,e,r),Iv(n,t,r)))}function Av(e,t,n){var r=Vt();ui(e,t,n,r)}function ui(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(uc(e))Rv(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ft(l,o))return ac(e,t,s,0),we===null&&sc(),!1}catch{}finally{}if(n=Oh(e,t,s,r),n!==null)return Et(n,e,r),Iv(n,t,r),!0}return!1}function sf(e,t,n,r){if(r={lane:2,revertLane:mf(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(t)throw Error(z(479))}else t=Oh(e,n,r,2),t!==null&&Et(t,e,2)}function uc(e){var t=e.alternate;return e===ae||t!==null&&t===ae}function Rv(e,t){na=wl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Iv(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xy(e,n)}}var ji={readContext:ct,use:lc,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe,useHostTransitionStatus:Pe,useFormState:Pe,useActionState:Pe,useOptimistic:Pe,useMemoCache:Pe,useCacheRefresh:Pe};ji.useEffectEvent=Pe;var Mv={readContext:ct,use:lc,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:$m,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ko(4194308,4,bv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){Ko(4,2,e,t)},useMemo:function(e,t){var n=mt();t=t===void 0?null:t;var r=e();if(ls){fr(!0);try{e()}finally{fr(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=mt();if(n!==void 0){var s=n(t);if(ls){fr(!0);try{n(t)}finally{fr(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=t2.bind(null,ae,e),[r.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=md(e);var t=e.queue,n=Av.bind(null,ae,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:tf,useDeferredValue:function(e,t){var n=mt();return nf(n,e,t)},useTransition:function(){var e=md(!1);return e=Ev.bind(null,ae,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ae,s=mt();if(de){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),we===null)throw Error(z(349));ce&127||iv(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,$m(lv.bind(null,r,a,e),[e]),r.flags|=2048,ma(9,{destroy:void 0},ov.bind(null,r,a,n,t),null),n},useId:function(){var e=mt(),t=we.identifierPrefix;if(de){var n=Sn,r=_n;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,t="_"+t+"R_"+n,n=_l++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=YS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:rf,useFormState:Hm,useActionState:Hm,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=sf.bind(null,ae,!0,n),n.dispatch=t,[e,t]},useMemoCache:Qh,useCacheRefresh:function(){return mt().memoizedState=e2.bind(null,ae)},useEffectEvent:function(e){var t=mt(),n={impl:e};return t.memoizedState=n,function(){if(me&2)throw Error(z(440));return n.impl.apply(void 0,arguments)}}},af={readContext:ct,use:lc,useCallback:_v,useContext:ct,useEffect:ef,useImperativeHandle:wv,useInsertionEffect:yv,useLayoutEffect:vv,useMemo:Sv,useReducer:Yo,useRef:gv,useState:function(){return Yo(Kn)},useDebugValue:tf,useDeferredValue:function(e,t){var n=Be();return Nv(n,ve.memoizedState,e,t)},useTransition:function(){var e=Yo(Kn)[0],t=Be().memoizedState;return[typeof e=="boolean"?e:Wi(e),t]},useSyncExternalStore:av,useId:Tv,useHostTransitionStatus:rf,useFormState:Vm,useActionState:Vm,useOptimistic:function(e,t){var n=Be();return dv(n,ve,e,t)},useMemoCache:Qh,useCacheRefresh:jv};af.useEffectEvent=xv;var Dv={readContext:ct,use:lc,useCallback:_v,useContext:ct,useEffect:ef,useImperativeHandle:wv,useInsertionEffect:yv,useLayoutEffect:vv,useMemo:Sv,useReducer:Jc,useRef:gv,useState:function(){return Jc(Kn)},useDebugValue:tf,useDeferredValue:function(e,t){var n=Be();return ve===null?nf(n,e,t):Nv(n,ve.memoizedState,e,t)},useTransition:function(){var e=Jc(Kn)[0],t=Be().memoizedState;return[typeof e=="boolean"?e:Wi(e),t]},useSyncExternalStore:av,useId:Tv,useHostTransitionStatus:rf,useFormState:Fm,useActionState:Fm,useOptimistic:function(e,t){var n=Be();return ve!==null?dv(n,ve,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Qh,useCacheRefresh:jv};Dv.useEffectEvent=xv;function Yc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xd={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Vt(),s=_r(r);s.payload=t,n!=null&&(s.callback=n),t=Sr(e,s,r),t!==null&&(Et(t,e,r),oi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Vt(),s=_r(r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Sr(e,s,r),t!==null&&(Et(t,e,r),oi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vt(),r=_r(n);r.tag=2,t!=null&&(r.callback=t),t=Sr(e,r,n),t!==null&&(Et(t,e,n),oi(t,e,n))}};function Jm(e,t,n,r,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Ni(n,r)||!Ni(s,a):!0}function Ym(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xd.enqueueReplaceState(t,t.state,null)}function cs(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=Re({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}function Pv(e){ml(e)}function Lv(e){console.error(e)}function Uv(e){ml(e)}function Sl(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Km(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function yd(e,t,n){return n=_r(n),n.tag=3,n.payload={element:null},n.callback=function(){Sl(e,t)},n}function Ov(e){return e=_r(e),e.tag=3,e}function zv(e,t,n,r){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){Km(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Km(t,n,r),typeof s!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})})}function n2(e,t,n,r,s){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Sa(t,n,s,!0),n=$t.current,n!==null){switch(n.tag){case 31:case 13:return rn===null?Tl():n.alternate===null&&Ue===0&&(Ue=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===yl?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),au(e,r,s)),!1;case 22:return n.flags|=65536,r===yl?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),au(e,r,s)),!1}throw Error(z(435,n.tag))}return au(e,r,s),Tl(),!1}if(de)return t=$t.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ad&&(e=Error(z(422),{cause:r}),Ci(tn(e,n)))):(r!==ad&&(t=Error(z(423),{cause:r}),Ci(tn(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,r=tn(r,n),s=yd(e.stateNode,r,s),$c(e,s),Ue!==4&&(Ue=2)),!1;var a=Error(z(520),{cause:r});if(a=tn(a,n),fi===null?fi=[a]:fi.push(a),Ue!==4&&(Ue=2),t===null)return!0;r=tn(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=yd(n.stateNode,r,e),$c(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Nr===null||!Nr.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,s=Ov(s),zv(s,e,n,r),$c(n,s),!1}n=n.return}while(n!==null);return!1}var of=Error(z(461)),$e=!1;function at(e,t,n,r){t.child=e===null?Zy(t,null,n,r):os(t,e.child,n,r)}function Wm(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var l in r)l!=="ref"&&(o[l]=r[l])}else o=r;return is(t),r=Yh(e,t,n,o,a,s),l=Kh(),e!==null&&!$e?(Wh(e,t,s),Wn(e,t,s)):(de&&l&&Bh(t),t.flags|=1,at(e,t,r,s),t.child)}function Xm(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!zh(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,Bv(e,t,a,r,s)):(e=$o(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!lf(e,s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(o,r)&&e.ref===t.ref)return Wn(e,t,s)}return t.flags|=1,e=Vn(a,r),e.ref=t.ref,e.return=t,t.child=e}function Bv(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(Ni(a,r)&&e.ref===t.ref)if($e=!1,t.pendingProps=r=a,lf(e,s))e.flags&131072&&($e=!0);else return t.lanes=e.lanes,Wn(e,t,s)}return vd(e,t,n,r,s)}function qv(e,t,n,r){var s=r.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~a}else r=0,t.child=null;return Qm(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Jo(t,a!==null?a.cachePool:null),a!==null?Bm(t,a):hd(),nv(t);else return r=t.lanes=536870912,Qm(e,t,a!==null?a.baseLanes|n:n,n,r)}else a!==null?(Jo(t,a.cachePool),Bm(t,a),ur(),t.memoizedState=null):(e!==null&&Jo(t,null),hd(),ur());return at(e,t,s,n),t.child}function Qa(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Qm(e,t,n,r,s){var a=Hh();return a=a===null?null:{parent:Fe._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Jo(t,null),hd(),nv(t),e!==null&&Sa(e,t,r,!0),t.childLanes=s,null}function Wo(e,t){return t=Nl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Zm(e,t,n){return os(t,e.child,null,n),e=Wo(t,t.pendingProps),e.flags|=2,Pt(t),t.memoizedState=null,e}function r2(e,t,n){var r=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(de){if(r.mode==="hidden")return e=Wo(t,r),t.lanes=536870912,Qa(null,e);if(fd(t),(e=je)?(e=Mb(e,nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:jr!==null?{id:_n,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},n=$y(e),n.return=t,t.child=n,lt=t,je=null)):e=null,e===null)throw Ar(t);return t.lanes=536870912,null}return Wo(t,r)}var a=e.memoizedState;if(a!==null){var o=a.dehydrated;if(fd(t),s)if(t.flags&256)t.flags&=-257,t=Zm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(z(558));else if($e||Sa(e,t,n,!1),s=(n&e.childLanes)!==0,$e||s){if(r=we,r!==null&&(o=yy(r,n),o!==0&&o!==a.retryLane))throw a.retryLane=o,fs(e,o),Et(r,e,o),of;Tl(),t=Zm(e,t,n)}else e=a.treeContext,je=sn(o.nextSibling),lt=t,de=!0,wr=null,nn=!1,e!==null&&Yy(t,e),t=Wo(t,r),t.flags|=4096;return t}return e=Vn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Xo(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function vd(e,t,n,r,s){return is(t),n=Yh(e,t,n,r,void 0,s),r=Kh(),e!==null&&!$e?(Wh(e,t,s),Wn(e,t,s)):(de&&r&&Bh(t),t.flags|=1,at(e,t,n,s),t.child)}function ep(e,t,n,r,s,a){return is(t),t.updateQueue=null,n=sv(t,r,n,s),rv(e),r=Kh(),e!==null&&!$e?(Wh(e,t,a),Wn(e,t,a)):(de&&r&&Bh(t),t.flags|=1,at(e,t,n,a),t.child)}function tp(e,t,n,r,s){if(is(t),t.stateNode===null){var a=Vs,o=n.contextType;typeof o=="object"&&o!==null&&(a=ct(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=xd,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Fh(t),o=n.contextType,a.context=typeof o=="object"&&o!==null?ct(o):Vs,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Yc(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(o=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),o!==a.state&&xd.enqueueReplaceState(a,a.state,null),ci(t,r,a,s),li(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var l=t.memoizedProps,c=cs(n,l);a.props=c;var u=a.context,d=n.contextType;o=Vs,typeof d=="object"&&d!==null&&(o=ct(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||u!==o)&&Ym(t,a,r,o),ir=!1;var m=t.memoizedState;a.state=m,ci(t,r,a,s),li(),u=t.memoizedState,l||m!==u||ir?(typeof p=="function"&&(Yc(t,n,p,r),u=t.memoizedState),(c=ir||Jm(t,n,c,r,m,u,o))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=o,r=c):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ud(e,t),o=t.memoizedProps,d=cs(n,o),a.props=d,p=t.pendingProps,m=a.context,u=n.contextType,c=Vs,typeof u=="object"&&u!==null&&(c=ct(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==c)&&Ym(t,a,r,c),ir=!1,m=t.memoizedState,a.state=m,ci(t,r,a,s),li();var g=t.memoizedState;o!==p||m!==g||ir||e!==null&&e.dependencies!==null&&xl(e.dependencies)?(typeof l=="function"&&(Yc(t,n,l,r),g=t.memoizedState),(d=ir||Jm(t,n,d,r,m,g,c)||e!==null&&e.dependencies!==null&&xl(e.dependencies))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Xo(e,t),r=(t.flags&128)!==0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&r?(t.child=os(t,e.child,null,s),t.child=os(t,null,n,s)):at(e,t,n,s),t.memoizedState=a.state,e=t.child):e=Wn(e,t,s),e}function np(e,t,n,r){return as(),t.flags|=256,at(e,t,n,r),t.child}var Kc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wc(e){return{baseLanes:e,cachePool:Wy()}}function Xc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=zt),e}function Gv(e,t,n){var r=t.pendingProps,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(ze.current&2)!==0),o&&(s=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(de){if(s?cr(t):ur(),(e=je)?(e=Mb(e,nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:jr!==null?{id:_n,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},n=$y(e),n.return=t,t.child=n,lt=t,je=null)):e=null,e===null)throw Ar(t);return Md(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,s?(ur(),s=t.mode,l=Nl({mode:"hidden",children:l},s),r=es(r,s,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,r=t.child,r.memoizedState=Wc(n),r.childLanes=Xc(e,o,n),t.memoizedState=Kc,Qa(null,r)):(cr(t),bd(t,l))}var c=e.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(a)t.flags&256?(cr(t),t.flags&=-257,t=Qc(e,t,n)):t.memoizedState!==null?(ur(),t.child=e.child,t.flags|=128,t=null):(ur(),l=r.fallback,s=t.mode,r=Nl({mode:"visible",children:r.children},s),l=es(l,s,n,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,os(t,e.child,null,n),r=t.child,r.memoizedState=Wc(n),r.childLanes=Xc(e,o,n),t.memoizedState=Kc,t=Qa(null,r));else if(cr(t),Md(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var u=o.dgst;o=u,r=Error(z(419)),r.stack="",r.digest=o,Ci({value:r,source:null,stack:null}),t=Qc(e,t,n)}else if($e||Sa(e,t,n,!1),o=(n&e.childLanes)!==0,$e||o){if(o=we,o!==null&&(r=yy(o,n),r!==0&&r!==c.retryLane))throw c.retryLane=r,fs(e,r),Et(o,e,r),of;Id(l)||Tl(),t=Qc(e,t,n)}else Id(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,je=sn(l.nextSibling),lt=t,de=!0,wr=null,nn=!1,e!==null&&Yy(t,e),t=bd(t,r.children),t.flags|=4096);return t}return s?(ur(),l=r.fallback,s=t.mode,c=e.child,u=c.sibling,r=Vn(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,u!==null?l=Vn(u,l):(l=es(l,s,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,Qa(null,r),r=t.child,l=e.child.memoizedState,l===null?l=Wc(n):(s=l.cachePool,s!==null?(c=Fe._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Wy(),l={baseLanes:l.baseLanes|n,cachePool:s}),r.memoizedState=l,r.childLanes=Xc(e,o,n),t.memoizedState=Kc,Qa(e.child,r)):(cr(t),n=e.child,e=n.sibling,n=Vn(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function bd(e,t){return t=Nl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Nl(e,t){return e=Lt(22,e,null,t),e.lanes=0,e}function Qc(e,t,n){return os(t,e.child,null,n),e=bd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),od(e.return,t,n)}function Zc(e,t,n,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s,o.treeForkCount=a)}function Hv(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;r=r.children;var o=ze.current,l=(o&2)!==0;if(l?(o=o&1|2,t.flags|=128):o&=1,ke(ze,o),at(e,t,r,n),r=de?Ei:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rp(e,n,t);else if(e.tag===19)rp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&bl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Zc(t,!1,s,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Zc(t,!0,n,null,a,r);break;case"together":Zc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,!(n&t.childLanes))if(e!==null){if(Sa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=Vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&xl(e)))}function s2(e,t,n){switch(t.tag){case 3:ul(t,t.stateNode.containerInfo),lr(t,Fe,e.memoizedState.cache),as();break;case 27:case 5:Yu(t);break;case 4:ul(t,t.stateNode.containerInfo);break;case 10:lr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fd(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(cr(t),t.flags|=128,null):n&t.child.childLanes?Gv(e,t,n):(cr(t),e=Wn(e,t,n),e!==null?e.sibling:null);cr(t);break;case 19:var s=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Sa(e,t,n,!1),r=(n&t.childLanes)!==0),s){if(r)return Hv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(ze,ze.current),r)break;return null;case 22:return t.lanes=0,qv(e,t,n,t.pendingProps);case 24:lr(t,Fe,e.memoizedState.cache)}return Wn(e,t,n)}function Vv(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)$e=!0;else{if(!lf(e,n)&&!(t.flags&128))return $e=!1,s2(e,t,n);$e=!!(e.flags&131072)}else $e=!1,de&&t.flags&1048576&&Jy(t,Ei,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Vr(t.elementType),t.type=e,typeof e=="function")zh(e)?(r=cs(e,r),t.tag=1,t=tp(null,t,e,r,n)):(t.tag=0,t=vd(null,t,e,r,n));else{if(e!=null){var s=e.$$typeof;if(s===Eh){t.tag=11,t=Wm(null,t,e,r,n);break e}else if(s===Ch){t.tag=14,t=Xm(null,t,e,r,n);break e}}throw t=$u(e)||e,Error(z(306,t,""))}}return t;case 0:return vd(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,s=cs(r,t.pendingProps),tp(e,t,r,s,n);case 3:e:{if(ul(t,t.stateNode.containerInfo),e===null)throw Error(z(387));r=t.pendingProps;var a=t.memoizedState;s=a.element,ud(e,t),ci(t,r,null,n);var o=t.memoizedState;if(r=o.cache,lr(t,Fe,r),r!==a.cache&&ld(t,[Fe],n,!0),li(),r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=np(e,t,r,n);break e}else if(r!==s){s=tn(Error(z(424)),t),Ci(s),t=np(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(je=sn(e.firstChild),lt=t,de=!0,wr=null,nn=!0,n=Zy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(as(),r===s){t=Wn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 26:return Xo(e,t),e===null?(n=Sp(t.type,null,t.pendingProps,null))?t.memoizedState=n:de||(n=t.type,e=t.pendingProps,r=Il(br.current).createElement(n),r[ot]=t,r[kt]=e,ut(r,n,e),et(r),t.stateNode=r):t.memoizedState=Sp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Yu(t),e===null&&de&&(r=t.stateNode=Db(t.type,t.pendingProps,br.current),lt=t,nn=!0,s=je,Dr(t.type)?(Dd=s,je=sn(r.firstChild)):je=s),at(e,t,t.pendingProps.children,n),Xo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&de&&((s=r=je)&&(r=D2(r,t.type,t.pendingProps,nn),r!==null?(t.stateNode=r,lt=t,je=sn(r.firstChild),nn=!1,s=!0):s=!1),s||Ar(t)),Yu(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,r=a.children,Ad(s,a)?r=null:o!==null&&Ad(s,o)&&(t.flags|=32),t.memoizedState!==null&&(s=Yh(e,t,KS,null,null,n),Ii._currentValue=s),Xo(e,t),at(e,t,r,n),t.child;case 6:return e===null&&de&&((e=n=je)&&(n=P2(n,t.pendingProps,nn),n!==null?(t.stateNode=n,lt=t,je=null,e=!0):e=!1),e||Ar(t)),null;case 13:return Gv(e,t,n);case 4:return ul(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=os(t,null,r,n):at(e,t,r,n),t.child;case 11:return Wm(e,t,t.type,t.pendingProps,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,lr(t,t.type,r.value),at(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,is(t),s=ct(s),r=r(s),t.flags|=1,at(e,t,r,n),t.child;case 14:return Xm(e,t,t.type,t.pendingProps,n);case 15:return Bv(e,t,t.type,t.pendingProps,n);case 19:return Hv(e,t,n);case 31:return r2(e,t,n);case 22:return qv(e,t,n,t.pendingProps);case 24:return is(t),r=ct(Fe),e===null?(s=Hh(),s===null&&(s=we,a=Gh(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:r,cache:s},Fh(t),lr(t,Fe,s)):(e.lanes&n&&(ud(e,t),ci(t,null,null,n),li()),s=e.memoizedState,a=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),lr(t,Fe,r)):(r=a.cache,lr(t,Fe,r),r!==s.cache&&ld(t,[Fe],n,!0))),at(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(z(156,t.tag))}function Mn(e){e.flags|=4}function eu(e,t,n,r,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(mb())e.flags|=8192;else throw ns=yl,Vh}else e.flags&=-16777217}function sp(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Ub(t))if(mb())e.flags|=8192;else throw ns=yl,Vh}function xo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?py():536870912,e.lanes|=t,pa|=t)}function qa(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function a2(e,t,n){var r=t.pendingProps;switch(qh(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Te(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Fn(Fe),ca(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vs(t)?Mn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fc())),Te(t),null;case 26:var s=t.type,a=t.memoizedState;return e===null?(Mn(t),a!==null?(Te(t),sp(t,a)):(Te(t),eu(t,s,null,r,n))):a?a!==e.memoizedState?(Mn(t),Te(t),sp(t,a)):(Te(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&Mn(t),Te(t),eu(t,s,e,r,n)),null;case 27:if(dl(t),n=br.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Mn(t);else{if(!r){if(t.stateNode===null)throw Error(z(166));return Te(t),null}e=En.current,vs(t)?Mm(t):(e=Db(s,r,n),t.stateNode=e,Mn(t))}return Te(t),null;case 5:if(dl(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Mn(t);else{if(!r){if(t.stateNode===null)throw Error(z(166));return Te(t),null}if(a=En.current,vs(t))Mm(t);else{var o=Il(br.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=o.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof r.is=="string"?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is=="string"?o.createElement(s,{is:r.is}):o.createElement(s)}}a[ot]=t,a[kt]=r;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(ut(a,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Mn(t)}}return Te(t),eu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Mn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(e=br.current,vs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,s=lt,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}e[ot]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||Ab(e.nodeValue,n)),e||Ar(t,!0)}else e=Il(e).createTextNode(r),e[ot]=t,t.stateNode=e}return Te(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=vs(t),n!==null){if(e===null){if(!r)throw Error(z(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(557));e[ot]=t}else as(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Te(t),e=!1}else n=Fc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Pt(t),t):(Pt(t),null);if(t.flags&128)throw Error(z(558))}return Te(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=vs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(z(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[ot]=t}else as(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Te(t),s=!1}else s=Fc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Pt(t),t):(Pt(t),null)}return Pt(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),xo(t,t.updateQueue),Te(t),null);case 4:return ca(),e===null&&pf(t.stateNode.containerInfo),Te(t),null;case 10:return Fn(t.type),Te(t),null;case 19:if(tt(ze),r=t.memoizedState,r===null)return Te(t),null;if(s=(t.flags&128)!==0,a=r.rendering,a===null)if(s)qa(r,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=bl(e),a!==null){for(t.flags|=128,qa(r,!1),e=a.updateQueue,t.updateQueue=e,xo(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Fy(n,e),n=n.sibling;return ke(ze,ze.current&1|2),de&&zn(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&qt()>Cl&&(t.flags|=128,s=!0,qa(r,!1),t.lanes=4194304)}else{if(!s)if(e=bl(a),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,xo(t,e),qa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!de)return Te(t),null}else 2*qt()-r.renderingStartTime>Cl&&n!==536870912&&(t.flags|=128,s=!0,qa(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=qt(),e.sibling=null,n=ze.current,ke(ze,s?n&1|2:n&1),de&&zn(t,r.treeForkCount),e):(Te(t),null);case 22:case 23:return Pt(t),$h(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),n=t.updateQueue,n!==null&&xo(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&tt(ts),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Fn(Fe),Te(t),null;case 25:return null;case 30:return null}throw Error(z(156,t.tag))}function i2(e,t){switch(qh(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fn(Fe),ca(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return dl(t),null;case 31:if(t.memoizedState!==null){if(Pt(t),t.alternate===null)throw Error(z(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Pt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tt(ze),null;case 4:return ca(),null;case 10:return Fn(t.type),null;case 22:case 23:return Pt(t),$h(),e!==null&&tt(ts),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Fn(Fe),null;case 25:return null;default:return null}}function Fv(e,t){switch(qh(t),t.tag){case 3:Fn(Fe),ca();break;case 26:case 27:case 5:dl(t);break;case 4:ca();break;case 31:t.memoizedState!==null&&Pt(t);break;case 13:Pt(t);break;case 19:tt(ze);break;case 10:Fn(t.type);break;case 22:case 23:Pt(t),$h(),e!==null&&tt(ts);break;case 24:Fn(Fe)}}function Xi(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==s)}}catch(l){xe(t,t.return,l)}}function Rr(e,t,n){try{var r=t.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var a=s.next;r=a;do{if((r.tag&e)===e){var o=r.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,s=t;var c=n,u=l;try{u()}catch(d){xe(s,c,d)}}}r=r.next}while(r!==a)}}catch(d){xe(t,t.return,d)}}function $v(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{tv(t,n)}catch(r){xe(e,e.return,r)}}}function Jv(e,t,n){n.props=cs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){xe(e,t,r)}}function di(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){xe(e,t,s)}}function Nn(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(s){xe(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){xe(e,t,s)}else n.current=null}function Yv(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){xe(e,e.return,s)}}function tu(e,t,n){try{var r=e.stateNode;T2(r,e.type,n,t),r[kt]=t}catch(s){xe(e,e.return,s)}}function Kv(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Dr(e.type)||e.tag===4}function nu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Dr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Gn));else if(r!==4&&(r===27&&Dr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(wd(e,t,n),e=e.sibling;e!==null;)wd(e,t,n),e=e.sibling}function El(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Dr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(El(e,t,n),e=e.sibling;e!==null;)El(e,t,n),e=e.sibling}function Wv(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ut(t,r,n),t[ot]=e,t[kt]=n}catch(a){xe(e,e.return,a)}}var Bn=!1,Ve=!1,ru=!1,ap=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function o2(e,t){if(e=e.containerInfo,Td=Ll,e=Uy(e),Lh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,p=e,m=null;t:for(;;){for(var g;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==a||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++u===s&&(l=o),m===a&&++d===r&&(c=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(jd={focusedElem:e,selectionRange:n},Ll=!1,Qe=t;Qe!==null;)if(t=Qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qe=e;else for(;Qe!==null;){switch(t=Qe,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)s=e[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var v=cs(n.type,s);e=r.getSnapshotBeforeUpdate(v,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(x){xe(n,n.return,x)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Rd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(z(163))}if(e=t.sibling,e!==null){e.return=t.return,Qe=e;break}Qe=t.return}}function Xv(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Pn(e,n),r&4&&Xi(5,n);break;case 1:if(Pn(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(o){xe(n,n.return,o)}else{var s=cs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){xe(n,n.return,o)}}r&64&&$v(n),r&512&&di(n,n.return);break;case 3:if(Pn(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{tv(e,t)}catch(o){xe(n,n.return,o)}}break;case 27:t===null&&r&4&&Wv(n);case 26:case 5:Pn(e,n),t===null&&r&4&&Yv(n),r&512&&di(n,n.return);break;case 12:Pn(e,n);break;case 31:Pn(e,n),r&4&&eb(e,n);break;case 13:Pn(e,n),r&4&&tb(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=g2.bind(null,n),L2(e,n))));break;case 22:if(r=n.memoizedState!==null||Bn,!r){t=t!==null&&t.memoizedState!==null||Ve,s=Bn;var a=Ve;Bn=r,(Ve=t)&&!a?Ln(e,n,(n.subtreeFlags&8772)!==0):Pn(e,n),Bn=s,Ve=a}break;case 30:break;default:Pn(e,n)}}function Qv(e){var t=e.alternate;t!==null&&(e.alternate=null,Qv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ah(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ie=null,_t=!1;function Dn(e,t,n){for(n=n.child;n!==null;)Zv(e,t,n),n=n.sibling}function Zv(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Vi,n)}catch{}switch(n.tag){case 26:Ve||Nn(n,t),Dn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ve||Nn(n,t);var r=Ie,s=_t;Dr(n.type)&&(Ie=n.stateNode,_t=!1),Dn(e,t,n),pi(n.stateNode),Ie=r,_t=s;break;case 5:Ve||Nn(n,t);case 6:if(r=Ie,s=_t,Ie=null,Dn(e,t,n),Ie=r,_t=s,Ie!==null)if(_t)try{(Ie.nodeType===9?Ie.body:Ie.nodeName==="HTML"?Ie.ownerDocument.body:Ie).removeChild(n.stateNode)}catch(a){xe(n,t,a)}else try{Ie.removeChild(n.stateNode)}catch(a){xe(n,t,a)}break;case 18:Ie!==null&&(_t?(e=Ie,yp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),va(e)):yp(Ie,n.stateNode));break;case 4:r=Ie,s=_t,Ie=n.stateNode.containerInfo,_t=!0,Dn(e,t,n),Ie=r,_t=s;break;case 0:case 11:case 14:case 15:Rr(2,n,t),Ve||Rr(4,n,t),Dn(e,t,n);break;case 1:Ve||(Nn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&Jv(n,t,r)),Dn(e,t,n);break;case 21:Dn(e,t,n);break;case 22:Ve=(r=Ve)||n.memoizedState!==null,Dn(e,t,n),Ve=r;break;default:Dn(e,t,n)}}function eb(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{va(e)}catch(n){xe(t,t.return,n)}}}function tb(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{va(e)}catch(n){xe(t,t.return,n)}}function l2(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ap),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ap),t;default:throw Error(z(435,e.tag))}}function yo(e,t){var n=l2(e);t.forEach(function(r){if(!n.has(r)){n.add(r);var s=x2.bind(null,e,r);r.then(s,s)}})}function vt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r],a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Dr(l.type)){Ie=l.stateNode,_t=!1;break e}break;case 5:Ie=l.stateNode,_t=!1;break e;case 3:case 4:Ie=l.stateNode.containerInfo,_t=!0;break e}l=l.return}if(Ie===null)throw Error(z(160));Zv(a,o,s),Ie=null,_t=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)nb(t,e),t=t.sibling}var fn=null;function nb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vt(t,e),bt(e),r&4&&(Rr(3,e,e.return),Xi(3,e),Rr(5,e,e.return));break;case 1:vt(t,e),bt(e),r&512&&(Ve||n===null||Nn(n,n.return)),r&64&&Bn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var s=fn;if(vt(t,e),bt(e),r&512&&(Ve||n===null||Nn(n,n.return)),r&4){var a=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":a=s.getElementsByTagName("title")[0],(!a||a[Ji]||a[ot]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(r),s.head.insertBefore(a,s.querySelector("head > title"))),ut(a,r,n),a[ot]=e,et(a),r=a;break e;case"link":var o=Ep("link","href",s).get(r+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(a=o[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}a=s.createElement(r),ut(a,r,n),s.head.appendChild(a);break;case"meta":if(o=Ep("meta","content",s).get(r+(n.content||""))){for(l=0;l<o.length;l++)if(a=o[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}a=s.createElement(r),ut(a,r,n),s.head.appendChild(a);break;default:throw Error(z(468,r))}a[ot]=e,et(a),r=a}e.stateNode=r}else Cp(s,e.type,e.stateNode);else e.stateNode=Np(s,r,e.memoizedProps);else a!==r?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?Cp(s,e.type,e.stateNode):Np(s,r,e.memoizedProps)):r===null&&e.stateNode!==null&&tu(e,e.memoizedProps,n.memoizedProps)}break;case 27:vt(t,e),bt(e),r&512&&(Ve||n===null||Nn(n,n.return)),n!==null&&r&4&&tu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(vt(t,e),bt(e),r&512&&(Ve||n===null||Nn(n,n.return)),e.flags&32){s=e.stateNode;try{da(s,"")}catch(v){xe(e,e.return,v)}}r&4&&e.stateNode!=null&&(s=e.memoizedProps,tu(e,s,n!==null?n.memoizedProps:s)),r&1024&&(ru=!0);break;case 6:if(vt(t,e),bt(e),r&4){if(e.stateNode===null)throw Error(z(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(v){xe(e,e.return,v)}}break;case 3:if(el=null,s=fn,fn=Ml(t.containerInfo),vt(t,e),fn=s,bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(t.containerInfo)}catch(v){xe(e,e.return,v)}ru&&(ru=!1,rb(e));break;case 4:r=fn,fn=Ml(e.stateNode.containerInfo),vt(t,e),bt(e),fn=r;break;case 12:vt(t,e),bt(e);break;case 31:vt(t,e),bt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,yo(e,r)));break;case 13:vt(t,e),bt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(dc=qt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,yo(e,r)));break;case 22:s=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=Bn,d=Ve;if(Bn=u||s,Ve=d||c,vt(t,e),Ve=d,Bn=u,bt(e),r&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||c||Bn||Ve||Fr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(a=c.stateNode,s)o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(v){xe(c,c.return,v)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(v){xe(c,c.return,v)}}}else if(t.tag===18){if(n===null){c=t;try{var g=c.stateNode;s?vp(g,!0):vp(c.stateNode,!1)}catch(v){xe(c,c.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,yo(e,n))));break;case 19:vt(t,e),bt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,yo(e,r)));break;case 30:break;case 21:break;default:vt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Kv(r)){n=r;break}r=r.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var s=n.stateNode,a=nu(e);El(e,a,s);break;case 5:var o=n.stateNode;n.flags&32&&(da(o,""),n.flags&=-33);var l=nu(e);El(e,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,u=nu(e);wd(e,u,c);break;default:throw Error(z(161))}}catch(d){xe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rb(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;rb(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xv(e,t.alternate,t),t=t.sibling}function Fr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Rr(4,t,t.return),Fr(t);break;case 1:Nn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Jv(t,t.return,n),Fr(t);break;case 27:pi(t.stateNode);case 26:case 5:Nn(t,t.return),Fr(t);break;case 22:t.memoizedState===null&&Fr(t);break;case 30:Fr(t);break;default:Fr(t)}e=e.sibling}}function Ln(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,s=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Ln(s,a,n),Xi(4,a);break;case 1:if(Ln(s,a,n),r=a,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){xe(r,r.return,u)}if(r=a,s=r.updateQueue,s!==null){var l=r.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)ev(c[s],l)}catch(u){xe(r,r.return,u)}}n&&o&64&&$v(a),di(a,a.return);break;case 27:Wv(a);case 26:case 5:Ln(s,a,n),n&&r===null&&o&4&&Yv(a),di(a,a.return);break;case 12:Ln(s,a,n);break;case 31:Ln(s,a,n),n&&o&4&&eb(s,a);break;case 13:Ln(s,a,n),n&&o&4&&tb(s,a);break;case 22:a.memoizedState===null&&Ln(s,a,n),di(a,a.return);break;case 30:break;default:Ln(s,a,n)}t=t.sibling}}function cf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ki(n))}function uf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ki(e))}function un(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)sb(e,t,n,r),t=t.sibling}function sb(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:un(e,t,n,r),s&2048&&Xi(9,t);break;case 1:un(e,t,n,r);break;case 3:un(e,t,n,r),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ki(e)));break;case 12:if(s&2048){un(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,l=a.onPostCommit;typeof l=="function"&&l(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){xe(t,t.return,c)}}else un(e,t,n,r);break;case 31:un(e,t,n,r);break;case 13:un(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState!==null?a._visibility&2?un(e,t,n,r):hi(e,t):a._visibility&2?un(e,t,n,r):(a._visibility|=2,As(e,t,n,r,(t.subtreeFlags&10256)!==0||!1)),s&2048&&cf(o,t);break;case 24:un(e,t,n,r),s&2048&&uf(t.alternate,t);break;default:un(e,t,n,r)}}function As(e,t,n,r,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,o=t,l=n,c=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:As(a,o,l,c,s),Xi(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?As(a,o,l,c,s):hi(a,o):(d._visibility|=2,As(a,o,l,c,s)),s&&u&2048&&cf(o.alternate,o);break;case 24:As(a,o,l,c,s),s&&u&2048&&uf(o.alternate,o);break;default:As(a,o,l,c,s)}t=t.sibling}}function hi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:hi(n,r),s&2048&&cf(r.alternate,r);break;case 24:hi(n,r),s&2048&&uf(r.alternate,r);break;default:hi(n,r)}t=t.sibling}}var Za=8192;function bs(e,t,n){if(e.subtreeFlags&Za)for(e=e.child;e!==null;)ab(e,t,n),e=e.sibling}function ab(e,t,n){switch(e.tag){case 26:bs(e,t,n),e.flags&Za&&e.memoizedState!==null&&Y2(n,fn,e.memoizedState,e.memoizedProps);break;case 5:bs(e,t,n);break;case 3:case 4:var r=fn;fn=Ml(e.stateNode.containerInfo),bs(e,t,n),fn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Za,Za=16777216,bs(e,t,n),Za=r):bs(e,t,n));break;default:bs(e,t,n)}}function ib(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ga(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Qe=r,lb(r,e)}ib(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ob(e),e=e.sibling}function ob(e){switch(e.tag){case 0:case 11:case 15:Ga(e),e.flags&2048&&Rr(9,e,e.return);break;case 3:Ga(e);break;case 12:Ga(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Qo(e)):Ga(e);break;default:Ga(e)}}function Qo(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Qe=r,lb(r,e)}ib(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Rr(8,t,t.return),Qo(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Qo(t));break;default:Qo(t)}e=e.sibling}}function lb(e,t){for(;Qe!==null;){var n=Qe;switch(n.tag){case 0:case 11:case 15:Rr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Ki(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Qe=r;else e:for(n=e;Qe!==null;){r=Qe;var s=r.sibling,a=r.return;if(Qv(r),r===n){Qe=null;break e}if(s!==null){s.return=a,Qe=s;break e}Qe=a}}}var c2={getCacheForType:function(e){var t=ct(Fe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ct(Fe).controller.signal}},u2=typeof WeakMap=="function"?WeakMap:Map,me=0,we=null,le=null,ce=0,ge=0,Dt=null,pr=!1,Ea=!1,df=!1,Xn=0,Ue=0,Ir=0,rs=0,hf=0,zt=0,pa=0,fi=null,St=null,_d=!1,dc=0,cb=0,Cl=1/0,kl=null,Nr=null,Ke=0,Er=null,ga=null,$n=0,Sd=0,Nd=null,ub=null,mi=0,Ed=null;function Vt(){return me&2&&ce!==0?ce&-ce:Z.T!==null?mf():vy()}function db(){if(zt===0)if(!(ce&536870912)||de){var e=co;co<<=1,!(co&3932160)&&(co=262144),zt=e}else zt=536870912;return e=$t.current,e!==null&&(e.flags|=32),zt}function Et(e,t,n){(e===we&&(ge===2||ge===9)||e.cancelPendingCommit!==null)&&(xa(e,0),gr(e,ce,zt,!1)),$i(e,n),(!(me&2)||e!==we)&&(e===we&&(!(me&2)&&(rs|=n),Ue===4&&gr(e,ce,zt,!1)),Tn(e))}function hb(e,t,n){if(me&6)throw Error(z(327));var r=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Fi(e,t),s=r?f2(e,t):su(e,t,!0),a=r;do{if(s===0){Ea&&!r&&gr(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!d2(n)){s=su(e,t,!1),a=!1;continue}if(s===2){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var l=e;s=fi;var c=l.current.memoizedState.isDehydrated;if(c&&(xa(l,o).flags|=256),o=su(l,o,!1),o!==2){if(df&&!c){l.errorRecoveryDisabledLanes|=a,rs|=a,s=4;break e}a=St,St=s,a!==null&&(St===null?St=a:St.push.apply(St,a))}s=o}if(a=!1,s!==2)continue}}if(s===1){xa(e,0),gr(e,t,0,!0);break}e:{switch(r=e,a=s,a){case 0:case 1:throw Error(z(345));case 4:if((t&4194048)!==t)break;case 6:gr(r,t,zt,!pr);break e;case 2:St=null;break;case 3:case 5:break;default:throw Error(z(329))}if((t&62914560)===t&&(s=dc+300-qt(),10<s)){if(gr(r,t,zt,!pr),ec(r,0,!0)!==0)break e;$n=t,r.timeoutHandle=Ib(ip.bind(null,r,n,St,kl,_d,t,zt,rs,pa,pr,a,"Throttled",-0,0),s);break e}ip(r,n,St,kl,_d,t,zt,rs,pa,pr,a,null,-0,0)}}break}while(!0);Tn(e)}function ip(e,t,n,r,s,a,o,l,c,u,d,p,m,g){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},ab(t,a,p);var v=(a&62914560)===a?dc-qt():(a&4194048)===a?cb-qt():0;if(v=K2(p,v),v!==null){$n=a,e.cancelPendingCommit=v(lp.bind(null,e,t,a,n,r,s,o,l,c,d,p,null,m,g)),gr(e,a,o,!u);return}}lp(e,t,a,n,r,s,o,l,c)}function d2(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Ft(a(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t,n,r){t&=~hf,t&=~rs,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-Ht(s),o=1<<a;r[a]=-1,s&=~o}n!==0&&gy(e,n,t)}function hc(){return me&6?!0:(Qi(0),!1)}function ff(){if(le!==null){if(ge===0)var e=le.return;else e=le,Hn=ms=null,Xh(e),ta=null,ki=0,e=le;for(;e!==null;)Fv(e.alternate,e),e=e.return;le=null}}function xa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,R2(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),$n=0,ff(),we=e,le=n=Vn(e.current,null),ce=t,ge=0,Dt=null,pr=!1,Ea=Fi(e,t),df=!1,pa=zt=hf=rs=Ir=Ue=0,St=fi=null,_d=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var s=31-Ht(r),a=1<<s;t|=e[s],r&=~a}return Xn=t,sc(),n}function fb(e,t){ae=null,Z.H=ji,t===Na||t===ic?(t=Om(),ge=3):t===Vh?(t=Om(),ge=4):ge=t===of?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Dt=t,le===null&&(Ue=1,Sl(e,tn(t,e.current)))}function mb(){var e=$t.current;return e===null?!0:(ce&4194048)===ce?rn===null:(ce&62914560)===ce||ce&536870912?e===rn:!1}function pb(){var e=Z.H;return Z.H=ji,e===null?ji:e}function gb(){var e=Z.A;return Z.A=c2,e}function Tl(){Ue=4,pr||(ce&4194048)!==ce&&$t.current!==null||(Ea=!0),!(Ir&134217727)&&!(rs&134217727)||we===null||gr(we,ce,zt,!1)}function su(e,t,n){var r=me;me|=2;var s=pb(),a=gb();(we!==e||ce!==t)&&(kl=null,xa(e,t)),t=!1;var o=Ue;e:do try{if(ge!==0&&le!==null){var l=le,c=Dt;switch(ge){case 8:ff(),o=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(t=!0);var u=ge;if(ge=0,Dt=null,Js(e,l,c,u),n&&Ea){o=0;break e}break;default:u=ge,ge=0,Dt=null,Js(e,l,c,u)}}h2(),o=Ue;break}catch(d){fb(e,d)}while(!0);return t&&e.shellSuspendCounter++,Hn=ms=null,me=r,Z.H=s,Z.A=a,le===null&&(we=null,ce=0,sc()),o}function h2(){for(;le!==null;)xb(le)}function f2(e,t){var n=me;me|=2;var r=pb(),s=gb();we!==e||ce!==t?(kl=null,Cl=qt()+500,xa(e,t)):Ea=Fi(e,t);e:do try{if(ge!==0&&le!==null){t=le;var a=Dt;t:switch(ge){case 1:ge=0,Dt=null,Js(e,t,a,1);break;case 2:case 9:if(Um(a)){ge=0,Dt=null,op(t);break}t=function(){ge!==2&&ge!==9||we!==e||(ge=7),Tn(e)},a.then(t,t);break e;case 3:ge=7;break e;case 4:ge=5;break e;case 7:Um(a)?(ge=0,Dt=null,op(t)):(ge=0,Dt=null,Js(e,t,a,7));break;case 5:var o=null;switch(le.tag){case 26:o=le.memoizedState;case 5:case 27:var l=le;if(o?Ub(o):l.stateNode.complete){ge=0,Dt=null;var c=l.sibling;if(c!==null)le=c;else{var u=l.return;u!==null?(le=u,fc(u)):le=null}break t}}ge=0,Dt=null,Js(e,t,a,5);break;case 6:ge=0,Dt=null,Js(e,t,a,6);break;case 8:ff(),Ue=6;break e;default:throw Error(z(462))}}m2();break}catch(d){fb(e,d)}while(!0);return Hn=ms=null,Z.H=r,Z.A=s,me=n,le!==null?0:(we=null,ce=0,sc(),Ue)}function m2(){for(;le!==null&&!U_();)xb(le)}function xb(e){var t=Vv(e.alternate,e,Xn);e.memoizedProps=e.pendingProps,t===null?fc(e):le=t}function op(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ep(n,t,t.pendingProps,t.type,void 0,ce);break;case 11:t=ep(n,t,t.pendingProps,t.type.render,t.ref,ce);break;case 5:Xh(t);default:Fv(n,t),t=le=Fy(t,Xn),t=Vv(n,t,Xn)}e.memoizedProps=e.pendingProps,t===null?fc(e):le=t}function Js(e,t,n,r){Hn=ms=null,Xh(t),ta=null,ki=0;var s=t.return;try{if(n2(e,s,t,n,ce)){Ue=1,Sl(e,tn(n,e.current)),le=null;return}}catch(a){if(s!==null)throw le=s,a;Ue=1,Sl(e,tn(n,e.current)),le=null;return}t.flags&32768?(de||r===1?e=!0:Ea||ce&536870912?e=!1:(pr=e=!0,(r===2||r===9||r===3||r===6)&&(r=$t.current,r!==null&&r.tag===13&&(r.flags|=16384))),yb(t,e)):fc(t)}function fc(e){var t=e;do{if(t.flags&32768){yb(t,pr);return}e=t.return;var n=a2(t.alternate,t,Xn);if(n!==null){le=n;return}if(t=t.sibling,t!==null){le=t;return}le=t=e}while(t!==null);Ue===0&&(Ue=5)}function yb(e,t){do{var n=i2(e.alternate,e);if(n!==null){n.flags&=32767,le=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){le=e;return}le=e=n}while(e!==null);Ue=6,le=null}function lp(e,t,n,r,s,a,o,l,c){e.cancelPendingCommit=null;do mc();while(Ke!==0);if(me&6)throw Error(z(327));if(t!==null){if(t===e.current)throw Error(z(177));if(a=t.lanes|t.childLanes,a|=Uh,J_(e,n,a,o,l,c),e===we&&(le=we=null,ce=0),ga=t,Er=e,$n=n,Sd=a,Nd=s,ub=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,y2(hl,function(){return Sb(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=Z.T,Z.T=null,s=pe.p,pe.p=2,o=me,me|=4;try{o2(e,t,n)}finally{me=o,pe.p=s,Z.T=r}}Ke=1,vb(),bb(),wb()}}function vb(){if(Ke===1){Ke=0;var e=Er,t=ga,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Z.T,Z.T=null;var r=pe.p;pe.p=2;var s=me;me|=4;try{nb(t,e);var a=jd,o=Uy(e.containerInfo),l=a.focusedElem,c=a.selectionRange;if(o!==l&&l&&l.ownerDocument&&Ly(l.ownerDocument.documentElement,l)){if(c!==null&&Lh(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var g=m.getSelection(),v=l.textContent.length,x=Math.min(c.start,v),w=c.end===void 0?x:Math.min(c.end,v);!g.extend&&x>w&&(o=w,w=x,x=o);var y=Am(l,x),b=Am(l,w);if(y&&b&&(g.rangeCount!==1||g.anchorNode!==y.node||g.anchorOffset!==y.offset||g.focusNode!==b.node||g.focusOffset!==b.offset)){var _=p.createRange();_.setStart(y.node,y.offset),g.removeAllRanges(),x>w?(g.addRange(_),g.extend(b.node,b.offset)):(_.setEnd(b.node,b.offset),g.addRange(_))}}}}for(p=[],g=l;g=g.parentNode;)g.nodeType===1&&p.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var S=p[l];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Ll=!!Td,jd=Td=null}finally{me=s,pe.p=r,Z.T=n}}e.current=t,Ke=2}}function bb(){if(Ke===2){Ke=0;var e=Er,t=ga,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Z.T,Z.T=null;var r=pe.p;pe.p=2;var s=me;me|=4;try{Xv(e,t.alternate,t)}finally{me=s,pe.p=r,Z.T=n}}Ke=3}}function wb(){if(Ke===4||Ke===3){Ke=0,O_();var e=Er,t=ga,n=$n,r=ub;t.subtreeFlags&10256||t.flags&10256?Ke=5:(Ke=0,ga=Er=null,_b(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Nr=null),jh(n),t=t.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Vi,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=Z.T,s=pe.p,pe.p=2,Z.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var l=r[o];a(l.value,{componentStack:l.stack})}}finally{Z.T=t,pe.p=s}}$n&3&&mc(),Tn(e),s=e.pendingLanes,n&261930&&s&42?e===Ed?mi++:(mi=0,Ed=e):mi=0,Qi(0)}}function _b(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ki(t)))}function mc(){return vb(),bb(),wb(),Sb()}function Sb(){if(Ke!==5)return!1;var e=Er,t=Sd;Sd=0;var n=jh($n),r=Z.T,s=pe.p;try{pe.p=32>n?32:n,Z.T=null,n=Nd,Nd=null;var a=Er,o=$n;if(Ke=0,ga=Er=null,$n=0,me&6)throw Error(z(331));var l=me;if(me|=4,ob(a.current),sb(a,a.current,o,n),me=l,Qi(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Vi,a)}catch{}return!0}finally{pe.p=s,Z.T=r,_b(e,t)}}function cp(e,t,n){t=tn(n,t),t=yd(e.stateNode,t,2),e=Sr(e,t,2),e!==null&&($i(e,2),Tn(e))}function xe(e,t,n){if(e.tag===3)cp(e,e,n);else for(;t!==null;){if(t.tag===3){cp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){e=tn(n,e),n=Ov(2),r=Sr(t,n,2),r!==null&&(zv(n,r,t,e),$i(r,2),Tn(r));break}}t=t.return}}function au(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new u2;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(df=!0,s.add(n),e=p2.bind(null,e,t,n),t.then(e,e))}function p2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,we===e&&(ce&n)===n&&(Ue===4||Ue===3&&(ce&62914560)===ce&&300>qt()-dc?!(me&2)&&xa(e,0):hf|=n,pa===ce&&(pa=0)),Tn(e)}function Nb(e,t){t===0&&(t=py()),e=fs(e,t),e!==null&&($i(e,t),Tn(e))}function g2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Nb(e,n)}function x2(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(z(314))}r!==null&&r.delete(t),Nb(e,n)}function y2(e,t){return kh(e,t)}var jl=null,Rs=null,Cd=!1,Al=!1,iu=!1,xr=0;function Tn(e){e!==Rs&&e.next===null&&(Rs===null?jl=Rs=e:Rs=Rs.next=e),Al=!0,Cd||(Cd=!0,b2())}function Qi(e,t){if(!iu&&Al){iu=!0;do for(var n=!1,r=jl;r!==null;){if(e!==0){var s=r.pendingLanes;if(s===0)var a=0;else{var o=r.suspendedLanes,l=r.pingedLanes;a=(1<<31-Ht(42|e)+1)-1,a&=s&~(o&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,up(r,a))}else a=ce,a=ec(r,r===we?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Fi(r,a)||(n=!0,up(r,a));r=r.next}while(n);iu=!1}}function v2(){Eb()}function Eb(){Al=Cd=!1;var e=0;xr!==0&&A2()&&(e=xr);for(var t=qt(),n=null,r=jl;r!==null;){var s=r.next,a=Cb(r,t);a===0?(r.next=null,n===null?jl=s:n.next=s,s===null&&(Rs=n)):(n=r,(e!==0||a&3)&&(Al=!0)),r=s}Ke!==0&&Ke!==5||Qi(e),xr!==0&&(xr=0)}function Cb(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ht(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=$_(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}if(t=we,n=ce,n=ec(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(ge===2||ge===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Dc(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Fi(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Dc(r),jh(n)){case 2:case 8:n=fy;break;case 32:n=hl;break;case 268435456:n=my;break;default:n=hl}return r=kb.bind(null,e),n=kh(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Dc(r),e.callbackPriority=2,e.callbackNode=null,2}function kb(e,t){if(Ke!==0&&Ke!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(mc()&&e.callbackNode!==n)return null;var r=ce;return r=ec(e,e===we?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(hb(e,r,t),Cb(e,qt()),e.callbackNode!=null&&e.callbackNode===n?kb.bind(null,e):null)}function up(e,t){if(mc())return null;hb(e,t,!0)}function b2(){I2(function(){me&6?kh(hy,v2):Eb()})}function mf(){if(xr===0){var e=ha;e===0&&(e=lo,lo<<=1,!(lo&261888)&&(lo=256)),xr=e}return xr}function dp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ho(""+e)}function hp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function w2(e,t,n,r,s){if(t==="submit"&&n&&n.stateNode===s){var a=dp((s[kt]||null).action),o=r.submitter;o&&(t=(t=o[kt]||null)?dp(t.formAction):o.getAttribute("formAction"),t!==null&&(a=t,o=null));var l=new tc("action","action",null,r,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(xr!==0){var c=o?hp(s,o):new FormData(s);gd(n,{pending:!0,data:c,method:s.method,action:a},null,c)}}else typeof a=="function"&&(l.preventDefault(),c=o?hp(s,o):new FormData(s),gd(n,{pending:!0,data:c,method:s.method,action:a},a,c))},currentTarget:s}]})}}for(var ou=0;ou<sd.length;ou++){var lu=sd[ou],_2=lu.toLowerCase(),S2=lu[0].toUpperCase()+lu.slice(1);xn(_2,"on"+S2)}xn(zy,"onAnimationEnd");xn(By,"onAnimationIteration");xn(qy,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(zS,"onTransitionRun");xn(BS,"onTransitionStart");xn(qS,"onTransitionCancel");xn(Gy,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ai));function Tb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;a=l,s.currentTarget=u;try{a(s)}catch(d){ml(d)}s.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;a=l,s.currentTarget=u;try{a(s)}catch(d){ml(d)}s.currentTarget=null,a=c}}}}function oe(e,t){var n=t[Wu];n===void 0&&(n=t[Wu]=new Set);var r=e+"__bubble";n.has(r)||(jb(t,e,2,!1),n.add(r))}function cu(e,t,n){var r=0;t&&(r|=4),jb(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function pf(e){if(!e[vo]){e[vo]=!0,by.forEach(function(n){n!=="selectionchange"&&(N2.has(n)||cu(n,!1,e),cu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,cu("selectionchange",!1,t))}}function jb(e,t,n,r){switch(Gb(t)){case 2:var s=Q2;break;case 8:s=Z2;break;default:s=vf}n=s.bind(null,t,n,e),s=void 0,!td||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function uu(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;l!==null;){if(o=Os(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){r=a=o;continue e}l=l.parentNode}}r=r.return}Ty(function(){var u=a,d=Ih(n),p=[];e:{var m=Hy.get(e);if(m!==void 0){var g=tc,v=e;switch(e){case"keypress":if(Fo(n)===0)break e;case"keydown":case"keyup":g=xS;break;case"focusin":v="focus",g=zc;break;case"focusout":v="blur",g=zc;break;case"beforeblur":case"afterblur":g=zc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=aS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=bS;break;case zy:case By:case qy:g=lS;break;case Gy:g=_S;break;case"scroll":case"scrollend":g=rS;break;case"wheel":g=NS;break;case"copy":case"cut":case"paste":g=uS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_m;break;case"toggle":case"beforetoggle":g=CS}var x=(t&4)!==0,w=!x&&(e==="scroll"||e==="scrollend"),y=x?m!==null?m+"Capture":null:m;x=[];for(var b=u,_;b!==null;){var S=b;if(_=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||_===null||y===null||(S=_i(b,y),S!=null&&x.push(Ri(b,S,_))),w)break;b=b.return}0<x.length&&(m=new g(m,v,null,n,d),p.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==ed&&(v=n.relatedTarget||n.fromElement)&&(Os(v)||v[wa]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Os(v):null,v!==null&&(w=Hi(v),x=v.tag,v!==w||x!==5&&x!==27&&x!==6)&&(v=null)):(g=null,v=u),g!==v)){if(x=bm,S="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=_m,S="onPointerLeave",y="onPointerEnter",b="pointer"),w=g==null?m:Xa(g),_=v==null?m:Xa(v),m=new x(S,b+"leave",g,n,d),m.target=w,m.relatedTarget=_,S=null,Os(d)===u&&(x=new x(y,b+"enter",v,n,d),x.target=_,x.relatedTarget=w,S=x),w=S,g&&v)t:{for(x=E2,y=g,b=v,_=0,S=y;S;S=x(S))_++;S=0;for(var T=b;T;T=x(T))S++;for(;0<_-S;)y=x(y),_--;for(;0<S-_;)b=x(b),S--;for(;_--;){if(y===b||b!==null&&y===b.alternate){x=y;break t}y=x(y),b=x(b)}x=null}else x=null;g!==null&&fp(p,m,g,x,!1),v!==null&&w!==null&&fp(p,w,v,x,!0)}}e:{if(m=u?Xa(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var N=Cm;else if(Em(m))if(Dy)N=LS;else{N=DS;var C=MS}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&Rh(u.elementType)&&(N=Cm):N=PS;if(N&&(N=N(e,u))){My(p,N,n,d);break e}C&&C(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Zu(m,"number",m.value)}switch(C=u?Xa(u):window,e){case"focusin":(Em(C)||C.contentEditable==="true")&&(qs=C,nd=u,ai=null);break;case"focusout":ai=nd=qs=null;break;case"mousedown":rd=!0;break;case"contextmenu":case"mouseup":case"dragend":rd=!1,Rm(p,n,d);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Rm(p,n,d)}var I;if(Ph)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Bs?Ry(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Ay&&n.locale!=="ko"&&(Bs||A!=="onCompositionStart"?A==="onCompositionEnd"&&Bs&&(I=jy()):(mr=d,Mh="value"in mr?mr.value:mr.textContent,Bs=!0)),C=Rl(u,A),0<C.length&&(A=new wm(A,e,null,n,d),p.push({event:A,listeners:C}),I?A.data=I:(I=Iy(n),I!==null&&(A.data=I)))),(I=TS?jS(e,n):AS(e,n))&&(A=Rl(u,"onBeforeInput"),0<A.length&&(C=new wm("onBeforeInput","beforeinput",null,n,d),p.push({event:C,listeners:A}),C.data=I)),w2(p,e,u,n,d)}Tb(p,t)})}function Ri(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Rl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=_i(e,n),s!=null&&r.unshift(Ri(e,s,a)),s=_i(e,t),s!=null&&r.push(Ri(e,s,a))),e.tag===3)return r;e=e.return}return[]}function E2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function fp(e,t,n,r,s){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===r)break;l!==5&&l!==26&&l!==27||u===null||(c=u,s?(u=_i(n,a),u!=null&&o.unshift(Ri(n,u,c))):s||(u=_i(n,a),u!=null&&o.push(Ri(n,u,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var C2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function mp(e){return(typeof e=="string"?e:""+e).replace(C2,`
`).replace(k2,"")}function Ab(e,t){return t=mp(t),mp(e)===t}function ye(e,t,n,r,s,a){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||da(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&da(e,""+r);break;case"className":ho(e,"class",r);break;case"tabIndex":ho(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ho(e,n,r);break;case"style":ky(e,r,a);break;case"data":if(t!=="object"){ho(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=Ho(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&ye(e,t,"name",s.name,s,null),ye(e,t,"formEncType",s.formEncType,s,null),ye(e,t,"formMethod",s.formMethod,s,null),ye(e,t,"formTarget",s.formTarget,s,null)):(ye(e,t,"encType",s.encType,s,null),ye(e,t,"method",s.method,s,null),ye(e,t,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=Ho(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=Gn);break;case"onScroll":r!=null&&oe("scroll",e);break;case"onScrollEnd":r!=null&&oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(z(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(z(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=Ho(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":oe("beforetoggle",e),oe("toggle",e),Go(e,"popover",r);break;case"xlinkActuate":In(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":In(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":In(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":In(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":In(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":In(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":In(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":In(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":In(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Go(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=tS.get(n)||n,Go(e,n,r))}}function kd(e,t,n,r,s,a){switch(n){case"style":ky(e,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(z(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(z(60));e.innerHTML=n}}break;case"children":typeof r=="string"?da(e,r):(typeof r=="number"||typeof r=="bigint")&&da(e,""+r);break;case"onScroll":r!=null&&oe("scroll",e);break;case"onScrollEnd":r!=null&&oe("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),a=e[kt]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,s),typeof r=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):Go(e,n,r)}}}function ut(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",e),oe("load",e);var r=!1,s=!1,a;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o!=null)switch(a){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,t));default:ye(e,t,a,o,n,null)}}s&&ye(e,t,"srcSet",n.srcSet,n,null),r&&ye(e,t,"src",n.src,n,null);return;case"input":oe("invalid",e);var l=a=o=s=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(z(137,t));break;default:ye(e,t,r,d,n,null)}}Ny(e,a,l,c,u,o,s,!1);return;case"select":oe("invalid",e),r=o=a=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":a=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:ye(e,t,s,l,n,null)}t=a,n=o,e.multiple=!!r,t!=null?Qs(e,!!r,t,!1):n!=null&&Qs(e,!!r,n,!0);return;case"textarea":oe("invalid",e),a=s=r=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(z(91));break;default:ye(e,t,o,l,n,null)}Cy(e,r,s,a);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ye(e,t,c,r,n,null)}return;case"dialog":oe("beforetoggle",e),oe("toggle",e),oe("cancel",e),oe("close",e);break;case"iframe":case"object":oe("load",e);break;case"video":case"audio":for(r=0;r<Ai.length;r++)oe(Ai[r],e);break;case"image":oe("error",e),oe("load",e);break;case"details":oe("toggle",e);break;case"embed":case"source":case"link":oe("error",e),oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,t));default:ye(e,t,u,r,n,null)}return;default:if(Rh(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&kd(e,t,d,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!=null&&ye(e,t,l,r,n,null))}function T2(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,c=null,u=null,d=null;for(g in n){var p=n[g];if(n.hasOwnProperty(g)&&p!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=p;default:r.hasOwnProperty(g)||ye(e,t,g,null,r,p)}}for(var m in r){var g=r[m];if(p=n[m],r.hasOwnProperty(m)&&(g!=null||p!=null))switch(m){case"type":a=g;break;case"name":s=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(z(137,t));break;default:g!==p&&ye(e,t,m,g,r,p)}}Qu(e,o,l,c,u,d,a,s);return;case"select":g=o=l=m=null;for(a in n)if(c=n[a],n.hasOwnProperty(a)&&c!=null)switch(a){case"value":break;case"multiple":g=c;default:r.hasOwnProperty(a)||ye(e,t,a,null,r,c)}for(s in r)if(a=r[s],c=n[s],r.hasOwnProperty(s)&&(a!=null||c!=null))switch(s){case"value":m=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&ye(e,t,s,a,r,c)}t=l,n=o,r=g,m!=null?Qs(e,!!n,m,!1):!!r!=!!n&&(t!=null?Qs(e,!!n,t,!0):Qs(e,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!r.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ye(e,t,l,null,r,s)}for(o in r)if(s=r[o],a=n[o],r.hasOwnProperty(o)&&(s!=null||a!=null))switch(o){case"value":m=s;break;case"defaultValue":g=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(z(91));break;default:s!==a&&ye(e,t,o,s,r,a)}Ey(e,m,g);return;case"option":for(var v in n)if(m=n[v],n.hasOwnProperty(v)&&m!=null&&!r.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:ye(e,t,v,null,r,m)}for(c in r)if(m=r[c],g=n[c],r.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ye(e,t,c,m,r,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!r.hasOwnProperty(x)&&ye(e,t,x,null,r,m);for(u in r)if(m=r[u],g=n[u],r.hasOwnProperty(u)&&m!==g&&(m!=null||g!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(z(137,t));break;default:ye(e,t,u,m,r,g)}return;default:if(Rh(t)){for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!==void 0&&!r.hasOwnProperty(w)&&kd(e,t,w,void 0,r,m);for(d in r)m=r[d],g=n[d],!r.hasOwnProperty(d)||m===g||m===void 0&&g===void 0||kd(e,t,d,m,r,g);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!r.hasOwnProperty(y)&&ye(e,t,y,null,r,m);for(p in r)m=r[p],g=n[p],!r.hasOwnProperty(p)||m===g||m==null&&g==null||ye(e,t,p,m,r,g)}function pp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],a=s.transferSize,o=s.initiatorType,l=s.duration;if(a&&l&&pp(o)){for(o=0,l=s.responseEnd,r+=1;r<n.length;r++){var c=n[r],u=c.startTime;if(u>l)break;var d=c.transferSize,p=c.initiatorType;d&&pp(p)&&(c=c.responseEnd,o+=d*(c<l?1:(l-u)/(c-u)))}if(--r,t+=8*(a+o)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Td=null,jd=null;function Il(e){return e.nodeType===9?e:e.ownerDocument}function gp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rb(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ad(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var du=null;function A2(){var e=window.event;return e&&e.type==="popstate"?e===du?!1:(du=e,!0):(du=null,!1)}var Ib=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,xp=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof xp<"u"?function(e){return xp.resolve(null).then(e).catch(M2)}:Ib;function M2(e){setTimeout(function(){throw e})}function Dr(e){return e==="head"}function yp(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(r===0){e.removeChild(s),va(t);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")pi(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,pi(n);for(var a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ji]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}else n==="body"&&pi(e.ownerDocument.body);n=s}while(n);va(t)}function vp(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=r}while(n)}function Rd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rd(n),Ah(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function D2(e,t,n,r){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Ji])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function P2(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=sn(e.nextSibling),e===null))return null;return e}function Mb(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=sn(e.nextSibling),e===null))return null;return e}function Id(e){return e.data==="$?"||e.data==="$~"}function Md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function L2(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Dd=null;function bp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return sn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function wp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Db(e,t,n){switch(t=Il(n),e){case"html":if(e=t.documentElement,!e)throw Error(z(452));return e;case"head":if(e=t.head,!e)throw Error(z(453));return e;case"body":if(e=t.body,!e)throw Error(z(454));return e;default:throw Error(z(451))}}function pi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ah(e)}var on=new Map,_p=new Set;function Ml(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zn=pe.d;pe.d={f:U2,r:O2,D:z2,C:B2,L:q2,m:G2,X:V2,S:H2,M:F2};function U2(){var e=Zn.f(),t=hc();return e||t}function O2(e){var t=_a(e);t!==null&&t.tag===5&&t.type==="form"?kv(t):Zn.r(e)}var Ca=typeof document>"u"?null:document;function Pb(e,t,n){var r=Ca;if(r&&typeof t=="string"&&t){var s=en(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),_p.has(s)||(_p.add(s),e={rel:e,crossOrigin:n,href:t},r.querySelector(s)===null&&(t=r.createElement("link"),ut(t,"link",e),et(t),r.head.appendChild(t)))}}function z2(e){Zn.D(e),Pb("dns-prefetch",e,null)}function B2(e,t){Zn.C(e,t),Pb("preconnect",e,t)}function q2(e,t,n){Zn.L(e,t,n);var r=Ca;if(r&&e&&t){var s='link[rel="preload"][as="'+en(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+en(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+en(n.imageSizes)+'"]')):s+='[href="'+en(e)+'"]';var a=s;switch(t){case"style":a=ya(e);break;case"script":a=ka(e)}on.has(a)||(e=Re({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),on.set(a,e),r.querySelector(s)!==null||t==="style"&&r.querySelector(Zi(a))||t==="script"&&r.querySelector(eo(a))||(t=r.createElement("link"),ut(t,"link",e),et(t),r.head.appendChild(t)))}}function G2(e,t){Zn.m(e,t);var n=Ca;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+en(r)+'"][href="'+en(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=ka(e)}if(!on.has(a)&&(e=Re({rel:"modulepreload",href:e},t),on.set(a,e),n.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(eo(a)))return}r=n.createElement("link"),ut(r,"link",e),et(r),n.head.appendChild(r)}}}function H2(e,t,n){Zn.S(e,t,n);var r=Ca;if(r&&e){var s=Xs(r).hoistableStyles,a=ya(e);t=t||"default";var o=s.get(a);if(!o){var l={loading:0,preload:null};if(o=r.querySelector(Zi(a)))l.loading=5;else{e=Re({rel:"stylesheet",href:e,"data-precedence":t},n),(n=on.get(a))&&gf(e,n);var c=o=r.createElement("link");et(c),ut(c,"link",e),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Zo(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:l},s.set(a,o)}}}function V2(e,t){Zn.X(e,t);var n=Ca;if(n&&e){var r=Xs(n).hoistableScripts,s=ka(e),a=r.get(s);a||(a=n.querySelector(eo(s)),a||(e=Re({src:e,async:!0},t),(t=on.get(s))&&xf(e,t),a=n.createElement("script"),et(a),ut(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}function F2(e,t){Zn.M(e,t);var n=Ca;if(n&&e){var r=Xs(n).hoistableScripts,s=ka(e),a=r.get(s);a||(a=n.querySelector(eo(s)),a||(e=Re({src:e,async:!0,type:"module"},t),(t=on.get(s))&&xf(e,t),a=n.createElement("script"),et(a),ut(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}function Sp(e,t,n,r){var s=(s=br.current)?Ml(s):null;if(!s)throw Error(z(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ya(n.href),n=Xs(s).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ya(n.href);var a=Xs(s).hoistableStyles,o=a.get(e);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,o),(a=s.querySelector(Zi(e)))&&!a._p&&(o.instance=a,o.state.loading=5),on.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},on.set(e,n),a||$2(s,e,n,o.state))),t&&r===null)throw Error(z(528,""));return o}if(t&&r!==null)throw Error(z(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ka(n),n=Xs(s).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,e))}}function ya(e){return'href="'+en(e)+'"'}function Zi(e){return'link[rel="stylesheet"]['+e+"]"}function Lb(e){return Re({},e,{"data-precedence":e.precedence,precedence:null})}function $2(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),ut(t,"link",n),et(t),e.head.appendChild(t))}function ka(e){return'[src="'+en(e)+'"]'}function eo(e){return"script[async]"+e}function Np(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+en(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=Re({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),et(r),ut(r,"style",s),Zo(r,n.precedence,e),t.instance=r;case"stylesheet":s=ya(n.href);var a=e.querySelector(Zi(s));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Lb(n),(s=on.get(s))&&gf(r,s),a=(e.ownerDocument||e).createElement("link"),et(a);var o=a;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),ut(a,"link",r),t.state.loading|=4,Zo(a,n.precedence,e),t.instance=a;case"script":return a=ka(n.src),(s=e.querySelector(eo(a)))?(t.instance=s,et(s),s):(r=n,(s=on.get(a))&&(r=Re({},n),xf(r,s)),e=e.ownerDocument||e,s=e.createElement("script"),et(s),ut(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(z(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Zo(r,n.precedence,e));return t.instance}function Zo(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,o=0;o<r.length;o++){var l=r[o];if(l.dataset.precedence===t)a=l;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function xf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var el=null;function Ep(e,t,n){if(el===null){var r=new Map,s=el=new Map;s.set(n,r)}else s=el,r=s.get(n),r||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[Ji]||a[ot]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var o=a.getAttribute(t)||"";o=e+o;var l=r.get(o);l?l.push(a):r.set(o,[a])}}return r}function Cp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function J2(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ub(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Y2(e,t,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=ya(r.href),a=t.querySelector(Zi(s));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Dl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,et(a);return}a=t.ownerDocument||t,r=Lb(r),(s=on.get(s))&&gf(r,s),a=a.createElement("link"),et(a);var o=a;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),ut(a,"link",r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Dl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var hu=0;function K2(e,t){return e.stylesheets&&e.count===0&&tl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&hu===0&&(hu=62500*j2());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>hu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}function Dl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function tl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,t.forEach(W2,e),Pl=null,Dl.call(e))}function W2(e,t){if(!(t.state.loading&4)){var n=Pl.get(e);if(n)var r=n.get(null);else{n=new Map,Pl.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var o=s[a];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}s=t.instance,o=s.getAttribute("data-precedence"),a=n.get(o)||r,a===r&&n.set(null,s),n.set(o,s),this.count++,r=Dl.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Ii={$$typeof:qn,Provider:null,Consumer:null,_currentValue:Zr,_currentValue2:Zr,_threadCount:0};function X2(e,t,n,r,s,a,o,l,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pc(0),this.hiddenUpdates=Pc(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Ob(e,t,n,r,s,a,o,l,c,u,d,p){return e=new X2(e,t,n,o,c,u,d,p,l),t=1,a===!0&&(t|=24),a=Lt(3,null,null,t),e.current=a,a.stateNode=e,t=Gh(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Fh(a),e}function zb(e){return e?(e=Vs,e):Vs}function Bb(e,t,n,r,s,a){s=zb(s),r.context===null?r.context=s:r.pendingContext=s,r=_r(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Sr(e,r,t),n!==null&&(Et(n,e,t),oi(n,e,t))}function kp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yf(e,t){kp(e,t),(e=e.alternate)&&kp(e,t)}function qb(e){if(e.tag===13||e.tag===31){var t=fs(e,67108864);t!==null&&Et(t,e,67108864),yf(e,67108864)}}function Tp(e){if(e.tag===13||e.tag===31){var t=Vt();t=Th(t);var n=fs(e,t);n!==null&&Et(n,e,t),yf(e,t)}}var Ll=!0;function Q2(e,t,n,r){var s=Z.T;Z.T=null;var a=pe.p;try{pe.p=2,vf(e,t,n,r)}finally{pe.p=a,Z.T=s}}function Z2(e,t,n,r){var s=Z.T;Z.T=null;var a=pe.p;try{pe.p=8,vf(e,t,n,r)}finally{pe.p=a,Z.T=s}}function vf(e,t,n,r){if(Ll){var s=Pd(r);if(s===null)uu(e,t,r,Ul,n),jp(e,r);else if(tN(s,e,t,n,r))r.stopPropagation();else if(jp(e,r),t&4&&-1<eN.indexOf(e)){for(;s!==null;){var a=_a(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=Hr(a.pendingLanes);if(o!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Ht(o);l.entanglements[1]|=c,o&=~c}Tn(a),!(me&6)&&(Cl=qt()+500,Qi(0))}}break;case 31:case 13:l=fs(a,2),l!==null&&Et(l,a,2),hc(),yf(a,2)}if(a=Pd(r),a===null&&uu(e,t,r,Ul,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else uu(e,t,r,null,n)}}function Pd(e){return e=Ih(e),bf(e)}var Ul=null;function bf(e){if(Ul=null,e=Os(e),e!==null){var t=Hi(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=oy(t),e!==null)return e;e=null}else if(n===31){if(e=ly(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ul=e,null}function Gb(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(z_()){case hy:return 2;case fy:return 8;case hl:case B_:return 32;case my:return 268435456;default:return 32}default:return 32}}var Ld=!1,Cr=null,kr=null,Tr=null,Mi=new Map,Di=new Map,dr=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jp(e,t){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(t.pointerId)}}function Ha(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=_a(t),t!==null&&qb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function tN(e,t,n,r,s){switch(t){case"focusin":return Cr=Ha(Cr,e,t,n,r,s),!0;case"dragenter":return kr=Ha(kr,e,t,n,r,s),!0;case"mouseover":return Tr=Ha(Tr,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Mi.set(a,Ha(Mi.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Di.set(a,Ha(Di.get(a)||null,e,t,n,r,s)),!0}return!1}function Hb(e){var t=Os(e.target);if(t!==null){var n=Hi(t);if(n!==null){if(t=n.tag,t===13){if(t=oy(n),t!==null){e.blockedOn=t,fm(e.priority,function(){Tp(n)});return}}else if(t===31){if(t=ly(n),t!==null){e.blockedOn=t,fm(e.priority,function(){Tp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pd(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ed=r,n.target.dispatchEvent(r),ed=null}else return t=_a(n),t!==null&&qb(t),e.blockedOn=n,!1;t.shift()}return!0}function Ap(e,t,n){nl(e)&&n.delete(t)}function nN(){Ld=!1,Cr!==null&&nl(Cr)&&(Cr=null),kr!==null&&nl(kr)&&(kr=null),Tr!==null&&nl(Tr)&&(Tr=null),Mi.forEach(Ap),Di.forEach(Ap)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ld||(Ld=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,nN)))}var wo=null;function Rp(e){wo!==e&&(wo=e,We.unstable_scheduleCallback(We.unstable_NormalPriority,function(){wo===e&&(wo=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if(typeof r!="function"){if(bf(r||n)===null)continue;break}var a=_a(n);a!==null&&(e.splice(t,3),t-=3,gd(a,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function va(e){function t(c){return bo(c,e)}Cr!==null&&bo(Cr,e),kr!==null&&bo(kr,e),Tr!==null&&bo(Tr,e),Mi.forEach(t),Di.forEach(t);for(var n=0;n<dr.length;n++){var r=dr[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)Hb(n),n.blockedOn===null&&dr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],o=s[kt]||null;if(typeof a=="function")o||Rp(n);else if(o){var l=null;if(a&&a.hasAttribute("formAction")){if(s=a,o=a[kt]||null)l=o.formAction;else if(bf(s)!==null)continue}else l=o.action;typeof l=="function"?n[r+1]=l:(n.splice(r,3),r-=3),Rp(n)}}}function Vb(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function wf(e){this._internalRoot=e}pc.prototype.render=wf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));var n=t.current,r=Vt();Bb(n,r,e,t,null,null)};pc.prototype.unmount=wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bb(e.current,2,null,e,null,null),hc(),t[wa]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=vy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dr.length&&t!==0&&t<dr[n].priority;n++);dr.splice(n,0,e),n===0&&Hb(e)}};var Ip=ay.version;if(Ip!=="19.2.3")throw Error(z(527,Ip,"19.2.3"));pe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=I_(t),e=e!==null?cy(e):null,e=e===null?null:e.stateNode,e};var rN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{Vi=_o.inject(rN),Gt=_o}catch{}}Ql.createRoot=function(e,t){if(!iy(e))throw Error(z(299));var n=!1,r="",s=Pv,a=Lv,o=Uv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ob(e,1,!1,null,null,n,r,null,s,a,o,Vb),e[wa]=t.current,pf(e),new wf(t)};Ql.hydrateRoot=function(e,t,n){if(!iy(e))throw Error(z(299));var r=!1,s="",a=Pv,o=Lv,l=Uv,c=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),t=Ob(e,1,!0,t,n??null,r,s,c,a,o,l,Vb),t.context=zb(null),n=t.current,r=Vt(),r=Th(r),s=_r(r),s.callback=null,Sr(n,s,r),n=r,t.current.lanes=n,$i(t,n),Tn(t),e[wa]=t.current,pf(e),new pc(t)};Ql.version="19.2.3";function Fb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fb)}catch(e){console.error(e)}}Fb(),Qx.exports=Ql;var sN=Qx.exports;const aN=Wl(sN),iN="modulepreload",oN=function(e){return"/Fitness-ProIA/"+e},Mp={},ss=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=oN(c),c in Mp)return;Mp[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":iN,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function gc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function lN(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(p){o(p)}}function c(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}const cN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class _f extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class uN extends _f{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dp extends _f{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pp extends _f{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ud;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ud||(Ud={}));class dN{constructor(t,{headers:n={},customFetch:r,region:s=Ud.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=cN(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return lN(this,arguments,void 0,function*(n,r={}){var s;let a,o;try{const{headers:l,method:c,body:u,signal:d,timeout:p}=r;let m={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(m["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(m["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let w=d;p&&(o=new AbortController,a=setTimeout(()=>o.abort(),p),d?(w=o.signal,d.addEventListener("abort",()=>o.abort())):w=o.signal);const y=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:x,signal:w}).catch(T=>{throw new uN(T)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new Dp(y);if(!y.ok)throw new Pp(y);let _=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield y.json():_==="application/octet-stream"||_==="application/pdf"?S=yield y.blob():_==="text/event-stream"?S=y:_==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof Pp||l instanceof Dp?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var hN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},fN=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,l=null,c=null,u=a.status,d=a.statusText;if(a.ok){var p,m;if(n.method!=="HEAD"){var g;const y=await a.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const x=(p=n.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),w=(m=a.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");x&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const x=await a.text();try{o=JSON.parse(x),Array.isArray(o)&&a.status===404&&(l=[],o=null,u=200,d="OK")}catch{a.status===404&&x===""?(u=204,d="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new hN(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(a=>{var o;let l="";const c=a==null?void 0:a.cause;if(c){var u,d,p,m;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",x=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(p=a==null?void 0:a.name)!==null&&p!==void 0?p:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${v}`,x&&(l+=` (${x})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var g;l=(g=a==null?void 0:a.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},mN=class extends fN{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Lp=new RegExp("[,()]");var Is=class extends mN{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Lp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Lp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},pN=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Is({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Is({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Is({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Is({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Is({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},gN=class $b{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pN(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $b(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{c.searchParams.append(p,m)})):(l="POST",u=n);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new Is({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class xN{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const yN="2.89.0",vN=`realtime-js/${yN}`,Jb="1.0.0",bN="2.0.0",Up=Jb,Od=1e4,wN=1e3,_N=100;var or;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(or||(or={}));var Ye;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ye||(Ye={}));var mn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(mn||(mn={}));var zd;(function(e){e.websocket="websocket"})(zd||(zd={}));var Kr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Kr||(Kr={}));class SN{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var s,a;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+p.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,c.length),v.setUint8(x++,l.length),v.setUint8(x++,o.length),v.setUint8(x++,u.length),v.setUint8(x++,p.length),v.setUint8(x++,n),Array.from(c,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(u,y=>v.setUint8(x++,y.charCodeAt(0))),Array.from(p,y=>v.setUint8(x++,y.charCodeAt(0)));var w=new Uint8Array(g.byteLength+r.byteLength);return w.set(new Uint8Array(g),0),w.set(new Uint8Array(r),g.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,o,l,c]=r;return n({join_ref:s,ref:a,topic:o,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+a));c=c+a;const p=r.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,v={type:this.BROADCAST_EVENT,event:d,payload:g};return o>0&&(v.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Yb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ne||(Ne={}));const Op=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=NN(o,e,t,s),a),{}):{}},NN=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=n[e];return a&&!r.includes(a)?Kb(a,o):Bd(o)},Kb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return TN(t,n)}switch(e){case Ne.bool:return EN(t);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return CN(t);case Ne.json:case Ne.jsonb:return kN(t);case Ne.timestamp:return jN(t);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return Bd(t);default:return Bd(t)}},Bd=e=>e,EN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},CN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},TN=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Kb(t,l))}return e},jN=e=>typeof e=="string"?e.replace(" ","T"):e,Wb=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class fu{constructor(t,n,r={},s=Od){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zp||(zp={}));class gi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=gi.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=gi.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const p=a[u];if(p){const m=d.map(w=>w.presence_ref),g=p.map(w=>w.presence_ref),v=d.filter(w=>g.indexOf(w.presence_ref)<0),x=p.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const p=t[l].map(g=>g.presence_ref),m=d.filter(g=>p.indexOf(g.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(p=>p.presence_ref);u=u.filter(p=>d.indexOf(p.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bp||(Bp={}));var xi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xi||(xi={}));var Un;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Un||(Un={}));class Ys{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new fu(this,mn.join,this.params,this.timeout),this.rejoinTimer=new Yb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new gi(this),this.broadcastEndpointURL=Wb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[xi.PRESENCE]&&this.bindings[xi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Un.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Un.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t==null||t(Un.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,y=[];for(let b=0;b<w;b++){const _=x[b],{filter:{event:S,schema:T,table:N,filter:C}}=_,I=g&&g[b];if(I&&I.event===S&&Ys.isFilterValueEqual(I.schema,T)&&Ys.isFilterValueEqual(I.table,N)&&Ys.isFilterValueEqual(I.filter,C))y.push(Object.assign(Object.assign({},_),{id:I.id}));else{this.unsubscribe(),this.state=Ye.errored,t==null||t(Un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Un.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ye.errored,t==null||t(Un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ye.joined&&t===xi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ye.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new fu(this,mn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new fu(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>_N){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=mn;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,x,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(x=g.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var v,x,w,y,b,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const S=g.id,T=(v=g.filter)===null||v===void 0?void 0:v.event;return S&&((x=n.ids)===null||x===void 0?void 0:x.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(b=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:w,commit_timestamp:y,type:b,errors:_}=v;m=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Ys.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(mn.close,{},t)}_onError(t){this._on(mn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Op(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Op(t.columns,t.old_record)),n}}const mu=()=>{},So={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AN=[1e3,2e3,5e3,1e4],RN=1e4,IN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MN{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Od,this.transport=null,this.heartbeatIntervalMs=So.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mu,this.ref=0,this.reconnectTimer=null,this.vsn=Up,this.logger=mu,this.conn=null,this.sendBuffer=[],this.serializer=new SN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zd.websocket}`,this.httpEndpoint=Wb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case or.connecting:return Kr.Connecting;case or.open:return Kr.Open;case or.closing:return Kr.Closing;default:return Kr.Closed}}isConnected(){return this.connectionState()===Kr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Ys(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(wN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},So.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:o}=n,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===or.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===or.open||this.conn.readyState===or.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(mn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([IN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:vN};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(mn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Yb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},So.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,o,l,c,u,d,p,m,g;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Od,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:So.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:mu,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Up,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>AN[v-1]||RN,this.vsn){case Jb:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,x)=>x(JSON.stringify(v)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:(v,x)=>x(JSON.parse(v));break;case bN:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Pi=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function DN(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function PN(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function LN(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:o}){const l=DN(e.baseUrl,r,s),c=await PN(e.auth),u=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...o},body:a?JSON.stringify(a):void 0}),d=await u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),m=p&&d?JSON.parse(d):d;if(!u.ok){const g=p?m:void 0,v=g==null?void 0:g.error;throw new Pi((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:u.status,headers:u.headers,data:m}}}}function No(e){return e.join("")}var UN=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:No(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${No(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${No(e.namespace)}`}),!0}catch(t){if(t instanceof Pi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Pi&&n.status===409)return;throw n}}};function ws(e){return e.join("")}var ON=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ws(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ws(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ws(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ws(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ws(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ws(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Pi&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Pi&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},zN=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=LN({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new UN(this.client,t),this.tableOps=new ON(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},xc=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var BN=class extends xc{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qd=class extends xc{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Sf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qN=()=>Response,Gd=e=>{if(Array.isArray(e))return e.map(n=>Gd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Gd(r)}),t},GN=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},HN=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Li(e){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(e)}function VN(e,t){if(Li(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Li(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FN(e){var t=VN(e,"string");return Li(t)=="symbol"?t:t+""}function $N(e,t,n){return(t=FN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qp(Object(n),!0).forEach(function(r){$N(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const pu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},JN=async(e,t,n)=>{e instanceof await qN()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,a=(r==null?void 0:r.statusCode)||s+"";t(new BN(pu(r),s,a))}).catch(r=>{t(new qd(pu(r),r))}):t(new qd(pu(e),e))},YN=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(GN(r)?(s.headers=Q({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Q(Q({},s),n))};async function to(e,t,n,r,s,a){return new Promise((o,l)=>{e(n,YN(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>JN(c,l,r))})}async function Ui(e,t,n,r){return to(e,"GET",t,n,r)}async function hn(e,t,n,r,s){return to(e,"POST",t,r,s,n)}async function Hd(e,t,n,r,s){return to(e,"PUT",t,r,s,n)}async function KN(e,t,n,r){return to(e,"HEAD",t,Q(Q({},n),{},{noResolveJson:!0}),r)}async function Nf(e,t,n,r,s){return to(e,"DELETE",t,r,s,n)}var WN=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Me(t))return{data:null,error:t};throw t}}};let Xb;Xb=Symbol.toStringTag;var XN=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Xb]="BlobDownloadBuilder",this.promise=null}asStream(){return new WN(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Me(t))return{data:null,error:t};throw t}}};const QN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ZN=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Sf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let a;const o=Q(Q({},Gp),r);let l=Q(Q({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(l=Q(Q({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),p=await(e=="PUT"?Hd:hn)(s.fetch,`${s.url}/object/${d}`,a,Q({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const a=s._removeEmptyFolders(e),o=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=Q({upsert:Gp.upsert},r),d=Q(Q({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:a,fullPath:(await Hd(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=Q({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await hn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+a.url),l=o.searchParams.get("token");if(!l)throw new xc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await hn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await hn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),a=await hn(r.fetch,`${r.url}/object/sign/${s}`,Q({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await hn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Q(Q({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e),o=()=>Ui(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new XN(o,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Gd(await Ui(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await KN(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Me(r)&&r instanceof qd){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}async remove(e){var t=this;try{return{data:await Nf(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=Q(Q(Q({},QN),t),{},{prefix:e||""});return{data:await hn(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=Q({},e);return{data:await hn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Qb="2.89.0",Zb={"X-Client-Info":`storage-js/${Qb}`};var eE=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Q(Q({},Zb),t),this.fetch=Sf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Ui(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ui(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await hn(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Hd(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await hn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Nf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},tE=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Q(Q({},Zb),t),this.fetch=Sf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await hn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Ui(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Nf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!HN(e))throw new xc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new zN({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const o=s[a];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const Ef={"X-Client-Info":`storage-js/${Qb}`,"Content-Type":"application/json"};var ew=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var gu=class extends ew{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nE=class extends ew{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Cf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),rE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Hp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sE=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";t(new gu(Hp(a),r,o))}).catch(()=>{const a=r+"";t(new gu(s.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";t(new gu(s.statusText||`HTTP ${r} error`,r,a))}}else t(new nE(Hp(e),e))},aE=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(rE(r)?(s.headers=Q({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Q(Q({},s),n)):s};async function iE(e,t,n,r,s,a){return new Promise((o,l)=>{e(n,aE(t,r,s,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>sE(c,l,r))})}async function Ot(e,t,n,r,s){return iE(e,"POST",t,r,s,n)}var oE=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Q(Q({},Ef),t),this.fetch=Cf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await Ot(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await Ot(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}},lE=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Q(Q({},Ef),t),this.fetch=Cf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ot(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Ot(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ot(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}},cE=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Q(Q({},Ef),t),this.fetch=Cf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Ot(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}},uE=class extends cE{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new dE(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},dE=class extends oE{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new hE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},hE=class extends lE{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Q(Q({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},fE=class extends eE{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new ZN(this.url,this.headers,e,this.fetch)}get vectors(){return new uE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tE(this.url+"/iceberg",this.headers,this.fetch)}};const tw="2.89.0",Ms=30*1e3,Vd=3,xu=Vd*Ms,mE="http://localhost:9999",pE="supabase.auth.token",gE={"X-Client-Info":`gotrue-js/${tw}`},Fd="X-Supabase-Api-Version",nw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yE=10*60*1e3;class Oi extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Y(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class vE extends Oi{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function bE(e){return Y(e)&&e.name==="AuthApiError"}class Wr extends Oi{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class er extends Oi{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class It extends er{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wE(e){return Y(e)&&e.name==="AuthSessionMissingError"}class _s extends er{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eo extends er{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Co extends er{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _E(e){return Y(e)&&e.name==="AuthImplicitGrantRedirectError"}class Vp extends er{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class SE extends er{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class $d extends er{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function yu(e){return Y(e)&&e.name==="AuthRetryableFetchError"}class Fp extends er{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Jd extends er{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ol="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$p=` 	
\r=`.split(""),NE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$p.length;t+=1)e[$p[t].charCodeAt(0)]=-2;for(let t=0;t<Ol.length;t+=1)e[Ol[t].charCodeAt(0)]=t;return e})();function Jp(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Ol[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Ol[r]),t.queuedBits-=6}}function rw(e,t,n){const r=NE[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yp(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{kE(o,r,n)};for(let o=0;o<e.length;o+=1)rw(e.charCodeAt(o),s,a);return t.join("")}function EE(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function CE(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}EE(r,t)}}function kE(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function sa(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)rw(e.charCodeAt(s),n,r);return new Uint8Array(t)}function TE(e){const t=[];return CE(e,n=>t.push(n)),new Uint8Array(t)}function Qr(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Jp(s,n,r)),Jp(null,n,r),t.join("")}function jE(e){return Math.round(Date.now()/1e3)+e}function AE(){return Symbol("auth-callback")}const st=()=>typeof window<"u"&&typeof document<"u",zr={tested:!1,writable:!1},sw=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zr.tested)return zr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zr.tested=!0,zr.writable=!0}catch{zr.tested=!0,zr.writable=!1}return zr.writable};function RE(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const aw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),IE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ds=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Br=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rt=async(e,t)=>{await e.removeItem(t)};class yc{constructor(){this.promise=new yc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}yc.promiseConstructor=Promise;function vu(e){const t=e.split(".");if(t.length!==3)throw new Jd("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!xE.test(t[r]))throw new Jd("JWT not in base64url format");return{header:JSON.parse(Yp(t[0])),payload:JSON.parse(Yp(t[1])),signature:sa(t[2]),raw:{header:t[0],payload:t[1]}}}async function ME(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function DE(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function PE(e){return("0"+e.toString(16)).substr(-2)}function LE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,PE).join("")}async function UE(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function OE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await UE(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ss(e,t,n=!1){const r=LE();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ds(e,`${t}-code-verifier`,s);const a=await OE(r);return[a,r===a?"plain":"s256"]}const zE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BE(e){const t=e.headers.get(Fd);if(!t||!t.match(zE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function qE(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function GE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ns(e){if(!HE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VE(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Kp(e){return JSON.parse(JSON.stringify(e))}const $r=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FE=[502,503,504];async function Wp(e){var t;if(!IE(e))throw new $d($r(e),0);if(FE.includes(e.status))throw new $d($r(e),e.status);let n;try{n=await e.json()}catch(a){throw new Wr($r(a),a)}let r;const s=BE(e);if(s&&s.getTime()>=nw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Fp($r(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new It}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Fp($r(n),e.status,n.weak_password.reasons);throw new vE($r(n),e.status||500,r)}const $E=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function X(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Fd]||(a[Fd]=nw["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await JE(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function JE(e,t,n,r,s,a){const o=$E(t,r,s,a);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new $d($r(c),0)}if(l.ok||await Wp(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Wp(c)}}function dn(e){var t;let n=null;WE(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=jE(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Xp(e){const t=dn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function hr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YE(e){return{data:e,error:null}}function KE(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,o=gc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Qp(e){return e}function WE(e){return e.access_token&&e.refresh_token&&e.expires_in}const wu=["global","local","others"];class XE{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=aw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=wu[0]){if(wu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wu.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:hr})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=gc(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:KE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Y(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hr})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Qp});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Y(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ns(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hr})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ns(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:hr})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ns(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:hr})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ns(t.userId);try{const{data:n,error:r}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ns(t.userId),Ns(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Qp});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Y(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await X(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await X(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await X(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await X(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await X(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}}function Zp(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Es={debug:!!(globalThis&&sw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class QE extends iw{}async function ZE(e,t,n){Es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Es.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Es.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Es.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Es.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new QE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Es.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function eC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ow(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function tC(e){return parseInt(e,16)}function nC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function rC(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:p,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=ow(e.address),v=d?`${d}://${r}`:r,x=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let y=`URI: ${p}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);b+=`
- ${_}`}y+=b}return`${w}
${y}`}class Ge extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class zl extends Ge{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function sC({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ge({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(lw(o)){if(a.rp.id!==o)return new Ge({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function aC({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ge({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(lw(r)){if(n.rpId!==r)return new Ge({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class iC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const oC=new iC;function lC(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=gc(e,["challenge","user","excludeCredentials"]),a=sa(t).buffer,o=Object.assign(Object.assign({},n),{id:sa(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:sa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function cC(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=gc(e,["challenge","allowCredentials"]),s=sa(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:sa(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function uC(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function dC(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qr(new Uint8Array(s.authenticatorData)),clientDataJSON:Qr(new Uint8Array(s.clientDataJSON)),signature:Qr(new Uint8Array(s.signature)),userHandle:s.userHandle?Qr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function lw(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function e0(){var e,t;return!!(st()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function hC(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new zl("Browser returned unexpected credential type",t)}:{data:null,error:new zl("Empty credential response",t)}}catch(t){return{data:null,error:sC({error:t,options:e})}}}async function fC(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new zl("Browser returned unexpected credential type",t)}:{data:null,error:new zl("Empty credential response",t)}}catch(t){return{data:null,error:aC({error:t,options:e})}}}const mC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},pC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bl(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const l=r[a];t(l)?r[a]=Bl(l,o):r[a]=Bl(o)}else r[a]=o}return r}function gC(e,t){return Bl(mC,e,t||{})}function xC(e,t){return Bl(pC,e,t||{})}class yC{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=s??oC.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=gC(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:p}=await hC({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const u=xC(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:p}=await fC(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new Wr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Oi("rpId is required for WebAuthn authentication")};try{if(!e0())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new Wr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Oi("rpId is required for WebAuthn registration")};try{if(!e0())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new Wr("Unexpected error in register",o)}}}}eC();const vC={url:mE,storageKey:pE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function t0(e,t,n){return await n()}const Cs={};class zi{get jwks(){var t,n;return(n=(t=Cs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Cs[this.storageKey]=Object.assign(Object.assign({},Cs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Cs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cs[this.storageKey]=Object.assign(Object.assign({},Cs[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},vC),t);if(this.storageKey=a.storageKey,this.instanceID=(n=zi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,zi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&st()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new XE({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=aw(a.fetch),this.lock=a.lock||t0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&st()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ZE:this.lock=t0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:sw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zp(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Zp(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tw}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(st()&&(n=RE(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),st()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),_E(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Y(n)?this._returnResult({error:n}):this._returnResult({error:new Wr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:dn}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Y(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:d,password:p,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ss(this.storage,this.storageKey)),a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:dn})}else if("phone"in t){const{phone:d,password:p,options:m}=t;a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:dn})}else throw new Eo("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await rt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xp})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xp})}else throw new Eo("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new _s;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,o,l,c,u,d,p,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:w,statement:y,options:b}=t;let _;if(st())if(typeof w=="object")_=w;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")_=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const S=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),T=await _.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=ow(T[0]);let C=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const A=await _.request({method:"eth_chainId"});C=tC(A)}const I={domain:S.host,address:N,statement:y,uri:S.href,version:"1",chainId:C,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=rC(I),v=await _.request({method:"personal_sign",params:[nC(g),N]})}try{const{data:x,error:w}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:dn});if(w)throw w;if(!x||!x.session||!x.user){const y=new _s;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(Y(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var n,r,s,a,o,l,c,u,d,p,m,g;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:w,wallet:y,statement:b,options:_}=t;let S;if(st())if(typeof y=="object")S=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const T=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),b?{statement:b}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),x=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((p=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",..._.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:w,error:y}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Qr(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:dn});if(y)throw y;if(!w||!w.session||!w.user){const b=new _s;return this._returnResult({data:{user:null,session:null},error:b})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(Y(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const n=await Br(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new SE;const{data:a,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:dn});if(await rt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new _s;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=t,l=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new _s;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ss(this.storage,this.storageKey));const{error:p}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Eo("You must provide either an email or phone number.")}catch(l){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:dn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Y(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ss(this.storage,this.storageKey));const u=await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:YE});return!((a=u.data)===null||a===void 0)&&a.url&&st()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new It;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Y(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:o}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:o,error:l}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Eo("You must provide either an email or phone number and a type")}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<xu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Br(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=bu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=VE(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hr}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:hr})})}catch(n){if(Y(n))return wE(n)&&(await this._removeSession(),await rt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new It;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ss(this.storage,this.storageKey));const{data:u,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:hr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new It;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=vu(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Y(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new It;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!st())throw new Co("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Co(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Vp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Co("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vp("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new Co("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(l);let m=d+p;c&&(m=parseInt(c));const g=m-d;g*1e3<=Ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const v=m-p;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:x,error:w}=await this._getUser(a);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:m,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(r){if(Y(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Br(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(bE(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await rt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=AE(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ss(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:p,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return st()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Y(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,p=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dn}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new _s}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(s){if(await rt(this.storage,`${this.storageKey}-code-verifier`),Y(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await DE(async s=>(s>0&&await ME(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:dn})),(s,a)=>{const o=200*Math.pow(2,s);return a&&yu(a)&&Date.now()+o-r<Ms})}catch(r){if(this._debug(n,"error",r),Y(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),st()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Br(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Br(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ds(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:bu()}else if(s&&!s.user&&!s.user){const o=await Br(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await rt(this.storage,this.storageKey+"-user"),await Ds(this.storage,this.storageKey,s)):s.user=bu()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xu;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${xu}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),yu(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yc;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new It;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Y(a)){const o={data:null,error:a};return yu(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ds(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Kp(s);await Ds(this.storage,this.storageKey,a)}else{const s=Kp(n);await Ds(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rt(this.storage,this.storageKey),await rt(this.storage,this.storageKey+"-code-verifier"),await rt(this.storage,this.storageKey+"-user"),this.userStorage&&await rt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ms);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ms}ms, refresh threshold is ${Vd} ticks`),s<=Vd&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Ss(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await X(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?uC(t.webauthn.credential_response):dC(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:lC(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cC(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=vu(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await X(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new It})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new It});const o=await X(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&st()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new It});const o=await X(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&st()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await X(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new It})})}catch(t){if(Y(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await X(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new It})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+yE>s)return r;const{data:a,error:o}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=vu(r);n!=null&&n.allowExpired||qE(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:s,signature:o},error:null}}const d=GE(s.alg),p=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,TE(`${l}.${c}`)))throw new Jd("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}}zi.nextInstanceID={};const bC=zi,wC="2.89.0";let ei="";typeof Deno<"u"?ei="deno":typeof document<"u"?ei="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ei="react-native":ei="node";const _C={"X-Client-Info":`supabase-js-${ei}/${wC}`},SC={headers:_C},NC={schema:"public"},EC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CC={};function Bi(e){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(e)}function kC(e,t){if(Bi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TC(e){var t=kC(e,"string");return Bi(t)=="symbol"?t:t+""}function jC(e,t,n){return(t=TC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n0(Object(n),!0).forEach(function(r){jC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const AC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RC=()=>Headers,IC=(e,t,n)=>{const r=AC(n),s=RC();return async(a,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Le(Le({},o),{},{headers:u}))}};function MC(e){return e.endsWith("/")?e:e+"/"}function DC(e,t){var n,r;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:p}=t,m={db:Le(Le({},c),s),auth:Le(Le({},u),a),realtime:Le(Le({},d),o),storage:{},global:Le(Le(Le({},p),l),{},{headers:Le(Le({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function PC(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(MC(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var LC=class extends bC{constructor(e){super(e)}},UC=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const a=PC(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:NC,realtime:CC,auth:Le(Le({},EC),{},{storageKey:o}),global:SC},c=DC(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=IC(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Le({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new gN(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new fE(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new dN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:o,lock:l,debug:c,throwOnError:u},d,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LC({url:this.authUrl.href,headers:Le(Le({},m),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new MN(this.realtimeUrl.href,Le(Le({},e),{},{params:Le(Le({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const OC=(e,t,n)=>new UC(e,t,n);function zC(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}zC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BC="https://ivtxudssciaranyscahi.supabase.co",qC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml2dHh1ZHNzY2lhcmFueXNjYWhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcyMDIwNTIsImV4cCI6MjA4Mjc3ODA1Mn0.moZGqCAyG43jS9tZ7Xo03Y7nmRfK0GeQTd4ysFbfLow",M=OC(BC,qC),ql=Object.freeze(Object.defineProperty({__proto__:null,supabase:M},Symbol.toStringTag,{value:"Module"})),GC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),HC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),r0=[{name:"Caractersticas",targetId:"features"},{name:"Planes",targetId:"plans"},{name:"Nosotros",targetId:"nosotros"}],VC=({onNavigateToRegister:e,onNavigateToLogin:t})=>{const[n,r]=E.useState(!1),s=o=>{const l=document.getElementById(o);l&&l.scrollIntoView({behavior:"smooth"}),r(!1)},a=o=>{o(),r(!1)};return i.jsxs("header",{className:"bg-white/80 backdrop-blur-lg shadow-sm w-full sticky top-0 z-50",children:[i.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Fitness",i.jsx("span",{className:"text-brand-primary",children:"Flow"})]})}),i.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:r0.map(o=>i.jsx("button",{onClick:()=>s(o.targetId),className:"text-slate-600 hover:text-brand-primary font-medium transition-colors",children:o.name},o.name))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-brand-primary font-medium px-4 py-2 rounded-lg transition-colors",children:"Iniciar Sesin"}),i.jsx("button",{onClick:e,className:"bg-brand-primary text-white font-semibold px-4 py-2 rounded-lg hover:bg-brand-secondary transition-colors",children:"Registrarse"})]}),i.jsx("div",{className:"md:hidden",children:i.jsxs("button",{onClick:()=>r(!n),className:"inline-flex items-center justify-center p-2 rounded-md text-slate-500 hover:text-slate-800 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-brand-primary","aria-controls":"mobile-menu","aria-expanded":n,children:[i.jsx("span",{className:"sr-only",children:"Abrir men principal"}),n?i.jsx(HC,{}):i.jsx(GC,{})]})})]})]})}),n&&i.jsxs("div",{className:"md:hidden animate-fade-in",id:"mobile-menu",children:[i.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:r0.map(o=>i.jsx("button",{onClick:()=>s(o.targetId),className:"text-slate-600 hover:bg-slate-100 hover:text-brand-primary block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors",children:o.name},o.name))}),i.jsx("div",{className:"pt-4 pb-3 border-t border-slate-200",children:i.jsxs("div",{className:"px-2 space-y-2",children:[i.jsx("button",{onClick:()=>a(t),className:"w-full text-left block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-100 hover:text-brand-primary",children:"Iniciar Sesin"}),i.jsx("button",{onClick:()=>a(e),className:"w-full text-left block px-3 py-2 rounded-md text-base font-medium bg-brand-primary text-white hover:bg-brand-secondary",children:"Registrarse"})]})})]})]})},cw=({isOpen:e,onClose:t,title:n,children:r})=>e?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),i.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),i.jsxs("div",{className:"relative inline-block align-bottom bg-white dark:bg-slate-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:i.jsx("div",{className:"sm:flex sm:items-start",children:i.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-2xl leading-6 font-bold text-slate-900 dark:text-white",id:"modal-title",children:n}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-500 focus:outline-none",children:i.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"mt-4 text-slate-600 dark:text-slate-300 space-y-4 max-h-[60vh] overflow-y-auto pr-2 text-sm leading-relaxed",children:r})]})})}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:i.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-brand-primary text-base font-medium text-white hover:bg-brand-secondary focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Entendido"})})]})]})}):null,FC=e=>i.jsxs(cw,{...e,title:"Trminos y Condiciones de Uso",children:[i.jsx("p",{className:"font-bold",children:"1. Aceptacin de los Trminos"}),i.jsx("p",{children:"Al descargar, acceder o utilizar FitnessFlow Pro, usted acepta estar legalmente vinculado por estos trminos. El servicio es operado desde Colombia y se rige por las leyes de la Repblica de Colombia."}),i.jsx("p",{className:"font-bold",children:"2. Uso de la Aplicacin"}),i.jsx("p",{children:"FitnessFlow Pro proporciona herramientas de seguimiento fitness y gestin para gimnasios. Usted se compromete a utilizar la aplicacin solo para fines legales y de acuerdo con estos trminos. Las recomendaciones de IA son sugerencias y no constituyen consejo mdico profesional."}),i.jsx("p",{className:"font-bold",children:"3. Limitacin de Responsabilidad"}),i.jsx("p",{children:"El uso de la aplicacin es bajo su propio riesgo. FitnessFlow Pro no se hace responsable de lesiones, problemas de salud o daos directos o indirectos resultantes del uso de las rutinas o clases sugeridas. Siempre consulte a un mdico antes de comenzar cualquier programa de ejercicios."}),i.jsx("p",{className:"font-bold",children:"4. Propiedad Intelectual"}),i.jsx("p",{children:"Todo el contenido, diseo, grficos y cdigo son propiedad de FitnessFlow Pro SAS y estn protegidos por las leyes de derechos de autor colombianas e internacionales."}),i.jsx("p",{className:"font-bold",children:"5. Pagos y Suscripciones"}),i.jsx("p",{children:"Las tarifas para planes Premium se cobran por adelantado. Nos reservamos el derecho de modificar los precios con previo aviso. Las cancelaciones se rigen por nuestra poltica de reembolso vigente."})]}),$C=e=>i.jsxs(cw,{...e,title:"Poltica de Privacidad y Tratamiento de Datos",children:[i.jsx("p",{className:"italic mb-4",children:"En cumplimiento con la Ley 1581 de 2012 y el Decreto 1377 de 2013 de la Repblica de Colombia."}),i.jsx("p",{className:"font-bold",children:"1. Responsable del Tratamiento"}),i.jsx("p",{children:"FitnessFlow Pro SAS, con domicilio en Medelln, Colombia, es el responsable del tratamiento de los datos personales recolectados a travs de esta aplicacin."}),i.jsx("p",{className:"font-bold",children:"2. Datos Recolectados"}),i.jsx("p",{children:"Podemos recolectar informacin como: nombre, correo electrnico, datos fsicos (peso, altura) y hbitos de ejercicio. Estos datos son necesarios para personalizar su experiencia y las recomendaciones de la IA."}),i.jsx("p",{className:"font-bold",children:"3. Finalidad"}),i.jsx("p",{children:"Sus datos sern utilizados exclusivamente para: proveer los servicios de la app, procesar pagos, enviar notificaciones relevantes y mejorar nuestros algoritmos. No vendemos sus datos a terceros."}),i.jsx("p",{className:"font-bold",children:"4. Derechos del Titular (Habeas Data)"}),i.jsx("p",{children:"Como usuario, usted tiene derecho a conocer, actualizar, rectificar y suprimir su informacin personal en cualquier momento. Puede ejercer estos derechos escribiendo a privacidad@fitnessflow.pro."}),i.jsx("p",{className:"font-bold",children:"5. Seguridad"}),i.jsx("p",{children:"Implementamos medidas tcnicas y administrativas para proteger su informacin contra acceso no autorizado, prdida o alteracin."})]}),_u=({href:e,children:t})=>i.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-slate-500 hover:text-brand-primary transition-colors",children:t}),JC=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState(!1),s=a=>{const o=document.getElementById(a);o&&o.scrollIntoView({behavior:"smooth"})};return i.jsxs("footer",{className:"bg-slate-50 border-t border-slate-200",children:[i.jsxs("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"md:col-span-1",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:["Fitness",i.jsx("span",{className:"text-brand-primary",children:"Flow"})]}),i.jsx("p",{className:"mt-2 text-slate-600 text-sm",children:"Transforma tu cuerpo, transforma tu vida."}),i.jsxs("div",{className:"mt-4 flex space-x-4",children:[i.jsx(_u,{href:"#",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),i.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),i.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),i.jsx(_u,{href:"#",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),i.jsx(_u,{href:"#",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 md:col-span-3 gap-8",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Producto"}),i.jsxs("ul",{className:"mt-2 space-y-2 text-sm text-slate-600",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>s("features"),className:"hover:underline",children:"Caractersticas"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("plans"),className:"hover:underline",children:"Planes"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:underline",children:"AI Coach"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Compaa"}),i.jsxs("ul",{className:"mt-2 space-y-2 text-sm text-slate-600",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>s("nosotros"),className:"hover:underline",children:"Nosotros"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:underline",children:"Prensa"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:underline",children:"Carreras"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Legal"}),i.jsxs("ul",{className:"mt-2 space-y-2 text-sm text-slate-600",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>t(!0),className:"hover:underline text-left",children:"Trminos y Condiciones"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>r(!0),className:"hover:underline text-left",children:"Poltica de Privacidad"})})]})]})]})]}),i.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200 text-center text-sm text-slate-500",children:i.jsxs("p",{children:[" ",new Date().getFullYear()," FitnessFlow. Todos los derechos reservados."]})})]}),i.jsx(FC,{isOpen:e,onClose:()=>t(!1)}),i.jsx($C,{isOpen:n,onClose:()=>r(!1)})]})},Va=[{id:1,name:"Sofa Martnez",role:"Usuario Premium",image:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=150",content:"Gracias a FitnessFlow y su AI Coach, he logrado reducir mi % de grasa corporal en 3 meses. Las rutinas son increbles y totalmente adaptadas a mi tiempo!",rating:5},{id:2,name:"Carlos Rodrguez",role:"Entrenador Personal",image:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=150",content:"La herramienta de gestin de clientes me ahorra horas de trabajo administrativo. Ahora puedo enfocarme 100% en mis atletas y sus resultados.",rating:5},{id:3,name:"Laura Gmez",role:"Gerente Gym Vitality",image:"https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?auto=compress&cs=tinysrgb&w=150",content:"Nuestra retencin de miembros aument un 40% desde que implementamos la automatizacin de marketing. Es la mejor inversin que hemos hecho.",rating:5},{id:4,name:"Andrs Felipe",role:"Usuario Bsico",image:"https://images.pexels.com/photos/1121796/pexels-photo-1121796.jpeg?auto=compress&cs=tinysrgb&w=150",content:"Empec con el plan gratuito y la biblioteca de ejercicios es sper completa. La comunidad es muy motivadora.",rating:4},{id:5,name:"Mariana Lpez",role:"Usuario Gratis",image:"https://images.pexels.com/photos/3757942/pexels-photo-3757942.jpeg?auto=compress&cs=tinysrgb&w=150",content:"Empec con la prueba Premium gratuita. Tener acceso al AI Coach y a todas las clases desde el primer da me convenci de pagar la suscripcin.",rating:5},{id:6,name:"Pedro Snchez",role:"Entrenador Gratis",image:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150",content:"Poder probar las herramientas de automatizacin Premium gratis por 15 das fue clave. Vi el retorno de inversin antes de gastar un peso.",rating:4},{id:7,name:"Gym FitLife",role:"Gimnasio Bsico",image:"https://images.pexels.com/photos/3837781/pexels-photo-3837781.jpeg?auto=compress&cs=tinysrgb&w=150",content:"Empezamos con el plan gratis y migramos al bsico. La gestin de miembros es muy intuitiva y nos ha ordenado mucho.",rating:5},{id:8,name:"Carolina R.",role:"Usuario Premium",image:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150",content:"El AI Coach es otro nivel. Realmente siento que tengo un entrenador personal 24/7 disponible para resolver mis dudas.",rating:5}],YC=({filled:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${e?"text-amber-400":"text-slate-300 dark:text-slate-600"}`,viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),KC=()=>{const[e,t]=E.useState(0);E.useEffect(()=>{const r=setInterval(()=>{t(s=>(s+1)%Va.length)},5e3);return()=>clearInterval(r)},[]);const n=r=>{t(r)};return i.jsxs("section",{className:"py-20 bg-slate-50 dark:bg-slate-900 overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-brand-primary/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl translate-x-1/3 translate-y-1/3"}),i.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-brand-primary/10 text-brand-primary font-semibold text-sm mb-4",children:"Comunidad FitnessFlow"}),i.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white",children:"Voces que inspiran"}),i.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300 max-w-2xl mx-auto",children:"Descubre cmo FitnessFlow est transformando vidas y negocios en todo el pas."})]}),i.jsxs("div",{className:"relative max-w-5xl mx-auto",children:[i.jsx("div",{className:"overflow-hidden",children:i.jsx("div",{className:"flex transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${e*100}%)`},children:Va.map(r=>i.jsx("div",{className:"w-full flex-shrink-0 px-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 md:p-12 border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row items-center gap-8 mx-auto max-w-3xl transform transition-transform hover:scale-[1.01]",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full p-1 bg-gradient-to-tr from-brand-primary to-blue-500",children:i.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full rounded-full object-cover border-4 border-white dark:border-slate-800"})})}),i.jsxs("div",{className:"flex-grow text-center md:text-left",children:[i.jsx("div",{className:"flex justify-center md:justify-start gap-1 mb-3",children:[...Array(5)].map((s,a)=>i.jsx(YC,{filled:a<r.rating},a))}),i.jsxs("p",{className:"text-xl md:text-2xl font-medium text-slate-800 dark:text-slate-100 italic mb-6",children:['"',r.content,'"']}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg text-slate-900 dark:text-white",children:r.name}),i.jsx("p",{className:"text-brand-primary font-medium",children:r.role})]})]})]})},r.id))})}),i.jsx("div",{className:"flex justify-center mt-8 gap-2 flex-wrap",children:Va.map((r,s)=>i.jsx("button",{onClick:()=>n(s),className:`w-3 h-3 rounded-full transition-all duration-300 ${s===e?"bg-brand-primary w-8":"bg-slate-300 dark:bg-slate-600 hover:bg-brand-primary/50"}`,"aria-label":`Ir al testimonio ${s+1}`},s))}),i.jsx("button",{onClick:()=>t(r=>r===0?Va.length-1:r-1),className:"absolute top-1/2 -left-4 md:-left-12 -translate-y-1/2 p-2 rounded-full bg-white dark:bg-slate-800 shadow-lg text-slate-600 dark:text-white hover:text-brand-primary transition-colors hidden md:block",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),i.jsx("button",{onClick:()=>t(r=>(r+1)%Va.length),className:"absolute top-1/2 -right-4 md:-right-12 -translate-y-1/2 p-2 rounded-full bg-white dark:bg-slate-800 shadow-lg text-slate-600 dark:text-white hover:text-brand-primary transition-colors hidden md:block",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})},WC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),XC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.125-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.125-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),QC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),ZC=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),ek=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),tk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),nk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-brand-primary",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),rk=[{name:"Gratis",price:"0",description:"Prueba la experiencia PREMIUM completa por 15 das",features:["Acceso total a funciones Premium","AI Coach y Clases Ilimitadas","Sin tarjeta de crdito","Explora todo sin lmites"],isPopular:!1},{name:"Bsico",price:"15.000",description:"Perfecto para comenzar tu journey fitness",features:["Todo del plan Gratis","Rutinas bsicas","Seguimiento de progreso","Biblioteca completa"],isPopular:!1},{name:"Premium",price:"20.000",description:"La experiencia completa para resultados serios",features:["Todo del plan Bsico","Rutinas personalizadas","Clases grupales ilimitadas","AI Coach personalizado","Anlisis de progreso avanzado"],isPopular:!0}],sk=[{name:"Gratis",price:"0",description:"Prueba todas las herramientas Premium por 15 das",features:["Acceso total a Gestin y Marketing","Automatizacin incluida","Sin costo inicial"],isPopular:!1},{name:"Bsico",price:"50.000",description:"Ideal para gimnasios pequeos que crecen",features:["Gestin de hasta 100 miembros","Creacin de clases y horarios","Panel de administracin","Soporte por email"],isPopular:!1},{name:"Premium",price:"70.000",description:"La solucin completa para tu negocio",features:["Miembros ilimitados","Todo del plan Bsico","Reportes de rendimiento avanzados","Automatizacin de Marketing","Soporte prioritario 24/7"],isPopular:!0}],ak=[{name:"Gratis",price:"0",description:"Impulsa tu carrera con herramientas Premium por 15 das",features:["Agenda Inteligente y Pagos","AI Coach Asistente","Gestin ilimitada (Prueba)"],isPopular:!1},{name:"Bsico",price:"25.000",description:"Potencia tu marca personal",features:["Gestin de hasta 20 clientes","Creacin de rutinas personalizadas","Perfil destacado","Chat bsico con clientes"],isPopular:!1},{name:"Premium",price:"30.000",description:"Herramientas avanzadas para escalar",features:["Clientes ilimitados","Pagos en lnea integrados","Automatizacin de mensajes","AI Coach Asistente","Soporte 24/7"],isPopular:!0}],ik=({plan:e,onSelect:t})=>i.jsxs("div",{className:`border rounded-xl p-6 flex flex-col bg-white dark:bg-slate-800 dark:border-slate-700 ${e.isPopular?"border-brand-primary border-2":"border-slate-200"}`,children:[e.isPopular&&i.jsx("span",{className:"bg-brand-primary text-white text-xs font-bold px-3 py-1 rounded-full self-start mb-4",children:"Ms Popular"}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.name}),i.jsxs("p",{className:"text-4xl font-extrabold my-2 text-slate-900 dark:text-white",children:["$",e.price,i.jsx("span",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"/mes"})]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-6 h-12",children:e.description}),i.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:e.features.map(n=>i.jsxs("li",{className:"flex items-center gap-3",children:[i.jsx(nk,{}),i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:n})]},n))}),i.jsx("button",{onClick:()=>t(e.name.toLowerCase()),className:`w-full py-3 rounded-lg font-semibold transition-colors ${e.isPopular?"bg-brand-primary text-white hover:bg-brand-secondary":"bg-white dark:bg-transparent text-brand-primary border border-brand-primary hover:bg-green-50 dark:hover:bg-slate-700"}`,children:"Elegir Plan"})]}),ok=({onStartRegistration:e,onNavigateToLogin:t,onGuestLogin:n})=>{const[r,s]=E.useState("user"),a=l=>{const c=document.getElementById(l);c&&c.scrollIntoView({behavior:"smooth"})},o=l=>{e(r,l)};return i.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-slate-900",children:[i.jsx(VC,{onNavigateToRegister:()=>e("user","gratis"),onNavigateToLogin:t}),i.jsxs("main",{className:"flex-grow",children:[i.jsx("section",{className:"py-20 px-4",children:i.jsxs("div",{className:"container mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{className:"text-center lg:text-left",children:[i.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-slate-900 dark:text-white leading-tight",children:["Tu ",i.jsx("span",{className:"text-brand-primary",children:"transformacin"})," comienza aqu"]}),i.jsx("p",{className:"mt-6 text-lg text-slate-600 dark:text-slate-300 max-w-xl mx-auto lg:mx-0",children:"Entrena con rutinas personalizadas, nete a clases grupales y alcanza tus objetivos con el apoyo de nuestros entrenadores expertos a nivel nacional."}),i.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[i.jsx("button",{onClick:()=>e("user","gratis"),className:"bg-brand-primary text-white font-semibold py-3 px-6 rounded-lg hover:bg-brand-secondary transition-transform duration-300 transform hover:scale-105",children:"Comenzar Ahora"}),i.jsx("button",{onClick:()=>a("plans"),className:"bg-white dark:bg-slate-800 text-slate-700 dark:text-white font-semibold py-3 px-6 rounded-lg border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Ver Planes"})]}),i.jsxs("p",{className:"mt-4 text-center lg:text-left text-sm text-slate-500 dark:text-slate-400",children:["o ",i.jsx("button",{onClick:n,className:"font-semibold text-brand-primary hover:underline",children:"Prubalo como invitado"})]}),i.jsxs("div",{className:"mt-12 flex justify-center lg:justify-start gap-8 text-slate-900 dark:text-white",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold",children:"500+"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Miembros Activos"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold",children:"10+"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Entrenadores"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl font-bold",children:"50+"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Clases Semanales"})]})]})]}),i.jsx("div",{className:"relative",children:i.jsx("img",{src:"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",alt:"Persona levantando pesas",className:"rounded-2xl shadow-2xl w-full"})})]})}),i.jsx("section",{id:"features",className:"bg-slate-50 dark:bg-slate-800 py-20 px-4",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white",children:"Todo lo que necesitas para entrenar"}),i.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300 max-w-3xl mx-auto",children:"FitnessFlow es tu aliado estratgico. Para nuestros usuarios, ofrecemos planes hiper-personalizados con IA para que alcancen sus metas de cardio y fuerza. Para los gimnasios, somos la herramienta definitiva para optimizar la gestin, aumentar la retencin de miembros y potenciar los resultados de sus clientes."}),i.jsx("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-left",children:[{icon:i.jsx(WC,{}),title:"Rutinas Personalizadas",description:"Obtn rutinas diseadas especficamente para tus objetivos, nivel de experiencia y disponibilidad de tiempo."},{icon:i.jsx(XC,{}),title:"Clases Grupales",description:"nete a clases de Yoga, Spinning, Zumba, CrossFit y ms. Reserva tu lugar fcilmente."},{icon:i.jsx(QC,{}),title:"Seguimiento de Progreso",description:"Monitorea tu evolucin con grficos detallados de peso, medidas y rendimiento."},{icon:i.jsx(ZC,{}),title:"AI Coach",description:"Recibe recomendaciones inteligentes y motivacin personalizada basada en tu progreso."},{icon:i.jsx(ek,{}),title:"Agenda Inteligente",description:"Planifica tus entrenamientos y clases con nuestro sistema de calendario avanzado."},{icon:i.jsx(tk,{}),title:"Biblioteca de Ejercicios",description:"Accede a ms de 100 ejercicios con instrucciones detalladas y videos explicativos."}].map(l=>i.jsxs("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600",children:[i.jsx("div",{className:"mb-4",children:l.icon}),i.jsx("h3",{className:"text-xl font-bold mb-2 text-slate-900 dark:text-white",children:l.title}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:l.description})]},l.title))})]})}),i.jsx(KC,{}),i.jsx("section",{id:"plans",className:"py-20 px-4 bg-white dark:bg-slate-900",children:i.jsxs("div",{className:"container mx-auto text-center",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white",children:"Planes que se adaptan a ti"}),i.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300 max-w-3xl mx-auto",children:"Elige el plan perfecto para tu estilo de vida y objetivos fitness"}),i.jsxs("div",{className:"mt-8 inline-flex bg-slate-100 dark:bg-slate-800 p-1 rounded-full",children:[i.jsx("button",{onClick:()=>s("user"),className:`px-6 py-2 rounded-full font-semibold transition-colors ${r==="user"?"bg-white dark:bg-slate-700 shadow text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-400"}`,children:"Usuario"}),i.jsx("button",{onClick:()=>s("entrenador"),className:`px-6 py-2 rounded-full font-semibold transition-colors ${r==="entrenador"?"bg-white dark:bg-slate-700 shadow text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-400"}`,children:"Entrenador"}),i.jsx("button",{onClick:()=>s("gym"),className:`px-6 py-2 rounded-full font-semibold transition-colors ${r==="gym"?"bg-white dark:bg-slate-700 shadow text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-400"}`,children:"Gimnasios"})]}),i.jsx("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:(r==="user"?rk:r==="gym"?sk:ak).map(l=>i.jsx(ik,{plan:l,planType:r,onSelect:o},l.name))})]})}),i.jsx("section",{id:"nosotros",className:"bg-slate-50 dark:bg-slate-800 py-20 px-4",children:i.jsxs("div",{className:"container mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-brand-primary dark:text-green-300 font-semibold px-3 py-1 rounded-full text-sm mb-4",children:"Nuestra Historia"}),i.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white",children:"Nacidos de la pasin por la tecnologa y el fitness"}),i.jsx("p",{className:"mt-6 text-lg text-slate-600 dark:text-slate-300",children:"Somos una pequea startup que nace en el corazn de Medelln, fundada por tres socios apasionados por la tecnologa y, en especial, por el poder transformador de la Inteligencia Artificial. Vimos una oportunidad de unir nuestras dos pasiones: el desarrollo de software y un estilo de vida saludable."}),i.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Nuestra misin es simple: democratizar el acceso a herramientas de fitness de lite. Creemos que todos, desde el atleta individual hasta el gimnasio de barrio, merecen la mejor tecnologa para alcanzar sus metas. FitnessFlow es nuestro primer paso para inspirar confianza, motivar a otros a creer en sus sueos y construir una comunidad ms fuerte y saludable, un entrenamiento a la vez."})]}),i.jsx("div",{children:i.jsx("img",{src:"https://images.pexels.com/photos/4752861/pexels-photo-4752861.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",alt:"Atleta entrenando con cuerdas en un gimnasio",className:"rounded-2xl shadow-xl w-full h-full object-cover"})})]})})]}),i.jsx(JC,{})]})},Ta=()=>i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16.22 9.53L12.98 14.18C12.79 14.43 12.5 14.58 12.19 14.58C11.88 14.58 11.59 14.43 11.4 14.18L8.16 9.53C7.96 9.27 7.9 8.93 7.99 8.6C8.08 8.27 8.32 7.99 8.65 7.9L11.83 7.11C11.93 7.09 12.03 7.08 12.13 7.08C12.23 7.08 12.33 7.09 12.43 7.11L15.61 7.9C15.94 7.99 16.18 8.27 16.27 8.6C16.36 8.93 16.3 9.27 16.22 9.53Z",fill:"#00A896"})}),Su=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),rl=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),lk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Jr=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),ck=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),uk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a10.05 10.05 0 013.453-5.034m5.658-1.745a10.05 10.05 0 015.972 1.745C20.268 7.943 21.542 12 21.542 12a10.05 10.05 0 01-2.032 4.382m-5.412-1.423a3 3 0 10-4.242-4.242M1.21 1.21l21.58 21.58"})}),dk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1m-1-8h1m-5 8h5"})}),hk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-4 0h4"})}),fk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-4 0h4"})}),mk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),pk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),gk=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),uw=()=>i.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M22.56 12.25C22.56 11.42 22.49 10.62 22.36 9.84H12.27V14.4H18.21C17.92 15.93 17.06 17.24 15.75 18.14V20.8H19.45C21.46 18.99 22.56 16.2 22.56 12.25Z",fill:"#4285F4"}),i.jsx("path",{d:"M12.27 23C15.11 23 17.51 22.09 19.45 20.8L15.75 18.14C14.82 18.79 13.64 19.23 12.27 19.23C9.61 19.23 7.31 17.45 6.47 15.03H2.64V17.81C4.58 21.04 8.14 23 12.27 23Z",fill:"#34A853"}),i.jsx("path",{d:"M6.47 15.03C6.22 14.33 6.08 13.56 6.08 12.75C6.08 11.94 6.22 11.17 6.47 10.47V7.69H2.64C1.88 9.17 1.43 10.9 1.43 12.75C1.43 14.6 1.88 16.33 2.64 17.81L6.47 15.03Z",fill:"#FBBC05"}),i.jsx("path",{d:"M12.27 6.27C13.75 6.27 15.05 6.78 16.03 7.7L19.52 4.21C17.51 2.37 15.11 1.5 12.27 1.5C8.14 1.5 4.58 3.96 2.64 7.69L6.47 10.47C7.31 8.05 9.61 6.27 12.27 6.27Z",fill:"#EA4335"})]}),s0=({onNavigateToRegister:e,onNavigateBack:t,onLoginSuccess:n,onGoogleLogin:r})=>{const[s,a]=E.useState("user"),[o,l]=E.useState(!1),[c,u]=E.useState(""),[d,p]=E.useState(""),[m,g]=E.useState(""),v=async x=>{if(x.preventDefault(),g(""),!c||!d){g("Por favor, completa todos los campos.");return}if(!/^\S+@\S+\.\S+$/.test(c)){g("Por favor, ingresa un correo electrnico vlido.");return}try{const{data:w,error:y}=await(await ss(async()=>{const{supabase:b}=await Promise.resolve().then(()=>ql);return{supabase:b}},void 0)).supabase.auth.signInWithPassword({email:c,password:d});if(y)throw y.message.includes("Invalid login credentials")?new Error("Correo o contrasea incorrectos."):y;if(w.user){const b=(await ss(async()=>{const{supabase:T}=await Promise.resolve().then(()=>ql);return{supabase:T}},void 0)).supabase,{data:_}=await b.from("profiles").select("role").eq("id",w.user.id).single(),S=(_==null?void 0:_.role)||s;n({email:c,accountType:S})}}catch(w){console.error("Login error:",w),g(w.message||"Error al iniciar sesin.")}};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-400 via-teal-400 to-blue-500 flex flex-col items-center justify-center p-4 font-sans",children:[i.jsxs("main",{className:"w-full max-w-md mx-auto relative",children:[i.jsxs("button",{onClick:t,className:"absolute top-0 left-0 -mt-12 text-white hover:text-white/80 flex items-center gap-2 font-medium transition-colors z-20",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Volver"]}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-block bg-white p-4 rounded-full shadow-lg mb-4",children:i.jsx(Ta,{})}),i.jsx("h1",{className:"text-4xl font-bold text-white drop-shadow-md",children:"FitnessFlow"}),i.jsx("p",{className:"text-white/90 text-lg font-medium",children:"Tu gimnasio digital en Medelln"})]}),i.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm rounded-xl shadow-2xl p-8 border border-white/50 dark:border-slate-700 transition-colors",children:[i.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-full mb-6",role:"group","aria-label":"Seleccionar tipo de cuenta",children:[i.jsx("button",{onClick:()=>a("user"),"aria-pressed":s==="user",className:`flex-1 py-3 rounded-full font-bold text-sm transition-colors focus-visible:ring-2 focus-visible:ring-brand-primary ${s==="user"?"bg-white dark:bg-slate-600 shadow text-brand-primary-dark dark:text-white":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Usuario"}),i.jsx("button",{onClick:()=>a("gym"),"aria-pressed":s==="gym",className:`flex-1 py-3 rounded-full font-bold text-sm transition-colors focus-visible:ring-2 focus-visible:ring-brand-primary ${s==="gym"?"bg-white dark:bg-slate-600 shadow text-brand-primary-dark dark:text-white":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Gimnasio"}),i.jsx("button",{onClick:()=>a("entrenador"),"aria-pressed":s==="entrenador",className:`flex-1 py-3 rounded-full font-bold text-sm transition-colors focus-visible:ring-2 focus-visible:ring-brand-primary ${s==="entrenador"?"bg-white dark:bg-slate-600 shadow text-brand-primary-dark dark:text-white":"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Entrenador"})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Iniciar Sesin"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-sm mt-1",children:["Como ",s==="user"?"Usuario":s==="gym"?"Gimnasio":"Entrenador"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("button",{onClick:()=>{console.log("Login intent:",s),localStorage.setItem("pendingAccountType",s),sessionStorage.setItem("pendingAccountType",s),r()},className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-white font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors focus-visible:ring-2 focus-visible:ring-brand-primary min-h-[44px]",children:[i.jsx(uw,{}),i.jsxs("span",{children:["Continuar como ",s==="user"?"Usuario":s==="gym"?"Gimnasio":"Entrenador"]})]}),i.jsxs("div",{className:"flex items-center","aria-hidden":"true",children:[i.jsx("hr",{className:"flex-grow border-t border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"px-3 text-sm text-slate-500 dark:text-slate-400 font-medium",children:"O"}),i.jsx("hr",{className:"flex-grow border-t border-slate-300 dark:border-slate-600"})]})]}),i.jsxs("form",{className:"space-y-5 mt-4",onSubmit:v,noValidate:!0,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"correo",className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-1",children:"Correo Electrnico"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-500",children:i.jsx(rl,{})}),i.jsx("input",{type:"email",id:"correo",name:"correo",value:c,onChange:x=>u(x.target.value),className:"w-full pl-10 pr-3 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-primary focus:border-brand-primary outline-none transition-shadow placeholder-slate-400 dark:placeholder-slate-400",placeholder:"tu@email.com",required:!0,"aria-invalid":!!m,"aria-describedby":m?"login-error":void 0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contrasena",className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-1",children:"Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-500",children:i.jsx(Jr,{})}),i.jsx("input",{type:o?"text":"password",id:"contrasena",name:"contrasena",value:d,onChange:x=>p(x.target.value),placeholder:"Tu contrasea",required:!0,className:"w-full pl-10 pr-12 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-primary focus:border-brand-primary outline-none transition-shadow placeholder-slate-400 dark:placeholder-slate-400","aria-invalid":!!m,"aria-describedby":m?"login-error":void 0}),i.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 focus:outline-none focus:text-brand-primary","aria-label":o?"Ocultar contrasea":"Mostrar contrasea",children:o?i.jsx(ck,{}):i.jsx(uk,{})})]})]}),m&&i.jsx("div",{id:"login-error",className:"bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 p-3 rounded",role:"alert",children:i.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm font-medium",children:m})}),i.jsx("button",{type:"submit",className:"w-full bg-brand-primary text-white font-bold py-3.5 px-4 rounded-lg hover:bg-brand-primary-dark transition-colors duration-300 shadow-lg hover:shadow-green-500/30 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-brand-primary min-h-[48px]",children:"Iniciar Sesin"})]}),i.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600 dark:text-slate-300",children:["No tienes cuenta? ",i.jsx("button",{onClick:e,className:"font-bold text-brand-primary hover:text-brand-primary-dark hover:underline focus:outline-none focus:ring-2 focus:ring-brand-primary rounded p-1",children:"Regstrate aqu"})]})]})]}),i.jsx("footer",{className:"absolute bottom-4 text-center w-full px-4",children:i.jsx("p",{className:"text-white/90 text-sm font-medium drop-shadow-sm",children:"Plataforma segura para la gestin de tu entrenamiento"})})]})},Je=({id:e,name:t,label:n,type:r="text",placeholder:s,icon:a,required:o=!0,value:l,onChange:c,error:u,as:d="input"})=>i.jsxs("div",{children:[i.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:[n,o&&" *"]}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute top-2.5 left-0 flex items-center pl-3 pointer-events-none text-slate-400",children:a}),d==="input"?i.jsx("input",{type:r,id:e,name:t,value:l,onChange:c,className:`w-full pl-10 pr-3 py-2 bg-slate-100 dark:bg-slate-700 border rounded-md text-slate-800 dark:text-white focus:ring-2 outline-none placeholder-slate-400 dark:placeholder-slate-400 ${u?"border-red-500 focus:ring-red-500":"border-slate-200 dark:border-slate-600 focus:ring-brand-primary"}`,placeholder:s,required:o}):i.jsx("textarea",{id:e,name:t,value:l,onChange:c,rows:3,className:`w-full pl-10 pr-3 py-2 bg-slate-100 dark:bg-slate-700 border rounded-md text-slate-800 dark:text-white focus:ring-2 outline-none placeholder-slate-400 dark:placeholder-slate-400 ${u?"border-red-500 focus:ring-red-500":"border-slate-200 dark:border-slate-600 focus:ring-brand-primary"}`,placeholder:s,required:o})]}),u&&i.jsx("p",{className:"mt-1 text-xs text-red-600",children:u})]}),xk={nombre:"",apellido:"",correo:"",contrasena:"",confirmarContrasena:"",terminos:!1},yk={nombreGimnasio:"",nit:"",correo:"",contrasena:"",confirmarContrasena:"",terminos:!1},vk={nombre:"",cc:"",profession:"",professionalDescription:"",phone:"",address:"",correo:"",contrasena:"",confirmarContrasena:"",terminos:!1},bk=({onNavigateToLogin:e,onNavigateBack:t,onRegisterSuccess:n,onGoogleLogin:r,initialAccountType:s,initialPlan:a})=>{const[o,l]=E.useState(s),[c,u]=E.useState(xk),[d,p]=E.useState({}),[m,g]=E.useState(yk),[v,x]=E.useState({}),[w,y]=E.useState(vk),[b,_]=E.useState({});E.useEffect(()=>{l(s)},[s]);const S=G=>W=>{const{name:K,value:B,type:P}=W.target,L=W.target.checked;G(V=>({...V,[K]:P==="checkbox"?L:B}))},T=S(u),N=S(g),C=S(y),I=()=>{const G={};return c.nombre.trim()||(G.nombre="El nombre es obligatorio."),c.apellido.trim()||(G.apellido="El apellido es obligatorio."),/^\S+@\S+\.\S+$/.test(c.correo)||(G.correo="El correo electrnico no es vlido."),c.contrasena.length<6&&(G.contrasena="La contrasea debe tener al menos 6 caracteres."),c.contrasena!==c.confirmarContrasena&&(G.confirmarContrasena="Las contraseas no coinciden."),c.terminos||(G.terminos="Debes aceptar los trminos y condiciones."),p(G),Object.keys(G).length===0},A=()=>{const G={};return m.nombreGimnasio.trim()||(G.nombreGimnasio="El nombre del gimnasio es obligatorio."),/^\d{3}\.\d{3}\.\d{3}-\d$/.test(m.nit)||(G.nit="Formato de NIT invlido. Ej: 900.123.456-7"),/^\S+@\S+\.\S+$/.test(m.correo)||(G.correo="El correo electrnico no es vlido."),m.contrasena.length<6&&(G.contrasena="La contrasea debe tener al menos 6 caracteres."),m.contrasena!==m.confirmarContrasena&&(G.confirmarContrasena="Las contraseas no coinciden."),m.terminos||(G.terminos="Debes aceptar los trminos y condiciones."),x(G),Object.keys(G).length===0},R=()=>{const G={};return w.nombre.trim()||(G.nombre="El nombre completo es obligatorio."),/^\d{1,3}(?:\.\d{3})*(?:-\d)?$/.test(w.cc)||(G.cc="El formato de la CC es invlido."),w.profession.trim()||(G.profession="La profesin es obligatoria."),/^\S+@\S+\.\S+$/.test(w.correo)||(G.correo="El correo electrnico no es vlido."),w.contrasena.length<6&&(G.contrasena="La contrasea debe tener al menos 6 caracteres."),w.contrasena!==w.confirmarContrasena&&(G.confirmarContrasena="Las contraseas no coinciden."),w.terminos||(G.terminos="Debes aceptar los trminos y condiciones."),_(G),Object.keys(G).length===0},O=async G=>{var P;G.preventDefault();let W="",K="",B="";if(o==="user"){if(!I())return;W=c.correo,K=c.contrasena,B=`${c.nombre} ${c.apellido}`}else if(o==="gym"){if(!A())return;W=m.correo,K=m.contrasena,B=m.nombreGimnasio}else if(o==="entrenador"){if(!R())return;W=w.correo,K=w.contrasena,B=w.nombre}try{const{data:L,error:V}=await(await ss(async()=>{const{supabase:j}=await Promise.resolve().then(()=>ql);return{supabase:j}},void 0)).supabase.auth.signUp({email:W,password:K,options:{data:{full_name:B,account_type:o,plan:a}}});if(V)throw V;if(!L.user)throw new Error("No se pudo crear el usuario");const k=L.user.id,q=(await ss(async()=>{const{supabase:j}=await Promise.resolve().then(()=>ql);return{supabase:j}},void 0)).supabase,{error:$}=await q.from("profiles").upsert({id:k,email:W,full_name:B,role:o,plan:a,subscription_status:"trial",trial_end_date:new Date(Date.now()+15*24*60*60*1e3).toISOString(),has_completed_onboarding:!1,is_gym_member:!1});if($)throw console.error("Profile Error:",$),$;if(o==="gym"){const{error:j}=await q.from("gym_details").insert({profile_id:k,gym_name:m.nombreGimnasio,nit:m.nit,address:"Medelln"});j&&console.error("Gym Details Error:",j)}else if(o==="entrenador"){const{error:j}=await q.from("coach_details").insert({profile_id:k,profession:w.profession,description:w.professionalDescription,phone:w.phone,address:w.address});j&&console.error("Coach Details Error:",j)}sessionStorage.setItem("isNewRegistration","true"),n({email:W,name:B,accountType:o,plan:a})}catch(L){console.error("Registration failed:",L),(P=L.message)!=null&&P.includes("already registered")?o==="user"?p({...d,correo:"Este correo ya est registrado."}):o==="gym"?x({...v,correo:"Este correo ya est registrado."}):_({...b,correo:"Este correo ya est registrado."}):alert(`Error al registrar: ${L.message}`)}},D=()=>{switch(o){case"user":return"Usuario";case"gym":return"Gimnasio";case"entrenador":return"Entrenador"}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-400 via-teal-400 to-blue-500 flex items-center justify-center p-4 font-sans",children:i.jsxs("main",{className:"w-full max-w-4xl mx-auto relative",children:[i.jsxs("button",{onClick:t,className:"absolute top-0 left-0 -mt-10 md:-mt-12 text-white hover:text-white/80 flex items-center gap-2 font-medium transition-colors z-20",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Volver"]}),i.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm rounded-xl shadow-2xl p-6 md:p-10 transition-colors duration-300",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-block bg-white dark:bg-slate-700 p-3 rounded-full shadow-md mb-3",children:i.jsx(Ta,{})}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:"FitnessFlow"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"nete a la comunidad fitness de Medelln"})]}),i.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-full mb-6",children:[i.jsx("button",{onClick:()=>l("user"),className:`w-1/3 py-2 rounded-full font-semibold transition-colors ${o==="user"?"bg-white dark:bg-slate-600 shadow text-brand-primary dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:"Soy un Usuario"}),i.jsx("button",{onClick:()=>l("gym"),className:`w-1/3 py-2 rounded-full font-semibold transition-colors ${o==="gym"?"bg-white dark:bg-slate-600 shadow text-brand-primary dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:"Soy un Gimnasio"}),i.jsx("button",{onClick:()=>l("entrenador"),className:`w-1/3 py-2 rounded-full font-semibold transition-colors ${o==="entrenador"?"bg-white dark:bg-slate-600 shadow text-brand-primary dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:"Soy un Entrenador"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:["Crear Cuenta de ",D()," - Plan ",i.jsx("span",{className:"capitalize text-brand-primary",children:a})]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Completa tu informacin para comenzar tu journey fitness"})]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[i.jsxs("button",{onClick:()=>{console.log("Guardando intencin de rol:",o),localStorage.setItem("pendingAccountType",o),sessionStorage.setItem("pendingAccountType",o),r()},className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-white font-semibold hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(uw,{}),i.jsxs("span",{children:["Continuar con Google como ",D()]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("hr",{className:"flex-grow border-t border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"px-3 text-sm text-slate-500 dark:text-slate-400",children:"O con correo"}),i.jsx("hr",{className:"flex-grow border-t border-slate-300 dark:border-slate-600"})]})]}),i.jsxs("form",{className:"space-y-6",onSubmit:O,noValidate:!0,children:[o==="user"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"nombre",name:"nombre",label:"Nombre",placeholder:"Tu nombre",icon:i.jsx(Su,{}),value:c.nombre,onChange:T,error:d.nombre}),i.jsx(Je,{id:"apellido",name:"apellido",label:"Apellido",placeholder:"Tu apellido",icon:i.jsx(Su,{}),value:c.apellido,onChange:T,error:d.apellido})]}),i.jsx(Je,{id:"correo",name:"correo",label:"Correo Electrnico",type:"email",placeholder:"tu@email.com",icon:i.jsx(rl,{}),value:c.correo,onChange:T,error:d.correo}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"contrasena",name:"contrasena",label:"Contrasea",type:"password",placeholder:"Mnimo 6 caracteres",icon:i.jsx(Jr,{}),value:c.contrasena,onChange:T,error:d.contrasena}),i.jsx(Je,{id:"confirmarContrasena",name:"confirmarContrasena",label:"Confirmar Contrasea",type:"password",placeholder:"Repetir contrasea",icon:i.jsx(Jr,{}),value:c.confirmarContrasena,onChange:T,error:d.confirmarContrasena})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"terminos",name:"terminos",type:"checkbox",required:!0,checked:c.terminos,onChange:T,className:"h-4 w-4 text-brand-primary focus:ring-brand-primary border-slate-300 rounded"}),i.jsxs("label",{htmlFor:"terminos",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:["Acepto los ",i.jsx("a",{href:"#",className:"font-medium text-brand-primary hover:underline",children:"trminos y condiciones"})," de FitnessFlow *"]})]}),d.terminos&&i.jsx("p",{className:"text-xs text-red-600 -mt-4",children:d.terminos})]}),o==="gym"&&i.jsxs(i.Fragment,{children:[i.jsx(Je,{id:"nombreGimnasio",name:"nombreGimnasio",label:"Nombre del Gimnasio",placeholder:"Mi Gimnasio Fitness",icon:i.jsx(dk,{}),value:m.nombreGimnasio,onChange:N,error:v.nombreGimnasio}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"nit",name:"nit",label:"NIT",placeholder:"900.123.456-7",icon:i.jsx(hk,{}),value:m.nit,onChange:N,error:v.nit}),i.jsx(Je,{id:"correo",name:"correo",label:"Correo Electrnico",type:"email",placeholder:"contacto@gimnasio.com",icon:i.jsx(rl,{}),value:m.correo,onChange:N,error:v.correo})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"contrasena",name:"contrasena",label:"Contrasea",type:"password",placeholder:"Mnimo 6 caracteres",icon:i.jsx(Jr,{}),value:m.contrasena,onChange:N,error:v.contrasena}),i.jsx(Je,{id:"confirmarContrasena",name:"confirmarContrasena",label:"Confirmar Contrasea",type:"password",placeholder:"Repetir contrasea",icon:i.jsx(Jr,{}),value:m.confirmarContrasena,onChange:N,error:v.confirmarContrasena})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"terminosGym",name:"terminos",type:"checkbox",required:!0,checked:m.terminos,onChange:N,className:"h-4 w-4 text-brand-primary focus:ring-brand-primary border-slate-300 rounded"}),i.jsxs("label",{htmlFor:"terminosGym",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:["Acepto los ",i.jsx("a",{href:"#",className:"font-medium text-brand-primary hover:underline",children:"trminos y condiciones"})," de FitnessFlow *"]})]}),v.terminos&&i.jsx("p",{className:"text-xs text-red-600 -mt-4",children:v.terminos})]}),o==="entrenador"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"nombre",name:"nombre",label:"Nombre Completo",placeholder:"Tu nombre completo",icon:i.jsx(Su,{}),value:w.nombre,onChange:C,error:b.nombre}),i.jsx(Je,{id:"cc",name:"cc",label:"CC",placeholder:"123.456.789-0",icon:i.jsx(fk,{}),value:w.cc,onChange:C,error:b.cc})]}),i.jsx(Je,{id:"profession",name:"profession",label:"Profesin",placeholder:"Ej: Entrenador Personal Certificado",icon:i.jsx(mk,{}),value:w.profession,onChange:C,error:b.profession}),i.jsx(Je,{id:"professionalDescription",name:"professionalDescription",label:"Descripcin Profesional",as:"textarea",placeholder:"Describe tu experiencia, especialidades, etc.",icon:i.jsx(pk,{}),value:w.professionalDescription,onChange:C,required:!1,error:b.professionalDescription}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"phone",name:"phone",label:"Telfono",placeholder:"3001234567",icon:i.jsx(lk,{}),value:w.phone,onChange:C,required:!1,error:b.phone}),i.jsx(Je,{id:"address",name:"address",label:"Direccin",placeholder:"Calle 10 #43A-50, Medelln",icon:i.jsx(gk,{}),value:w.address,onChange:C,required:!1,error:b.address})]}),i.jsx(Je,{id:"correo",name:"correo",label:"Correo Electrnico",type:"email",placeholder:"tu@email.com",icon:i.jsx(rl,{}),value:w.correo,onChange:C,error:b.correo}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Je,{id:"contrasena",name:"contrasena",label:"Contrasea",type:"password",placeholder:"Mnimo 6 caracteres",icon:i.jsx(Jr,{}),value:w.contrasena,onChange:C,error:b.contrasena}),i.jsx(Je,{id:"confirmarContrasena",name:"confirmarContrasena",label:"Confirmar Contrasea",type:"password",placeholder:"Repetir contrasea",icon:i.jsx(Jr,{}),value:w.confirmarContrasena,onChange:C,error:b.confirmarContrasena})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"terminosCoach",name:"terminos",type:"checkbox",required:!0,checked:w.terminos,onChange:C,className:"h-4 w-4 text-brand-primary focus:ring-brand-primary border-slate-300 rounded"}),i.jsxs("label",{htmlFor:"terminosCoach",className:"ml-2 block text-sm text-slate-700 dark:text-slate-300",children:["Acepto los ",i.jsx("a",{href:"#",className:"font-medium text-brand-primary hover:underline",children:"trminos y condiciones"})," de FitnessFlow *"]})]}),b.terminos&&i.jsx("p",{className:"text-xs text-red-600 -mt-4",children:b.terminos})]}),i.jsx("button",{type:"submit",className:"w-full bg-brand-primary text-white font-bold py-3 px-4 rounded-lg hover:bg-brand-secondary transition-colors duration-300 shadow-lg hover:shadow-green-500/50",children:"Crear Cuenta"})]}),i.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600 dark:text-slate-300",children:["Ya tienes cuenta? ",i.jsx("button",{onClick:e,className:"font-medium text-brand-primary hover:underline",children:"Inicia sesin aqu"})]})]})]})})},wk=({trialEndDate:e,onSubscribeClick:t})=>{const r=(()=>{const s=new Date,a=e.getTime()-s.getTime(),o=Math.ceil(a/(1e3*3600*24));return o>0?o:0})();return i.jsx("div",{className:"bg-yellow-400 text-yellow-900 text-sm font-semibold p-2 text-center",children:i.jsxs("p",{children:["Te quedan ",r," ",r===1?"da":"das"," de prueba.",i.jsx("button",{onClick:t,className:"ml-2 underline font-bold hover:text-yellow-950",children:"Suscrbete ahora"})]})})},ks={cardio_hiit:[{id:"ch1",title:"Houdini",artist:"Dua Lipa",platform:"YouTube",url:"https://www.youtube.com/watch?v=L0c5RqhlJg4",category:"cardio_hiit",bpm:117},{id:"ch2",title:"Espresso",artist:"Sabrina Carpenter",platform:"YouTube",url:"https://www.youtube.com/watch?v=3n1Jb_t9BBU",category:"cardio_hiit",bpm:110},{id:"ch3",title:"Greedy",artist:"Tate McRae",platform:"YouTube",url:"https://www.youtube.com/watch?v=C2_xH647s4g",category:"cardio_hiit",bpm:111},{id:"ch4",title:"Lil Boo Thang",artist:"Paul Russell",platform:"YouTube",url:"https://www.youtube.com/watch?v=j_H3G03s9Y8",category:"cardio_hiit",bpm:114},{id:"ch5",title:"Padam Padam",artist:"Kylie Minogue",platform:"YouTube",url:"https://www.youtube.com/watch?v=q_0E733w_tU",category:"cardio_hiit",bpm:128},{id:"ch6",title:"Miracle",artist:"Calvin Harris",platform:"YouTube",url:"https://www.youtube.com/watch?v=eG1s18-h-pU",category:"cardio_hiit",bpm:143},{id:"ch7",title:"Rush",artist:"Troye Sivan",platform:"YouTube",url:"https://www.youtube.com/watch?v=G2_h94NnQ0Q",category:"cardio_hiit",bpm:126},{id:"ch8",title:"Dance The Night",artist:"Dua Lipa",platform:"YouTube",url:"https://www.youtube.com/watch?v=Cp-CKX_CNIE",category:"cardio_hiit",bpm:110},{id:"ch9",title:"Texas Hold 'Em",artist:"Beyonc",platform:"YouTube",url:"https://www.youtube.com/watch?v=yYn-h3_g-6c",category:"cardio_hiit",bpm:110},{id:"ch10",title:"Water",artist:"Tyla",platform:"YouTube",url:"https://www.youtube.com/watch?v=o8jG8fK2k64",category:"cardio_hiit",bpm:117},{id:"ch11",title:"I'm Good (Blue)",artist:"David Guetta",platform:"YouTube",url:"https://www.youtube.com/watch?v=J7jW07kC_9M",category:"cardio_hiit",bpm:128}],fuerza:[{id:"fz1",title:"Till I Collapse",artist:"Eminem",platform:"YouTube",url:"https://www.youtube.com/watch?v=ytQ5CYE1VZw",category:"fuerza",bpm:171},{id:"fz2",title:"Dreams and Nightmares",artist:"Meek Mill",platform:"YouTube",url:"https://www.youtube.com/watch?v=ZlP7Y_bS1_Q",category:"fuerza",bpm:83},{id:"fz3",title:"Humble.",artist:"Kendrick Lamar",platform:"YouTube",url:"https://www.youtube.com/watch?v=tvTRZJ-4EyI",category:"fuerza",bpm:150},{id:"fz4",title:"First Person Shooter",artist:"Drake ft. J. Cole",platform:"YouTube",url:"https://www.youtube.com/watch?v=pYg1aV0n4sY",category:"fuerza",bpm:82},{id:"fz5",title:"Win",artist:"Jay Rock",platform:"YouTube",url:"https://www.youtube.com/watch?v=jrLhF3tM3rY",category:"fuerza",bpm:149},{id:"fz6",title:"Rich Flex",artist:"Drake & 21 Savage",platform:"YouTube",url:"https://www.youtube.com/watch?v=I4DjHHVHWAE",category:"fuerza",bpm:154},{id:"fz7",title:"Going Bad",artist:"Meek Mill ft. Drake",platform:"YouTube",url:"https://www.youtube.com/watch?v=3u_F6ZfS7e8",category:"fuerza",bpm:86},{id:"fz8",title:"POWER",artist:"Kanye West",platform:"YouTube",url:"https://www.youtube.com/watch?v=L53gjP-TtGE",category:"fuerza",bpm:154},{id:"fz9",title:"Black Skinhead",artist:"Kanye West",platform:"YouTube",url:"https://www.youtube.com/watch?v=q604eed4ad0",category:"fuerza",bpm:130}],running_cycling:[{id:"r1",title:"40 Best Running Songs 2024",artist:"Power Music",platform:"YouTube",url:"https://www.youtube.com/watch?v=fRj6P2uG9gI",category:"running_cycling",bpm:170},{id:"r2",title:"Running High Tempo Mix",artist:"Workout Music Source",platform:"YouTube",url:"https://www.youtube.com/watch?v=g7Q2R8nJt-U",category:"running_cycling",bpm:160},{id:"r3",title:"Can't Stop",artist:"Red Hot Chili Peppers",platform:"YouTube",url:"https://www.youtube.com/watch?v=BfOdWSiyWoc",category:"running_cycling",bpm:134},{id:"r4",title:"Marathon Training Mix",artist:"Runner's World",platform:"YouTube",url:"https://www.youtube.com/watch?v=rC5S9eF-d9o",category:"running_cycling",bpm:150}],yoga_recovery:[{id:"y1",title:"Ultimate Chill: Modern Yoga",artist:"Relaxing Music",platform:"YouTube",url:"https://www.youtube.com/watch?v=_e_4jU_e8_4",category:"yoga_recovery",bpm:60},{id:"y2",title:"1 HOUR Best Yoga Music",artist:"YellowBrickCinema",platform:"YouTube",url:"https://www.youtube.com/watch?v=q7bIe5h1-Rk",category:"yoga_recovery",bpm:50},{id:"y3",title:"Peaceful Yoga Music",artist:"Buddha's Lounge",platform:"YouTube",url:"https://www.youtube.com/watch?v=kGjW9l5Xh9o",category:"yoga_recovery",bpm:45},{id:"y4",title:"Weightless",artist:"Marconi Union",platform:"YouTube",url:"https://www.youtube.com/watch?v=UfcAVejslrU",category:"yoga_recovery",bpm:60},{id:"y5",title:"Deep Relaxation Mix",artist:"Soundings of the Planet",platform:"YouTube",url:"https://www.youtube.com/watch?v=e_b4N3t97iI",category:"yoga_recovery",bpm:55}]},_k={async getCatalog(){try{const{data:e,error:t}=await M.from("music_tracks").select("*");if(t||!e||e.length===0)return console.warn("Usando catlogo local de msica (Supabase vaco o error)"),ks;const n={cardio_hiit:[],fuerza:[],running_cycling:[],yoga_recovery:[]};return e.forEach(r=>{n[r.category]&&n[r.category].push(r)}),{cardio_hiit:n.cardio_hiit.length?n.cardio_hiit:ks.cardio_hiit,fuerza:n.fuerza.length?n.fuerza:ks.fuerza,running_cycling:n.running_cycling.length?n.running_cycling:ks.running_cycling,yoga_recovery:n.yoga_recovery.length?n.yoga_recovery:ks.yoga_recovery}}catch(e){return console.error("Error fetching music:",e),ks}}},a0=[{key:"cardio_hiit",label:"Cardio",icon:"",color:"from-blue-500 to-cyan-400"},{key:"fuerza",label:"Fuerza",icon:"",color:"from-red-600 to-orange-600"},{key:"running_cycling",label:"Run/Ride",icon:"",color:"from-green-500 to-emerald-400"},{key:"yoga_recovery",label:"Yoga",icon:"",color:"from-indigo-400 to-purple-500"}],Sk=()=>i.jsxs("div",{className:"flex items-end gap-0.5 h-4",children:[i.jsx("div",{className:"w-1 bg-brand-primary animate-[bounce_1s_infinite] h-2"}),i.jsx("div",{className:"w-1 bg-brand-primary animate-[bounce_1.2s_infinite] h-3"}),i.jsx("div",{className:"w-1 bg-brand-primary animate-[bounce_0.8s_infinite] h-1.5"}),i.jsx("div",{className:"w-1 bg-brand-primary animate-[bounce_1.1s_infinite] h-4"})]}),Nk=e=>{const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,n=e.match(t);return n&&n[2].length===11?n[2]:null},Ek=({isOpen:e,onClose:t})=>{const[n,r]=E.useState(null),[s,a]=E.useState("cardio_hiit"),[o,l]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{(async()=>{const w=await _k.getCatalog();r(w)})()},[]);const d=x=>{(o==null?void 0:o.id)===x.id?u(!c):(l(x),u(!0))},p=e?"opacity-100 pointer-events-auto translate-y-0":"opacity-0 pointer-events-none -translate-y-2",m=n?n[s]:[],g=o?Nk(o.url):null,v=g?`https://www.youtube.com/embed/${g}?autoplay=${c?1:0}&enablejsapi=1&controls=0&loop=1`:"";return i.jsxs(i.Fragment,{children:[e&&i.jsx("div",{className:"fixed inset-0 z-40 bg-black/10 backdrop-blur-[1px] md:hidden",onClick:t}),i.jsx("div",{className:`fixed inset-0 md:inset-auto md:absolute md:top-16 md:right-10 w-full md:w-96 z-50 transition-all duration-300 ease-in-out transform origin-top-right ${p}`,children:i.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl border-t md:border border-slate-200 dark:border-slate-700 md:rounded-2xl shadow-2xl overflow-hidden flex flex-col h-full md:h-auto md:max-h-[80vh] mt-16 md:mt-0",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-900 to-slate-800 text-white flex justify-between items-center flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center ${c?"animate-pulse shadow-[0_0_10px_rgba(0,255,200,0.5)]":""}`,children:i.jsx("span",{className:"text-lg",children:""})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-sm tracking-wide",children:"FitnessFlow Music"}),o?i.jsxs("span",{className:"text-[10px] text-brand-primary truncate max-w-[150px] block",children:[c?"Reproduciendo:":"Pausado:"," ",o.title]}):i.jsx("span",{className:"text-[10px] text-slate-400",children:"Selecciona tu ritmo"})]})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:""})]}),g&&i.jsxs("div",{className:"w-full aspect-video bg-black flex-shrink-0 relative group",children:[!c&&i.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10 pointer-events-none",children:i.jsx("span",{className:"text-white text-xs",children:"Pausado"})}),i.jsx("iframe",{width:"100%",height:"100%",src:v,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})]}),i.jsx("div",{className:"flex overflow-x-auto p-2 gap-2 border-b border-slate-200 dark:border-slate-700 scrollbar-hide flex-shrink-0",children:a0.map(x=>i.jsxs("button",{onClick:()=>a(x.key),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold whitespace-nowrap transition-colors ${s===x.key?"bg-brand-primary text-slate-900":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[i.jsx("span",{children:x.icon}),x.label]},x.key))}),i.jsx("div",{className:"p-2 space-y-1 overflow-y-auto flex-1 min-h-[200px]",children:m.length===0?i.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No hay pistas en esta categora."}):m.map(x=>{const w=(o==null?void 0:o.id)===x.id,y=a0.find(b=>b.key===s);return i.jsxs("button",{onClick:()=>d(x),className:`w-full flex items-center gap-3 p-2 rounded-xl transition-all duration-200 group cursor-pointer text-left border ${w?"bg-slate-100 dark:bg-slate-700/60 border-brand-primary/30":"border-transparent hover:bg-slate-50 dark:hover:bg-slate-700/30"}`,children:[i.jsxs("div",{className:`relative w-10 h-10 rounded-lg bg-gradient-to-br ${(y==null?void 0:y.color)||"from-gray-500 to-gray-600"} flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition-transform flex-shrink-0`,children:[i.jsx("span",{className:"text-xs",children:""}),w&&c&&i.jsx("div",{className:"absolute inset-0 bg-black/20 rounded-lg flex items-center justify-center",children:i.jsx(Sk,{})})]}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("p",{className:`font-bold text-sm truncate ${w?"text-brand-primary":"text-slate-800 dark:text-slate-200"}`,children:x.title}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:x.artist})]}),i.jsx("div",{className:"flex flex-col items-end gap-1",children:i.jsxs("span",{className:"text-[10px] font-bold bg-slate-100 dark:bg-slate-600 text-slate-500 dark:text-slate-300 px-1.5 py-0.5 rounded-full",children:[x.bpm," BPM"]})})]},x.id)})}),i.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 text-center",children:i.jsx("p",{className:"text-[10px] text-slate-400",children:"Powered by YouTube Embeds"})})]})})]})},Ck=({user:e,onClose:t})=>{const[n,r]=E.useState(!1),s=()=>r(!n),a=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(e.email)}&color=0f172a`;return i.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex flex-col items-center justify-center p-4 animate-fade-in",onClick:t,children:[i.jsxs("div",{className:"text-white text-center mb-6",onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Tu Pase Digital"}),i.jsx("p",{className:"text-white/70 text-sm",children:"Escanea este cdigo en el torniquete o recepcin"})]}),i.jsx("div",{className:"relative w-full max-w-sm aspect-[1.586/1] cursor-pointer group perspective-1000",onClick:o=>{o.stopPropagation(),s()},children:i.jsxs("div",{className:`relative w-full h-full duration-700 preserve-3d transition-transform ${n?"rotate-y-180":""}`,children:[i.jsxs("div",{className:"absolute inset-0 w-full h-full backface-hidden rounded-2xl overflow-hidden shadow-2xl bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 text-white p-6 flex flex-col justify-between",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-brand-primary via-transparent to-transparent"}),i.jsxs("div",{className:"flex justify-between items-start z-10",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"bg-white/10 p-1.5 rounded-lg backdrop-blur-sm",children:i.jsx("div",{className:"scale-75",children:i.jsx(Ta,{})})}),i.jsx("span",{className:"font-bold tracking-wider text-lg",children:"FITNESSFLOW"})]}),i.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase border ${e.subscriptionStatus==="subscribed"?"bg-green-500/20 border-green-500 text-green-400":"bg-red-500/20 border-red-500 text-red-400"}`,children:e.subscriptionStatus==="subscribed"?"Activo":"Inactivo"})]}),i.jsx("div",{className:"w-12 h-9 rounded bg-gradient-to-br from-yellow-200 to-yellow-500 border border-yellow-600 opacity-80 z-10"}),i.jsxs("div",{className:"z-10",children:[i.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-widest mb-1",children:"Miembro"}),i.jsx("p",{className:"text-xl font-bold font-mono uppercase tracking-wide shadow-black drop-shadow-md",children:e.name}),i.jsxs("div",{className:"flex justify-between items-end mt-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:"ID"}),i.jsx("p",{className:"font-mono text-sm",children:"9928 1029 3847"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:"Plan"}),i.jsx("p",{className:"font-bold text-brand-primary uppercase",children:e.plan})]})]})]})]}),i.jsxs("div",{className:"absolute inset-0 w-full h-full backface-hidden rotate-y-180 rounded-2xl overflow-hidden shadow-2xl bg-white border-4 border-slate-900 p-6 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-12 bg-slate-900"}),i.jsx("div",{className:"mt-8 bg-white p-2 rounded-xl border-2 border-slate-100 shadow-inner",children:i.jsx("img",{src:a,alt:"QR Access Code",className:"w-32 h-32 object-contain"})}),i.jsx("p",{className:"mt-4 text-slate-900 font-bold text-sm tracking-wider",children:"ESCANEAR PARA ENTRAR"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:e.email})]})]})}),i.jsxs("div",{className:"mt-8 text-white/50 text-sm flex items-center gap-2 animate-pulse",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Toca la tarjeta para voltear"]}),i.jsx("button",{onClick:t,className:"mt-8 bg-white/10 hover:bg-white/20 text-white px-6 py-2 rounded-full font-semibold transition-colors border border-white/20",children:"Cerrar"})]})},kk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Tk=({className:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${e||""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),jk=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-4 0h4"})}),Ak=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Rk=({user:e,onLogout:t,theme:n,onToggleTheme:r,onMarkNotificationsAsRead:s,onNavigateToLogin:a,onNavigateToRegister:o})=>{var C,I;const[l,c]=E.useState(!1),[u,d]=E.useState(!1),[p,m]=E.useState(!1),[g,v]=E.useState(!1),x=E.useRef(null),w=E.useRef(null),y=E.useRef(null),b=e.email==="guest@fitnessflow.pro",_=b?"IN":e.name.substring(0,2).toUpperCase(),S=((C=e.notifications)==null?void 0:C.filter(A=>!A.read).length)||0,T=()=>{!u&&S>0&&s(),d(A=>!A),p&&m(!1),c(!1)},N=()=>{m(A=>!A),d(!1),c(!1)};return E.useEffect(()=>{const A=R=>{x.current&&!x.current.contains(R.target)&&c(!1),w.current&&!w.current.contains(R.target)&&d(!1),y.current&&!y.current.contains(R.target)&&m(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]),i.jsxs(i.Fragment,{children:[!b&&e.subscriptionStatus==="trial"&&e.trialEndDate&&i.jsx(wk,{trialEndDate:e.trialEndDate,onSubscribeClick:()=>{}}),i.jsx("header",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-b border-slate-100 dark:border-slate-800 w-full sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"h-full px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[i.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[i.jsx("div",{className:"h-8 w-8 bg-brand-primary rounded-lg flex items-center justify-center text-white font-bold scale-90",children:i.jsx("span",{className:"text-xs",children:i.jsx(Ta,{})})}),i.jsx("h1",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"FitnessFlow"})]}),i.jsx("div",{className:"hidden md:block",children:i.jsx("p",{className:"text-slate-400 text-sm font-medium",children:new Date().toLocaleDateString("es-CO",{weekday:"long",day:"numeric",month:"long"})})}),i.jsx("div",{className:"flex items-center gap-2 md:gap-4",children:b?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:a,className:"text-slate-600 hover:text-brand-primary font-medium px-3 py-2 rounded-lg transition-colors text-sm",children:"Ingresar"}),i.jsx("button",{onClick:o,className:"bg-brand-primary text-white font-semibold px-3 py-2 rounded-lg hover:bg-brand-secondary transition-colors text-sm",children:"Registrarse"})]}):i.jsxs(i.Fragment,{children:[e.accountType==="user"&&i.jsxs("button",{onClick:()=>v(!0),className:"hidden md:flex items-center gap-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 px-3 py-1.5 rounded-full text-xs font-bold transition-colors border border-transparent hover:border-brand-primary/30",title:"Mi Pase Digital",children:[i.jsx(jk,{}),i.jsx("span",{className:"hidden lg:inline",children:"Mi Pase"})]}),i.jsxs("div",{className:"relative",ref:y,children:[i.jsxs("button",{onClick:N,className:`p-2.5 rounded-full transition-all duration-300 ease-out group relative ${p?"bg-gradient-to-r from-brand-primary to-brand-secondary text-white shadow-lg shadow-brand-primary/40 scale-110 rotate-6 ring-2 ring-offset-2 ring-brand-primary/50 dark:ring-offset-slate-900":"text-slate-400 dark:text-slate-500 hover:text-brand-primary hover:bg-slate-100 dark:hover:bg-slate-800 hover:scale-110 hover:shadow-md"}`,title:"Msica Fitness",children:[i.jsx("span",{className:"sr-only",children:"Abrir reproductor de msica"}),i.jsx(Tk,{className:`transition-transform duration-300 ${p?"animate-pulse":"group-hover:rotate-12"}`})]}),i.jsx(Ek,{isOpen:p,onClose:()=>m(!1)})]}),i.jsxs("div",{className:"relative",ref:w,children:[i.jsxs("button",{onClick:T,className:"relative text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[i.jsx("span",{className:"sr-only",children:"Ver notificaciones"}),i.jsx(kk,{}),S>0&&i.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white dark:ring-slate-900 animate-pulse"})]}),u&&i.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-80 rounded-xl shadow-2xl bg-white dark:bg-slate-800 ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in z-50",children:[i.jsxs("div",{className:"px-4 py-3 text-sm text-slate-700 dark:text-slate-200 font-bold border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[i.jsx("span",{children:"Notificaciones"}),i.jsx("span",{className:"text-xs font-normal text-slate-400",children:"Marcar ledas"})]}),((I=e.notifications)==null?void 0:I.length)>0?i.jsx("div",{className:"py-1 max-h-80 overflow-y-auto",children:e.notifications.map(A=>i.jsxs("div",{className:`relative p-3 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-50 dark:border-slate-700 last:border-0 ${A.read?"":"bg-blue-50/50 dark:bg-blue-900/10"}`,children:[!A.read&&i.jsx("span",{className:"absolute left-2 top-4 h-2 w-2 rounded-full bg-brand-primary"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:`text-slate-800 dark:text-slate-100 ${A.read?"font-medium":"font-bold"}`,children:A.message}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:A.date})]})]},A.id))}):i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No tienes notificaciones nuevas."})})]})]}),i.jsxs("div",{className:"relative",ref:x,children:[i.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-3 focus:outline-none group",children:[i.jsxs("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-brand-primary to-brand-secondary flex items-center justify-center ring-2 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 ring-transparent group-hover:ring-brand-primary/30 transition-all relative",children:[i.jsx("span",{className:"font-bold text-sm text-white",children:_}),e.plan==="premium"&&i.jsx("span",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-sm",children:i.jsx(Ak,{})})]}),i.jsxs("div",{className:"hidden md:block text-left",children:[i.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 group-hover:text-brand-primary transition-colors",children:e.name.split(" ")[0]}),i.jsx("p",{className:"text-xs text-slate-400 capitalize",children:e.accountType})]}),i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400 hidden md:block group-hover:text-slate-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),l&&i.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-xl shadow-2xl py-2 bg-white dark:bg-slate-800 ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in z-50",role:"menu",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-slate-700 mb-1 md:hidden",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100 truncate",children:e.name}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:e.email})]}),e.accountType==="user"&&i.jsx("button",{onClick:()=>{v(!0),c(!1)},className:"md:hidden flex items-center gap-2 w-full px-4 py-2.5 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",role:"menuitem",children:i.jsx("span",{children:" Mi Pase Digital"})}),i.jsxs("button",{onClick:r,className:"flex justify-between items-center w-full px-4 py-2.5 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700",role:"menuitem",children:[i.jsx("span",{children:"Tema"}),i.jsx("span",{className:"text-base",children:n==="light"?"":""})]}),i.jsx("div",{className:"border-t border-slate-100 dark:border-slate-700 my-1"}),i.jsxs("button",{onClick:t,className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 font-medium flex items-center gap-2",role:"menuitem",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 01-3-3h4a3 3 0 013 3v1"})}),"Cerrar Sesin"]})]})]})]})})]})}),g&&i.jsx(Ck,{user:e,onClose:()=>v(!1)})]})},Ik=({navItems:e,activeItem:t,onNavigate:n,onLogout:r})=>i.jsxs("aside",{className:"hidden md:flex flex-col w-20 lg:w-72 h-[96vh] sticky top-4 my-auto ml-4 rounded-3xl glass-panel flex-shrink-0 z-30 transition-all duration-500 shadow-glass","aria-label":"Navegacin Principal",children:[i.jsxs("div",{className:"p-6 flex items-center justify-center lg:justify-start gap-4 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-brand-primary rounded-xl flex items-center justify-center text-brand-dark shadow-[0_0_15px_rgba(0,224,198,0.4)] animate-pulse-slow","aria-hidden":"true",children:i.jsx("span",{className:"scale-110",children:i.jsx(Ta,{})})}),i.jsxs("div",{className:"hidden lg:block",children:[i.jsxs("h1",{className:"text-xl font-extrabold text-white tracking-tight",children:["Fitness",i.jsx("span",{className:"text-brand-primary",children:"Flow"})]}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400",children:"Pro"})]})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto py-2 px-3 custom-scrollbar",children:i.jsx("ul",{className:"space-y-2",children:e.map((s,a)=>{const o=t===s.name;return i.jsx("li",{children:i.jsxs("button",{id:`nav-item-${a}`,onClick:()=>n(s.name),"aria-current":o?"page":void 0,className:`relative w-full flex items-center gap-4 px-3 py-3 lg:px-4 rounded-2xl text-sm font-medium transition-all duration-300 group outline-none ${o?"bg-brand-primary text-brand-dark shadow-neon scale-105 font-bold":"text-slate-400 hover:bg-white/5 hover:text-white hover:scale-105"}`,children:[i.jsx("div",{className:`transition-transform duration-300 flex-shrink-0 ${o?"scale-110":"group-hover:scale-110"}`,"aria-hidden":"true",children:s.icon}),i.jsx("span",{className:"hidden lg:block tracking-wide truncate",children:s.name}),!o&&i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})},s.name)})})}),i.jsx("div",{className:"p-4 mt-auto",children:i.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center lg:justify-start gap-3 px-4 py-3 rounded-2xl text-sm font-bold text-slate-400 hover:text-red-400 hover:bg-red-500/10 border border-transparent hover:border-red-500/20 transition-all duration-300 group","aria-label":"Cerrar Sesin",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 01-3-3h4a3 3 0 013 3v1"})}),i.jsx("span",{className:"hidden lg:inline",children:"Salir"})]})})]}),Ze={async fetchUserProfile(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return null;const{data:n,error:r}=await M.from("profiles").select("*, user_details(*), gym_details(*), coach_details(*)").eq("id",t.id).single();return r?(console.error("Error fetching profile:",r),null):n},async createProfile(e,t="user"){var s,a;const n={id:e.id,email:e.email,full_name:((s=e.user_metadata)==null?void 0:s.full_name)||((a=e.email)==null?void 0:a.split("@")[0]),role:t,plan:"bsico",subscription_status:"trial",trial_end_date:new Date(Date.now()+1296e6).toISOString(),has_completed_onboarding:!1,is_gym_member:!1},{error:r}=await M.from("profiles").upsert(n);if(r)throw console.error("Error creating profile:",r),r;return t==="gym"?await M.from("gym_details").insert({profile_id:e.id,gym_name:n.full_name,nit:`PENDIENTE-${Date.now()}`,address:"Pendiente"}):t==="entrenador"&&await M.from("coach_details").insert({profile_id:e.id,profession:"Entrenador",description:"Perfil en construccin",phone:"",address:""}),n},async completeOnboarding(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)throw new Error("No autenticado");const{error:n}=await M.from("profiles").update({has_completed_onboarding:!0}).eq("id",t.id);if(n)throw n},async updateUserGoals(e){const{data:{session:t}}=await M.auth.getSession(),n=t==null?void 0:t.user;if(!n)throw new Error("No autenticado");const{data:r,error:s}=await M.from("user_details").upsert({profile_id:n.id,...e}).select();if(s)throw s;return r},async fetchProgressLogs(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return[];const{data:n,error:r}=await M.from("progress_logs").select("*").eq("user_id",t.id).order("date",{ascending:!1});if(r)throw r;return n},async logProgress(e){const{data:{session:t}}=await M.auth.getSession(),n=t==null?void 0:t.user;if(!n)throw new Error("No autenticado");const{data:r,error:s}=await M.from("progress_logs").insert([{...e,user_id:n.id}]).select();if(s)throw s;return r[0]},async fetchTodayCheckin(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return null;const n=new Date().toISOString().split("T")[0],{data:r,error:s}=await M.from("daily_checkins").select("*").eq("user_id",t.id).eq("date",n).maybeSingle();if(s)throw s;return r?{date:r.date,energyLevel:r.energy_level,sleepQuality:r.sleep_quality,soreness:r.soreness,mood:r.mood}:null},async fetchCheckinHistory(e=7){const{data:{session:t}}=await M.auth.getSession(),n=t==null?void 0:t.user;if(!n)return[];const{data:r,error:s}=await M.from("daily_checkins").select("*").eq("user_id",n.id).order("date",{ascending:!1}).limit(e);if(s)throw s;return r.map(a=>({date:a.date,energyLevel:a.energy_level,sleepQuality:a.sleep_quality,soreness:a.soreness,mood:a.mood}))},async logDailyCheckin(e){const{data:{session:t}}=await M.auth.getSession(),n=t==null?void 0:t.user;if(!n)throw new Error("No autenticado");const r=new Date().toISOString().split("T")[0],s={user_id:n.id,date:r,energy_level:e.energyLevel,sleep_quality:e.sleepQuality,soreness:e.soreness,mood:e.mood},a=await Ze.fetchTodayCheckin();let o;if(a){const{data:l,error:c}=await M.from("daily_checkins").update(s).eq("user_id",n.id).eq("date",r).select();if(c)throw c;o=l}else{const{data:l,error:c}=await M.from("daily_checkins").insert([s]).select();if(c)throw c;o=l}return o?o[0]:null},async fetchPersonalRecords(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return[];const{data:n,error:r}=await M.from("personal_records").select("*").eq("user_id",t.id).order("record_date",{ascending:!1});if(r)throw r;return n.map(s=>({exercise:s.exercise_name,weight:s.weight_kg,date:s.record_date}))},async fetchAchievements(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return{unlocked:[],locked:[]};const{data:n,error:r}=await M.from("achievements").select("*");if(r)throw r;const{data:s,error:a}=await M.from("user_achievements").select("achievement_id, unlocked_at").eq("user_id",t.id);if(a)throw a;const o=new Set(s==null?void 0:s.map(c=>c.achievement_id)),l=(n==null?void 0:n.map(c=>{var u;return{id:c.id,name:c.name,description:c.description,icon:c.icon,unlocked:o.has(c.id),dateUnlocked:(u=s==null?void 0:s.find(d=>d.achievement_id===c.id))==null?void 0:u.unlocked_at}}))||[];return{unlocked:l.filter(c=>c.unlocked),locked:l.filter(c=>!c.unlocked)}},async fetchUserStats(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return{totalWorkouts:0,timeInvestedMinutes:0,caloriesBurned:0};const{data:n,error:r}=await M.from("workout_logs").select("duration_minutes, calories_burned").eq("user_id",t.id);if(r)throw r;const s=n.length,a=n.reduce((l,c)=>l+(c.duration_minutes||0),0),o=n.reduce((l,c)=>l+(c.calories_burned||0),0);return{totalWorkouts:s,timeInvestedMinutes:a,caloriesBurned:o}},async logWorkoutSession(e){const{data:{session:t}}=await M.auth.getSession(),n=t==null?void 0:t.user;if(!n)throw new Error("No autenticado");const{plan_name:r,duration_minutes:s,calories_burned:a}=e,{data:o,error:l}=await M.from("workout_logs").insert([{plan_name:r,duration_minutes:s,calories_burned:a,user_id:n.id}]).select();if(l)throw l;return await M.from("social_activities").insert([{user_id:n.id,type:"workout",content:`complet el entrenamiento: ${e.plan_name}`,likes:0}]),o[0]},async fetchWeeklyStats(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return[];const n=new Date,r=new Date(n.setDate(n.getDate()-n.getDay()));r.setHours(0,0,0,0);const s=new Date(r);s.setDate(s.getDate()-7);const{data:a}=await M.from("workout_logs").select("duration_minutes, calories_burned").eq("user_id",t.id).gte("created_at",r.toISOString()),{data:o}=await M.from("workout_logs").select("duration_minutes, calories_burned").eq("user_id",t.id).gte("created_at",s.toISOString()).lt("created_at",r.toISOString()),l=(v,x)=>(v==null?void 0:v.reduce((w,y)=>w+(y[x]||0),0))||0,c=l(a||[],"duration_minutes"),u=l(o||[],"duration_minutes"),d=(a==null?void 0:a.length)||0,p=(o==null?void 0:o.length)||0,m=l(a||[],"calories_burned"),g=l(o||[],"calories_burned");return[{label:"Volumen Semanal",current:c,previous:u,unit:"min"},{label:"Entrenamientos",current:d,previous:p,unit:"sesiones"},{label:"Caloras",current:m,previous:g,unit:"kcal"}]},async fetchMuscleFocusStats(){const{data:{session:e}}=await M.auth.getSession(),t=e==null?void 0:e.user;if(!t)return[];const{data:n}=await M.from("workout_logs").select("plan_name").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(50);if(!n)return[];const r={};return n.forEach(s=>{if(s.plan_name&&s.plan_name.includes(" - ")){const a=s.plan_name.split(" - ")[1];a&&(r[a]=(r[a]||0)+1)}}),Object.entries(r).map(([s,a])=>({name:s,value:a}))},async fetchLeaderboard(){const{data:e,error:t}=await M.rpc("get_leaderboard");if(t)throw t;return e.map((n,r)=>({rank:r+1,userName:n.full_name||"Usuario",avatar:n.avatar_url||"",xp:parseInt(n.workout_count)*100,trend:"same"}))},async fetchSocialFeed(){const{data:e,error:t}=await M.from("social_activities").select("*, profiles(full_name, avatar_url)").order("created_at",{ascending:!1}).limit(20);if(t)throw t;return e.map(n=>{var r;return{id:n.id.toString(),user:((r=n.profiles)==null?void 0:r.full_name)||"Usuario",action:n.content,timeAgo:new Date(n.created_at).toLocaleDateString(),type:n.type,likes:n.likes}})},async postComment(e,t){const{data:{session:n}}=await M.auth.getSession(),r=n==null?void 0:n.user;if(!r)throw new Error("No autenticado");const{error:s}=await M.from("comments").insert([{activity_id:e,user_id:r.id,content:t}]);if(s)throw s},async fetchMyEvaluation(){const{data:{user:e}}=await M.auth.getUser();if(!e)return null;const{data:t,error:n}=await M.from("coach_client_evaluations").select("*").eq("client_id",e.id).order("created_at",{ascending:!1}).limit(1).single();if(n&&n.code!=="PGRST116")throw n;return t}},Nu=Object.freeze(Object.defineProperty({__proto__:null,userService:Ze},Symbol.toStringTag,{value:"Module"})),De={async fetchNotifications(){const{data:e,error:t}=await M.from("notifications").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createNotification(e=null,t,n="info"){let r=e;if(!r){const{data:{user:a}}=await M.auth.getUser();if(a)r=a.id;else return}const{error:s}=await M.from("notifications").insert([{user_id:r,message:t,type:n}]);s&&console.error("Error creating notification",s)},async fetchMembers(){const{data:e,error:t}=await M.from("gym_members").select("*").order("created_at",{ascending:!1});if(t)throw t;return e.map(n=>({id:n.id.toString(),email:n.email||"",full_name:n.full_name,role:"user",plan:n.plan,status:n.status,join_date:n.join_date,is_gym_member:!0,end_date:n.end_date,notes:n.notes,monthly_fee:n.monthly_fee}))},async createMember(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Usuario no autenticado");const{data:n,error:r}=await M.from("gym_members").insert([{gym_id:t.id,full_name:e.name,email:e.email,plan:e.plan,join_date:e.joinDate,end_date:new Date(new Date(e.joinDate).setMonth(new Date(e.joinDate).getMonth()+1)).toISOString(),status:"Al da",monthly_fee:e.amount||(e.plan==="premium"?5e4:3e4)}]).select().single();if(r)throw r;if(e.firstPaymentDate){const s=e.amount||(e.plan==="premium"?5e4:3e4);await this.addTransaction({amount:s,type:"Ingreso",category:"Suscripciones",description:`Suscripcin Mensual - ${e.name}`,date:e.firstPaymentDate,member_id:n.id})}return n},async updateMember(e,t){const n={};t.full_name&&(n.full_name=t.full_name),t.plan&&(n.plan=t.plan),t.status&&(n.status=t.status);const{data:r,error:s}=await M.from("gym_members").update(n).eq("id",e).select();if(s)throw s;return r},async deleteMember(e){const{error:t}=await M.from("gym_members").delete().eq("id",e);if(t)throw t},async fetchEquipment(){const{data:e,error:t}=await M.from("gym_equipment").select("*").order("item_name",{ascending:!0});if(t)throw t;return e},async addEquipment(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Usuario no autenticado");const{data:n,error:r}=await M.from("gym_equipment").insert([{...e,gym_id:t.id}]).select();if(r)throw r;return n[0]},async updateEquipment(e,t){const{data:n,error:r}=await M.from("gym_equipment").update(t).eq("id",e).select();if(r)throw r;return n[0]},async deleteEquipment(e){const{error:t}=await M.from("gym_equipment").delete().eq("id",e);if(t)throw t},async fetchProducts(){const{data:e,error:t}=await M.from("gym_products").select("*").order("name",{ascending:!0});if(t)throw t;return e},async addProduct(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Usuario no autenticado");const{data:n,error:r}=await M.from("gym_products").insert([{...e,gym_id:t.id}]).select();if(r)throw r;return n[0]},async updateProduct(e,t){const{data:n,error:r}=await M.from("gym_products").update(t).eq("id",e).select();if(r)throw r;return n[0]},async deleteProduct(e){const{error:t}=await M.from("gym_products").delete().eq("id",e);if(t)throw t},async fetchTransactions(){const{data:e,error:t}=await M.from("finance_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async addTransaction(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Usuario no autenticado");const{data:n,error:r}=await M.from("finance_transactions").insert([{...e,gym_id:t.id}]).select();if(r)throw r;return n[0]},async fetchActiveChallenges(){const{data:e,error:t}=await M.from("challenges").select("*").gte("deadline",new Date().toISOString().split("T")[0]).order("deadline",{ascending:!0});if(t)throw t;return e},async createChallenge(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Usuario no autenticado");const{data:n,error:r}=await M.from("challenges").insert([{...e,gym_id:t.id}]).select();if(r)throw r;return n[0]},async deleteChallenge(e){const{error:t}=await M.from("challenges").delete().eq("id",e);if(t)throw t}},dw=({title:e,items:t,onAction:n})=>{const[r,s]=E.useState(t),[a,o]=E.useState(!1),l=d=>{s(p=>p.map(m=>m.id===d?{...m,isCompleted:!m.isCompleted}:m))},c=r.filter(d=>d.isCompleted).length,u=c/r.length*100;return u===100&&!a&&setTimeout(()=>o(!0),2e3),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden transition-all duration-500",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-white border-b border-slate-100 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[i.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 36 36",children:[i.jsx("path",{className:"text-slate-200",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),i.jsx("path",{className:"text-brand-primary transition-all duration-1000 ease-out",strokeDasharray:`${u}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),i.jsxs("span",{className:"absolute text-xs font-bold text-brand-dark",children:[Math.round(u),"%"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800",children:e}),i.jsxs("p",{className:"text-xs text-slate-500",children:[c," de ",r.length," completados"]})]})]}),i.jsx("button",{onClick:()=>o(!a),className:"text-slate-400 hover:text-slate-600",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${a?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!a&&i.jsx("div",{className:"p-2",children:r.map(d=>i.jsxs("div",{className:`flex items-center p-3 rounded-lg transition-colors ${d.isCompleted?"opacity-50":"hover:bg-slate-50"}`,children:[i.jsx("button",{onClick:()=>l(d.id),className:`w-5 h-5 rounded border flex items-center justify-center mr-3 transition-colors ${d.isCompleted?"bg-green-500 border-green-500":"border-slate-300 hover:border-brand-primary"}`,children:d.isCompleted&&i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),i.jsx("span",{className:`flex-grow text-sm ${d.isCompleted?"text-slate-400 line-through":"text-slate-700"}`,children:d.label}),!d.isCompleted&&d.actionLabel&&i.jsx("button",{onClick:()=>n&&n(d),className:"text-xs text-brand-primary font-semibold hover:underline",children:d.actionLabel})]},d.id))})]})},Mk=({userName:e,onComplete:t,isSubmitting:n=!1,onClose:r})=>{const[s,a]=E.useState(1),[o,l]=E.useState(5),[c,u]=E.useState("average"),[d,p]=E.useState("low"),[m,g]=E.useState("neutral"),v=()=>{t({energyLevel:o,sleepQuality:c,soreness:d,mood:m})};return i.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-50 flex justify-center items-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-slate-200 dark:border-slate-700 relative",children:[r&&i.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors z-10",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("div",{className:"p-1 h-2 bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:"h-full bg-brand-primary rounded-full transition-all duration-500 ease-out",style:{width:`${s/4*100}%`}})}),i.jsxs("div",{className:"p-8 text-center",children:[s===1&&i.jsxs("div",{className:"animate-slide-up",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:["Hola, ",e," "]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cmo est tu nivel de energa hoy?"}),i.jsxs("div",{className:"relative mb-8 px-4",children:[i.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:x=>l(parseInt(x.target.value)),className:"w-full h-3 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-brand-primary"}),i.jsxs("div",{className:"flex justify-between mt-4 text-sm font-bold text-slate-400",children:[i.jsx("span",{children:"Agotado "}),i.jsx("span",{className:"text-brand-primary text-xl",children:o}),i.jsx("span",{children:"Imparable "})]})]}),i.jsx("button",{onClick:()=>a(2),className:"w-full bg-brand-primary text-white font-bold py-3 rounded-xl hover:bg-brand-secondary transition-colors",children:"Siguiente"})]}),s===2&&i.jsxs("div",{className:"animate-slide-up",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Cmo dormiste anoche? "}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{id:"poor",label:"Mal",icon:""},{id:"average",label:"Regular",icon:""},{id:"good",label:"Bien",icon:""},{id:"excellent",label:"Excelente",icon:""}].map(x=>i.jsxs("button",{onClick:()=>{u(x.id),a(3)},className:`p-4 rounded-xl border-2 transition-all ${c===x.id?"border-brand-primary bg-brand-primary/10":"border-slate-200 dark:border-slate-600 hover:border-brand-primary/50"}`,children:[i.jsx("div",{className:"text-3xl mb-2",children:x.icon}),i.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:x.label})]},x.id))})]}),s===3&&i.jsxs("div",{className:"animate-slide-up",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Sientes dolor muscular? "}),i.jsx("div",{className:"space-y-3",children:[{id:"none",label:"Nada, estoy fresco",color:"bg-green-100 text-green-700"},{id:"low",label:"Un poco (Agujetas leves)",color:"bg-blue-100 text-blue-700"},{id:"medium",label:"Moderado",color:"bg-yellow-100 text-yellow-700"},{id:"high",label:"S, me cuesta moverme",color:"bg-red-100 text-red-700"}].map(x=>i.jsx("button",{onClick:()=>{p(x.id),a(4)},className:`w-full p-4 rounded-xl font-bold transition-transform hover:scale-[1.02] border-2 border-transparent ${x.color}`,children:x.label},x.id))})]}),s===4&&i.jsxs("div",{className:"animate-slide-up",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:'Cul es tu "Mood" hoy? '}),i.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{id:"motivated",label:"Motivado",icon:""},{id:"stressed",label:"Estresado",icon:""},{id:"tired",label:"Cansado",icon:""},{id:"neutral",label:"Normal",icon:""}].map(x=>i.jsxs("button",{onClick:()=>g(x.id),className:`p-4 rounded-xl border-2 transition-all ${m===x.id?"border-brand-primary bg-brand-primary/10 ring-2 ring-brand-primary ring-offset-2 dark:ring-offset-slate-800":"border-slate-200 dark:border-slate-600"}`,children:[i.jsx("div",{className:"text-3xl mb-1",children:x.icon}),i.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-200",children:x.label})]},x.id))}),i.jsx("button",{onClick:v,disabled:n,className:`w-full bg-brand-primary text-white font-bold py-3 rounded-xl hover:bg-brand-secondary transition-colors shadow-lg shadow-brand-primary/30 ${n?"opacity-70 cursor-not-allowed":""}`,children:n?"Personalizando...":"Personalizar mi Rutina"})]})]})]})})},Dk=({status:e,onNavigate:t})=>{const n=()=>e.energyLevel<5||e.sleepQuality==="poor"?{title:"Boost de Energa Pre-Entreno",content:"Hoy tu energa est baja. Prioriza carbohidratos de rpida absorcin (fruta, avena) 30 min antes de entrenar.",icon:""}:e.soreness==="high"||e.soreness==="medium"?{title:"Nutricin Anti-inflamatoria",content:"Para el dolor muscular, aumenta la ingesta de Omega-3 (pescado, nueces) y crcuma hoy.",icon:""}:{title:"Comida Post-Entreno Ideal",content:"Para maximizar tus resultados hoy, asegura 20-30g de protena en la hora siguiente a tu sesin.",icon:""},r=()=>e.mood==="stressed"||e.soreness==="high"?{name:"Yoga Restaurativo",time:"19:00",coach:"Ana Mara",image:"https://images.pexels.com/photos/3822622/pexels-photo-3822622.jpeg?auto=compress&cs=tinysrgb&w=600"}:e.energyLevel>7?{name:"CrossFit WOD",time:"18:00",coach:"Diego V.",image:"https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg?auto=compress&cs=tinysrgb&w=600"}:{name:"Pilates Mat",time:"08:00",coach:"Laura M.",image:"https://images.pexels.com/photos/4056535/pexels-photo-4056535.jpeg?auto=compress&cs=tinysrgb&w=600"},s=n(),a=r();return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-2xl border border-orange-100 dark:border-orange-800/50 flex items-start gap-4 transition-transform hover:scale-[1.02]",children:[i.jsx("div",{className:"text-4xl bg-white dark:bg-slate-800 w-14 h-14 rounded-full flex items-center justify-center shadow-sm flex-shrink-0",children:s.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-orange-900 dark:text-orange-100 mb-2",children:s.title}),i.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 leading-relaxed",children:s.content})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex gap-4 transition-transform hover:scale-[1.02]",children:[i.jsx("img",{src:a.image,alt:a.name,className:"w-24 h-24 rounded-xl object-cover"}),i.jsxs("div",{className:"flex flex-col justify-between flex-grow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-brand-primary uppercase tracking-wide mb-1",children:"Sugerido para ti"}),i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white leading-tight",children:a.name}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[a.time,"  ",a.coach]})]}),i.jsx("button",{onClick:()=>t("Clases Grupales"),className:"self-start text-xs font-bold bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-3 py-1.5 rounded-lg hover:opacity-90 transition-opacity shadow-md",children:"Reservar Ahora"})]})]})]})},Pk=e=>{switch(e){case"recovery":return{bg:"bg-gradient-to-r from-blue-600 to-indigo-700",icon:"",accent:"bg-blue-500",text:"text-blue-100"};case"caution":return{bg:"bg-gradient-to-r from-amber-500 to-orange-600",icon:"",accent:"bg-amber-400",text:"text-amber-100"};case"performance":return{bg:"bg-gradient-to-r from-green-500 to-emerald-700",icon:"",accent:"bg-green-400",text:"text-green-100"};case"motivation":default:return{bg:"bg-gradient-to-r from-purple-600 to-pink-600",icon:"",accent:"bg-purple-500",text:"text-purple-100"}}},Lk=({insight:e,onAction:t})=>{const n=Pk(e.type);return i.jsxs("div",{className:`rounded-2xl p-6 md:p-8 text-white shadow-xl relative overflow-hidden transition-all hover:shadow-2xl ${n.bg} animate-fade-in`,children:[i.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10 pointer-events-none",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-40 w-40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 rounded-full bg-white opacity-10 blur-2xl"}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsxs("span",{className:`${n.accent} text-white/90 text-xs font-bold px-2 py-1 rounded-md uppercase tracking-wide backdrop-blur-sm border border-white/20 shadow-sm flex items-center gap-1`,children:[i.jsx("span",{className:"animate-pulse text-xs",children:""})," Gua Inteligente"]}),e.suggestedActivity&&i.jsxs("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-md backdrop-blur-sm",children:["Sugerencia: ",e.suggestedActivity]})]}),i.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold mb-2 tracking-tight leading-tight",children:e.title}),i.jsx("p",{className:`${n.text} max-w-lg text-lg font-medium leading-relaxed`,children:e.message})]}),i.jsxs("div",{className:"flex-shrink-0 bg-white/10 backdrop-blur-md p-4 rounded-2xl border border-white/20 shadow-inner flex flex-col items-center justify-center min-w-[120px]",children:[i.jsx("span",{className:"text-5xl mb-2 filter drop-shadow-md",children:n.icon}),i.jsx("button",{onClick:t,className:"bg-white text-slate-900 font-bold py-2 px-4 rounded-lg hover:bg-slate-100 transition-colors text-sm w-full shadow-md whitespace-nowrap",children:e.actionLabel})]})]})]})},Gl=[{level:1,minXP:0,title:"Novato"},{level:2,minXP:1e3,title:"Principiante"},{level:3,minXP:2500,title:"Entusiasta"},{level:4,minXP:5e3,title:"Atleta"},{level:5,minXP:1e4,title:"lite"},{level:6,minXP:2e4,title:"Maestro"},{level:7,minXP:4e4,title:"Leyenda"}],Uk=[{id:"c1",title:"Guerrero de Fin de Semana",description:"Completa 2 entrenamientos este fin de semana",target:2,current:1,unit:"sesiones",rewardXP:500,deadline:"2024-06-30",participants:1240},{id:"c2",title:"Rey del Cardio",description:"Acumula 120 minutos de cardio",target:120,current:45,unit:"minutos",rewardXP:300,deadline:"2024-07-05",participants:850},{id:"c3",title:"Fuerza Bruta",description:"Levanta un total de 5000kg (volumen)",target:5e3,current:3250,unit:"kg",rewardXP:750,deadline:"2024-07-10",participants:560}],Ok=[{rank:1,userName:"Laura V.",xp:45200,trend:"up",avatar:""},{rank:2,userName:"Carlos M.",xp:42100,trend:"same",avatar:""},{rank:3,userName:"Ana G.",xp:38900,trend:"up",avatar:""},{rank:4,userName:"Juan P.",xp:35400,trend:"down",avatar:""},{rank:5,userName:"Sofia R.",xp:31200,trend:"up",avatar:""}],zk=({user:e,challenges:t})=>{var d,p,m;const n=((d=e.gamification)==null?void 0:d.xp)||12050,r=((p=e.gamification)==null?void 0:p.level)||5,s=((m=e.gamification)==null?void 0:m.title)||"lite",a=Gl.find(g=>g.level===r+1)||{minXP:n*1.5},o=Gl.find(g=>g.level===r)||{minXP:0},l=a.minXP-o.minXP,c=n-o.minXP,u=l>0?Math.min(100,Math.max(0,c/l*100)):100;return i.jsxs("div",{className:"glass-panel rounded-2xl p-6 h-full flex flex-col justify-between relative overflow-hidden border-l-4 border-l-brand-primary",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-5 pointer-events-none"}),i.jsxs("div",{className:"flex justify-between items-start mb-6 z-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] text-brand-primary font-bold uppercase tracking-widest mb-1",children:"Status Actual"}),i.jsx("h3",{className:"font-black text-2xl text-white tracking-tighter uppercase italic",children:s})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-brand-primary to-blue-600 flex items-center justify-center text-white font-black text-3xl shadow-[0_0_20px_rgba(0,224,198,0.4)] border border-white/20 transform rotate-3",children:r}),i.jsx("div",{className:"absolute -bottom-2 -right-2 bg-slate-900 text-white text-[9px] font-bold px-2 py-0.5 rounded border border-slate-700",children:"LVL"})]})]}),i.jsxs("div",{className:"mb-8 z-10",children:[i.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-400 mb-2 uppercase tracking-wider",children:[i.jsxs("span",{children:["XP: ",n.toLocaleString()]}),i.jsxs("span",{children:["Siguiente: ",a.minXP.toLocaleString()]})]}),i.jsxs("div",{className:"w-full h-4 bg-slate-800 rounded-full overflow-hidden border border-slate-700 relative shadow-inner",children:[i.jsx("div",{className:"absolute inset-0 flex justify-between px-1 z-20",children:[...Array(10)].map((g,v)=>i.jsx("div",{className:"w-px h-full bg-slate-900/50"},v))}),i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 via-brand-primary to-white transition-all duration-1000 ease-out relative",style:{width:`${u}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 animate-[pulse_1s_infinite]"})})]})]}),i.jsxs("div",{className:"z-10 flex-grow",children:[i.jsxs("h4",{className:"font-bold text-white text-xs uppercase tracking-wide mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-brand-accent rounded-full animate-pulse"}),"Misiones Activas"]}),i.jsx("div",{className:"space-y-3",children:t.map(g=>i.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-xl border border-white/5 hover:border-brand-primary/30 transition-colors group cursor-default",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("p",{className:"font-bold text-slate-200 text-xs group-hover:text-brand-primary transition-colors",children:g.title}),i.jsxs("span",{className:"bg-brand-accent/10 text-brand-accent text-[9px] font-bold px-1.5 py-0.5 rounded border border-brand-accent/20",children:["+",g.reward_xp||0," XP"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-grow h-1 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-brand-primary rounded-full shadow-[0_0_5px_rgba(0,224,198,0.8)]",style:{width:`${Math.min(100,0/(g.target||1)*100)}%`}})}),i.jsxs("span",{className:"text-[9px] font-mono text-slate-400",children:["0/",g.target||1]})]})]},g.id))})]}),i.jsx("button",{className:"w-full mt-4 py-2 rounded-lg border border-white/10 text-xs font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-colors uppercase tracking-widest",children:"Ver Todos Los Logros"})]})},Bk=({activities:e,onComment:t})=>{const[n,r]=Xe.useState(null),[s,a]=Xe.useState(""),o=c=>{switch(c){case"workout":return"";case"level_up":return"";case"achievement":return"";default:return""}},l=async c=>{s.trim()&&(await t(c,s),r(null),a(""))};return i.jsxs("div",{className:"glass-panel p-6 rounded-2xl border border-slate-700/50 h-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:""})," Comunidad"]}),i.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),i.jsxs("div",{className:"space-y-4 relative",children:[i.jsx("div",{className:"absolute left-[19px] top-4 bottom-4 w-0.5 bg-slate-800 z-0"}),e.map(c=>i.jsxs("div",{className:"relative z-10 flex gap-4 items-start",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 border-4 border-slate-900 flex items-center justify-center text-lg shrink-0 shadow-lg",children:o(c.type)}),i.jsxs("div",{className:"flex-grow bg-slate-800/50 rounded-xl p-3 border border-white/5 hover:border-white/10 transition-colors",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"text-xs text-slate-300",children:[i.jsx("span",{className:"font-bold text-white hover:text-brand-primary cursor-pointer transition-colors",children:c.user})," ",c.action]}),i.jsx("span",{className:"text-[9px] text-slate-500 font-mono",children:c.timeAgo})]}),i.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[i.jsxs("button",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 hover:text-red-400 transition-colors group",children:[i.jsx("span",{className:"group-hover:scale-110 transition-transform",children:""})," ",c.likes]}),i.jsx("button",{onClick:()=>r(n===c.id?null:c.id),className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 hover:text-white transition-colors",children:" Comentar"})]}),n===c.id&&i.jsxs("div",{className:"mt-3 flex gap-2 animate-fade-in",children:[i.jsx("input",{type:"text",value:s,onChange:u=>a(u.target.value),placeholder:"Escribe un comentario...",className:"w-full bg-slate-900 text-xs text-white p-2 rounded-lg border border-slate-700 focus:border-brand-primary outline-none",onKeyPress:u=>u.key==="Enter"&&l(c.id)}),i.jsx("button",{onClick:()=>l(c.id),className:"text-[10px] bg-brand-primary text-slate-900 font-bold px-3 rounded-lg hover:bg-brand-light transition-colors",children:"Enviar"})]})]})]},c.id))]})]})},qk=({data:e,currentUserId:t})=>i.jsxs("div",{className:"glass-panel p-6 rounded-2xl border border-slate-700/50 h-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:""})," Ranking Global"]}),i.jsx("span",{className:"text-xs bg-brand-primary/20 text-brand-primary px-2 py-1 rounded font-bold uppercase tracking-wider",children:"Top 5"})]}),i.jsx("div",{className:"space-y-4",children:e.map((n,r)=>{const s=n.userName===t,a=r<3;return i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl transition-all ${s?"bg-brand-primary/10 border border-brand-primary/50":"hover:bg-white/5 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-8 h-8 flex items-center justify-center font-black rounded-lg ${a?"bg-gradient-to-br from-yellow-400 to-orange-600 text-white shadow-lg":"bg-slate-800 text-slate-500"}`,children:n.rank}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-lg shadow-inner",children:n.avatar||""}),i.jsxs("div",{children:[i.jsxs("p",{className:`font-bold text-sm ${s?"text-brand-primary":"text-slate-200"}`,children:[n.userName," ",s&&"(T)"]}),i.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[n.trend==="up"&&i.jsx("span",{className:"text-green-400",children:" Subiendo"}),n.trend==="down"&&i.jsx("span",{className:"text-red-400",children:" Bajando"}),n.trend==="same"&&i.jsx("span",{className:"text-slate-500",children:"- Estable"})]})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-mono font-bold text-white text-sm",children:n.xp.toLocaleString()}),i.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"XP Total"})]})]},r)})})]});var Gk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Hk,Vk;function Fk(){return{geminiUrl:Hk,vertexUrl:Vk}}function $k(e,t,n,r){var s,a;if(!(e!=null&&e.baseUrl)){const o=Fk();return t?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(a=o.geminiUrl)!==null&&a!==void 0?a:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tr{}function J(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function f(e,t,n){for(let a=0;a<t.length-1;a++){const o=t[a];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(e[l])){const c=e[l];if(Array.isArray(n))for(let u=0;u<c.length;u++){const d=c[u];f(d,t.slice(a+1),n[u])}else for(const u of c)f(u,t.slice(a+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in e||(e[l]=[{}]);const c=e[l];f(c[0],t.slice(a+1),n);return}(!e[o]||typeof e[o]!="object")&&(e[o]={}),e=e[o]}const r=t[t.length-1],s=e[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function h(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const s=t[r];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in e){const o=e[a];return Array.isArray(o)?o.map(l=>h(l,t.slice(r+1),n)):n}else return n}else e=e[s]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function Jk(e,t){for(const[n,r]of Object.entries(t)){const s=n.split("."),a=r.split("."),o=new Set;let l=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){l=c;break}if(l!==-1&&a.length>l)for(let c=l;c<a.length;c++){const u=a[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}Yd(e,s,a,0,o)}}function Yd(e,t,n,r,s){if(r>=t.length||typeof e!="object"||e===null)return;const a=t[r];if(a.endsWith("[]")){const o=a.slice(0,-2),l=e;if(o in l&&Array.isArray(l[o]))for(const c of l[o])Yd(c,t,n,r+1,s)}else if(a==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const o=e,l=Object.keys(o).filter(u=>!u.startsWith("_")&&!s.has(u)),c={};for(const u of l)c[u]=o[u];for(const[u,d]of Object.entries(c)){const p=[];for(const m of n.slice(r))m==="*"?p.push(u):p.push(m);f(o,p,d)}for(const u of l)delete o[u]}}else{const o=e;a in o&&Yd(o[a],t,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yk(e){const t={},n=h(e,["operationName"]);n!=null&&f(t,["operationName"],n);const r=h(e,["resourceName"]);return r!=null&&f(t,["_url","resourceName"],r),t}function Kk(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response","generateVideoResponse"]);return o!=null&&f(t,["response"],Xk(o)),t}function Wk(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response"]);return o!=null&&f(t,["response"],Qk(o)),t}function Xk(e){const t={},n=h(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Zk(o))),f(t,["generatedVideos"],a)}const r=h(e,["raiMediaFilteredCount"]);r!=null&&f(t,["raiMediaFilteredCount"],r);const s=h(e,["raiMediaFilteredReasons"]);return s!=null&&f(t,["raiMediaFilteredReasons"],s),t}function Qk(e){const t={},n=h(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>eT(o))),f(t,["generatedVideos"],a)}const r=h(e,["raiMediaFilteredCount"]);r!=null&&f(t,["raiMediaFilteredCount"],r);const s=h(e,["raiMediaFilteredReasons"]);return s!=null&&f(t,["raiMediaFilteredReasons"],s),t}function Zk(e){const t={},n=h(e,["video"]);return n!=null&&f(t,["video"],iT(n)),t}function eT(e){const t={},n=h(e,["_self"]);return n!=null&&f(t,["video"],oT(n)),t}function tT(e){const t={},n=h(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function nT(e){const t={},n=h(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function rT(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response"]);return o!=null&&f(t,["response"],sT(o)),t}function sT(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["parent"]);r!=null&&f(t,["parent"],r);const s=h(e,["documentName"]);return s!=null&&f(t,["documentName"],s),t}function hw(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response"]);return o!=null&&f(t,["response"],aT(o)),t}function aT(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["parent"]);r!=null&&f(t,["parent"],r);const s=h(e,["documentName"]);return s!=null&&f(t,["documentName"],s),t}function iT(e){const t={},n=h(e,["uri"]);n!=null&&f(t,["uri"],n);const r=h(e,["encodedVideo"]);r!=null&&f(t,["videoBytes"],kf(r));const s=h(e,["encoding"]);return s!=null&&f(t,["mimeType"],s),t}function oT(e){const t={},n=h(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const r=h(e,["bytesBase64Encoded"]);r!=null&&f(t,["videoBytes"],kf(r));const s=h(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var i0;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(i0||(i0={}));var o0;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(o0||(o0={}));var l0;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(l0||(l0={}));var yr;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(yr||(yr={}));var c0;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(c0||(c0={}));var u0;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(u0||(u0={}));var d0;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(d0||(d0={}));var h0;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(h0||(h0={}));var f0;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(f0||(f0={}));var m0;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(m0||(m0={}));var p0;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(p0||(p0={}));var g0;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(g0||(g0={}));var x0;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(x0||(x0={}));var y0;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(y0||(y0={}));var v0;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(v0||(v0={}));var b0;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(b0||(b0={}));var w0;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(w0||(w0={}));var _0;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(_0||(_0={}));var S0;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(S0||(S0={}));var qi;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(qi||(qi={}));var N0;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(N0||(N0={}));var E0;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(E0||(E0={}));var C0;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(C0||(C0={}));var Kd;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kd||(Kd={}));var k0;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(k0||(k0={}));var T0;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(T0||(T0={}));var j0;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(j0||(j0={}));var A0;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(A0||(A0={}));var R0;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(R0||(R0={}));var I0;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(I0||(I0={}));var M0;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(M0||(M0={}));var D0;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(D0||(D0={}));var P0;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(P0||(P0={}));var L0;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(L0||(L0={}));var U0;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(U0||(U0={}));var O0;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(O0||(O0={}));var z0;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(z0||(z0={}));var B0;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(B0||(B0={}));var q0;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(q0||(q0={}));var G0;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(G0||(G0={}));var H0;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(H0||(H0={}));var V0;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(V0||(V0={}));var F0;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(F0||(F0={}));var $0;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})($0||($0={}));var J0;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(J0||(J0={}));var Y0;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Y0||(Y0={}));var K0;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(K0||(K0={}));var W0;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(W0||(W0={}));var X0;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(X0||(X0={}));var Q0;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Q0||(Q0={}));var Z0;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Z0||(Z0={}));var eg;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(eg||(eg={}));var tg;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tg||(tg={}));var ng;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ng||(ng={}));var rg;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(rg||(rg={}));var Ks;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Ks||(Ks={}));class Wd{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Fa{get text(){var t,n,r,s,a,o,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const m of(c=(l=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var t,n,r,s,a,o,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const p of(c=(l=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,r,s,a,o,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,r,s,a,o,l,c,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(l=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,r,s,a,o,l,c,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(l=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class sg{}class ag{}class lT{}class cT{}class uT{}class dT{}class ig{}class og{}class lg{}class hT{}class Hl{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Hl;let s;const a=t;return n?s=Wk(a):s=Kk(a),Object.assign(r,s),r}}class cg{}class ug{}class dg{}class hg{}class fT{}class mT{}class pT{}class Tf{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Tf,a=rT(t);return Object.assign(r,a),r}}class gT{}class xT{}class yT{}class fg{}class vT{get text(){var t,n,r;let s="",a=!1;const o=[];for(const l of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;a=!0,s+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var t,n,r;let s="";const a=[];for(const o of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&a.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class bT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jf{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new jf,a=hw(t);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function he(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function fw(e,t){const n=he(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function mw(e){return Array.isArray(e)?e.map(t=>Vl(t)):[Vl(e)]}function Vl(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function pw(e){const t=Vl(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function gw(e){const t=Vl(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function mg(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function xw(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>mg(t)):[mg(e)]}function Xd(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function pg(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function gg(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ht(e){if(e==null)throw new Error("ContentUnion is required");return Xd(e)?e:{role:"user",parts:xw(e)}}function Af(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=ht(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=ht(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ht(n)):[ht(t)]}function an(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(pg(e)||gg(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(e)]}const t=[],n=[],r=Xd(e[0]);for(const s of e){const a=Xd(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(s);else{if(pg(s)||gg(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||t.push({role:"user",parts:xw(n)}),t}function wT(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(yr).includes(n[0].toUpperCase())?n[0].toUpperCase():yr.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(yr).includes(r.toUpperCase())?r.toUpperCase():yr.TYPE_UNSPECIFIED})}}function aa(e){const t={},n=["items"],r=["anyOf"],s=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=e.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,e=a[1]):a[1].type==="null"&&(t.nullable=!0,e=a[0])),e.type instanceof Array&&wT(e.type,t);for(const[o,l]of Object.entries(e))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;t.type=Object.values(yr).includes(l.toUpperCase())?l.toUpperCase():yr.TYPE_UNSPECIFIED}else if(n.includes(o))t[o]=aa(l);else if(r.includes(o)){const c=[];for(const u of l){if(u.type=="null"){t.nullable=!0;continue}c.push(aa(u))}t[o]=c}else if(s.includes(o)){const c={};for(const[u,d]of Object.entries(l))c[u]=aa(d);t[o]=c}else{if(o==="additionalProperties")continue;t[o]=l}return t}function Rf(e){return aa(e)}function If(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Mf(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function ja(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=aa(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=aa(t.response));return e}function Aa(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function _T(e,t,n,r=1){const s=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:s?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:s?`${n}/${t}`:t}function nr(e,t){if(typeof t!="string")throw new Error("name must be a string");return _T(e,t,"cachedContents")}function yw(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Pr(e){return kf(e)}function ST(e){return e!=null&&typeof e=="object"&&"name"in e}function NT(e){return e!=null&&typeof e=="object"&&"video"in e}function ET(e){return e!=null&&typeof e=="object"&&"uri"in e}function vw(e){var t;let n;if(ST(e)&&(n=e.name),!(ET(e)&&(n=e.uri,n===void 0))&&!(NT(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function bw(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function ww(e){for(const t of["models","tunedModels","publisherModels"])if(CT(e,t))return e[t];return[]}function CT(e,t){return e!==null&&typeof e=="object"&&t in e}function kT(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function TT(e,t={}){const n=[],r=new Set;for(const s of e){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const o=kT(s,t);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function _w(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function jT(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Sw(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return e;let a=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ra(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Nw(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AT(e){const t={},n=h(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);const r=h(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>uj(o))),f(t,["inlinedResponses"],a)}const s=h(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["inlinedEmbedContentResponses"],a)}return t}function RT(e){const t={},n=h(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);const r=h(e,["gcsDestination","outputUriPrefix"]);r!=null&&f(t,["gcsUri"],r);const s=h(e,["bigqueryDestination","outputUri"]);return s!=null&&f(t,["bigqueryUri"],s),t}function IT(e){const t={},n=h(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);const r=h(e,["gcsUri"]);r!=null&&f(t,["gcsDestination","outputUriPrefix"],r);const s=h(e,["bigqueryUri"]);if(s!=null&&f(t,["bigqueryDestination","outputUri"],s),h(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function sl(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata","displayName"]);r!=null&&f(t,["displayName"],r);const s=h(e,["metadata","state"]);s!=null&&f(t,["state"],Nw(s));const a=h(e,["metadata","createTime"]);a!=null&&f(t,["createTime"],a);const o=h(e,["metadata","endTime"]);o!=null&&f(t,["endTime"],o);const l=h(e,["metadata","updateTime"]);l!=null&&f(t,["updateTime"],l);const c=h(e,["metadata","model"]);c!=null&&f(t,["model"],c);const u=h(e,["metadata","output"]);return u!=null&&f(t,["dest"],AT(Sw(u))),t}function Qd(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["displayName"]);r!=null&&f(t,["displayName"],r);const s=h(e,["state"]);s!=null&&f(t,["state"],Nw(s));const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["createTime"]);o!=null&&f(t,["createTime"],o);const l=h(e,["startTime"]);l!=null&&f(t,["startTime"],l);const c=h(e,["endTime"]);c!=null&&f(t,["endTime"],c);const u=h(e,["updateTime"]);u!=null&&f(t,["updateTime"],u);const d=h(e,["model"]);d!=null&&f(t,["model"],d);const p=h(e,["inputConfig"]);p!=null&&f(t,["src"],MT(p));const m=h(e,["outputConfig"]);m!=null&&f(t,["dest"],RT(Sw(m)));const g=h(e,["completionStats"]);return g!=null&&f(t,["completionStats"],g),t}function MT(e){const t={},n=h(e,["instancesFormat"]);n!=null&&f(t,["format"],n);const r=h(e,["gcsSource","uris"]);r!=null&&f(t,["gcsUri"],r);const s=h(e,["bigquerySource","inputUri"]);return s!=null&&f(t,["bigqueryUri"],s),t}function DT(e,t){const n={};if(h(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(t,["fileName"]);r!=null&&f(n,["fileName"],r);const s=h(t,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>cj(e,o))),f(n,["requests","requests"],a)}return n}function PT(e){const t={},n=h(e,["format"]);n!=null&&f(t,["instancesFormat"],n);const r=h(e,["gcsUri"]);r!=null&&f(t,["gcsSource","uris"],r);const s=h(e,["bigqueryUri"]);if(s!=null&&f(t,["bigquerySource","inputUri"],s),h(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function LT(e){const t={},n=h(e,["data"]);if(n!=null&&f(t,["data"],n),h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function UT(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],Ra(e,r)),n}function OT(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],Ra(e,r)),n}function zT(e){const t={},n=h(e,["content"]);n!=null&&f(t,["content"],n);const r=h(e,["citationMetadata"]);r!=null&&f(t,["citationMetadata"],BT(r));const s=h(e,["tokenCount"]);s!=null&&f(t,["tokenCount"],s);const a=h(e,["finishReason"]);a!=null&&f(t,["finishReason"],a);const o=h(e,["avgLogprobs"]);o!=null&&f(t,["avgLogprobs"],o);const l=h(e,["groundingMetadata"]);l!=null&&f(t,["groundingMetadata"],l);const c=h(e,["index"]);c!=null&&f(t,["index"],c);const u=h(e,["logprobsResult"]);u!=null&&f(t,["logprobsResult"],u);const d=h(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),f(t,["safetyRatings"],m)}const p=h(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function BT(e){const t={},n=h(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["citations"],r)}return t}function Ew(e){const t={},n=h(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>xj(a))),f(t,["parts"],s)}const r=h(e,["role"]);return r!=null&&f(t,["role"],r),t}function qT(e,t){const n={},r=h(e,["displayName"]);if(t!==void 0&&r!=null&&f(t,["batch","displayName"],r),h(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function GT(e,t){const n={},r=h(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=h(e,["dest"]);return t!==void 0&&s!=null&&f(t,["outputConfig"],IT(jT(s))),n}function xg(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["src"]);s!=null&&f(n,["batch","inputConfig"],DT(e,_w(e,s)));const a=h(t,["config"]);return a!=null&&qT(a,n),n}function HT(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["model"],he(e,r));const s=h(t,["src"]);s!=null&&f(n,["inputConfig"],PT(_w(e,s)));const a=h(t,["config"]);return a!=null&&GT(a,n),n}function VT(e,t){const n={},r=h(e,["displayName"]);return t!==void 0&&r!=null&&f(t,["batch","displayName"],r),n}function FT(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["src"]);s!=null&&f(n,["batch","inputConfig"],QT(e,s));const a=h(t,["config"]);return a!=null&&VT(a,n),n}function $T(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],Ra(e,r)),n}function JT(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],Ra(e,r)),n}function YT(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&f(t,["name"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);return a!=null&&f(t,["error"],a),t}function KT(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&f(t,["name"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);return a!=null&&f(t,["error"],a),t}function WT(e,t){const n={},r=h(t,["contents"]);if(r!=null){let a=Af(e,r);Array.isArray(a)&&(a=a.map(o=>o)),f(n,["requests[]","request","content"],a)}const s=h(t,["config"]);return s!=null&&(f(n,["_self"],XT(s,n)),Jk(n,{"requests[].*":"requests[].request.*"})),n}function XT(e,t){const n={},r=h(e,["taskType"]);t!==void 0&&r!=null&&f(t,["requests[]","taskType"],r);const s=h(e,["title"]);t!==void 0&&s!=null&&f(t,["requests[]","title"],s);const a=h(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&f(t,["requests[]","outputDimensionality"],a),h(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function QT(e,t){const n={},r=h(t,["fileName"]);r!=null&&f(n,["file_name"],r);const s=h(t,["inlinedRequests"]);return s!=null&&f(n,["requests"],WT(e,s)),n}function ZT(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function ej(e){const t={},n=h(e,["id"]);n!=null&&f(t,["id"],n);const r=h(e,["args"]);r!=null&&f(t,["args"],r);const s=h(e,["name"]);if(s!=null&&f(t,["name"],s),h(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function tj(e){const t={},n=h(e,["mode"]);n!=null&&f(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);if(r!=null&&f(t,["allowedFunctionNames"],r),h(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function nj(e,t,n){const r={},s=h(t,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],Ew(ht(s)));const a=h(t,["temperature"]);a!=null&&f(r,["temperature"],a);const o=h(t,["topP"]);o!=null&&f(r,["topP"],o);const l=h(t,["topK"]);l!=null&&f(r,["topK"],l);const c=h(t,["candidateCount"]);c!=null&&f(r,["candidateCount"],c);const u=h(t,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const d=h(t,["stopSequences"]);d!=null&&f(r,["stopSequences"],d);const p=h(t,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=h(t,["logprobs"]);m!=null&&f(r,["logprobs"],m);const g=h(t,["presencePenalty"]);g!=null&&f(r,["presencePenalty"],g);const v=h(t,["frequencyPenalty"]);v!=null&&f(r,["frequencyPenalty"],v);const x=h(t,["seed"]);x!=null&&f(r,["seed"],x);const w=h(t,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const y=h(t,["responseSchema"]);y!=null&&f(r,["responseSchema"],Rf(y));const b=h(t,["responseJsonSchema"]);if(b!=null&&f(r,["responseJsonSchema"],b),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=h(t,["safetySettings"]);if(n!==void 0&&_!=null){let G=_;Array.isArray(G)&&(G=G.map(W=>yj(W))),f(n,["safetySettings"],G)}const S=h(t,["tools"]);if(n!==void 0&&S!=null){let G=Aa(S);Array.isArray(G)&&(G=G.map(W=>bj(ja(W)))),f(n,["tools"],G)}const T=h(t,["toolConfig"]);if(n!==void 0&&T!=null&&f(n,["toolConfig"],vj(T)),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=h(t,["cachedContent"]);n!==void 0&&N!=null&&f(n,["cachedContent"],nr(e,N));const C=h(t,["responseModalities"]);C!=null&&f(r,["responseModalities"],C);const I=h(t,["mediaResolution"]);I!=null&&f(r,["mediaResolution"],I);const A=h(t,["speechConfig"]);if(A!=null&&f(r,["speechConfig"],If(A)),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=h(t,["thinkingConfig"]);R!=null&&f(r,["thinkingConfig"],R);const O=h(t,["imageConfig"]);O!=null&&f(r,["imageConfig"],lj(O));const D=h(t,["enableEnhancedCivicAnswers"]);return D!=null&&f(r,["enableEnhancedCivicAnswers"],D),r}function rj(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>zT(u))),f(t,["candidates"],c)}const s=h(e,["modelVersion"]);s!=null&&f(t,["modelVersion"],s);const a=h(e,["promptFeedback"]);a!=null&&f(t,["promptFeedback"],a);const o=h(e,["responseId"]);o!=null&&f(t,["responseId"],o);const l=h(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function sj(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],Ra(e,r)),n}function aj(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],Ra(e,r)),n}function ij(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function oj(e){const t={};if(h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function lj(e){const t={},n=h(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const r=h(e,["imageSize"]);if(r!=null&&f(t,["imageSize"],r),h(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function cj(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["request","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let l=an(s);Array.isArray(l)&&(l=l.map(c=>Ew(c))),f(n,["request","contents"],l)}const a=h(t,["metadata"]);a!=null&&f(n,["metadata"],a);const o=h(t,["config"]);return o!=null&&f(n,["request","generationConfig"],nj(e,o,h(n,["request"],{}))),n}function uj(e){const t={},n=h(e,["response"]);n!=null&&f(t,["response"],rj(n));const r=h(e,["error"]);return r!=null&&f(t,["error"],r),t}function dj(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);if(t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),h(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function hj(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);t!==void 0&&s!=null&&f(t,["_query","pageToken"],s);const a=h(e,["filter"]);return t!==void 0&&a!=null&&f(t,["_query","filter"],a),n}function fj(e){const t={},n=h(e,["config"]);return n!=null&&dj(n,t),t}function mj(e){const t={},n=h(e,["config"]);return n!=null&&hj(n,t),t}function pj(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>sl(o))),f(t,["batchJobs"],a)}return t}function gj(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Qd(o))),f(t,["batchJobs"],a)}return t}function xj(e){const t={},n=h(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);r!=null&&f(t,["codeExecutionResult"],r);const s=h(e,["executableCode"]);s!=null&&f(t,["executableCode"],s);const a=h(e,["fileData"]);a!=null&&f(t,["fileData"],ZT(a));const o=h(e,["functionCall"]);o!=null&&f(t,["functionCall"],ej(o));const l=h(e,["functionResponse"]);l!=null&&f(t,["functionResponse"],l);const c=h(e,["inlineData"]);c!=null&&f(t,["inlineData"],LT(c));const u=h(e,["text"]);u!=null&&f(t,["text"],u);const d=h(e,["thought"]);d!=null&&f(t,["thought"],d);const p=h(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const m=h(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function yj(e){const t={},n=h(e,["category"]);if(n!=null&&f(t,["category"],n),h(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(e,["threshold"]);return r!=null&&f(t,["threshold"],r),t}function vj(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],tj(n));const r=h(e,["retrievalConfig"]);return r!=null&&f(t,["retrievalConfig"],r),t}function bj(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const s=h(e,["computerUse"]);s!=null&&f(t,["computerUse"],s);const a=h(e,["fileSearch"]);a!=null&&f(t,["fileSearch"],a);const o=h(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],ij(l));const c=h(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],oj(c));const u=h(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Qn||(Qn={}));class ps{constructor(t,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,s)}init(t,n,r){var s,a;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wj extends tr{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ps(Qn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=xg(this.apiClient,t),r=n._url,s=J("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,c=l.requests,u=[];for(const d of c){const p=Object.assign({},d);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}u.push(p)}return l.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const a=this.getGcsUri(t),o=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=HT(this.apiClient,t);return l=J("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Qd(d))}else{const u=xg(this.apiClient,t);return l=J("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>sl(d))}}async createEmbeddingsInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=FT(this.apiClient,t);return a=J("{model}:asyncBatchEmbedContent",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>sl(c))}}async get(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=aj(this.apiClient,t);return l=J("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Qd(d))}else{const u=sj(this.apiClient,t);return l=J("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>sl(d))}}async cancel(t){var n,r,s,a;let o="",l={};if(this.apiClient.isVertexAI()){const c=OT(this.apiClient,t);o=J("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=UT(this.apiClient,t);o=J("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=mj(t);return l=J("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=gj(d),m=new fg;return Object.assign(m,p),m})}else{const u=fj(t);return l=J("batches",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=pj(d),m=new fg;return Object.assign(m,p),m})}}async delete(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=JT(this.apiClient,t);return l=J("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>KT(d))}else{const u=$T(this.apiClient,t);return l=J("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>YT(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _j(e){const t={},n=h(e,["data"]);if(n!=null&&f(t,["data"],n),h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function yg(e){const t={},n=h(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Fj(a))),f(t,["parts"],s)}const r=h(e,["role"]);return r!=null&&f(t,["role"],r),t}function Sj(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&f(t,["ttl"],r);const s=h(e,["expireTime"]);t!==void 0&&s!=null&&f(t,["expireTime"],s);const a=h(e,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const o=h(e,["contents"]);if(t!==void 0&&o!=null){let d=an(o);Array.isArray(d)&&(d=d.map(p=>yg(p))),f(t,["contents"],d)}const l=h(e,["systemInstruction"]);t!==void 0&&l!=null&&f(t,["systemInstruction"],yg(ht(l)));const c=h(e,["tools"]);if(t!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(p=>Jj(p))),f(t,["tools"],d)}const u=h(e,["toolConfig"]);if(t!==void 0&&u!=null&&f(t,["toolConfig"],$j(u)),h(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Nj(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&f(t,["ttl"],r);const s=h(e,["expireTime"]);t!==void 0&&s!=null&&f(t,["expireTime"],s);const a=h(e,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const o=h(e,["contents"]);if(t!==void 0&&o!=null){let p=an(o);Array.isArray(p)&&(p=p.map(m=>m)),f(t,["contents"],p)}const l=h(e,["systemInstruction"]);t!==void 0&&l!=null&&f(t,["systemInstruction"],ht(l));const c=h(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Yj(m))),f(t,["tools"],p)}const u=h(e,["toolConfig"]);t!==void 0&&u!=null&&f(t,["toolConfig"],u);const d=h(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function Ej(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["model"],fw(e,r));const s=h(t,["config"]);return s!=null&&Sj(s,n),n}function Cj(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["model"],fw(e,r));const s=h(t,["config"]);return s!=null&&Nj(s,n),n}function kj(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],nr(e,r)),n}function Tj(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],nr(e,r)),n}function jj(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function Aj(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function Rj(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function Ij(e){const t={},n=h(e,["id"]);n!=null&&f(t,["id"],n);const r=h(e,["args"]);r!=null&&f(t,["args"],r);const s=h(e,["name"]);if(s!=null&&f(t,["name"],s),h(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Mj(e){const t={},n=h(e,["mode"]);n!=null&&f(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);if(r!=null&&f(t,["allowedFunctionNames"],r),h(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Dj(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&f(t,["description"],n);const r=h(e,["name"]);r!=null&&f(t,["name"],r);const s=h(e,["parameters"]);s!=null&&f(t,["parameters"],s);const a=h(e,["parametersJsonSchema"]);a!=null&&f(t,["parametersJsonSchema"],a);const o=h(e,["response"]);o!=null&&f(t,["response"],o);const l=h(e,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function Pj(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],nr(e,r)),n}function Lj(e,t){const n={},r=h(t,["name"]);return r!=null&&f(n,["_url","name"],nr(e,r)),n}function Uj(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function Oj(e){const t={};if(h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function zj(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),n}function Bj(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),n}function qj(e){const t={},n=h(e,["config"]);return n!=null&&zj(n,t),t}function Gj(e){const t={},n=h(e,["config"]);return n!=null&&Bj(n,t),t}function Hj(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["cachedContents"],a)}return t}function Vj(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["cachedContents"],a)}return t}function Fj(e){const t={},n=h(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);r!=null&&f(t,["codeExecutionResult"],r);const s=h(e,["executableCode"]);s!=null&&f(t,["executableCode"],s);const a=h(e,["fileData"]);a!=null&&f(t,["fileData"],Rj(a));const o=h(e,["functionCall"]);o!=null&&f(t,["functionCall"],Ij(o));const l=h(e,["functionResponse"]);l!=null&&f(t,["functionResponse"],l);const c=h(e,["inlineData"]);c!=null&&f(t,["inlineData"],_j(c));const u=h(e,["text"]);u!=null&&f(t,["text"],u);const d=h(e,["thought"]);d!=null&&f(t,["thought"],d);const p=h(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const m=h(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function $j(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],Mj(n));const r=h(e,["retrievalConfig"]);return r!=null&&f(t,["retrievalConfig"],r),t}function Jj(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const s=h(e,["computerUse"]);s!=null&&f(t,["computerUse"],s);const a=h(e,["fileSearch"]);a!=null&&f(t,["fileSearch"],a);const o=h(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],Uj(l));const c=h(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],Oj(c));const u=h(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function Yj(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Dj(m))),f(t,["functionDeclarations"],p)}const r=h(e,["retrieval"]);r!=null&&f(t,["retrieval"],r);const s=h(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const a=h(e,["computerUse"]);if(a!=null&&f(t,["computerUse"],a),h(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);const l=h(e,["enterpriseWebSearch"]);l!=null&&f(t,["enterpriseWebSearch"],l);const c=h(e,["googleMaps"]);c!=null&&f(t,["googleMaps"],c);const u=h(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=h(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function Kj(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&f(t,["ttl"],r);const s=h(e,["expireTime"]);return t!==void 0&&s!=null&&f(t,["expireTime"],s),n}function Wj(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&f(t,["ttl"],r);const s=h(e,["expireTime"]);return t!==void 0&&s!=null&&f(t,["expireTime"],s),n}function Xj(e,t){const n={},r=h(t,["name"]);r!=null&&f(n,["_url","name"],nr(e,r));const s=h(t,["config"]);return s!=null&&Kj(s,n),n}function Qj(e,t){const n={},r=h(t,["name"]);r!=null&&f(n,["_url","name"],nr(e,r));const s=h(t,["config"]);return s!=null&&Wj(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zj extends tr{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ps(Qn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Cj(this.apiClient,t);return l=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=Ej(this.apiClient,t);return l=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Lj(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=Pj(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Tj(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=Aj(d),m=new dg;return Object.assign(m,p),m})}else{const u=kj(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=jj(d),m=new dg;return Object.assign(m,p),m})}}async update(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Qj(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=Xj(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Gj(t);return l=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=Vj(d),m=new hg;return Object.assign(m,p),m})}else{const u=qj(t);return l=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=Hj(d),m=new hg;return Object.assign(m,p),m})}}}function Fl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function vg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(e){return this instanceof te?(this.v=e,this):new te(e)}function pn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(v){return Promise.resolve(v).then(g,p)}}function l(g,v){r[g]&&(s[g]=function(x){return new Promise(function(w,y){a.push([g,x,w,y])>1||c(g,x)})},v&&(s[g]=v(s[g])))}function c(g,v){try{u(r[g](v))}catch(x){m(a[0][3],x)}}function u(g){g.value instanceof te?Promise.resolve(g.value.v).then(d,p):m(a[0][2],g)}function d(g){c("next",g)}function p(g){c("throw",g)}function m(g,v){g(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function gn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof vg=="function"?vg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,c){o=e[a](o),s(l,c,o.done,o.value)})}}function s(a,o,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Cw(n)}function Cw(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function tA(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function bg(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const s=[];let a=!0;for(;r<n&&e[r].role==="model";)s.push(e[r]),a&&!Cw(e[r])&&(a=!1),r++;a?t.push(...s):t.pop()}return t}class nA{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new rA(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class rA{constructor(t,n,r,s={},a=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),tA(a)}async sendMessage(t){var n;await this.sendPromise;const r=ht(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,l;const c=await s,u=(o=(a=c.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,d=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];d!=null&&(m=(l=d.slice(p))!==null&&l!==void 0?l:[]);const g=u?[u]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var n;await this.sendPromise;const r=ht(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(t=!1){const n=t?bg(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return pn(this,arguments,function*(){var s,a,o,l,c,u;const d=[];try{for(var p=!0,m=gn(t),g;g=yield te(m.next()),s=g.done,!s;p=!0){l=g.value,p=!1;const v=l;if(eA(v)){const x=(u=(c=v.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;x!==void 0&&d.push(x)}yield yield te(v)}}catch(v){a={error:v}}finally{try{!p&&!s&&(o=m.return)&&(yield te(o.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(t,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...bg(r)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,vc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(e){const t={},n=h(e,["file"]);return n!=null&&f(t,["file"],n),t}function aA(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function iA(e){const t={},n=h(e,["name"]);return n!=null&&f(t,["_url","file"],vw(n)),t}function oA(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function lA(e){const t={},n=h(e,["name"]);return n!=null&&f(t,["_url","file"],vw(n)),t}function cA(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),n}function uA(e){const t={},n=h(e,["config"]);return n!=null&&cA(n,t),t}function dA(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["files"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hA extends tr{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ps(Qn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uA(t);return a=J("files",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=dA(c),d=new gT;return Object.assign(d,u),d})}}async createInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sA(t);return a=J("upload/v1beta/files",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=aA(c),d=new xT;return Object.assign(d,u),d})}}async get(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lA(t);return a=J("files/{file}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=iA(t);return a=J("files/{file}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=oA(c),d=new yT;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function al(e){const t={},n=h(e,["data"]);if(n!=null&&f(t,["data"],n),h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function fA(e){const t={},n=h(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>jA(a))),f(t,["parts"],s)}const r=h(e,["role"]);return r!=null&&f(t,["role"],r),t}function mA(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function pA(e){const t={},n=h(e,["id"]);n!=null&&f(t,["id"],n);const r=h(e,["args"]);r!=null&&f(t,["args"],r);const s=h(e,["name"]);if(s!=null&&f(t,["name"],s),h(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function gA(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&f(t,["description"],n);const r=h(e,["name"]);r!=null&&f(t,["name"],r);const s=h(e,["parameters"]);s!=null&&f(t,["parameters"],s);const a=h(e,["parametersJsonSchema"]);a!=null&&f(t,["parametersJsonSchema"],a);const o=h(e,["response"]);o!=null&&f(t,["response"],o);const l=h(e,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function xA(e){const t={},n=h(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const r=h(e,["responseJsonSchema"]);r!=null&&f(t,["responseJsonSchema"],r);const s=h(e,["audioTimestamp"]);s!=null&&f(t,["audioTimestamp"],s);const a=h(e,["candidateCount"]);a!=null&&f(t,["candidateCount"],a);const o=h(e,["enableAffectiveDialog"]);o!=null&&f(t,["enableAffectiveDialog"],o);const l=h(e,["frequencyPenalty"]);l!=null&&f(t,["frequencyPenalty"],l);const c=h(e,["logprobs"]);c!=null&&f(t,["logprobs"],c);const u=h(e,["maxOutputTokens"]);u!=null&&f(t,["maxOutputTokens"],u);const d=h(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const p=h(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);const m=h(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);const g=h(e,["responseMimeType"]);g!=null&&f(t,["responseMimeType"],g);const v=h(e,["responseModalities"]);v!=null&&f(t,["responseModalities"],v);const x=h(e,["responseSchema"]);x!=null&&f(t,["responseSchema"],x);const w=h(e,["routingConfig"]);w!=null&&f(t,["routingConfig"],w);const y=h(e,["seed"]);y!=null&&f(t,["seed"],y);const b=h(e,["speechConfig"]);b!=null&&f(t,["speechConfig"],b);const _=h(e,["stopSequences"]);_!=null&&f(t,["stopSequences"],_);const S=h(e,["temperature"]);S!=null&&f(t,["temperature"],S);const T=h(e,["thinkingConfig"]);T!=null&&f(t,["thinkingConfig"],T);const N=h(e,["topK"]);N!=null&&f(t,["topK"],N);const C=h(e,["topP"]);if(C!=null&&f(t,["topP"],C),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function yA(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function vA(e){const t={};if(h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function bA(e,t){const n={},r=h(e,["generationConfig"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig"],r);const s=h(e,["responseModalities"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","responseModalities"],s);const a=h(e,["temperature"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","temperature"],a);const o=h(e,["topP"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","topP"],o);const l=h(e,["topK"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topK"],l);const c=h(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const u=h(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=h(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const p=h(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Mf(p));const m=h(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);const g=h(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=h(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],fA(ht(v)));const x=h(e,["tools"]);if(t!==void 0&&x!=null){let N=Aa(x);Array.isArray(N)&&(N=N.map(C=>RA(ja(C)))),f(t,["setup","tools"],N)}const w=h(e,["sessionResumption"]);t!==void 0&&w!=null&&f(t,["setup","sessionResumption"],AA(w));const y=h(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);const b=h(e,["outputAudioTranscription"]);t!==void 0&&b!=null&&f(t,["setup","outputAudioTranscription"],b);const _=h(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&f(t,["setup","realtimeInputConfig"],_);const S=h(e,["contextWindowCompression"]);t!==void 0&&S!=null&&f(t,["setup","contextWindowCompression"],S);const T=h(e,["proactivity"]);if(t!==void 0&&T!=null&&f(t,["setup","proactivity"],T),h(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wA(e,t){const n={},r=h(e,["generationConfig"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig"],xA(r));const s=h(e,["responseModalities"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","responseModalities"],s);const a=h(e,["temperature"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","temperature"],a);const o=h(e,["topP"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","topP"],o);const l=h(e,["topK"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topK"],l);const c=h(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const u=h(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=h(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const p=h(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Mf(p));const m=h(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);const g=h(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=h(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],ht(v));const x=h(e,["tools"]);if(t!==void 0&&x!=null){let C=Aa(x);Array.isArray(C)&&(C=C.map(I=>IA(ja(I)))),f(t,["setup","tools"],C)}const w=h(e,["sessionResumption"]);t!==void 0&&w!=null&&f(t,["setup","sessionResumption"],w);const y=h(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);const b=h(e,["outputAudioTranscription"]);t!==void 0&&b!=null&&f(t,["setup","outputAudioTranscription"],b);const _=h(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&f(t,["setup","realtimeInputConfig"],_);const S=h(e,["contextWindowCompression"]);t!==void 0&&S!=null&&f(t,["setup","contextWindowCompression"],S);const T=h(e,["proactivity"]);t!==void 0&&T!=null&&f(t,["setup","proactivity"],T);const N=h(e,["explicitVadSignal"]);return t!==void 0&&N!=null&&f(t,["setup","explicitVadSignal"],N),n}function _A(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["setup","model"],he(e,r));const s=h(t,["config"]);return s!=null&&f(n,["config"],bA(s,n)),n}function SA(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["setup","model"],he(e,r));const s=h(t,["config"]);return s!=null&&f(n,["config"],wA(s,n)),n}function NA(e){const t={},n=h(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function EA(e){const t={},n=h(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["weightedPrompts"],r)}return t}function CA(e){const t={},n=h(e,["media"]);if(n!=null){let u=mw(n);Array.isArray(u)&&(u=u.map(d=>al(d))),f(t,["mediaChunks"],u)}const r=h(e,["audio"]);r!=null&&f(t,["audio"],al(gw(r)));const s=h(e,["audioStreamEnd"]);s!=null&&f(t,["audioStreamEnd"],s);const a=h(e,["video"]);a!=null&&f(t,["video"],al(pw(a)));const o=h(e,["text"]);o!=null&&f(t,["text"],o);const l=h(e,["activityStart"]);l!=null&&f(t,["activityStart"],l);const c=h(e,["activityEnd"]);return c!=null&&f(t,["activityEnd"],c),t}function kA(e){const t={},n=h(e,["media"]);if(n!=null){let u=mw(n);Array.isArray(u)&&(u=u.map(d=>d)),f(t,["mediaChunks"],u)}const r=h(e,["audio"]);r!=null&&f(t,["audio"],gw(r));const s=h(e,["audioStreamEnd"]);s!=null&&f(t,["audioStreamEnd"],s);const a=h(e,["video"]);a!=null&&f(t,["video"],pw(a));const o=h(e,["text"]);o!=null&&f(t,["text"],o);const l=h(e,["activityStart"]);l!=null&&f(t,["activityStart"],l);const c=h(e,["activityEnd"]);return c!=null&&f(t,["activityEnd"],c),t}function TA(e){const t={},n=h(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);const r=h(e,["serverContent"]);r!=null&&f(t,["serverContent"],r);const s=h(e,["toolCall"]);s!=null&&f(t,["toolCall"],s);const a=h(e,["toolCallCancellation"]);a!=null&&f(t,["toolCallCancellation"],a);const o=h(e,["usageMetadata"]);o!=null&&f(t,["usageMetadata"],MA(o));const l=h(e,["goAway"]);l!=null&&f(t,["goAway"],l);const c=h(e,["sessionResumptionUpdate"]);c!=null&&f(t,["sessionResumptionUpdate"],c);const u=h(e,["voiceActivityDetectionSignal"]);return u!=null&&f(t,["voiceActivityDetectionSignal"],u),t}function jA(e){const t={},n=h(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);r!=null&&f(t,["codeExecutionResult"],r);const s=h(e,["executableCode"]);s!=null&&f(t,["executableCode"],s);const a=h(e,["fileData"]);a!=null&&f(t,["fileData"],mA(a));const o=h(e,["functionCall"]);o!=null&&f(t,["functionCall"],pA(o));const l=h(e,["functionResponse"]);l!=null&&f(t,["functionResponse"],l);const c=h(e,["inlineData"]);c!=null&&f(t,["inlineData"],al(c));const u=h(e,["text"]);u!=null&&f(t,["text"],u);const d=h(e,["thought"]);d!=null&&f(t,["thought"],d);const p=h(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const m=h(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function AA(e){const t={},n=h(e,["handle"]);if(n!=null&&f(t,["handle"],n),h(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function RA(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const s=h(e,["computerUse"]);s!=null&&f(t,["computerUse"],s);const a=h(e,["fileSearch"]);a!=null&&f(t,["fileSearch"],a);const o=h(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],yA(l));const c=h(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],vA(c));const u=h(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function IA(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>gA(m))),f(t,["functionDeclarations"],p)}const r=h(e,["retrieval"]);r!=null&&f(t,["retrieval"],r);const s=h(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const a=h(e,["computerUse"]);if(a!=null&&f(t,["computerUse"],a),h(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);const l=h(e,["enterpriseWebSearch"]);l!=null&&f(t,["enterpriseWebSearch"],l);const c=h(e,["googleMaps"]);c!=null&&f(t,["googleMaps"],c);const u=h(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=h(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function MA(e){const t={},n=h(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);const r=h(e,["cachedContentTokenCount"]);r!=null&&f(t,["cachedContentTokenCount"],r);const s=h(e,["candidatesTokenCount"]);s!=null&&f(t,["responseTokenCount"],s);const a=h(e,["toolUsePromptTokenCount"]);a!=null&&f(t,["toolUsePromptTokenCount"],a);const o=h(e,["thoughtsTokenCount"]);o!=null&&f(t,["thoughtsTokenCount"],o);const l=h(e,["totalTokenCount"]);l!=null&&f(t,["totalTokenCount"],l);const c=h(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["promptTokensDetails"],g)}const u=h(e,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["cacheTokensDetails"],g)}const d=h(e,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["responseTokensDetails"],g)}const p=h(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>v)),f(t,["toolUsePromptTokensDetails"],g)}const m=h(e,["trafficType"]);return m!=null&&f(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DA(e){const t={},n=h(e,["data"]);if(n!=null&&f(t,["data"],n),h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function PA(e){const t={},n=h(e,["content"]);n!=null&&f(t,["content"],n);const r=h(e,["citationMetadata"]);r!=null&&f(t,["citationMetadata"],LA(r));const s=h(e,["tokenCount"]);s!=null&&f(t,["tokenCount"],s);const a=h(e,["finishReason"]);a!=null&&f(t,["finishReason"],a);const o=h(e,["avgLogprobs"]);o!=null&&f(t,["avgLogprobs"],o);const l=h(e,["groundingMetadata"]);l!=null&&f(t,["groundingMetadata"],l);const c=h(e,["index"]);c!=null&&f(t,["index"],c);const u=h(e,["logprobsResult"]);u!=null&&f(t,["logprobsResult"],u);const d=h(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),f(t,["safetyRatings"],m)}const p=h(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function LA(e){const t={},n=h(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["citations"],r)}return t}function UA(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let a=an(s);Array.isArray(a)&&(a=a.map(o=>o)),f(n,["contents"],a)}return n}function OA(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),f(t,["tokensInfo"],s)}return t}function zA(e){const t={},n=h(e,["values"]);n!=null&&f(t,["values"],n);const r=h(e,["statistics"]);return r!=null&&f(t,["statistics"],BA(r)),t}function BA(e){const t={},n=h(e,["truncated"]);n!=null&&f(t,["truncated"],n);const r=h(e,["token_count"]);return r!=null&&f(t,["tokenCount"],r),t}function bc(e){const t={},n=h(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>K4(a))),f(t,["parts"],s)}const r=h(e,["role"]);return r!=null&&f(t,["role"],r),t}function qA(e){const t={},n=h(e,["controlType"]);n!=null&&f(t,["controlType"],n);const r=h(e,["enableControlImageComputation"]);return r!=null&&f(t,["computeControl"],r),t}function GA(e){const t={};if(h(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function HA(e,t){const n={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&f(t,["systemInstruction"],ht(r));const s=h(e,["tools"]);if(t!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Aw(l))),f(t,["tools"],o)}const a=h(e,["generationConfig"]);return t!==void 0&&a!=null&&f(t,["generationConfig"],D4(a)),n}function VA(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let o=an(s);Array.isArray(o)&&(o=o.map(l=>bc(l))),f(n,["contents"],o)}const a=h(t,["config"]);return a!=null&&GA(a),n}function FA(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let o=an(s);Array.isArray(o)&&(o=o.map(l=>l)),f(n,["contents"],o)}const a=h(t,["config"]);return a!=null&&HA(a,n),n}function $A(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["totalTokens"]);r!=null&&f(t,["totalTokens"],r);const s=h(e,["cachedContentTokenCount"]);return s!=null&&f(t,["cachedContentTokenCount"],s),t}function JA(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["totalTokens"]);return r!=null&&f(t,["totalTokens"],r),t}function YA(e,t){const n={},r=h(t,["model"]);return r!=null&&f(n,["_url","name"],he(e,r)),n}function KA(e,t){const n={},r=h(t,["model"]);return r!=null&&f(n,["_url","name"],he(e,r)),n}function WA(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function XA(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function QA(e,t){const n={},r=h(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const s=h(e,["negativePrompt"]);t!==void 0&&s!=null&&f(t,["parameters","negativePrompt"],s);const a=h(e,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const o=h(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);const l=h(e,["guidanceScale"]);t!==void 0&&l!=null&&f(t,["parameters","guidanceScale"],l);const c=h(e,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const u=h(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const d=h(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=h(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const m=h(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const g=h(e,["language"]);t!==void 0&&g!=null&&f(t,["parameters","language"],g);const v=h(e,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const x=h(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","compressionQuality"],x);const w=h(e,["addWatermark"]);t!==void 0&&w!=null&&f(t,["parameters","addWatermark"],w);const y=h(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);const b=h(e,["editMode"]);t!==void 0&&b!=null&&f(t,["parameters","editMode"],b);const _=h(e,["baseSteps"]);return t!==void 0&&_!=null&&f(t,["parameters","editConfig","baseSteps"],_),n}function ZA(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const a=h(t,["referenceImages"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>tR(c))),f(n,["instances[0]","referenceImages"],l)}const o=h(t,["config"]);return o!=null&&QA(o,n),n}function e4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>wc(a))),f(t,["generatedImages"],s)}return t}function t4(e,t){const n={},r=h(e,["taskType"]);t!==void 0&&r!=null&&f(t,["requests[]","taskType"],r);const s=h(e,["title"]);t!==void 0&&s!=null&&f(t,["requests[]","title"],s);const a=h(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&f(t,["requests[]","outputDimensionality"],a),h(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function n4(e,t){const n={},r=h(e,["taskType"]);t!==void 0&&r!=null&&f(t,["instances[]","task_type"],r);const s=h(e,["title"]);t!==void 0&&s!=null&&f(t,["instances[]","title"],s);const a=h(e,["outputDimensionality"]);t!==void 0&&a!=null&&f(t,["parameters","outputDimensionality"],a);const o=h(e,["mimeType"]);t!==void 0&&o!=null&&f(t,["instances[]","mimeType"],o);const l=h(e,["autoTruncate"]);return t!==void 0&&l!=null&&f(t,["parameters","autoTruncate"],l),n}function r4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let l=Af(e,s);Array.isArray(l)&&(l=l.map(c=>c)),f(n,["requests[]","content"],l)}const a=h(t,["config"]);a!=null&&t4(a,n);const o=h(t,["model"]);return o!==void 0&&f(n,["requests[]","model"],he(e,o)),n}function s4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let o=Af(e,s);Array.isArray(o)&&(o=o.map(l=>l)),f(n,["instances[]","content"],o)}const a=h(t,["config"]);return a!=null&&n4(a,n),n}function a4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["embeddings"],a)}const s=h(e,["metadata"]);return s!=null&&f(t,["metadata"],s),t}function i4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>zA(o))),f(t,["embeddings"],a)}const s=h(e,["metadata"]);return s!=null&&f(t,["metadata"],s),t}function o4(e){const t={},n=h(e,["endpoint"]);n!=null&&f(t,["name"],n);const r=h(e,["deployedModelId"]);return r!=null&&f(t,["deployedModelId"],r),t}function l4(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function c4(e){const t={},n=h(e,["id"]);n!=null&&f(t,["id"],n);const r=h(e,["args"]);r!=null&&f(t,["args"],r);const s=h(e,["name"]);if(s!=null&&f(t,["name"],s),h(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function u4(e){const t={},n=h(e,["mode"]);n!=null&&f(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);if(r!=null&&f(t,["allowedFunctionNames"],r),h(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function d4(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&f(t,["description"],n);const r=h(e,["name"]);r!=null&&f(t,["name"],r);const s=h(e,["parameters"]);s!=null&&f(t,["parameters"],s);const a=h(e,["parametersJsonSchema"]);a!=null&&f(t,["parametersJsonSchema"],a);const o=h(e,["response"]);o!=null&&f(t,["response"],o);const l=h(e,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function h4(e,t,n){const r={},s=h(t,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],bc(ht(s)));const a=h(t,["temperature"]);a!=null&&f(r,["temperature"],a);const o=h(t,["topP"]);o!=null&&f(r,["topP"],o);const l=h(t,["topK"]);l!=null&&f(r,["topK"],l);const c=h(t,["candidateCount"]);c!=null&&f(r,["candidateCount"],c);const u=h(t,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const d=h(t,["stopSequences"]);d!=null&&f(r,["stopSequences"],d);const p=h(t,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=h(t,["logprobs"]);m!=null&&f(r,["logprobs"],m);const g=h(t,["presencePenalty"]);g!=null&&f(r,["presencePenalty"],g);const v=h(t,["frequencyPenalty"]);v!=null&&f(r,["frequencyPenalty"],v);const x=h(t,["seed"]);x!=null&&f(r,["seed"],x);const w=h(t,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const y=h(t,["responseSchema"]);y!=null&&f(r,["responseSchema"],Rf(y));const b=h(t,["responseJsonSchema"]);if(b!=null&&f(r,["responseJsonSchema"],b),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=h(t,["safetySettings"]);if(n!==void 0&&_!=null){let G=_;Array.isArray(G)&&(G=G.map(W=>nR(W))),f(n,["safetySettings"],G)}const S=h(t,["tools"]);if(n!==void 0&&S!=null){let G=Aa(S);Array.isArray(G)&&(G=G.map(W=>cR(ja(W)))),f(n,["tools"],G)}const T=h(t,["toolConfig"]);if(n!==void 0&&T!=null&&f(n,["toolConfig"],lR(T)),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=h(t,["cachedContent"]);n!==void 0&&N!=null&&f(n,["cachedContent"],nr(e,N));const C=h(t,["responseModalities"]);C!=null&&f(r,["responseModalities"],C);const I=h(t,["mediaResolution"]);I!=null&&f(r,["mediaResolution"],I);const A=h(t,["speechConfig"]);if(A!=null&&f(r,["speechConfig"],If(A)),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=h(t,["thinkingConfig"]);R!=null&&f(r,["thinkingConfig"],R);const O=h(t,["imageConfig"]);O!=null&&f(r,["imageConfig"],z4(O));const D=h(t,["enableEnhancedCivicAnswers"]);return D!=null&&f(r,["enableEnhancedCivicAnswers"],D),r}function f4(e,t,n){const r={},s=h(t,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],ht(s));const a=h(t,["temperature"]);a!=null&&f(r,["temperature"],a);const o=h(t,["topP"]);o!=null&&f(r,["topP"],o);const l=h(t,["topK"]);l!=null&&f(r,["topK"],l);const c=h(t,["candidateCount"]);c!=null&&f(r,["candidateCount"],c);const u=h(t,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const d=h(t,["stopSequences"]);d!=null&&f(r,["stopSequences"],d);const p=h(t,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=h(t,["logprobs"]);m!=null&&f(r,["logprobs"],m);const g=h(t,["presencePenalty"]);g!=null&&f(r,["presencePenalty"],g);const v=h(t,["frequencyPenalty"]);v!=null&&f(r,["frequencyPenalty"],v);const x=h(t,["seed"]);x!=null&&f(r,["seed"],x);const w=h(t,["responseMimeType"]);w!=null&&f(r,["responseMimeType"],w);const y=h(t,["responseSchema"]);y!=null&&f(r,["responseSchema"],Rf(y));const b=h(t,["responseJsonSchema"]);b!=null&&f(r,["responseJsonSchema"],b);const _=h(t,["routingConfig"]);_!=null&&f(r,["routingConfig"],_);const S=h(t,["modelSelectionConfig"]);S!=null&&f(r,["modelConfig"],S);const T=h(t,["safetySettings"]);if(n!==void 0&&T!=null){let B=T;Array.isArray(B)&&(B=B.map(P=>P)),f(n,["safetySettings"],B)}const N=h(t,["tools"]);if(n!==void 0&&N!=null){let B=Aa(N);Array.isArray(B)&&(B=B.map(P=>Aw(ja(P)))),f(n,["tools"],B)}const C=h(t,["toolConfig"]);n!==void 0&&C!=null&&f(n,["toolConfig"],C);const I=h(t,["labels"]);n!==void 0&&I!=null&&f(n,["labels"],I);const A=h(t,["cachedContent"]);n!==void 0&&A!=null&&f(n,["cachedContent"],nr(e,A));const R=h(t,["responseModalities"]);R!=null&&f(r,["responseModalities"],R);const O=h(t,["mediaResolution"]);O!=null&&f(r,["mediaResolution"],O);const D=h(t,["speechConfig"]);D!=null&&f(r,["speechConfig"],If(D));const G=h(t,["audioTimestamp"]);G!=null&&f(r,["audioTimestamp"],G);const W=h(t,["thinkingConfig"]);W!=null&&f(r,["thinkingConfig"],W);const K=h(t,["imageConfig"]);if(K!=null&&f(r,["imageConfig"],B4(K)),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function wg(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let o=an(s);Array.isArray(o)&&(o=o.map(l=>bc(l))),f(n,["contents"],o)}const a=h(t,["config"]);return a!=null&&f(n,["generationConfig"],h4(e,a,n)),n}function _g(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["contents"]);if(s!=null){let o=an(s);Array.isArray(o)&&(o=o.map(l=>l)),f(n,["contents"],o)}const a=h(t,["config"]);return a!=null&&f(n,["generationConfig"],f4(e,a,n)),n}function Sg(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>PA(u))),f(t,["candidates"],c)}const s=h(e,["modelVersion"]);s!=null&&f(t,["modelVersion"],s);const a=h(e,["promptFeedback"]);a!=null&&f(t,["promptFeedback"],a);const o=h(e,["responseId"]);o!=null&&f(t,["responseId"],o);const l=h(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function Ng(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(t,["candidates"],u)}const s=h(e,["createTime"]);s!=null&&f(t,["createTime"],s);const a=h(e,["modelVersion"]);a!=null&&f(t,["modelVersion"],a);const o=h(e,["promptFeedback"]);o!=null&&f(t,["promptFeedback"],o);const l=h(e,["responseId"]);l!=null&&f(t,["responseId"],l);const c=h(e,["usageMetadata"]);return c!=null&&f(t,["usageMetadata"],c),t}function m4(e,t){const n={};if(h(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=h(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const a=h(e,["guidanceScale"]);if(t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a),h(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&f(t,["parameters","safetySetting"],o);const l=h(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);const c=h(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&f(t,["parameters","includeSafetyAttributes"],c);const u=h(e,["includeRaiReason"]);t!==void 0&&u!=null&&f(t,["parameters","includeRaiReason"],u);const d=h(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);const p=h(e,["outputMimeType"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","mimeType"],p);const m=h(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&f(t,["parameters","outputOptions","compressionQuality"],m),h(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=h(e,["imageSize"]);if(t!==void 0&&g!=null&&f(t,["parameters","sampleImageSize"],g),h(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function p4(e,t){const n={},r=h(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const s=h(e,["negativePrompt"]);t!==void 0&&s!=null&&f(t,["parameters","negativePrompt"],s);const a=h(e,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const o=h(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);const l=h(e,["guidanceScale"]);t!==void 0&&l!=null&&f(t,["parameters","guidanceScale"],l);const c=h(e,["seed"]);t!==void 0&&c!=null&&f(t,["parameters","seed"],c);const u=h(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const d=h(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=h(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const m=h(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);const g=h(e,["language"]);t!==void 0&&g!=null&&f(t,["parameters","language"],g);const v=h(e,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const x=h(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","compressionQuality"],x);const w=h(e,["addWatermark"]);t!==void 0&&w!=null&&f(t,["parameters","addWatermark"],w);const y=h(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);const b=h(e,["imageSize"]);t!==void 0&&b!=null&&f(t,["parameters","sampleImageSize"],b);const _=h(e,["enhancePrompt"]);return t!==void 0&&_!=null&&f(t,["parameters","enhancePrompt"],_),n}function g4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const a=h(t,["config"]);return a!=null&&m4(a,n),n}function x4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const a=h(t,["config"]);return a!=null&&p4(a,n),n}function y4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>A4(o))),f(t,["generatedImages"],a)}const s=h(e,["positivePromptSafetyAttributes"]);return s!=null&&f(t,["positivePromptSafetyAttributes"],Tw(s)),t}function v4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>wc(o))),f(t,["generatedImages"],a)}const s=h(e,["positivePromptSafetyAttributes"]);return s!=null&&f(t,["positivePromptSafetyAttributes"],jw(s)),t}function b4(e,t){const n={},r=h(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r),h(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(e,["durationSeconds"]);if(t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s),h(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=h(e,["aspectRatio"]);t!==void 0&&a!=null&&f(t,["parameters","aspectRatio"],a);const o=h(e,["resolution"]);t!==void 0&&o!=null&&f(t,["parameters","resolution"],o);const l=h(e,["personGeneration"]);if(t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l),h(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=h(e,["negativePrompt"]);t!==void 0&&c!=null&&f(t,["parameters","negativePrompt"],c);const u=h(e,["enhancePrompt"]);if(t!==void 0&&u!=null&&f(t,["parameters","enhancePrompt"],u),h(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],_c(d));const p=h(e,["referenceImages"]);if(t!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>_R(g))),f(t,["instances[0]","referenceImages"],m)}if(h(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function w4(e,t){const n={},r=h(e,["numberOfVideos"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=h(e,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const a=h(e,["fps"]);t!==void 0&&a!=null&&f(t,["parameters","fps"],a);const o=h(e,["durationSeconds"]);t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o);const l=h(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const c=h(e,["aspectRatio"]);t!==void 0&&c!=null&&f(t,["parameters","aspectRatio"],c);const u=h(e,["resolution"]);t!==void 0&&u!=null&&f(t,["parameters","resolution"],u);const d=h(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=h(e,["pubsubTopic"]);t!==void 0&&p!=null&&f(t,["parameters","pubsubTopic"],p);const m=h(e,["negativePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","negativePrompt"],m);const g=h(e,["enhancePrompt"]);t!==void 0&&g!=null&&f(t,["parameters","enhancePrompt"],g);const v=h(e,["generateAudio"]);t!==void 0&&v!=null&&f(t,["parameters","generateAudio"],v);const x=h(e,["lastFrame"]);t!==void 0&&x!=null&&f(t,["instances[0]","lastFrame"],yn(x));const w=h(e,["referenceImages"]);if(t!==void 0&&w!=null){let _=w;Array.isArray(_)&&(_=_.map(S=>SR(S))),f(t,["instances[0]","referenceImages"],_)}const y=h(e,["mask"]);t!==void 0&&y!=null&&f(t,["instances[0]","mask"],wR(y));const b=h(e,["compressionQuality"]);return t!==void 0&&b!=null&&f(t,["parameters","compressionQuality"],b),n}function _4(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response","generateVideoResponse"]);return o!=null&&f(t,["response"],C4(o)),t}function S4(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response"]);return o!=null&&f(t,["response"],k4(o)),t}function N4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const a=h(t,["image"]);a!=null&&f(n,["instances[0]","image"],_c(a));const o=h(t,["video"]);o!=null&&f(n,["instances[0]","video"],Rw(o));const l=h(t,["source"]);l!=null&&T4(l,n);const c=h(t,["config"]);return c!=null&&b4(c,n),n}function E4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const a=h(t,["image"]);a!=null&&f(n,["instances[0]","image"],yn(a));const o=h(t,["video"]);o!=null&&f(n,["instances[0]","video"],Iw(o));const l=h(t,["source"]);l!=null&&j4(l,n);const c=h(t,["config"]);return c!=null&&w4(c,n),n}function C4(e){const t={},n=h(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>I4(o))),f(t,["generatedVideos"],a)}const r=h(e,["raiMediaFilteredCount"]);r!=null&&f(t,["raiMediaFilteredCount"],r);const s=h(e,["raiMediaFilteredReasons"]);return s!=null&&f(t,["raiMediaFilteredReasons"],s),t}function k4(e){const t={},n=h(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>M4(o))),f(t,["generatedVideos"],a)}const r=h(e,["raiMediaFilteredCount"]);r!=null&&f(t,["raiMediaFilteredCount"],r);const s=h(e,["raiMediaFilteredReasons"]);return s!=null&&f(t,["raiMediaFilteredReasons"],s),t}function T4(e,t){const n={},r=h(e,["prompt"]);t!==void 0&&r!=null&&f(t,["instances[0]","prompt"],r);const s=h(e,["image"]);t!==void 0&&s!=null&&f(t,["instances[0]","image"],_c(s));const a=h(e,["video"]);return t!==void 0&&a!=null&&f(t,["instances[0]","video"],Rw(a)),n}function j4(e,t){const n={},r=h(e,["prompt"]);t!==void 0&&r!=null&&f(t,["instances[0]","prompt"],r);const s=h(e,["image"]);t!==void 0&&s!=null&&f(t,["instances[0]","image"],yn(s));const a=h(e,["video"]);return t!==void 0&&a!=null&&f(t,["instances[0]","video"],Iw(a)),n}function A4(e){const t={},n=h(e,["_self"]);n!=null&&f(t,["image"],q4(n));const r=h(e,["raiFilteredReason"]);r!=null&&f(t,["raiFilteredReason"],r);const s=h(e,["_self"]);return s!=null&&f(t,["safetyAttributes"],Tw(s)),t}function wc(e){const t={},n=h(e,["_self"]);n!=null&&f(t,["image"],kw(n));const r=h(e,["raiFilteredReason"]);r!=null&&f(t,["raiFilteredReason"],r);const s=h(e,["_self"]);s!=null&&f(t,["safetyAttributes"],jw(s));const a=h(e,["prompt"]);return a!=null&&f(t,["enhancedPrompt"],a),t}function R4(e){const t={},n=h(e,["_self"]);n!=null&&f(t,["mask"],kw(n));const r=h(e,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),f(t,["labels"],s)}return t}function I4(e){const t={},n=h(e,["video"]);return n!=null&&f(t,["video"],vR(n)),t}function M4(e){const t={},n=h(e,["_self"]);return n!=null&&f(t,["video"],bR(n)),t}function D4(e){const t={},n=h(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);const r=h(e,["responseJsonSchema"]);r!=null&&f(t,["responseJsonSchema"],r);const s=h(e,["audioTimestamp"]);s!=null&&f(t,["audioTimestamp"],s);const a=h(e,["candidateCount"]);a!=null&&f(t,["candidateCount"],a);const o=h(e,["enableAffectiveDialog"]);o!=null&&f(t,["enableAffectiveDialog"],o);const l=h(e,["frequencyPenalty"]);l!=null&&f(t,["frequencyPenalty"],l);const c=h(e,["logprobs"]);c!=null&&f(t,["logprobs"],c);const u=h(e,["maxOutputTokens"]);u!=null&&f(t,["maxOutputTokens"],u);const d=h(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);const p=h(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);const m=h(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);const g=h(e,["responseMimeType"]);g!=null&&f(t,["responseMimeType"],g);const v=h(e,["responseModalities"]);v!=null&&f(t,["responseModalities"],v);const x=h(e,["responseSchema"]);x!=null&&f(t,["responseSchema"],x);const w=h(e,["routingConfig"]);w!=null&&f(t,["routingConfig"],w);const y=h(e,["seed"]);y!=null&&f(t,["seed"],y);const b=h(e,["speechConfig"]);b!=null&&f(t,["speechConfig"],b);const _=h(e,["stopSequences"]);_!=null&&f(t,["stopSequences"],_);const S=h(e,["temperature"]);S!=null&&f(t,["temperature"],S);const T=h(e,["thinkingConfig"]);T!=null&&f(t,["thinkingConfig"],T);const N=h(e,["topK"]);N!=null&&f(t,["topK"],N);const C=h(e,["topP"]);if(C!=null&&f(t,["topP"],C),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function P4(e,t){const n={},r=h(t,["model"]);return r!=null&&f(n,["_url","name"],he(e,r)),n}function L4(e,t){const n={},r=h(t,["model"]);return r!=null&&f(n,["_url","name"],he(e,r)),n}function U4(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function O4(e){const t={};if(h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function z4(e){const t={},n=h(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const r=h(e,["imageSize"]);if(r!=null&&f(t,["imageSize"],r),h(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function B4(e){const t={},n=h(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);const r=h(e,["imageSize"]);r!=null&&f(t,["imageSize"],r);const s=h(e,["outputMimeType"]);s!=null&&f(t,["imageOutputOptions","mimeType"],s);const a=h(e,["outputCompressionQuality"]);return a!=null&&f(t,["imageOutputOptions","compressionQuality"],a),t}function q4(e){const t={},n=h(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Pr(n));const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function kw(e){const t={},n=h(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const r=h(e,["bytesBase64Encoded"]);r!=null&&f(t,["imageBytes"],Pr(r));const s=h(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function _c(e){const t={};if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Pr(n));const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function yn(e){const t={},n=h(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);const r=h(e,["imageBytes"]);r!=null&&f(t,["bytesBase64Encoded"],Pr(r));const s=h(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function G4(e,t,n){const r={},s=h(t,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);const a=h(t,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const o=h(t,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const l=h(t,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],bw(e,l)),r}function H4(e,t,n){const r={},s=h(t,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);const a=h(t,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const o=h(t,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const l=h(t,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],bw(e,l)),r}function V4(e,t){const n={},r=h(t,["config"]);return r!=null&&G4(e,r,n),n}function F4(e,t){const n={},r=h(t,["config"]);return r!=null&&H4(e,r,n),n}function $4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["_self"]);if(s!=null){let a=ww(s);Array.isArray(a)&&(a=a.map(o=>Zd(o))),f(t,["models"],a)}return t}function J4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["_self"]);if(s!=null){let a=ww(s);Array.isArray(a)&&(a=a.map(o=>eh(o))),f(t,["models"],a)}return t}function Y4(e){const t={},n=h(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);const r=h(e,["segmentationClasses"]);r!=null&&f(t,["maskClasses"],r);const s=h(e,["maskDilation"]);return s!=null&&f(t,["dilation"],s),t}function Zd(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["displayName"]);r!=null&&f(t,["displayName"],r);const s=h(e,["description"]);s!=null&&f(t,["description"],s);const a=h(e,["version"]);a!=null&&f(t,["version"],a);const o=h(e,["_self"]);o!=null&&f(t,["tunedModelInfo"],uR(o));const l=h(e,["inputTokenLimit"]);l!=null&&f(t,["inputTokenLimit"],l);const c=h(e,["outputTokenLimit"]);c!=null&&f(t,["outputTokenLimit"],c);const u=h(e,["supportedGenerationMethods"]);u!=null&&f(t,["supportedActions"],u);const d=h(e,["temperature"]);d!=null&&f(t,["temperature"],d);const p=h(e,["maxTemperature"]);p!=null&&f(t,["maxTemperature"],p);const m=h(e,["topP"]);m!=null&&f(t,["topP"],m);const g=h(e,["topK"]);g!=null&&f(t,["topK"],g);const v=h(e,["thinking"]);return v!=null&&f(t,["thinking"],v),t}function eh(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["displayName"]);r!=null&&f(t,["displayName"],r);const s=h(e,["description"]);s!=null&&f(t,["description"],s);const a=h(e,["versionId"]);a!=null&&f(t,["version"],a);const o=h(e,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>o4(m))),f(t,["endpoints"],p)}const l=h(e,["labels"]);l!=null&&f(t,["labels"],l);const c=h(e,["_self"]);c!=null&&f(t,["tunedModelInfo"],dR(c));const u=h(e,["defaultCheckpointId"]);u!=null&&f(t,["defaultCheckpointId"],u);const d=h(e,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),f(t,["checkpoints"],p)}return t}function K4(e){const t={},n=h(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);r!=null&&f(t,["codeExecutionResult"],r);const s=h(e,["executableCode"]);s!=null&&f(t,["executableCode"],s);const a=h(e,["fileData"]);a!=null&&f(t,["fileData"],l4(a));const o=h(e,["functionCall"]);o!=null&&f(t,["functionCall"],c4(o));const l=h(e,["functionResponse"]);l!=null&&f(t,["functionResponse"],l);const c=h(e,["inlineData"]);c!=null&&f(t,["inlineData"],DA(c));const u=h(e,["text"]);u!=null&&f(t,["text"],u);const d=h(e,["thought"]);d!=null&&f(t,["thought"],d);const p=h(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const m=h(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function W4(e){const t={},n=h(e,["productImage"]);return n!=null&&f(t,["image"],yn(n)),t}function X4(e,t){const n={},r=h(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);const s=h(e,["baseSteps"]);t!==void 0&&s!=null&&f(t,["parameters","baseSteps"],s);const a=h(e,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const o=h(e,["seed"]);t!==void 0&&o!=null&&f(t,["parameters","seed"],o);const l=h(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&f(t,["parameters","safetySetting"],l);const c=h(e,["personGeneration"]);t!==void 0&&c!=null&&f(t,["parameters","personGeneration"],c);const u=h(e,["addWatermark"]);t!==void 0&&u!=null&&f(t,["parameters","addWatermark"],u);const d=h(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);const p=h(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p);const m=h(e,["enhancePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m);const g=h(e,["labels"]);return t!==void 0&&g!=null&&f(t,["labels"],g),n}function Q4(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["source"]);s!=null&&eR(s,n);const a=h(t,["config"]);return a!=null&&X4(a,n),n}function Z4(e){const t={},n=h(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>wc(s))),f(t,["generatedImages"],r)}return t}function eR(e,t){const n={},r=h(e,["prompt"]);t!==void 0&&r!=null&&f(t,["instances[0]","prompt"],r);const s=h(e,["personImage"]);t!==void 0&&s!=null&&f(t,["instances[0]","personImage","image"],yn(s));const a=h(e,["productImages"]);if(t!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>W4(l))),f(t,["instances[0]","productImages"],o)}return n}function tR(e){const t={},n=h(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],yn(n));const r=h(e,["referenceId"]);r!=null&&f(t,["referenceId"],r);const s=h(e,["referenceType"]);s!=null&&f(t,["referenceType"],s);const a=h(e,["maskImageConfig"]);a!=null&&f(t,["maskImageConfig"],Y4(a));const o=h(e,["controlImageConfig"]);o!=null&&f(t,["controlImageConfig"],qA(o));const l=h(e,["styleImageConfig"]);l!=null&&f(t,["styleImageConfig"],l);const c=h(e,["subjectImageConfig"]);return c!=null&&f(t,["subjectImageConfig"],c),t}function Tw(e){const t={},n=h(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const r=h(e,["safetyAttributes","scores"]);r!=null&&f(t,["scores"],r);const s=h(e,["contentType"]);return s!=null&&f(t,["contentType"],s),t}function jw(e){const t={},n=h(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);const r=h(e,["safetyAttributes","scores"]);r!=null&&f(t,["scores"],r);const s=h(e,["contentType"]);return s!=null&&f(t,["contentType"],s),t}function nR(e){const t={},n=h(e,["category"]);if(n!=null&&f(t,["category"],n),h(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(e,["threshold"]);return r!=null&&f(t,["threshold"],r),t}function rR(e){const t={},n=h(e,["image"]);return n!=null&&f(t,["image"],yn(n)),t}function sR(e,t){const n={},r=h(e,["mode"]);t!==void 0&&r!=null&&f(t,["parameters","mode"],r);const s=h(e,["maxPredictions"]);t!==void 0&&s!=null&&f(t,["parameters","maxPredictions"],s);const a=h(e,["confidenceThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","confidenceThreshold"],a);const o=h(e,["maskDilation"]);t!==void 0&&o!=null&&f(t,["parameters","maskDilation"],o);const l=h(e,["binaryColorThreshold"]);t!==void 0&&l!=null&&f(t,["parameters","binaryColorThreshold"],l);const c=h(e,["labels"]);return t!==void 0&&c!=null&&f(t,["labels"],c),n}function aR(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["source"]);s!=null&&oR(s,n);const a=h(t,["config"]);return a!=null&&sR(a,n),n}function iR(e){const t={},n=h(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>R4(s))),f(t,["generatedMasks"],r)}return t}function oR(e,t){const n={},r=h(e,["prompt"]);t!==void 0&&r!=null&&f(t,["instances[0]","prompt"],r);const s=h(e,["image"]);t!==void 0&&s!=null&&f(t,["instances[0]","image"],yn(s));const a=h(e,["scribbleImage"]);return t!==void 0&&a!=null&&f(t,["instances[0]","scribble"],rR(a)),n}function lR(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&f(t,["functionCallingConfig"],u4(n));const r=h(e,["retrievalConfig"]);return r!=null&&f(t,["retrievalConfig"],r),t}function cR(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const s=h(e,["computerUse"]);s!=null&&f(t,["computerUse"],s);const a=h(e,["fileSearch"]);a!=null&&f(t,["fileSearch"],a);const o=h(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],U4(l));const c=h(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],O4(c));const u=h(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}function Aw(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>d4(m))),f(t,["functionDeclarations"],p)}const r=h(e,["retrieval"]);r!=null&&f(t,["retrieval"],r);const s=h(e,["googleSearchRetrieval"]);s!=null&&f(t,["googleSearchRetrieval"],s);const a=h(e,["computerUse"]);if(a!=null&&f(t,["computerUse"],a),h(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);const l=h(e,["enterpriseWebSearch"]);l!=null&&f(t,["enterpriseWebSearch"],l);const c=h(e,["googleMaps"]);c!=null&&f(t,["googleMaps"],c);const u=h(e,["googleSearch"]);u!=null&&f(t,["googleSearch"],u);const d=h(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function uR(e){const t={},n=h(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);const r=h(e,["createTime"]);r!=null&&f(t,["createTime"],r);const s=h(e,["updateTime"]);return s!=null&&f(t,["updateTime"],s),t}function dR(e){const t={},n=h(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);const r=h(e,["createTime"]);r!=null&&f(t,["createTime"],r);const s=h(e,["updateTime"]);return s!=null&&f(t,["updateTime"],s),t}function hR(e,t){const n={},r=h(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=h(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);const a=h(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&f(t,["defaultCheckpointId"],a),n}function fR(e,t){const n={},r=h(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const s=h(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);const a=h(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&f(t,["defaultCheckpointId"],a),n}function mR(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","name"],he(e,r));const s=h(t,["config"]);return s!=null&&hR(s,n),n}function pR(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["config"]);return s!=null&&fR(s,n),n}function gR(e,t){const n={},r=h(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const s=h(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&f(t,["parameters","safetySetting"],s);const a=h(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);const o=h(e,["includeRaiReason"]);t!==void 0&&o!=null&&f(t,["parameters","includeRaiReason"],o);const l=h(e,["outputMimeType"]);t!==void 0&&l!=null&&f(t,["parameters","outputOptions","mimeType"],l);const c=h(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&f(t,["parameters","outputOptions","compressionQuality"],c);const u=h(e,["enhanceInputImage"]);t!==void 0&&u!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],u);const d=h(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=h(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);const m=h(e,["numberOfImages"]);t!==void 0&&m!=null&&f(t,["parameters","sampleCount"],m);const g=h(e,["mode"]);return t!==void 0&&g!=null&&f(t,["parameters","mode"],g),n}function xR(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["_url","model"],he(e,r));const s=h(t,["image"]);s!=null&&f(n,["instances[0]","image"],yn(s));const a=h(t,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const o=h(t,["config"]);return o!=null&&gR(o,n),n}function yR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>wc(a))),f(t,["generatedImages"],s)}return t}function vR(e){const t={},n=h(e,["uri"]);n!=null&&f(t,["uri"],n);const r=h(e,["encodedVideo"]);r!=null&&f(t,["videoBytes"],Pr(r));const s=h(e,["encoding"]);return s!=null&&f(t,["mimeType"],s),t}function bR(e){const t={},n=h(e,["gcsUri"]);n!=null&&f(t,["uri"],n);const r=h(e,["bytesBase64Encoded"]);r!=null&&f(t,["videoBytes"],Pr(r));const s=h(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function wR(e){const t={},n=h(e,["image"]);n!=null&&f(t,["_self"],yn(n));const r=h(e,["maskMode"]);return r!=null&&f(t,["maskMode"],r),t}function _R(e){const t={},n=h(e,["image"]);n!=null&&f(t,["image"],_c(n));const r=h(e,["referenceType"]);return r!=null&&f(t,["referenceType"],r),t}function SR(e){const t={},n=h(e,["image"]);n!=null&&f(t,["image"],yn(n));const r=h(e,["referenceType"]);return r!=null&&f(t,["referenceType"],r),t}function Rw(e){const t={},n=h(e,["uri"]);n!=null&&f(t,["uri"],n);const r=h(e,["videoBytes"]);r!=null&&f(t,["encodedVideo"],Pr(r));const s=h(e,["mimeType"]);return s!=null&&f(t,["encoding"],s),t}function Iw(e){const t={},n=h(e,["uri"]);n!=null&&f(t,["gcsUri"],n);const r=h(e,["videoBytes"]);r!=null&&f(t,["bytesBase64Encoded"],Pr(r));const s=h(e,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NR(e,t){const n={},r=h(e,["displayName"]);return t!==void 0&&r!=null&&f(t,["displayName"],r),n}function ER(e){const t={},n=h(e,["config"]);return n!=null&&NR(n,t),t}function CR(e,t){const n={},r=h(e,["force"]);return t!==void 0&&r!=null&&f(t,["_query","force"],r),n}function kR(e){const t={},n=h(e,["name"]);n!=null&&f(t,["_url","name"],n);const r=h(e,["config"]);return r!=null&&CR(r,t),t}function TR(e){const t={},n=h(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function jR(e,t){const n={},r=h(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["customMetadata"],a)}const s=h(e,["chunkingConfig"]);return t!==void 0&&s!=null&&f(t,["chunkingConfig"],s),n}function AR(e){const t={},n=h(e,["name"]);n!=null&&f(t,["name"],n);const r=h(e,["metadata"]);r!=null&&f(t,["metadata"],r);const s=h(e,["done"]);s!=null&&f(t,["done"],s);const a=h(e,["error"]);a!=null&&f(t,["error"],a);const o=h(e,["response"]);return o!=null&&f(t,["response"],IR(o)),t}function RR(e){const t={},n=h(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const r=h(e,["fileName"]);r!=null&&f(t,["fileName"],r);const s=h(e,["config"]);return s!=null&&jR(s,t),t}function IR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["parent"]);r!=null&&f(t,["parent"],r);const s=h(e,["documentName"]);return s!=null&&f(t,["documentName"],s),t}function MR(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),n}function DR(e){const t={},n=h(e,["config"]);return n!=null&&MR(n,t),t}function PR(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["fileSearchStores"],a)}return t}function Mw(e,t){const n={},r=h(e,["mimeType"]);t!==void 0&&r!=null&&f(t,["mimeType"],r);const s=h(e,["displayName"]);t!==void 0&&s!=null&&f(t,["displayName"],s);const a=h(e,["customMetadata"]);if(t!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(t,["customMetadata"],l)}const o=h(e,["chunkingConfig"]);return t!==void 0&&o!=null&&f(t,["chunkingConfig"],o),n}function LR(e){const t={},n=h(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);const r=h(e,["config"]);return r!=null&&Mw(r,t),t}function UR(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OR="Content-Type",zR="X-Server-Timeout",BR="User-Agent",th="x-goog-api-client",qR="1.34.0",GR=`google-genai-sdk/${qR}`,HR="v1beta1",VR="v1beta";class FR{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:HR,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:VR,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[o,l]of Object.entries(t.queryParams))s.searchParams.append(o,String(l));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),t.abortSignal),this.unaryApiCall(s,a,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),t.abortSignal),this.streamApiCall(s,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,s){if(n&&n.timeout||s){const a=new AbortController,o=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>a.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),t.signal=o}return n&&n.extraBody!==null&&$R(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Eg(s),new Wd(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Eg(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return pn(this,arguments,function*(){var r;const s=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield te(s.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(d,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const x=JSON.parse(JSON.stringify(v.error)),w=x.status,y=x.code,b=`got status: ${w}. ${JSON.stringify(v)}`;if(y>=400&&y<600)throw new vc({message:b,status:y})}}catch(v){if(v.name==="ApiError")throw v}o+=p;let m=-1,g=0;for(;;){m=-1,g=0;for(const w of c){const y=o.indexOf(w);y!==-1&&(m===-1||y<m)&&(m=y,g=w.length)}if(m===-1)break;const v=o.substring(0,m);o=o.substring(m+g);const x=v.trim();if(x.startsWith(l)){const w=x.substring(l.length).trim();try{const y=new Response(w,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield te(new Wd(y))}catch(y){throw new Error(`exception parsing stream chunk ${w}. ${y}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=GR+" "+this.clientOptions.userAgentExtra;return t[BR]=n,t[th]=n,t[OR]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[s,a]of Object.entries(t.headers))r.append(s,a);t.timeout&&t.timeout>0&&r.append(zR,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,o=await a.stat(t);s.sizeBytes=String(o.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=l;const c={file:s},u=this.getFileName(t),d=J("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,u,c,n==null?void 0:n.httpOptions);return a.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,r){var s;const a=this.clientOptions.uploader,o=await a.stat(n),l=String(o.size),c=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),p={};r!=null&&Mw(r,p);const m=await this.fetchUploadUrl(u,l,c,d,p,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,s,a,o){var l;let c={};o?c=o:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:t,body:JSON.stringify(a),httpMethod:"POST",httpOptions:c});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(l=u==null?void 0:u.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Eg(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new vc({message:s,status:n}):new Error(s)}}function $R(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const a=JSON.parse(e.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,o){const l=Object.assign({},a);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const u=o[c],d=l[c];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?l[c]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),l[c]=u)}return l}const s=r(n,t);e.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JR="mcp_used/unknown";let YR=!1;function Dw(e){for(const t of e)if(KR(t)||typeof t=="object"&&"inputSchema"in t)return!0;return YR}function Pw(e){var t;const n=(t=e[th])!==null&&t!==void 0?t:"";e[th]=(n+` ${JR}`).trimStart()}function KR(e){return e!==null&&typeof e=="object"&&e instanceof Df}function WR(e){return pn(this,arguments,function*(n,r=100){let s,a=0;for(;a<r;){const o=yield te(n.listTools({cursor:s}));for(const l of o.tools)yield yield te(l),a++;if(!o.nextCursor)break;s=o.nextCursor}})}class Df{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Df(t,n)}async initialize(){var t,n,r,s;if(this.mcpTools.length>0)return;const a={},o=[];for(const d of this.mcpClients)try{for(var l=!0,c=(n=void 0,gn(WR(d))),u;u=await c.next(),t=u.done,!t;l=!0){s=u.value,l=!1;const p=s;o.push(p);const m=p.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=d}}catch(p){n={error:p}}finally{try{!l&&!t&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),TT(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function XR(e,t,n){const r=new bT;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),t(r)}class QR{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=tI(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${l}`;let u=()=>{};const d=new Promise(_=>{u=_}),p=t.callbacks,m=function(){u({})},g=this.apiClient,v={onopen:m,onmessage:_=>{XR(g,p.onmessage,_)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(_){}},x=this.webSocketFactory.create(c,eI(o),v);x.connect(),await d;const b={setup:{model:he(this.apiClient,t.model)}};return x.send(JSON.stringify(b)),new ZR(x,this.apiClient)}}class ZR{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=EA(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=NA(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ks.PLAY)}pause(){this.sendPlaybackControl(Ks.PAUSE)}stop(){this.sendPlaybackControl(Ks.STOP)}resetContext(){this.sendPlaybackControl(Ks.RESET_CONTEXT)}close(){this.conn.close()}}function eI(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function tI(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rI(e,t,n){const r=new vT;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(e.isVertexAI()){const o=TA(a);Object.assign(r,o)}else Object.assign(r,a);t(r)}class sI{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new QR(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,s,a,o,l;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&Dw(t.config.tools)&&Pw(p);const m=lI(p);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d);else{const A=this.apiClient.getApiKey();let R="BidiGenerateContent",O="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",O="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${R}?${O}=${A}`}let g=()=>{};const v=new Promise(A=>{g=A}),x=t.callbacks,w=function(){var A;(A=x==null?void 0:x.onopen)===null||A===void 0||A.call(x),g({})},y=this.apiClient,b={onopen:w,onmessage:A=>{rI(y,x.onmessage,A)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(A){}},_=this.webSocketFactory.create(d,oI(m),b);_.connect(),await v;let S=he(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const A=this.apiClient.getProject(),R=this.apiClient.getLocation();S=`projects/${A}/locations/${R}/`+S}let T={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[qi.AUDIO]}:t.config.responseModalities=[qi.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(l=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],C=[];for(const A of N)if(this.isCallableTool(A)){const R=A;C.push(await R.tool())}else C.push(A);C.length>0&&(t.config.tools=C);const I={model:S,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?T=SA(this.apiClient,I):T=_A(this.apiClient,I),delete T.config,_.send(JSON.stringify(T)),new iI(_,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const aI={turnComplete:!0};class iI{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=an(n.turns),t.isVertexAI()||(r=r.map(s=>bc(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(nI)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},aI),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:kA(t)}:n={realtimeInput:CA(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function oI(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function lI(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cg=10;function kg(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const o of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(ia(o)){s=!0;break}if(!s)return!0;const a=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ia(e){return"callTool"in e&&typeof e.callTool=="function"}function cI(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(s=>ia(s)))!==null&&r!==void 0?r:!1}function Tg(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,s)=>{if(ia(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function jg(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uI extends tr{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,s,a,o,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!cI(n)||kg(n.config))return await this.generateContentInternal(c);const u=Tg(n);if(u.length>0){const x=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,p;const m=an(c.contents),g=(a=(s=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Cg;let v=0;for(;v<g&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,w=[];for(const y of(l=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(ia(y)){const _=await y.callTool(d.functionCalls);w.push(..._)}v++,p={role:"user",parts:w},c.contents=an(c.contents),c.contents.push(x),c.contents.push(p),jg(c.config)&&(m.push(x),m.push(p))}return jg(c.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var r,s,a,o,l;if(this.maybeMoveToResponseJsonSchem(n),kg(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=Tg(n);if(c.length>0){const p=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(a=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,d=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const o=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=c==null?void 0:c.safetyAttributes:o.push(c);let l;return a?l={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new ps(Qn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,a,o,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,s;const a=(n=t.config)===null||n===void 0?void 0:n.tools;if(!a)return t;const o=await Promise.all(a.map(async c=>ia(c)?await c.tool():c)),l={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:o})};if(l.config.tools=o,t.config&&t.config.tools&&Dw(t.config.tools)){const c=(s=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Pw(u),l.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return l}async initAfcToolsMap(t){var n,r,s;const a=new Map;for(const o of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ia(o)){const l=o,c=await l.tool();for(const u of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,l)}}return a}async processAfcStream(t){var n,r,s;const a=(s=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:Cg;let o=!1,l=0;const c=await this.initAfcToolsMap(t);return function(u,d,p){return pn(this,arguments,function*(){for(var m,g,v,x,w,y;l<a;){o&&(l++,o=!1);const T=yield te(u.processParamsMaybeAddMcpUsage(p)),N=yield te(u.generateContentStreamInternal(T)),C=[],I=[];try{for(var b=!0,_=(g=void 0,gn(N)),S;S=yield te(_.next()),m=S.done,!m;b=!0){x=S.value,b=!1;const A=x;if(yield yield te(A),A.candidates&&(!((w=A.candidates[0])===null||w===void 0)&&w.content)){I.push(A.candidates[0].content);for(const R of(y=A.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(l<a&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(R.functionCall.name)){const O=yield te(d.get(R.functionCall.name).callTool([R.functionCall]));C.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(A){g={error:A}}finally{try{!b&&!m&&(v=_.return)&&(yield te(v.call(_)))}finally{if(g)throw g.error}}if(C.length>0){o=!0;const A=new Fa;A.candidates=[{content:{role:"user",parts:C}}],yield yield te(A);const R=[];R.push(...I),R.push({role:"user",parts:C});const O=an(p.contents).concat(R);p.contents=O}else break}})}(this,c,t)}async generateContentInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=_g(this.apiClient,t);return l=J("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=Ng(d),m=new Fa;return Object.assign(m,p),m})}else{const u=wg(this.apiClient,t);return l=J("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=Sg(d),m=new Fa;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=_g(this.apiClient,t);return l=J("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return pn(this,arguments,function*(){var m,g,v,x;try{for(var w=!0,y=gn(p),b;b=yield te(y.next()),m=b.done,!m;w=!0){x=b.value,w=!1;const _=x,S=Ng(yield te(_.json()));S.sdkHttpResponse={headers:_.headers};const T=new Fa;Object.assign(T,S),yield yield te(T)}}catch(_){g={error:_}}finally{try{!w&&!m&&(v=y.return)&&(yield te(v.call(y)))}finally{if(g)throw g.error}}})})}else{const u=wg(this.apiClient,t);return l=J("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return pn(this,arguments,function*(){var m,g,v,x;try{for(var w=!0,y=gn(p),b;b=yield te(y.next()),m=b.done,!m;w=!0){x=b.value,w=!1;const _=x,S=Sg(yield te(_.json()));S.sdkHttpResponse={headers:_.headers};const T=new Fa;Object.assign(T,S),yield yield te(T)}}catch(_){g={error:_}}finally{try{!w&&!m&&(v=y.return)&&(yield te(v.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=s4(this.apiClient,t);return l=J("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=i4(d),m=new sg;return Object.assign(m,p),m})}else{const u=r4(this.apiClient,t);return l=J("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=a4(d),m=new sg;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=x4(this.apiClient,t);return l=J("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=v4(d),m=new ag;return Object.assign(m,p),m})}else{const u=g4(this.apiClient,t);return l=J("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=y4(d),m=new ag;return Object.assign(m,p),m})}}async editImageInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=ZA(this.apiClient,t);return a=J("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=e4(c),d=new lT;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=xR(this.apiClient,t);return a=J("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=yR(c),d=new cT;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=Q4(this.apiClient,t);return a=J("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=Z4(c),d=new uT;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=aR(this.apiClient,t);return a=J("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=iR(c),d=new dT;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=L4(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>eh(d))}else{const u=P4(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>Zd(d))}}async listInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=F4(this.apiClient,t);return l=J("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=J4(d),m=new ig;return Object.assign(m,p),m})}else{const u=V4(this.apiClient,t);return l=J("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=$4(d),m=new ig;return Object.assign(m,p),m})}}async update(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=pR(this.apiClient,t);return l=J("{model}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>eh(d))}else{const u=mR(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>Zd(d))}}async delete(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=KA(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=XA(d),m=new og;return Object.assign(m,p),m})}else{const u=YA(this.apiClient,t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=WA(d),m=new og;return Object.assign(m,p),m})}}async countTokens(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=FA(this.apiClient,t);return l=J("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=JA(d),m=new lg;return Object.assign(m,p),m})}else{const u=VA(this.apiClient,t);return l=J("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=$A(d),m=new lg;return Object.assign(m,p),m})}}async computeTokens(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=UA(this.apiClient,t);return a=J("{model}:computeTokens",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=OA(c),d=new hT;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=E4(this.apiClient,t);return l=J("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const p=S4(d),m=new Hl;return Object.assign(m,p),m})}else{const u=N4(this.apiClient,t);return l=J("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o.then(d=>{const p=_4(d),m=new Hl;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dI extends tr{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=nT(t);return l=J("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const u=tT(t);return l=J("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=Yk(t);return a=J("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hI(e){const t={},n=h(e,["data"]);if(n!=null&&f(t,["data"],n),h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function fI(e){const t={},n=h(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>_I(a))),f(t,["parts"],s)}const r=h(e,["role"]);return r!=null&&f(t,["role"],r),t}function mI(e,t,n){const r={},s=h(t,["expireTime"]);n!==void 0&&s!=null&&f(n,["expireTime"],s);const a=h(t,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const o=h(t,["uses"]);n!==void 0&&o!=null&&f(n,["uses"],o);const l=h(t,["liveConnectConstraints"]);n!==void 0&&l!=null&&f(n,["bidiGenerateContentSetup"],wI(e,l));const c=h(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&f(n,["fieldMask"],c),r}function pI(e,t){const n={},r=h(t,["config"]);return r!=null&&f(n,["config"],mI(e,r,n)),n}function gI(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function xI(e){const t={},n=h(e,["id"]);n!=null&&f(t,["id"],n);const r=h(e,["args"]);r!=null&&f(t,["args"],r);const s=h(e,["name"]);if(s!=null&&f(t,["name"],s),h(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function yI(e){const t={};if(h(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function vI(e){const t={};if(h(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function bI(e,t){const n={},r=h(e,["generationConfig"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig"],r);const s=h(e,["responseModalities"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","responseModalities"],s);const a=h(e,["temperature"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","temperature"],a);const o=h(e,["topP"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","topP"],o);const l=h(e,["topK"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","topK"],l);const c=h(e,["maxOutputTokens"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","maxOutputTokens"],c);const u=h(e,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const d=h(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);const p=h(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Mf(p));const m=h(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);const g=h(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=h(e,["systemInstruction"]);t!==void 0&&v!=null&&f(t,["setup","systemInstruction"],fI(ht(v)));const x=h(e,["tools"]);if(t!==void 0&&x!=null){let N=Aa(x);Array.isArray(N)&&(N=N.map(C=>NI(ja(C)))),f(t,["setup","tools"],N)}const w=h(e,["sessionResumption"]);t!==void 0&&w!=null&&f(t,["setup","sessionResumption"],SI(w));const y=h(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);const b=h(e,["outputAudioTranscription"]);t!==void 0&&b!=null&&f(t,["setup","outputAudioTranscription"],b);const _=h(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&f(t,["setup","realtimeInputConfig"],_);const S=h(e,["contextWindowCompression"]);t!==void 0&&S!=null&&f(t,["setup","contextWindowCompression"],S);const T=h(e,["proactivity"]);if(t!==void 0&&T!=null&&f(t,["setup","proactivity"],T),h(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function wI(e,t){const n={},r=h(t,["model"]);r!=null&&f(n,["setup","model"],he(e,r));const s=h(t,["config"]);return s!=null&&f(n,["config"],bI(s,n)),n}function _I(e){const t={},n=h(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);const r=h(e,["codeExecutionResult"]);r!=null&&f(t,["codeExecutionResult"],r);const s=h(e,["executableCode"]);s!=null&&f(t,["executableCode"],s);const a=h(e,["fileData"]);a!=null&&f(t,["fileData"],gI(a));const o=h(e,["functionCall"]);o!=null&&f(t,["functionCall"],xI(o));const l=h(e,["functionResponse"]);l!=null&&f(t,["functionResponse"],l);const c=h(e,["inlineData"]);c!=null&&f(t,["inlineData"],hI(c));const u=h(e,["text"]);u!=null&&f(t,["text"],u);const d=h(e,["thought"]);d!=null&&f(t,["thought"],d);const p=h(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);const m=h(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function SI(e){const t={},n=h(e,["handle"]);if(n!=null&&f(t,["handle"],n),h(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function NI(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const s=h(e,["computerUse"]);s!=null&&f(t,["computerUse"],s);const a=h(e,["fileSearch"]);a!=null&&f(t,["fileSearch"],a);const o=h(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(e,["googleMaps"]);l!=null&&f(t,["googleMaps"],yI(l));const c=h(e,["googleSearch"]);c!=null&&f(t,["googleSearch"],vI(c));const u=h(e,["urlContext"]);return u!=null&&f(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EI(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);t.push(...s)}else t.push(n)}return t.join(",")}function CI(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(e.bidiGenerateContentSetup=a,n=a):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const s=e.fieldMask;if(n){const a=EI(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?e.fieldMask=a:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];s.length>0&&(l=s.map(u=>o.includes(u)?`generationConfig.${u}`:u));const c=[];a&&c.push(a),l.length>0&&c.push(...l),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?e.fieldMask=s.join(","):delete e.fieldMask;return e}class kI extends tr{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=pI(this.apiClient,t);a=J("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const c=CI(l,t.config);return s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TI(e,t){const n={},r=h(e,["force"]);return t!==void 0&&r!=null&&f(t,["_query","force"],r),n}function jI(e){const t={},n=h(e,["name"]);n!=null&&f(t,["_url","name"],n);const r=h(e,["config"]);return r!=null&&TI(r,t),t}function AI(e){const t={},n=h(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function RI(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const s=h(e,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),n}function II(e){const t={},n=h(e,["parent"]);n!=null&&f(t,["_url","parent"],n);const r=h(e,["config"]);return r!=null&&RI(r,t),t}function MI(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&f(t,["nextPageToken"],r);const s=h(e,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),f(t,["documents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DI extends tr{constructor(t){super(),this.apiClient=t,this.list=async n=>new ps(Qn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AI(t);return a=J("{name}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(t){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=jI(t);s=J("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=II(t);return a=J("{parent}/documents",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=MI(c),d=new fT;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PI extends tr{constructor(t,n=new DI(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new ps(Qn.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ER(t);return a=J("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async get(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=TR(t);return a=J("{name}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(t){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=kR(t);s=J("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DR(t);return a=J("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=PR(c),d=new mT;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=LR(t);return a=J("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=UR(c),d=new pT;return Object.assign(d,u),d})}}async importFile(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=RR(t);return a=J("{file_search_store_name}:importFile",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=AR(c),d=new Tf;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lw=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Lw=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const LI=()=>Lw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nh(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const rh=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ln extends Error{}class xt extends ln{constructor(t,n,r,s){super(`${xt.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.error=n}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new Sc({message:r,cause:rh(n)});const a=n;return t===400?new Ow(t,a,r,s):t===401?new zw(t,a,r,s):t===403?new Bw(t,a,r,s):t===404?new qw(t,a,r,s):t===409?new Gw(t,a,r,s):t===422?new Hw(t,a,r,s):t===429?new Vw(t,a,r,s):t>=500?new Fw(t,a,r,s):new xt(t,a,r,s)}}class sh extends xt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Sc extends xt{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Uw extends Sc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Ow extends xt{}class zw extends xt{}class Bw extends xt{}class qw extends xt{}class Gw extends xt{}class Hw extends xt{}class Vw extends xt{}class Fw extends xt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UI=/^[a-z][a-z0-9+.-]*:/i,OI=e=>UI.test(e);let ah=e=>(ah=Array.isArray,ah(e));const zI=ah;let BI=zI;const Ag=BI;function qI(e){if(!e)return!0;for(const t in e)return!1;return!0}function GI(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const HI=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ln(`${e} must be an integer`);if(t<0)throw new ln(`${e} must be a positive integer`);return t},VI=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FI=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ps="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $I(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JI=()=>{var e,t,n,r,s;const a=$I();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ps,"X-Stainless-OS":Ig(Deno.build.os),"X-Stainless-Arch":Rg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ps,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ps,"X-Stainless-OS":Ig((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Rg((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=YI();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ps,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ps,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function YI(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${a}.${o}`}}}return null}const Rg=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ig=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let ko;const KI=()=>ko??(ko=JI());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function $w(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function XI(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return $w({start(){},async pull(n){const{done:r,value:s}=await t.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Jw(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function QI(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZI=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yw=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Eu(e,t,n){return Yw(),new File(e,t??"unknown_file",n)}function eM(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const tM=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kw=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",nM=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Kw(e),rM=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function sM(e,t,n){if(Yw(),e=await e,nM(e))return e instanceof File?e:Eu([await e.arrayBuffer()],e.name);if(rM(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Eu(await ih(s),t,n)}const r=await ih(e);if(t||(t=eM(e)),!(n!=null&&n.type)){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Eu(r,t,n)}async function ih(e){var t,n,r,s,a;let o=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)o.push(e);else if(Kw(e))o.push(e instanceof Blob?e:await e.arrayBuffer());else if(tM(e))try{for(var l=!0,c=gn(e),u;u=await c.next(),t=u.done,!t;l=!0){s=u.value,l=!1;const d=s;o.push(...await ih(d))}}catch(d){n={error:d}}finally{try{!l&&!t&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const d=(a=e==null?void 0:e.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${aM(e)}`)}return o}function aM(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ww{constructor(t){this._client=t}}Ww._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xw(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Mg=Object.freeze(Object.create(null)),iM=(e=Xw)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],o=n.reduce((d,p,m)=>{var g,v,x;/[?#]/.test(p)&&(s=!0);const w=r[m];let y=(s?encodeURIComponent:e)(""+w);return m!==r.length&&(w==null||typeof w=="object"&&w.toString===((x=Object.getPrototypeOf((v=Object.getPrototypeOf((g=w.hasOwnProperty)!==null&&g!==void 0?g:Mg))!==null&&v!==void 0?v:Mg))===null||x===void 0?void 0:x.toString))&&(y=w+"",a.push({start:d.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),d+p+(m===r.length?"":y)},""),l=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(l))!==null;)a.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(a.sort((d,p)=>d.start-p.start),a.length>0){let d=0;const p=a.reduce((m,g)=>{const v=" ".repeat(g.start-d),x="^".repeat(g.length);return d=g.start+g.length,m+v+x},"");throw new ln(`Path parameters result in path with invalid segments:
${a.map(m=>m.error).join(`
`)}
${o}
${p}`)}return o},To=iM(Xw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qw extends Ww{create(t,n){var r;const{api_version:s=this._client.apiVersion}=t,a=Fl(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new ln("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ln("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(To`/${s}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(To`/${s}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(To`/${s}/interactions/${t}/cancel`,r)}get(t,n={},r){var s;const a=n??{},{api_version:o=this._client.apiVersion}=a,l=Fl(a,["api_version"]);return this._client.get(To`/${o}/interactions/${t}`,Object.assign(Object.assign({query:l},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Qw._key=Object.freeze(["interactions"]);class Zw extends Qw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oM(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}let jo;function Pf(e){let t;return(jo??(t=new globalThis.TextEncoder,jo=t.encode.bind(t)))(e)}let Ao;function Dg(e){let t;return(Ao??(t=new globalThis.TextDecoder,Ao=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Pf(t):t;this.buffer=oM([this.buffer,n]);const r=[];let s;for(;(s=lM(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Dg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=Dg(this.buffer.subarray(0,a));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Nc.NEWLINE_CHARS=new Set([`
`,"\r"]);Nc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lM(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function cM(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $l={off:0,error:200,warn:300,info:400,debug:500},Pg=(e,t,n)=>{if(e){if(GI($l,e))return e;pt(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys($l))}`)}};function ti(){}function Ro(e,t,n){return!t||$l[e]>$l[n]?ti:t[e].bind(t)}const uM={error:ti,warn:ti,info:ti,debug:ti};let Lg=new WeakMap;function pt(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return uM;const s=Lg.get(n);if(s&&s[0]===r)return s[1];const a={error:Ro("error",n,r),warn:Ro("warn",n,r),info:Ro("info",n,r),debug:Ro("debug",n,r)};return Lg.set(n,[r,a]),a}const Yr=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ws{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let s=!1;const a=r?pt(r):console;function o(){return pn(this,arguments,function*(){var c,u,d,p;if(s)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let m=!1;try{try{for(var g=!0,v=gn(dM(t,n)),x;x=yield te(v.next()),c=x.done,!c;g=!0){p=x.value,g=!1;const w=p;if(!m)if(w.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield te(JSON.parse(w.data))}catch(y){throw a.error("Could not parse message into JSON:",w.data),a.error("From chunk:",w.raw),y}}}catch(w){u={error:w}}finally{try{!g&&!c&&(d=v.return)&&(yield te(d.call(v)))}finally{if(u)throw u.error}}m=!0}catch(w){if(nh(w))return yield te(void 0);throw w}finally{m||n.abort()}})}return new Ws(o,n,r)}static fromReadableStream(t,n,r){let s=!1;function a(){return pn(this,arguments,function*(){var c,u,d,p;const m=new Nc,g=Jw(t);try{for(var v=!0,x=gn(g),w;w=yield te(x.next()),c=w.done,!c;v=!0){p=w.value,v=!1;const y=p;for(const b of m.decode(y))yield yield te(b)}}catch(y){u={error:y}}finally{try{!v&&!c&&(d=x.return)&&(yield te(d.call(x)))}finally{if(u)throw u.error}}for(const y of m.flush())yield yield te(y)})}function o(){return pn(this,arguments,function*(){var c,u,d,p;if(s)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let m=!1;try{try{for(var g=!0,v=gn(a()),x;x=yield te(v.next()),c=x.done,!c;g=!0){p=x.value,g=!1;const w=p;m||w&&(yield yield te(JSON.parse(w)))}}catch(w){u={error:w}}finally{try{!g&&!c&&(d=v.return)&&(yield te(d.call(v)))}finally{if(u)throw u.error}}m=!0}catch(w){if(nh(w))return yield te(void 0);throw w}finally{m||n.abort()}})}return new Ws(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=r.next();t.push(o),n.push(o)}return a.shift()}});return[new Ws(()=>s(t),this.controller,this.client),new Ws(()=>s(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return $w({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const o=Pf(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function dM(e,t){return pn(this,arguments,function*(){var r,s,a,o;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ln("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ln("Attempted to iterate over a response with no body");const l=new fM,c=new Nc,u=Jw(e.body);try{for(var d=!0,p=gn(hM(u)),m;m=yield te(p.next()),r=m.done,!r;d=!0){o=m.value,d=!1;const g=o;for(const v of c.decode(g)){const x=l.decode(v);x&&(yield yield te(x))}}}catch(g){s={error:g}}finally{try{!d&&!r&&(a=p.return)&&(yield te(a.call(p)))}finally{if(s)throw s.error}}for(const g of c.flush()){const v=l.decode(g);v&&(yield yield te(v))}})}function hM(e){return pn(this,arguments,function*(){var n,r,s,a;let o=new Uint8Array;try{for(var l=!0,c=gn(e),u;u=yield te(c.next()),n=u.done,!n;l=!0){a=u.value,l=!1;const d=a;if(d==null)continue;const p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Pf(d):d;let m=new Uint8Array(o.length+p.length);m.set(o),m.set(p,o.length),o=m;let g;for(;(g=cM(o))!==-1;)yield yield te(o.slice(0,g)),o=o.slice(g)}}catch(d){r={error:d}}finally{try{!l&&!n&&(s=c.return)&&(yield te(s.call(c)))}finally{if(r)throw r.error}}o.length>0&&(yield yield te(o))})}class fM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=mM(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function mM(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pM(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=t,o=await(async()=>{var l;if(t.options.stream)return pt(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Ws.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const c=n.headers.get("content-type"),u=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return pt(e).debug(`[${r}] response parsed`,Yr({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf extends Promise{constructor(t,n,r=pM){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new Lf(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e1=Symbol("brand.privateNullableHeaders");function*gM(e){if(!e)return;if(e1 in e){const{values:r,nulls:s}=e;yield*r.entries();for(const a of s)yield[a,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Ag(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=Ag(r[1])?r[1]:[r[1]];let o=!1;for(const l of a)l!==void 0&&(t&&!o&&(o=!0,yield[s,null]),yield[s,l])}}const $a=e=>{const t=new Headers,n=new Set;for(const r of e){const s=new Set;for(const[a,o]of gM(r)){const l=a.toLowerCase();s.has(l)||(t.delete(a),s.add(l)),o===null?(t.delete(a),n.add(l)):(t.append(a,o),n.delete(l))}}return{[e1]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cu=e=>{var t,n,r,s,a,o;if(typeof globalThis.process<"u")return(r=(n=(t=Gk)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,e))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var t1;class Ec{constructor(t){var n,r,s,a,o,l,c,{baseURL:u=Cu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Cu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,m=Fl(t,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:Ec.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const v="warn";this.logLevel=v,this.logLevel=(o=(a=Pg(g.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:Pg(Cu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(l=g.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:WI(),this.encoder=ZI,this._options=g,this.apiKey=d,this.apiVersion=p,this.clientAdapter=g.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=$a([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return $a([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return $a([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ln(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ps}`}defaultIdempotencyKey(){return`stainless-node-retry-${LI()}`}makeStatusError(t,n,r,s){return xt.generate(t,n,r,s)}buildURL(t,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,a=OI(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),o=this.defaultQuery();return qI(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:t,path:n},s)))}request(t,n=null){return new Lf(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var s,a,o;const l=await t,c=(s=l.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:u,url:d,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(u,{url:d,options:l});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(pt(this).debug(`[${m}] sending request`,Yr({retryOfRequestLogID:r,method:l.method,url:d,options:l,headers:u.headers})),!((a=l.signal)===null||a===void 0)&&a.aborted)throw new sh;const x=new AbortController,w=await this.fetchWithTimeout(d,u,p,x).catch(rh),y=Date.now();if(w instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(!((o=l.signal)===null||o===void 0)&&o.aborted)throw new sh;const S=nh(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return pt(this).info(`[${m}] connection ${S?"timed out":"failed"} - ${_}`),pt(this).debug(`[${m}] connection ${S?"timed out":"failed"} (${_})`,Yr({retryOfRequestLogID:r,url:d,durationMs:y-v,message:w.message})),this.retryRequest(l,n,r??m);throw pt(this).info(`[${m}] connection ${S?"timed out":"failed"} - error; no more retries left`),pt(this).debug(`[${m}] connection ${S?"timed out":"failed"} (error; no more retries left)`,Yr({retryOfRequestLogID:r,url:d,durationMs:y-v,message:w.message})),S?new Uw:new Sc({cause:w})}const b=`[${m}${g}] ${u.method} ${d} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${y-v}ms`;if(!w.ok){const _=await this.shouldRetry(w);if(n&&_){const A=`retrying, ${n} attempts remaining`;return await QI(w.body),pt(this).info(`${b} - ${A}`),pt(this).debug(`[${m}] response error (${A})`,Yr({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:y-v})),this.retryRequest(l,n,r??m,w.headers)}const S=_?"error; no more retries left":"error; not retryable";pt(this).info(`${b} - ${S}`);const T=await w.text().catch(A=>rh(A).message),N=VI(T),C=N?void 0:T;throw pt(this).debug(`[${m}] response error (${S})`,Yr({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:C,durationMs:Date.now()-v})),this.makeStatusError(w.status,N,C,w.headers)}return pt(this).info(b),pt(this).debug(`[${m}] response start`,Yr({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:y-v})),{response:w,options:l,controller:x,requestLogID:m,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(t,n,r,s){const a=n||{},{signal:o,method:l}=a,c=Fl(a,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,s){var a;let o;const l=s==null?void 0:s.get("retry-after-ms");if(l){const u=parseFloat(l);Number.isNaN(u)||(o=u)}const c=s==null?void 0:s.get("retry-after");if(c&&!o){const u=parseFloat(c);Number.isNaN(u)?o=Date.parse(c)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await FI(o),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,o=Math.min(.5*Math.pow(2,a),8),l=1-Math.random()*.25;return o*l*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,s,a;const o=Object.assign({},t),{method:l,path:c,query:u,defaultBaseURL:d}=o,p=this.buildURL(c,u,d);"timeout"in o&&HI("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),v=await this.buildHeaders({options:t,method:l,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:v},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=o.fetchOptions)!==null&&a!==void 0?a:{}),url:p,timeout:o.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const o=await this.authHeaders(t);let l=$a([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),KI()),this._options.defaultHeaders,r,t.headers,o]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=$a([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:XI(t)}:this.encoder({body:t,headers:r})}}Ec.DEFAULT_TIMEOUT=6e4;class nt extends Ec{constructor(){super(...arguments),this.interactions=new Zw(this)}}t1=nt;nt.GeminiNextGenAPIClient=t1;nt.GeminiNextGenAPIClientError=ln;nt.APIError=xt;nt.APIConnectionError=Sc;nt.APIConnectionTimeoutError=Uw;nt.APIUserAbortError=sh;nt.NotFoundError=qw;nt.ConflictError=Gw;nt.RateLimitError=Vw;nt.BadRequestError=Ow;nt.AuthenticationError=zw;nt.InternalServerError=Fw;nt.PermissionDeniedError=Bw;nt.UnprocessableEntityError=Hw;nt.toFile=sM;nt.Interactions=Zw;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xM(e,t){const n={},r=h(e,["name"]);return r!=null&&f(n,["_url","name"],r),n}function yM(e,t){const n={},r=h(e,["name"]);return r!=null&&f(n,["_url","name"],r),n}function vM(e,t){const n={},r=h(e,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function bM(e,t){const n={},r=h(e,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function wM(e,t,n){const r={};if(h(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(e,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&f(t,["displayName"],s),h(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=h(e,["epochCount"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","epochCount"],a);const o=h(e,["learningRateMultiplier"]);if(o!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=h(e,["batchSize"]);t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","batchSize"],l);const c=h(e,["learningRate"]);if(t!==void 0&&c!=null&&f(t,["tuningTask","hyperparameters","learningRate"],c),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function _M(e,t,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=h(e,["validationDataset"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec"],Ug(g))}else if(s==="PREFERENCE_TUNING"){const g=h(e,["validationDataset"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec"],Ug(g))}const a=h(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&f(t,["tunedModelDisplayName"],a);const o=h(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=h(e,["epochCount"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(l==="PREFERENCE_TUNING"){const g=h(e,["epochCount"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=h(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=h(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=h(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=h(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=h(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=h(e,["adapterSize"]);t!==void 0&&g!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=h(e,["adapterSize"]);t!==void 0&&g!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(h(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=h(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);const m=h(e,["beta"]);return t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function SM(e,t){const n={},r=h(e,["baseModel"]);r!=null&&f(n,["baseModel"],r);const s=h(e,["preTunedModel"]);s!=null&&f(n,["preTunedModel"],s);const a=h(e,["trainingDataset"]);a!=null&&DM(a);const o=h(e,["config"]);return o!=null&&wM(o,n),n}function NM(e,t){const n={},r=h(e,["baseModel"]);r!=null&&f(n,["baseModel"],r);const s=h(e,["preTunedModel"]);s!=null&&f(n,["preTunedModel"],s);const a=h(e,["trainingDataset"]);a!=null&&PM(a,n,t);const o=h(e,["config"]);return o!=null&&_M(o,n,t),n}function EM(e,t){const n={},r=h(e,["name"]);return r!=null&&f(n,["_url","name"],r),n}function CM(e,t){const n={},r=h(e,["name"]);return r!=null&&f(n,["_url","name"],r),n}function kM(e,t,n){const r={},s=h(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const a=h(e,["pageToken"]);t!==void 0&&a!=null&&f(t,["_query","pageToken"],a);const o=h(e,["filter"]);return t!==void 0&&o!=null&&f(t,["_query","filter"],o),r}function TM(e,t,n){const r={},s=h(e,["pageSize"]);t!==void 0&&s!=null&&f(t,["_query","pageSize"],s);const a=h(e,["pageToken"]);t!==void 0&&a!=null&&f(t,["_query","pageToken"],a);const o=h(e,["filter"]);return t!==void 0&&o!=null&&f(t,["_query","filter"],o),r}function jM(e,t){const n={},r=h(e,["config"]);return r!=null&&kM(r,n),n}function AM(e,t){const n={},r=h(e,["config"]);return r!=null&&TM(r,n),n}function RM(e,t){const n={},r=h(e,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const s=h(e,["nextPageToken"]);s!=null&&f(n,["nextPageToken"],s);const a=h(e,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>n1(l))),f(n,["tuningJobs"],o)}return n}function IM(e,t){const n={},r=h(e,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const s=h(e,["nextPageToken"]);s!=null&&f(n,["nextPageToken"],s);const a=h(e,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>oh(l))),f(n,["tuningJobs"],o)}return n}function MM(e,t){const n={},r=h(e,["name"]);r!=null&&f(n,["model"],r);const s=h(e,["name"]);return s!=null&&f(n,["endpoint"],s),n}function DM(e,t){const n={};if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(e,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),f(n,["examples","examples"],s)}return n}function PM(e,t,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(e,["gcsUri"]);t!==void 0&&o!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(e,["gcsUri"]);t!==void 0&&o!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=h(e,["vertexDatasetResource"]);t!==void 0&&o!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=h(e,["vertexDatasetResource"]);t!==void 0&&o!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function n1(e,t){const n={},r=h(e,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const s=h(e,["name"]);s!=null&&f(n,["name"],s);const a=h(e,["state"]);a!=null&&f(n,["state"],yw(a));const o=h(e,["createTime"]);o!=null&&f(n,["createTime"],o);const l=h(e,["tuningTask","startTime"]);l!=null&&f(n,["startTime"],l);const c=h(e,["tuningTask","completeTime"]);c!=null&&f(n,["endTime"],c);const u=h(e,["updateTime"]);u!=null&&f(n,["updateTime"],u);const d=h(e,["description"]);d!=null&&f(n,["description"],d);const p=h(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);const m=h(e,["_self"]);return m!=null&&f(n,["tunedModel"],MM(m)),n}function oh(e,t){const n={},r=h(e,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const s=h(e,["name"]);s!=null&&f(n,["name"],s);const a=h(e,["state"]);a!=null&&f(n,["state"],yw(a));const o=h(e,["createTime"]);o!=null&&f(n,["createTime"],o);const l=h(e,["startTime"]);l!=null&&f(n,["startTime"],l);const c=h(e,["endTime"]);c!=null&&f(n,["endTime"],c);const u=h(e,["updateTime"]);u!=null&&f(n,["updateTime"],u);const d=h(e,["error"]);d!=null&&f(n,["error"],d);const p=h(e,["description"]);p!=null&&f(n,["description"],p);const m=h(e,["baseModel"]);m!=null&&f(n,["baseModel"],m);const g=h(e,["tunedModel"]);g!=null&&f(n,["tunedModel"],g);const v=h(e,["preTunedModel"]);v!=null&&f(n,["preTunedModel"],v);const x=h(e,["supervisedTuningSpec"]);x!=null&&f(n,["supervisedTuningSpec"],x);const w=h(e,["preferenceOptimizationSpec"]);w!=null&&f(n,["preferenceOptimizationSpec"],w);const y=h(e,["tuningDataStats"]);y!=null&&f(n,["tuningDataStats"],y);const b=h(e,["encryptionSpec"]);b!=null&&f(n,["encryptionSpec"],b);const _=h(e,["partnerModelTuningSpec"]);_!=null&&f(n,["partnerModelTuningSpec"],_);const S=h(e,["customBaseModel"]);S!=null&&f(n,["customBaseModel"],S);const T=h(e,["experiment"]);T!=null&&f(n,["experiment"],T);const N=h(e,["labels"]);N!=null&&f(n,["labels"],N);const C=h(e,["outputUri"]);C!=null&&f(n,["outputUri"],C);const I=h(e,["pipelineJob"]);I!=null&&f(n,["pipelineJob"],I);const A=h(e,["serviceAccount"]);A!=null&&f(n,["serviceAccount"],A);const R=h(e,["tunedModelDisplayName"]);R!=null&&f(n,["tunedModelDisplayName"],R);const O=h(e,["veoTuningSpec"]);return O!=null&&f(n,["veoTuningSpec"],O),n}function LM(e,t){const n={},r=h(e,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const s=h(e,["name"]);s!=null&&f(n,["name"],s);const a=h(e,["metadata"]);a!=null&&f(n,["metadata"],a);const o=h(e,["done"]);o!=null&&f(n,["done"],o);const l=h(e,["error"]);return l!=null&&f(n,["error"],l),n}function Ug(e,t){const n={},r=h(e,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const s=h(e,["vertexDatasetResource"]);return s!=null&&f(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UM extends tr{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ps(Qn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:Kd.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=CM(t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>oh(d))}else{const u=EM(t);return l=J("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>n1(d))}}async listInternal(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=AM(t);return l=J("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=IM(d),m=new cg;return Object.assign(m,p),m})}else{const u=jM(t);return l=J("tunedModels",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=RM(d),m=new cg;return Object.assign(m,p),m})}}async cancel(t){var n,r,s,a;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=yM(t);return l=J("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=bM(d),m=new ug;return Object.assign(m,p),m})}else{const u=xM(t);return l=J("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const p=vM(d),m=new ug;return Object.assign(m,p),m})}}async tuneInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI()){const l=NM(t,t);return a=J("tuningJobs",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>oh(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=SM(t);return a=J("tunedModels",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>LM(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OM{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zM=1024*1024*8,BM=3,qM=1e3,GM=2,Jl="x-goog-upload-status";async function HM(e,t,n){var r;const s=await r1(e,t,n),a=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Jl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function VM(e,t,n){var r;const s=await r1(e,t,n),a=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Jl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=hw(a),l=new jf;return Object.assign(l,o),l}async function r1(e,t,n){var r,s;let a=0,o=0,l=new Wd(new Response),c="upload";for(a=e.size;o<a;){const u=Math.min(zM,a-o),d=e.slice(o,o+u);o+u>=a&&(c+=", finalize");let p=0,m=qM;for(;p<BM&&(l=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[Jl]));)p++,await $M(m),m=m*GM;if(o+=u,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Jl])!=="active")break;if(a<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function FM(e){return{size:e.size,type:e.type}}function $M(e){return new Promise(t=>setTimeout(t,e))}class JM{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await HM(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await VM(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await FM(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YM{create(t,n,r){return new KM(t,n,r)}}class KM{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Og="x-goog-api-key";class WM{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Og)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Og,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XM="gl-node/";class s1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new nt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=$k(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new WM(this.apiKey);this.apiClient=new FR({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:XM+"web",uploader:new JM,downloader:new OM}),this.models=new uI(this.apiClient),this.live=new sI(this.apiClient,s,new YM),this.batches=new wj(this.apiClient),this.chats=new nA(this.models,this.apiClient),this.caches=new Zj(this.apiClient),this.files=new hA(this.apiClient),this.operations=new dI(this.apiClient),this.authTokens=new kI(this.apiClient),this.tunings=new UM(this.apiClient),this.fileSearchStores=new PI(this.apiClient)}}let Jt=null;try{const e="AIzaSyDCeRcwPFN6S_1N9uKQxKoK3jblWb7XcDI";e&&typeof e=="string"&&e.length>0&&(Jt=new s1({apiKey:e}))}catch(e){console.warn("Gemini API client could not be initialized:",e)}const zg="gemini-3-flash-preview",QM=(e,t)=>{const n={build_muscle:"ganar msculo y aumentar la fuerza (hipertrofia)",lose_fat:"perder grasa y mejorar la salud cardiovascular (prdida de peso)",improve_endurance:"mejorar la resistencia muscular y cardiovascular",general_fitness:"mantener un estado fsico general y bienestar"},r={beginner:"un principiante",intermediate:"un intermedio",advanced:"un atleta avanzado"};let s="";const a={weeklyPlan:[{day:"Lunes",focus:"Pecho y Trceps",warmUp:"5 min cardio suave + rotaciones de hombro",exercises:[{name:"Press de Banca",sets:3,reps:"10-12",rest:60,description:"Barra a la altura del pecho...",imageSearchQuery:"bench press form"}],coolDown:"Estiramiento esttico 5 min"}]};return`
    Create a personalized workout plan for ${e.daysPerWeek} days a week.
    User Goal: ${n[e.goal||"general_fitness"]}.
    Level: ${r[e.level||"beginner"]}.
    Days/Week: ${e.daysPerWeek}.
    Equipment: ${e.equipment.join(", ")}.
    ${s}
    
    IMPORTANT: You must return a VALID JSON object matching exactly this structure:
    ${JSON.stringify(a,null,2)}
    
    Requirements:
    - The 'weeklyPlan' array MUST have exactly ${e.daysPerWeek} entries.
    - All text in Spanish.
    - 'imageSearchQuery' must be in English for better results.
    - Do NOT wrap the JSON in markdown code blocks. Just return the raw JSON string.
    `};async function Ia(e){try{return await e(zg)}catch(t){throw console.error(`Gemini (${zg}) Request Failed:`,t),t}}const Bg=(e,t)=>({weeklyPlan:Array.from({length:Math.max(1,e||3)}).map((n,r)=>({day:`Da ${r+1} (Modo Offline)`,focus:r%2===0?`Fuerza - ${t==="build_muscle"?"Hipertrofia":"General"}`:"Cardio y Recuperacin",warmUp:"5-10 min de movilidad articular y cardio ligero.",exercises:[{name:"Sentadillas con Peso Corporal",sets:4,reps:"12-15",rest:60,description:"Mantn la espalda recta y baja hasta romper el paralelo.",imageSearchQuery:"squats exercise stock"},{name:"Flexiones (Push-ups)",sets:3,reps:"Al fallo",rest:60,description:"Cuerpo alineado, baja el pecho hasta el suelo.",imageSearchQuery:"pushups exercise"},{name:"Plancha Abdominal",sets:3,reps:"45 seg",rest:45,description:"Contrae el abdomen y mantn la posicin.",imageSearchQuery:"plank exercise"}],coolDown:"5 min de estiramientos estticos y respiracin."}))}),ZM=async(e,t)=>{if(!Jt)return console.warn("API Key missing, using fallback."),Bg(e.daysPerWeek,e.goal);try{return await Ia(async n=>{const r=QM(e,t)+`

IMPORTANT: Return ONLY valid JSON.`,a=(await Jt.models.generateContent({model:n,contents:r,config:{responseMimeType:"application/json"}})).text||"";try{const o=a.replace(/```json/g,"").replace(/```/g,"").trim(),l=JSON.parse(o);if(!l.weeklyPlan||!Array.isArray(l.weeklyPlan)||l.weeklyPlan.length===0)throw new Error("Invalid plan generated: missing weeklyPlan array");return l}catch{throw console.error("Failed to parse Gemini response:",a),new Error("Error al procesar la respuesta de la IA. Intntalo de nuevo.")}})}catch{return Bg(e.daysPerWeek,e.goal)}},e3=async(e,t)=>{if(!Jt)return{type:"performance",title:"Listo para entrenar",message:"Todo se ve bien. A darle!",actionLabel:"Entrenar",suggestedActivity:"Entrenamiento"};try{return await Ia(async n=>{const r=`
            Analiza estado: Energa ${e.energyLevel}/10, Sueo ${e.sleepQuality}, Dolor ${e.soreness}, nimo ${e.mood}.
            Usuario: ${t}.
            Genera un insight corto y motivador en formato JSON vlido con las propiedades: type, title, message, actionLabel, suggestedActivity.
            Response must be pure JSON.
            `,a=((await Jt.models.generateContent({model:n,contents:r,config:{responseMimeType:"application/json"}})).text||"").replace(/```json|```/g,"").trim();return JSON.parse(a)})}catch(n){return console.error("Error generating insight:",n),{type:"motivation",title:`Vamos ${t}`,message:"Haz lo mejor que puedas hoy.",actionLabel:"Entrenar"}}},t3=async(e,t="Usuario")=>{var n,r;if(!Jt)return{text:"Error: API Key no configurada.",sources:[]};try{return await Ia(async s=>{const o=`${`
            Eres el AI Coach de FitnessFlow Pro.
            Ests hablando con ${t}.
            Responde en espaol, s motivador, amigable y experto.
            Usa emojis. S conciso. No des consejos mdicos.
            `}

User: ${e}`;return{text:(await Jt.models.generateContent({model:s,contents:o})).text||"...",sources:[]}})}catch(s){console.error("AI Chat Error:",s);let a="Lo siento, hubo un error tcnico. Por favor verifica tu conexin.";return(n=s.message)!=null&&n.includes("429")||s.status===429?a=" Estoy recibiendo demasiadas solicitudes. Por favor, intenta de nuevo en unos segundos.":((r=s.message)!=null&&r.includes("404")||s.status===404)&&(a=" Estamos actualizando los modelos de IA. Intenta de nuevo en un momento."),{text:a,sources:[]}}},n3=async()=>{if(!Jt)return"Mantente activo y bebe agua!";try{return await Ia(async e=>(await Jt.models.generateContent({model:e,contents:"Genera un consejo de fitness corto y motivador para hoy en espaol."})).text||"A moverse!")}catch{return"El descanso es clave para el progreso."}},r3=async(e,t)=>{const n=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e+" gym")}&query_place_id=${t.latitude},${t.longitude}`;return{text:`He encontrado opciones para "${e}" cerca de tu ubicacin. Puedes ver los resultados detallados directamente en Google Maps.`,sources:[{uri:n,title:`Ver resultados para "${e}" en Google Maps`},{uri:"https://maps.google.com/?q=Gimnasios+Cercanos",title:"Explorar todos los gimnasios cercanos"}]}},s3=async e=>{if(!Jt)return{text:" API Key no configurada. Verifica tu archivo .env.local",sources:[]};try{return await Ia(async t=>{const r=`
            Eres un Consultor Experto en Gestin de Gimnasios y Negocios Fitness.
            Tu objetivo es ayudar al administrador del gimnasio "El Templo" a optimizar su negocio.
            
            Tus reas de expertise incluyen:
            - Retencin de clientes y reduccin de tasa de abandono (churn).
            - Marketing fitness y ventas.
            - Gestin financiera y operativa.
            - Planes de contingencia y resolucin de crisis.
            - Mantenimiento y gestin de inventario.

            Reglas:
            1. Responde siempre en Espaol profesional pero accesible.
            2. S prctico y directo. Da consejos accionables (paso a paso).
            3. Si preguntan por temas legales o mdicos especficos, sugiere consultar a un especialista local.
            4. Usa formato Markdown (negritas, listas) para facilitar la lectura.
            

Pregunta del Administrador: ${e}`;return{text:(await Jt.models.generateContent({model:t,contents:r})).text||"...",sources:[]}})}catch(t){return console.error("AI Admin Chat Error:",t),{text:"Lo siento, hubo un error al consultar al asistente. Por favor intenta de nuevo.",sources:[]}}},qg=async(e,t)=>{if(!Jt)return{keyword:"fitness"};try{return await Ia(async n=>{const r=`
            Act as a Search Engine Optimization expert for stock images.
            Service Name: "${e}"
            Description: "${t}"
            
            Task: Provide a SINGLE English keyword or short 2-word phrase that best helps find a high-quality relevant image on Unsplash for this fitness service.
            Example inputs -> outputs:
            "Yoga at Sunrise" -> "yoga sunrise"
            "High Intensity Interval Training" -> "crossfit gym"
            "Nutritional Coaching" -> "healthy food"
            
            Return ONLY the keyword. No json, no quotes.
            `;return{keyword:((await Jt.models.generateContent({model:n,contents:r})).text||"fitness").trim().replace(/"/g,"")}})}catch(n){return console.error("Image Gen Error:",n),{keyword:"fitness"}}},a1=E.createContext(void 0),vn=()=>{const e=E.useContext(a1);if(!e)throw new Error("useFeedback must be used within a FeedbackProvider");return e},a3=({children:e})=>{const[t,n]=E.useState([]),r=Xe.useCallback((s,a="info")=>{const o=Date.now()+Math.random();n(l=>[...l,{id:o,message:s,type:a}]),setTimeout(()=>{n(l=>l.filter(c=>c.id!==o))},3e3)},[]);return i.jsxs(a1.Provider,{value:{showToast:r},children:[e,i.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:t.map(s=>i.jsxs("div",{className:`
              pointer-events-auto transform transition-all duration-300 ease-in-out animate-slide-up
              min-w-[300px] p-4 rounded-xl shadow-2xl border backdrop-blur-md
              flex items-center gap-3
              ${s.type==="success"?"bg-green-500/10 border-green-500/20 text-green-100":""}
              ${s.type==="error"?"bg-red-500/10 border-red-500/20 text-red-100":""}
              ${s.type==="info"?"bg-blue-500/10 border-blue-500/20 text-blue-100":""}
              ${s.type==="warning"?"bg-yellow-500/10 border-yellow-500/20 text-yellow-100":""}
            `,children:[i.jsxs("span",{className:"text-2xl",children:[s.type==="success"&&"",s.type==="error"&&"",s.type==="info"&&"",s.type==="warning"&&""]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-sm capitalize",children:s.type}),i.jsx("p",{className:"text-xs opacity-90",children:s.message})]})]},s.id))})]})},Gg=({user:e,onNavigate:t})=>{var A,R;const[n,r]=E.useState(!1),[s,a]=E.useState(null),[o,l]=E.useState(null),[c,u]=E.useState([]),[d,p]=E.useState([]),[m,g]=E.useState([]),[v,x]=E.useState(!0),[w,y]=E.useState(!1),{showToast:b}=vn();E.useEffect(()=>{(async()=>{x(!0);try{const D=await Ze.fetchTodayCheckin(),[,G,W,K]=await Promise.all([Ze.fetchUserStats(),Ze.fetchLeaderboard(),Ze.fetchSocialFeed(),De.fetchActiveChallenges(),Ze.fetchCheckinHistory(7)]);u(G),p(W),g(K);const B=`insight_${new Date().toDateString()}_${e.email}`,P=localStorage.getItem(B);D?(a(D),P?l(JSON.parse(P)):S(D)):r(!0)}catch(D){console.error("Error loading dashboard data:",D)}finally{x(!1)}})()},[e.email]);const _=async O=>{y(!0);try{await Ze.logDailyCheckin(O);const D={...O,date:new Date().toISOString().split("T")[0]};a(D),r(!1),b("Check-in diario completado!","success"),await S(D),await Ze.fetchCheckinHistory(7)}catch(D){console.error("Error saving checkin:",D),b("Error al guardar tu check-in. Intenta de nuevo.","error")}finally{y(!1)}},S=async O=>{try{const D=await e3(O,e.name.split(" ")[0]);l(D),localStorage.setItem(`insight_${new Date().toDateString()}_${e.email}`,JSON.stringify(D))}catch{console.error("Failed to fetch insight")}},T=()=>{if(o)switch(o.type){case"recovery":t("Clases Grupales");break;case"performance":t("Mis Rutinas");break;case"caution":t("Bienestar AI");break;default:t("Mis Rutinas")}},N=async(O,D)=>{try{await Ze.postComment(O,D),b("Comentario enviado","success")}catch(G){console.error(G),b("Error al enviar comentario","error")}},C=[{id:"1",label:"Completa tu perfil fsico",isCompleted:!0},{id:"2",label:"Genera tu rutina con IA",isCompleted:!1,actionLabel:"Ir a Rutinas"},{id:"3",label:"Reserva una clase",isCompleted:!1,actionLabel:"Ver Clases"}],I=O=>{O.actionLabel==="Ir a Rutinas"&&t("Mis Rutinas"),O.actionLabel==="Ver Clases"&&t("Clases Grupales")};return v?i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsx("div",{className:"w-12 h-12 border-4 border-brand-primary border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 space-y-6 animate-fade-in max-w-7xl",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end pb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-brand-primary text-sm font-mono mb-1",children:new Date().toLocaleDateString("es-CO",{weekday:"long",day:"numeric",month:"long"})}),i.jsxs("h1",{className:"text-4xl font-black text-white tracking-tight",children:["Hola, ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-400",children:e.name.split(" ")[0]})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-3 glass-panel px-4 py-2 rounded-full mt-4 md:mt-0",children:[i.jsxs("span",{className:"relative flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),i.jsxs("p",{className:"text-sm font-bold text-slate-300",children:["Nivel ",((A=e.gamification)==null?void 0:A.level)||5,": ",i.jsx("span",{className:"text-white",children:((R=e.gamification)==null?void 0:R.title)||"lite"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-4 gap-4 md:gap-6 auto-rows-[minmax(180px,auto)]",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3 row-span-1 min-h-[220px]",children:o?i.jsx(Lk,{insight:o,userName:e.name.split(" ")[0],onAction:T}):i.jsxs("div",{className:"glass-panel p-6 rounded-2xl h-full flex items-center justify-between border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-primary/10 to-transparent opacity-50"}),i.jsxs("div",{className:"relative z-10 flex flex-col gap-4 max-w-lg",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:[" Bienvenido de nuevo, ",e.name.split(" ")[0],"!"]}),i.jsx("p",{className:"text-slate-300",children:"Para generar tu plan de entrenamiento inteligente y recomendaciones, necesitamos saber cmo te sientes hoy."})]}),i.jsxs("button",{onClick:()=>r(!0),className:"w-fit px-6 py-3 bg-brand-primary hover:bg-brand-secondary text-white font-bold rounded-xl transition-all shadow-lg shadow-brand-primary/20 flex items-center gap-2",children:[i.jsx("span",{children:""})," Iniciar Check-in Diario"]})]}),i.jsx("div",{className:"hidden md:block text-8xl opacity-20 grayscale group-hover:grayscale-0 transition-all duration-500 transform group-hover:scale-110 group-hover:rotate-12",children:""})]})}),i.jsx("div",{className:"md:col-span-2 lg:col-span-1 lg:row-span-2 h-full",children:i.jsx(zk,{user:e,challenges:m.length>0?m:Uk})}),i.jsx("div",{className:"md:col-span-2 lg:col-span-1",children:i.jsxs("div",{onClick:()=>t("Explorar Gimnasios"),className:"glass-panel p-5 rounded-2xl flex flex-col justify-between h-full relative cursor-pointer hover:border-brand-primary/50 transition-all group overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center text-brand-primary",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i.jsx("h3",{className:"font-bold text-white",children:"Explorar Gyms"})]})]})}),s&&i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"glass-panel p-6 rounded-2xl border border-slate-700/50 h-full",children:[i.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"text-brand-primary",children:""})," Recomendado para Hoy"]}),i.jsx(Dk,{status:s,onNavigate:t})]})}),i.jsx("div",{className:"md:col-span-2 lg:col-span-2",children:i.jsx(dw,{title:"Tu Camino",items:C,onAction:I})}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-2 grid grid-cols-2 gap-4",children:[i.jsxs("div",{onClick:()=>t("Explorar Gimnasios"),className:"glass-panel p-4 rounded-2xl cursor-pointer hover:border-brand-primary/50 transition-all group relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mb-2 text-brand-primary",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i.jsx("h3",{className:"font-bold text-white",children:"Explorar"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Gimnasios cerca"})]})]}),i.jsxs("div",{onClick:()=>t("Bienestar AI"),className:"glass-panel p-4 rounded-2xl cursor-pointer hover:border-brand-secondary/50 transition-all group relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-secondary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mb-2 text-brand-secondary",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),i.jsx("h3",{className:"font-bold text-white",children:"Coach AI"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Consulta 24/7"})]})]})]}),i.jsxs("div",{className:"md:col-span-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(qk,{data:c,currentUserId:e.name}),i.jsx(Bk,{activities:d,onComment:N})]})]}),n&&i.jsx(Mk,{userName:e.name.split(" ")[0],onComplete:_,isSubmitting:w,onClose:()=>r(!1)})]})},i3=["Peso Corporal","Mancuernas","Barra","Pesas Rusas","Bandas de Resistencia","Barra de Dominadas","Caminadora","Bicicleta Esttica"],o3=({onSubmit:e,initialData:t})=>{const[n,r]=E.useState((t==null?void 0:t.goal)||"build_muscle"),[s,a]=E.useState((t==null?void 0:t.level)||"beginner"),[o,l]=E.useState((t==null?void 0:t.daysPerWeek)||3),[c,u]=E.useState((t==null?void 0:t.equipment)||["Peso Corporal"]),[d,p]=E.useState((t==null?void 0:t.restPreference)||"Medio (60-90s)"),[m,g]=E.useState((t==null?void 0:t.exercisesToAvoid)||""),[v,x]=E.useState((t==null?void 0:t.notes)||""),[w,y]=E.useState(!1),b=S=>{u(T=>T.includes(S)?T.filter(N=>N!==S):[...T,S])},_=S=>{S.preventDefault(),y(!0),e({goal:n,level:s,daysPerWeek:o,equipment:c,notes:v,restPreference:d,exercisesToAvoid:m})};return i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-2 text-slate-800",children:"Completa tu Perfil"}),i.jsx("p",{className:"text-center text-slate-500 mb-8",children:"Esta informacin nos ayudar a crear el plan perfecto para ti."}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cul es tu objetivo principal?"}),i.jsxs("select",{value:n,onChange:S=>r(S.target.value),className:"w-full p-3 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none",children:[i.jsx("option",{value:"build_muscle",children:"Ganar Msculo"}),i.jsx("option",{value:"lose_fat",children:"Perder Grasa"}),i.jsx("option",{value:"improve_endurance",children:"Mejorar Resistencia"}),i.jsx("option",{value:"general_fitness",children:"Fitness General"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cul es tu nivel de experiencia?"}),i.jsxs("select",{value:s,onChange:S=>a(S.target.value),className:"w-full p-3 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none",children:[i.jsx("option",{value:"beginner",children:"Principiante"}),i.jsx("option",{value:"intermediate",children:"Intermedio"}),i.jsx("option",{value:"advanced",children:"Avanzado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-slate-700 mb-1",children:"Cuntos das a la semana puedes entrenar?"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"range",id:"days",min:"1",max:"7",value:o,onChange:S=>l(parseInt(S.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-brand-primary"}),i.jsx("span",{className:"bg-brand-primary text-white font-bold text-lg rounded-full h-10 w-10 flex items-center justify-center",children:o})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Preferencia de descanso entre series"}),i.jsxs("select",{value:d,onChange:S=>p(S.target.value),className:"w-full p-3 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none",children:[i.jsx("option",{value:"Corto (30-60s)",children:"Corto (30-60s)"}),i.jsx("option",{value:"Medio (60-90s)",children:"Medio (60-90s)"}),i.jsx("option",{value:"Largo (90-180s)",children:"Largo (90-180s)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"A qu equipo tienes acceso?"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:i3.map(S=>i.jsxs("label",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 text-center text-sm ${c.includes(S)?"bg-green-100 border-brand-primary text-brand-primary font-semibold":"bg-white border-slate-300 text-slate-700 hover:border-slate-400"}`,children:[i.jsx("input",{type:"checkbox",checked:c.includes(S),onChange:()=>b(S),className:"hidden"}),S]},S))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"exercisesToAvoid",className:"block text-sm font-medium text-slate-700 mb-1",children:"Ejercicios a evitar (opcional)"}),i.jsx("textarea",{id:"exercisesToAvoid",value:m,onChange:S=>g(S.target.value),rows:2,placeholder:"Ej: sentadillas con barra, saltos en caja...",className:"w-full p-3 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-slate-700 mb-1",children:"Alguna nota o limitacin especfica? (Opcional)"}),i.jsx("textarea",{id:"notes",value:v,onChange:S=>x(S.target.value),rows:3,placeholder:"Ej: enfocar en piernas, evitar alto impacto en rodillas...",className:"w-full p-3 bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"})]}),i.jsx("button",{type:"submit",disabled:w,className:"w-full bg-brand-primary text-white font-bold text-lg py-3 px-6 rounded-lg hover:bg-brand-secondary transition-transform duration-300 transform hover:scale-105 disabled:bg-slate-400 disabled:cursor-not-allowed disabled:scale-100",children:w?"Generando...":"Generar Mi Plan"})]})]})},On=[{id:1,name:"Press de Banca",description:"El ejercicio compuesto por excelencia para construir masa y fuerza en el pecho, trceps y deltoides frontales. Fundamental para el desarrollo de la parte superior del cuerpo. Asegrate de mantener los pies firmes y retraer las escpulas.",imageUrl:"https://images.pexels.com/photos/3837464/pexels-photo-3837464.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-doing-heavy-bench-press-25807-large.mp4",difficulty:"Intermedio",tags:["Pecho","Fuerza","Barra"],duration:3,caloriesPerMin:8,isFavorite:!0,category:"FUERZA",equipment:"Barra, Banco",instructions:["Acustate en el banco con los ojos bajo la barra.","Retrae las escpulas y mantn un arco natural en la espalda.","Agarra la barra algo ms ancho que los hombros.","Baja la barra controladamente hasta tocar el pecho medio.","Empuja explosivamente hasta extender los brazos."]},{id:2,name:"Flexiones (Push-ups)",description:"Un movimiento fundamental de calistenia que desarrolla fuerza de empuje, estabilidad del core y resistencia muscular. Verstil y efectivo, se puede realizar en cualquier lugar.",imageUrl:"https://images.pexels.com/photos/2294361/pexels-photo-2294361.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-doing-pushups-in-the-gym-22868-large.mp4",difficulty:"Principiante",tags:["Pecho","Trceps","Peso Corporal"],duration:2,caloriesPerMin:6,category:"FUERZA",equipment:"Ninguno",instructions:["Colcate en posicin de plancha alta con manos bajo los hombros.","Mantn el cuerpo recto desde la cabeza hasta los talones.","Baja el pecho hasta casi tocar el suelo, codos a 45 grados.","Empuja el suelo para volver a la posicin inicial."]},{id:3,name:"Aperturas con Mancuernas",description:"Ejercicio de aislamiento diseado para estirar las fibras pectorales bajo carga, promoviendo la hipertrofia y mejorando la movilidad torcica. Excelente complemento para los presses.",imageUrl:"https://images.pexels.com/photos/3838389/pexels-photo-3838389.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-training-arms-with-dumbbells-in-gym-22869-large.mp4",difficulty:"Intermedio",tags:["Pecho","Aislamiento"],duration:3,caloriesPerMin:5,category:"FUERZA",equipment:"Mancuernas, Banco",instructions:["Acustate en el banco con mancuernas sobre el pecho.","Mantn una ligera flexin en los codos (como abrazando un rbol).","Abre los brazos lentamente hacia los lados hasta sentir un estiramiento profundo.","Cierra los brazos controladamente usando el pecho."]},{id:4,name:"Dominadas (Pull-ups)",description:"El mejor ejercicio de peso corporal para construir una espalda ancha en V. Trabaja intensamente los dorsales, bceps y antebrazos.",imageUrl:"https://images.pexels.com/photos/4162487/pexels-photo-4162487.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-doing-pull-ups-in-gym-22873-large.mp4",difficulty:"Avanzado",tags:["Espalda","Bceps","Calistenia"],duration:3,caloriesPerMin:10,category:"FUERZA",equipment:"Barra de Dominadas",instructions:["Culgate de la barra con agarre prono (palmas al frente), manos ms anchas que hombros.","Inicia el movimiento tirando de los codos hacia abajo y atrs.","Sube hasta pasar la barbilla por encima de la barra.","Baja controladamente hasta estirar los brazos por completo."]},{id:5,name:"Remo con Barra",description:"Constructor masivo de densidad y grosor para la espalda. Fortalece la espalda media, dorsales y erectores espinales, crucial para una buena postura.",imageUrl:"https://images.pexels.com/photos/949126/pexels-photo-949126.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-doing-heavy-rows-in-the-gym-44185-large.mp4",difficulty:"Intermedio",tags:["Espalda","Fuerza"],duration:4,caloriesPerMin:9,category:"FUERZA",equipment:"Barra",instructions:["De pie, pies al ancho de hombros, agarra la barra.","Inclina el torso hacia adelante a 45 grados, espalda recta.",'Tira la barra hacia la parte baja del abdomen ("bolsillo").',"Aprieta la espalda en la cima y baja controladamente."]},{id:6,name:"Face Pulls",description:"Ejercicio correctivo esencial para la salud del hombro y postura. Fortalece el deltoides posterior y el manguito rotador, contrarrestando la postura encorvada.",imageUrl:"https://images.pexels.com/photos/4164761/pexels-photo-4164761.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-athlete-working-out-with-heavy-ropes-in-gym-22872-large.mp4",difficulty:"Principiante",tags:["Espalda","Hombros","Postura"],duration:3,caloriesPerMin:5,category:"FUERZA",equipment:"Polea / Bandas",instructions:["Ajusta la polea a la altura de la cara.","Agarra la cuerda con pulgares hacia atrs.","Jala la cuerda hacia la cara, separando las manos.","Rota externamente los hombros al final del movimiento."]},{id:7,name:"Sentadilla (Squat)",description:"El rey de todos los ejercicios. Involucra la mayor cantidad de masa muscular, desarrollando fuerza bruta en piernas, glteos y core. Indispensable para atletas.",imageUrl:"https://images.pexels.com/photos/116077/pexels-photo-116077.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-doing-squats-with-barbell-in-gym-22870-large.mp4",difficulty:"Avanzado",tags:["Piernas","Glteos","Fuerza"],duration:5,caloriesPerMin:12,isFavorite:!0,category:"FUERZA",equipment:"Barra / Peso Corporal",instructions:["Coloca la barra sobre los trapecios (no el cuello).","Pies al ancho de hombros, puntas ligeramente afuera.","Baja cadera y rodillas simultneamente, manteniendo el pecho erguido.","Rompe el paralelo (cadera bajo rodillas) y sube empujando el suelo."]},{id:8,name:"Hip Thrust",description:"El ejercicio nmero uno para desarrollar glteos fuertes y potentes. Maximiza la extensin de cadera con baja carga en la espalda baja.",imageUrl:"https://images.pexels.com/photos/841130/pexels-photo-841130.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-doing-glute-bridges-in-gym-44186-large.mp4",difficulty:"Intermedio",tags:["Glteos","Piernas"],duration:4,caloriesPerMin:8,category:"FUERZA",equipment:"Barra, Banco",instructions:["Apoya la espalda alta en un banco.","Coloca la barra sobre la cadera (usa almohadilla).","Empuja con los talones y eleva la cadera hasta bloquear.","Aprieta los glteos fuertemente arriba por un segundo."]},{id:9,name:"Peso Muerto Rumano",description:"Variante del peso muerto que enfatiza la cadena posterior: isquiotibiales y glteos. Clave para la fuerza de cadera y prevencin de lesiones.",imageUrl:"https://images.pexels.com/photos/2261477/pexels-photo-2261477.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-preparing-to-lift-heavy-weights-22875-large.mp4",difficulty:"Intermedio",tags:["Isquios","Glteos","Cadena Posterior"],duration:4,caloriesPerMin:9,category:"FUERZA",equipment:"Barra / Mancuernas",instructions:["Pies al ancho de cadera, rodillas ligeramente flexionadas pero fijas.","Bisagra de cadera: lleva la cadera hacia atrs lejos.","Baja el peso pegado a las piernas hasta sentir tensin en isquios.","Sube empujando la cadera adelante."]},{id:10,name:"Zancadas (Lunges)",description:"Excelente ejercicio unilateral para corregir desequilibrios, mejorar la estabilidad y trabajar glteos y cudriceps de forma dinmica.",imageUrl:"https://images.pexels.com/photos/3757942/pexels-photo-3757942.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-doing-lunges-in-gym-44187-large.mp4",difficulty:"Intermedio",tags:["Piernas","Glteos","Equilibrio"],duration:3,caloriesPerMin:8,category:"FUERZA",equipment:"Mancuernas",instructions:["Da un paso largo hacia adelante.","Baja la rodilla trasera hasta casi tocar el suelo.","Mantn el torso vertical.","Empuja con la pierna delantera para volver."]},{id:11,name:"Press Militar",description:"Movimiento de fuerza fundamental para hombros anchos y triceps fuertes. Requiere gran estabilidad del core y movilidad torcica.",imageUrl:"https://images.pexels.com/photos/4164761/pexels-photo-4164761.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-athlete-lifting-heavy-dumbbells-at-gym-22871-large.mp4",difficulty:"Intermedio",tags:["Hombros","Trceps","Fuerza"],duration:3,caloriesPerMin:8,category:"FUERZA",equipment:"Mancuernas / Barra",instructions:["De pie, agarra la barra a la altura del pecho superior.","Contrae glteos y abdomen.","Empuja la barra verticalmente hasta bloquear codos.","Baja controladamente a la posicin inicial."]},{id:12,name:"Elevaciones Laterales",description:'Asla la cabeza lateral del deltoides, responsable de la anchura visual de los hombros ("hombros de coco").',imageUrl:"https://images.pexels.com/photos/1431282/pexels-photo-1431282.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-exercising-arms-with-dumbbells-22874-large.mp4",difficulty:"Principiante",tags:["Hombros","Aislamiento"],duration:2,caloriesPerMin:5,category:"FUERZA",equipment:"Mancuernas",instructions:["De pie, mancuernas a los lados.","Eleva los brazos hacia los lados hasta la altura de hombros.","Imagina que viertes agua de una jarra al subir.","Controla la bajada, no dejes caer el peso."]},{id:13,name:"Curl de Bceps",description:"El clsico irreemplazable para desarrollar bceps grandes y fuertes. Simple pero efectivo si se realiza sin inercia.",imageUrl:"https://images.pexels.com/photos/1431282/pexels-photo-1431282.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-exercising-arms-with-dumbbells-22874-large.mp4",difficulty:"Principiante",tags:["Bceps","Aislamiento"],duration:2,caloriesPerMin:4,category:"FUERZA",equipment:"Mancuernas",instructions:["De pie, palmas mirando al frente.","Mantn codos pegados a las costillas.","Flexiona el codo subiendo la pesa al hombro.","Aprieta el bceps arriba y baja lento."]},{id:14,name:"Fondos de Trceps",description:'Ejercicio de peso corporal superior para masa en trceps y pecho inferior. Conocido como la "sentadilla del tren superior".',imageUrl:"https://images.pexels.com/photos/4162487/pexels-photo-4162487.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-man-doing-dips-exercise-in-gym-44188-large.mp4",difficulty:"Intermedio",tags:["Trceps","Pecho","Calistenia"],duration:2,caloriesPerMin:6,category:"FUERZA",equipment:"Paralelas / Banco",instructions:["Soporta tu peso en barras paralelas.","Baja controladamente flexionando codos a 90 grados.","Mantn el cuerpo vertical para enfatizar trceps.","Empuja fuerte hasta extender brazos."]},{id:15,name:"Burpees",description:"El ejercicio definitivo de acondicionamiento metablico. Trabaja todo el cuerpo y dispara la frecuencia cardaca en segundos.",imageUrl:"https://images.pexels.com/photos/6456137/pexels-photo-6456137.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-athlete-doing-burpees-in-gym-44189-large.mp4",difficulty:"Avanzado",tags:["Cardio","HIIT","Quema Grasa"],duration:5,caloriesPerMin:15,isPremium:!0,category:"CUERPO COMPLETO",equipment:"Ninguno",instructions:["Desde pie, baja a sentadilla y apoya manos.","Salta atrs a posicin de plancha.","Haz una flexin (opcional).","Salta adelante y luego salta explosivamente hacia arriba."]},{id:16,name:"Mountain Climbers",description:"Cardio intenso que fortalece el core dinmico. Excelente para quemar caloras y definir abdominales.",imageUrl:"https://images.pexels.com/photos/4162575/pexels-photo-4162575.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-doing-mountain-climbers-exercise-44190-large.mp4",difficulty:"Intermedio",tags:["Cardio","Core"],duration:3,caloriesPerMin:12,category:"CARDIO",equipment:"Ninguno",instructions:["Posicin de plancha alta, cuerpo recto.","Lleva una rodilla al pecho rpidamente.","Alterna piernas como si corrieras en el sitio.","Mantn la cadera baja y estable."]},{id:17,name:"Jumping Jacks",description:"Ejercicio clsico de calistenia para calentar y elevar el ritmo cardaco. Mejora la coordinacin y resistencia.",imageUrl:"https://images.pexels.com/photos/4058359/pexels-photo-4058359.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-doing-jumping-jacks-outdoors-44191-large.mp4",difficulty:"Principiante",tags:["Cardio","Calentamiento"],duration:2,caloriesPerMin:8,category:"CARDIO",equipment:"Ninguno",instructions:["De pie, pies juntos, manos a los lados.","Salta abriendo piernas y subiendo brazos sobre la cabeza.","Salta volviendo a la posicin inicial.","Repite rtmicamente."]},{id:18,name:"Bicicleta Esttica",description:"Cardio de bajo impacto.",imageUrl:"https://images.pexels.com/photos/3760968/pexels-photo-3760968.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-people-in-spinning-class-44192-large.mp4",difficulty:"Principiante",tags:["Cardio","Piernas"],duration:30,caloriesPerMin:10,category:"CARDIO",equipment:"Bicicleta",instructions:["Ajusta el silln.","Pedalea constante.","Mantn la postura."]},{id:19,name:"Correr en Cinta",description:"Entrenamiento de resistencia clsico.",imageUrl:"https://images.pexels.com/photos/1954524/pexels-photo-1954524.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-running-on-treadmill-in-gym-44195-large.mp4",difficulty:"Intermedio",tags:["Cardio","Resistencia"],duration:20,caloriesPerMin:12,category:"CARDIO",equipment:"Cinta",instructions:["Empieza caminando.","Sube la velocidad.","Respira rtmico."]},{id:20,name:"Plancha (Plank)",description:"Ejercicio isomtrico esencial para la estabilidad del core. Fortalece abdominales profundos y protege la espalda baja.",imageUrl:"https://images.pexels.com/photos/3768916/pexels-photo-3768916.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-holding-plank-position-44193-large.mp4",difficulty:"Principiante",tags:["Core","Estabilidad"],duration:1,caloriesPerMin:4,category:"CORE",equipment:"Ninguno",instructions:["Apyate en antebrazos y puntas de pies.","Mantn el cuerpo en lnea recta perfecta.","Contrae glteos y abdomen fuertemente.","No dejes caer la cadera."]},{id:21,name:"Crunch Abdominal",description:'Ejercicio clsico para el recto abdominal ("six-pack"). Efectivo si se realiza con control y sin tirar del cuello.',imageUrl:"https://images.pexels.com/photos/4162452/pexels-photo-4162452.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-doing-sit-ups-on-exercise-mat-44194-large.mp4",difficulty:"Principiante",tags:["Abdominales"],duration:2,caloriesPerMin:5,category:"CORE",equipment:"Ninguno",instructions:["Acustate boca arriba, rodillas flexionadas.","Manos tras la nuca (sin tirar).","Eleva los hombros del suelo contrayendo el abdomen.","Exhala al subir."]},{id:23,name:"Saludo al Sol",description:"Secuencia clsica de Yoga para despertar el cuerpo, mejorar flexibilidad y circulacin. Ideal para empezar el da.",imageUrl:"https://images.pexels.com/photos/3191196/pexels-photo-3191196.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-young-woman-practicing-yoga-outdoors-39603-large.mp4",difficulty:"Principiante",tags:["Yoga","Flexibilidad","Movilidad"],duration:5,caloriesPerMin:3,category:"MOVILIDAD",equipment:"Mat",instructions:["Inhala y eleva brazos.","Exhala y pligate adelante.","Estira espalda y ve a plancha.","Fluye entre perro boca arriba y perro boca abajo."]},{id:24,name:"Puente de Glteo",description:"Excelente para activar glteos inactivos y fortalecer la cadena posterior sin estrs lumbar. Fundamental para quienes pasan mucho tiempo sentados.",imageUrl:"https://images.pexels.com/photos/3823063/pexels-photo-3823063.jpeg?auto=compress&cs=tinysrgb&w=600",videoUrl:"https://assets.mixkit.co/videos/preview/mixkit-woman-doing-glute-bridges-in-gym-44186-large.mp4",difficulty:"Principiante",tags:["Glteos","Rehabilitacin"],duration:3,caloriesPerMin:4,category:"CORE",equipment:"Ninguno",instructions:["Acustate boca arriba, rodillas flexionadas, pies cerca de glteos.","Empuja con talones para elevar la cadera.","Forma una lnea recta rodillas-hombros.","Aprieta glteos arriba y baja lento."]}],l3=[...new Set(On.flatMap(e=>e.tags))],c3=["Principiante","Intermedio","Avanzado"],u3=({exercise:e})=>{const[t,n]=E.useState(!1),[r,s]=E.useState(!0),[a,o]=E.useState(!1),l=E.useRef(null),c=E.useMemo(()=>{const g=e.name.toLowerCase();let v=On.find(x=>x.name.toLowerCase()===g);return v||(v=On.find(x=>g.includes(x.name.toLowerCase())||x.name.toLowerCase().includes(g))),v||(g.includes("sentadilla")||g.includes("squat")?v=On.find(x=>x.name.includes("Sentadilla")):g.includes("push")||g.includes("flexi")?v=On.find(x=>x.name.includes("Flexiones")):g.includes("plancha")||g.includes("plank")?v=On.find(x=>x.name.includes("Plancha")):g.includes("correr")||g.includes("run")?v=On.find(x=>x.name.includes("Correr")):(g.includes("salto")||g.includes("jump"))&&(v=On.find(x=>x.name.includes("Saltos")))),v},[e.name]),u=(c==null?void 0:c.imageUrl)||`https://loremflickr.com/320/240/${e.imageSearchQuery.replace(/\s/g,",")},gym,exercise/all?lock=${encodeURIComponent(e.name)}`,d=c==null?void 0:c.videoUrl;E.useEffect(()=>{if(t&&l.current&&d&&!a){s(!0);const g=l.current.play();g!==void 0&&g.then(()=>{}).catch(v=>{console.log("Autoplay prevented or interrupted",v)})}else!t&&l.current&&(l.current.pause(),l.current.currentTime=0)},[t,d,a]);const p=()=>{s(!1)},m=()=>{o(!0),s(!1)};return i.jsxs("div",{className:"border-b border-gray-700/50 last:border-b-0",children:[i.jsx("button",{onClick:()=>n(!t),"aria-expanded":t,className:"w-full text-left p-4 hover:bg-gray-700/40 focus:outline-none focus:bg-gray-700/60 transition-colors duration-200",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2 items-center",children:[i.jsxs("div",{className:"col-span-4 sm:col-span-2 flex items-center gap-2",children:[(c==null?void 0:c.videoUrl)&&i.jsx("span",{className:"bg-brand-primary text-brand-dark text-[10px] px-1.5 py-0.5 rounded font-bold flex-shrink-0",children:"VIDEO"}),i.jsx("p",{className:"font-semibold text-gray-100",children:e.name})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Series"}),i.jsx("p",{className:"text-gray-200",children:e.sets})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Reps"}),i.jsx("p",{className:"text-gray-200",children:e.reps})]})]})}),t&&i.jsx("div",{className:"p-4 bg-gray-900/50 animate-fade-in",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("h5",{className:"font-semibold text-brand-accent mb-2",children:"Instrucciones Tcnicas"}),i.jsx("p",{className:"text-gray-300 text-sm whitespace-pre-line leading-relaxed",children:e.description}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-4",children:[i.jsxs("div",{className:"bg-gray-800/50 px-3 py-2 rounded-lg border border-gray-700",children:[i.jsx("span",{className:"text-xs text-gray-400 block uppercase",children:"Descanso"}),i.jsxs("span",{className:"font-bold text-white",children:[e.rest," seg"]})]}),c&&i.jsxs("div",{className:"bg-gray-800/50 px-3 py-2 rounded-lg border border-gray-700",children:[i.jsx("span",{className:"text-xs text-gray-400 block uppercase",children:"Categora"}),i.jsx("span",{className:"font-bold text-brand-primary",children:c.category})]})]})]}),i.jsx("div",{className:"md:col-span-1 flex items-center justify-center",children:i.jsx("div",{className:"w-full max-w-xs rounded-lg shadow-lg overflow-hidden border border-gray-700 bg-black relative group aspect-video",children:d&&!a?i.jsxs(i.Fragment,{children:[i.jsx("video",{ref:l,src:d,poster:u,className:`w-full h-full object-cover transition-opacity duration-300 ${r?"opacity-0":"opacity-100"}`,muted:!0,loop:!0,playsInline:!0,controls:!1,onLoadedData:p,onError:m,preload:"metadata"}),r&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:i.jsx("div",{className:"w-8 h-8 border-4 border-brand-primary border-t-transparent rounded-full animate-spin"})}),r&&i.jsx("img",{src:u,alt:`Loading ${e.name}`,className:"absolute inset-0 w-full h-full object-cover"}),i.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-[10px] px-2 py-1 rounded backdrop-blur-sm flex items-center gap-1 z-20",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 animate-pulse",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Video Instruccional"]})]}):i.jsx("img",{src:u,alt:`Demostracin de ${e.name}`,className:"w-full h-full object-cover",loading:"lazy"})})})]})})]})},d3=({dailyWorkout:e,index:t})=>{const[n,r]=E.useState(t===0),[s,a]=E.useState(!1),[o,l]=E.useState(!1),c=async u=>{if(u.stopPropagation(),!s){l(!0);try{await Ze.logWorkoutSession({plan_name:`${e.day} - ${e.focus}`,duration_minutes:60,calories_burned:400,focus:e.focus}),a(!0)}catch(d){console.error("Error logging workout",d),alert("Hubo un error al guardar tu progreso. Intntalo de nuevo.")}finally{l(!1)}}};return i.jsxs("div",{className:`rounded-lg overflow-hidden border transition-all duration-300 ${s?"bg-green-900/20 border-green-500/50":"bg-gray-800 border-gray-700"}`,children:[i.jsxs("button",{onClick:()=>r(!n),className:"w-full p-4 flex justify-between items-center bg-gray-700/50 hover:bg-gray-700 transition-colors duration-200",children:[i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg sm:text-xl font-bold text-brand-secondary",children:e.day}),s&&i.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:"COMPLETADO"})]}),i.jsx("p",{className:"text-sm text-gray-300",children:e.focus})]}),i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 text-brand-accent transform transition-transform duration-300 ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsx("div",{className:`transition-all duration-500 ease-in-out grid ${n?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:i.jsx("div",{className:"overflow-hidden",children:i.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-brand-accent mb-2",children:"Calentamiento"}),i.jsx("p",{className:"text-gray-300 text-sm",children:e.warmUp})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-brand-accent mb-2 border-b border-brand-accent/20 pb-1",children:"Rutina Principal"}),i.jsxs("div",{className:"hidden sm:grid grid-cols-4 gap-2 items-center text-left px-4 py-2",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Ejercicio"})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Series"})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Reps"})})]}),i.jsx("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:e.exercises.map((u,d)=>i.jsx(u3,{exercise:u},d))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-brand-accent mb-2",children:"Enfriamiento"}),i.jsx("p",{className:"text-gray-300 text-sm",children:e.coolDown})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsx("button",{onClick:c,disabled:s||o,className:`px-6 py-2 rounded-lg font-bold transition-all ${s?"bg-green-600 text-white cursor-default":"bg-brand-primary text-brand-dark hover:bg-yellow-400"}`,children:o?"Guardando...":s?"Entrenamiento Registrado!":" Marcar Sesin como Completada"})})]})})})]})},h3=({plan:e,onReset:t})=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-brand-secondary",children:"Tu Plan de Entrenamiento Personalizado"}),i.jsx("p",{className:"mt-2 text-gray-300",children:"Aqu est el plan semanal creado por tu Entrenador con IA. Empecemos!"})]}),i.jsx("div",{className:"space-y-4",children:e.weeklyPlan&&e.weeklyPlan.length>0?e.weeklyPlan.map((n,r)=>i.jsx(d3,{dailyWorkout:n,index:r},r)):i.jsx("p",{className:"text-gray-400 text-center",children:"No se pudo cargar el plan semanal. Intenta generar uno nuevo."})}),i.jsx("div",{className:"text-center mt-10",children:i.jsx("button",{onClick:t,className:"bg-brand-accent text-brand-dark font-bold py-3 px-8 rounded-lg hover:bg-yellow-400 transition-colors duration-300 text-lg",children:"Crear un Nuevo Plan"})})]}),f3=()=>i.jsx("div",{className:"flex justify-center items-center",children:i.jsx("div",{className:"w-16 h-16 border-4 border-brand-accent border-solid border-t-transparent rounded-full animate-spin"})}),ku={async saveWorkoutPlan(e,t,n){const{data:{user:r}}=await M.auth.getUser();if(!r)throw new Error("Usuario no autenticado");const s=n||`Rutina del ${new Date().toLocaleDateString()}`,{data:a,error:o}=await M.from("workout_plans").insert({user_id:r.id,name:s,plan_data:e,criteria:t}).select().single();if(o)throw console.error("Error saving workout plan:",o),o;return a},async getWorkoutPlans(){const{data:e,error:t}=await M.from("workout_plans").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching workout plans:",t),t;return e||[]},async deleteWorkoutPlan(e){const{error:t}=await M.from("workout_plans").delete().eq("id",e);if(t)throw console.error("Error deleting workout plan:",t),t}},m3=()=>{const[e,t]=E.useState(null),[n,r]=E.useState([]),[s,a]=E.useState(!1),[o,l]=E.useState("list"),[c,u]=E.useState(null),{showToast:d}=vn(),p=async()=>{try{const w=await ku.getWorkoutPlans();r(w),w.length===0&&l("create")}catch(w){console.error("Error fetching plans:",w)}};E.useEffect(()=>{p()},[]);const m=async w=>{a(!0);try{const y=await ZM(w);t(y),await ku.saveWorkoutPlan(y,w),d("Rutina creada y guardada!","success"),u(null),await p(),l("view")}catch(y){console.error(y),d("Hubo un error al generar tu plan.","error")}finally{a(!1)}},g=async(w,y)=>{if(y.stopPropagation(),!!window.confirm("Ests seguro de que quieres eliminar esta rutina?"))try{await ku.deleteWorkoutPlan(w),d("Rutina eliminada","success"),p(),o==="view"&&l("list")}catch{d("Error al eliminar","error")}},v=(w,y)=>{y.stopPropagation(),w.criteria?(u(w.criteria),l("create")):d("Esta rutina antigua no tiene criterios guardados.","info")},x=w=>{t(w.plan_data),l("view")};return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Mis Rutinas"}),(o==="view"||o==="create")&&n.length>0&&i.jsxs("button",{onClick:()=>{l("list"),u(null)},className:"text-brand-primary hover:underline font-medium flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Ver Historial"]}),o==="list"&&i.jsx("button",{onClick:()=>{l("create"),u(null)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-brand-secondary transition-colors font-semibold shadow-md",children:"+ Nueva Rutina"})]}),s?i.jsxs("div",{className:"text-center py-20 bg-white rounded-xl shadow-lg border border-slate-100",children:[i.jsx(f3,{}),i.jsx("p",{className:"mt-6 text-slate-700 font-bold text-xl animate-pulse",children:"Tu AI Coach est diseando tu plan..."}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Analizando tus objetivos y nivel "})]}):i.jsxs(i.Fragment,{children:[o==="list"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(w=>{var y,b,_;return i.jsxs("div",{onClick:()=>x(w),className:"bg-white p-6 rounded-xl shadow-md border border-slate-200 hover:shadow-xl hover:border-brand-primary/30 transition-all cursor-pointer group relative overflow-hidden flex flex-col justify-between",children:[i.jsxs("div",{className:"absolute top-0 right-0 p-4 opacity-100 lg:opacity-0 group-hover:opacity-100 transition-opacity z-10 flex gap-2",children:[w.criteria&&i.jsx("button",{onClick:S=>v(w,S),className:"text-blue-500 hover:text-blue-700 bg-white rounded-full p-2 shadow-sm hover:bg-blue-50",title:"Editar criterios y regenerar",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),i.jsx("button",{onClick:S=>g(w.id,S),className:"text-red-400 hover:text-red-600 bg-white rounded-full p-2 shadow-sm hover:bg-red-50",title:"Eliminar rutina",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"bg-brand-primary/10 p-3 rounded-lg text-brand-primary",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2h2"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 line-clamp-1",children:w.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(w.created_at).toLocaleDateString(),"  ",((y=w.plan_data.weeklyPlan)==null?void 0:y.length)||0," Das"]})]})]}),w.criteria&&i.jsxs("div",{className:"mb-4 text-xs text-slate-500 bg-slate-50 p-2 rounded-lg border border-slate-100",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Meta:"})," ",w.criteria.goal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",w.criteria.level]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Equipo:"})," ",w.criteria.equipment.slice(0,2).join(", "),w.criteria.equipment.length>2&&"..."]})]}),i.jsxs("div",{className:"space-y-2",children:[(b=w.plan_data.weeklyPlan)==null?void 0:b.slice(0,3).map((S,T)=>i.jsxs("div",{className:"text-sm text-slate-600 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-accent"}),i.jsxs("span",{className:"font-semibold",children:[S.day,":"]})," ",S.focus]},T)),((_=w.plan_data.weeklyPlan)==null?void 0:_.length)>3&&i.jsxs("div",{className:"text-xs text-slate-400 pl-4",children:["+ ",w.plan_data.weeklyPlan.length-3," das ms"]})]})]})]},w.id)}),n.length===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:"No tienes rutinas guardadas. Crea la primera ahora!"})]}),o==="create"&&i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:c?"Editar y Regenerar Plan":"Disea tu Nuevo Plan"}),i.jsx("p",{className:"mt-2 text-slate-600",children:"Completa el formulario y la IA generar tu rutina ideal."})]}),i.jsx("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200",children:i.jsx(o3,{onSubmit:m,initialData:c||void 0})})]}),o==="view"&&e&&i.jsx("div",{className:"bg-gray-900 text-white p-4 sm:p-6 md:p-8 rounded-xl shadow-lg animate-fade-in",children:i.jsx(h3,{plan:e,onReset:()=>l("create")})})]})]})},p3={Principiante:"bg-green-100 text-green-800",Intermedio:"bg-yellow-100 text-yellow-800",Avanzado:"bg-red-100 text-red-800"},g3=({exercise:e,onCardClick:t})=>{const n=E.useRef(null),[r,s]=E.useState(!1);return E.useEffect(()=>{if(n.current)if(r){n.current.ended&&(n.current.currentTime=0);const a=n.current.play();a!==void 0&&a.catch(()=>{})}else n.current.pause(),n.current.currentTime=0},[r]),i.jsxs("button",{onClick:t,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col transition-all duration-300 hover:shadow-lg hover:-translate-y-1 active:scale-95 text-left w-full group relative",children:[i.jsxs("div",{className:"relative aspect-video overflow-hidden bg-black",children:[e.videoUrl?i.jsx("video",{ref:n,src:e.videoUrl,poster:e.imageUrl,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105 opacity-90 group-hover:opacity-100",muted:!0,loop:!0,playsInline:!0,preload:"metadata"}):i.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60 pointer-events-none"}),i.jsx("span",{className:`absolute top-3 right-3 px-2 py-1 text-[10px] font-bold uppercase tracking-wide rounded-md shadow-sm ${p3[e.difficulty]} z-10`,children:e.difficulty}),e.isPremium&&i.jsx("span",{className:"absolute top-3 left-3 bg-yellow-400 text-yellow-900 text-[10px] font-bold px-2 py-1 rounded-md shadow-sm z-10",children:"PREMIUM"}),e.videoUrl&&i.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 transition-opacity duration-300 ${r?"opacity-0":"opacity-80"}`,children:i.jsx("div",{className:"bg-black/40 rounded-full p-2 backdrop-blur-sm border border-white/30",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})}),i.jsx("div",{className:"absolute bottom-3 left-3 text-white z-10",children:i.jsx("h3",{className:"text-lg font-bold leading-tight text-shadow-sm",children:e.name})})]}),i.jsxs("div",{className:"p-4 flex flex-col flex-grow justify-between",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.tags.slice(0,3).map(a=>i.jsx("span",{className:"px-2 py-1 text-xs text-slate-600 bg-slate-100 rounded-md",children:a},a)),e.tags.length>3&&i.jsx("span",{className:"px-2 py-1 text-xs text-slate-400",children:"+"})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 border-t border-slate-100 pt-3 mt-1",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{children:[e.duration," min"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.jsx("span",{className:"truncate max-w-[80px]",children:e.category})]})]})]})]})},x3={Principiante:"bg-green-100 text-green-800",Intermedio:"bg-yellow-100 text-yellow-800",Avanzado:"bg-red-100 text-red-800"},y3=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),v3=({exercise:e,onClose:t,onStartExercise:n})=>{Xe.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset",console.log("Cerrando modal")}),[]);const r=()=>{n?n():t()};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:t,children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col",onClick:s=>s.stopPropagation(),children:[i.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center sticky top-0 bg-white/80 backdrop-blur-sm z-10",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(y3,{}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:e.name}),i.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${x3[e.difficulty]}`,children:e.difficulty})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-800",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 md:p-8 flex-grow",children:[i.jsx("p",{className:"text-slate-600 mb-6",children:e.description}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"lg:order-2",children:i.jsxs("div",{className:"w-full aspect-video bg-black rounded-xl shadow-md overflow-hidden relative group",children:[e.videoUrl?i.jsx("video",{src:e.videoUrl,poster:e.imageUrl,controls:!0,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):i.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"}),e.videoUrl&&i.jsx("div",{className:"absolute top-2 right-2 bg-brand-primary/80 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-md",children:"Video Demo"})]})}),i.jsxs("div",{className:"lg:order-1 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Grupos Musculares"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(s=>i.jsx("span",{className:"px-3 py-1 text-sm font-medium text-brand-primary bg-green-50 rounded-full",children:s},s))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-3",children:"Instrucciones"}),i.jsx("ol",{className:"list-decimal list-inside space-y-2 text-slate-600",children:e.instructions.map((s,a)=>i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-brand-primary text-white text-sm font-bold w-6 h-6 flex items-center justify-center rounded-full flex-shrink-0 mt-0.5",children:a+1}),i.jsx("span",{children:s})]},a))})]})]})]})]}),i.jsxs("div",{className:"p-4 md:p-6 bg-slate-50 border-t border-slate-200 grid grid-cols-2 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"col-span-2 md:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx("span",{className:"text-green-500 text-lg",children:""})," ",i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Categora:"})," ",e.category]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx("span",{className:"text-blue-500 text-lg",children:""})," ",i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Duracin:"})," ",e.duration,"min"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx("span",{className:"text-orange-500 text-lg",children:""})," ",i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Caloras:"})," ",e.caloriesPerMin,"/min"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx("span",{className:"text-purple-500 text-lg",children:""})," ",i.jsxs("div",{children:[i.jsx("span",{className:"font-bold",children:"Equipo:"})," ",e.equipment]})]})]}),i.jsx("div",{className:"col-span-2",children:i.jsxs("button",{onClick:r,className:"w-full bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Comenzar Ejercicio"]})})]})]})})},b3=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),w3=({text:e})=>i.jsxs("div",{className:"relative flex items-center group ml-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 bg-slate-800 text-white text-sm rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10 shadow-lg",children:[e,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-slate-800"})]})]}),_3=({onNavigate:e})=>{const[t,n]=E.useState(""),[r,s]=E.useState("Todas"),[a,o]=E.useState("Todas"),[l,c]=E.useState(null),u=E.useMemo(()=>On.filter(d=>{const p=d.name.toLowerCase().includes(t.toLowerCase()),m=r==="Todas"||d.tags.map(v=>v.toLowerCase()).includes(r.toLowerCase()),g=a==="Todas"||d.difficulty===a;return p&&m&&g}),[t,r,a]);return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("div",{className:"flex justify-center items-center",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900",children:"Biblioteca de Ejercicios"}),i.jsx(w3,{text:"Busca ejercicios por nombre, filtra por categora o dificultad y haz clic en una tarjeta para ver instrucciones detalladas."})]}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 max-w-2xl mx-auto",children:"Explora nuestra amplia coleccin de ejercicios con instrucciones detalladas"})]}),i.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-slate-200 mb-8 sticky top-[65px] z-40",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Buscar ejercicios...",value:t,onChange:d=>n(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(b3,{})})]}),i.jsxs("select",{value:r,onChange:d=>s(d.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none bg-white",children:[i.jsx("option",{value:"Todas",children:"Todas las categoras"}),l3.map(d=>i.jsx("option",{value:d,children:d},d))]}),i.jsxs("select",{value:a,onChange:d=>o(d.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none bg-white",children:[i.jsx("option",{value:"Todas",children:"Todas las dificultades"}),c3.map(d=>i.jsx("option",{value:d,children:d},d))]})]})}),i.jsx("div",{className:"mb-6",children:i.jsxs("p",{className:"text-slate-600 font-semibold",children:[u.length," ejercicios encontrados"]})}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(d=>i.jsx(g3,{exercise:d,onCardClick:()=>c(d)},d.id))}),u.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-slate-500 text-lg",children:"No se encontraron ejercicios con los filtros actuales."}),i.jsx("button",{onClick:()=>{n(""),s("Todas"),o("Todas")},className:"mt-4 text-brand-primary font-semibold hover:underline",children:"Limpiar filtros"})]}),l&&i.jsx(v3,{exercise:l,onClose:()=>c(null),onStartExercise:()=>{c(null),e&&e("Mis Rutinas")}})]})},S3={Principiante:"bg-green-500/20 text-green-300 border-green-500/30",Intermedio:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",Avanzado:"bg-red-500/20 text-red-300 border-red-500/30"},N3=({classData:e,onBook:t})=>{const[n,r]=E.useState(!1),{showToast:s}=vn(),a=E.useRef(null),[o,l]=E.useState(!1),c=E.useRef(null),u=e.schedule[0];E.useEffect(()=>{const p=new IntersectionObserver(m=>{m.forEach(g=>{l(g.isIntersecting)})},{threshold:.4});return c.current&&p.observe(c.current),()=>{c.current&&p.unobserve(c.current)}},[]),E.useEffect(()=>{a.current&&(o?a.current.play().catch(()=>{}):a.current.pause())},[o]);const d=async()=>{if(!n)if(t)try{await t(e.id),r(!0)}catch(p){console.error(p)}else r(!0),s(`Reserva exitosa para ${e.name}!`,"success")};return i.jsxs("div",{ref:c,className:"group relative h-72 rounded-3xl overflow-hidden cursor-pointer transition-transform duration-500 hover:scale-[1.02] shadow-2xl shadow-black/50",children:[i.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.videoUrl?i.jsx("video",{ref:a,src:e.videoUrl,poster:e.imageUrl,className:"w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity duration-700",muted:!0,loop:!0,playsInline:!0,preload:"metadata"}):i.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover opacity-60"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"})]}),i.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between z-10",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("span",{className:`px-3 py-1 text-[10px] font-bold uppercase tracking-wider border rounded-full backdrop-blur-md ${e.difficulty?S3[e.difficulty]:""}`,children:e.difficulty}),i.jsxs("span",{className:"bg-white/10 backdrop-blur-md text-white text-[10px] font-bold px-2 py-1 rounded-lg flex items-center gap-1",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"AI Cam"]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-primary flex items-center justify-center text-brand-dark text-xs font-bold",children:e.coach.charAt(0)}),i.jsx("span",{className:"text-slate-300 text-xs font-medium",children:e.coach})]}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1 leading-none tracking-tight group-hover:text-brand-primary transition-colors",children:e.name}),i.jsx("p",{className:"text-slate-400 text-xs uppercase font-bold tracking-widest mb-4",children:e.category}),i.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-300 text-xs bg-white/5 px-3 py-1.5 rounded-lg border border-white/10",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-brand-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"font-mono",children:u?`${u.day} ${u.time}`:"Flexible"})]}),i.jsx("button",{onClick:p=>{p.stopPropagation(),d()},disabled:n,className:`flex-grow py-2 px-4 rounded-xl text-xs font-bold uppercase tracking-wide transition-all active:scale-95 shadow-lg
                                ${n?"bg-green-500/20 text-green-400 border border-green-500/50 cursor-default":"bg-white text-slate-900 hover:bg-brand-primary hover:text-slate-900"}`,children:n?"Reservado":"Reservar"})]})]})]})]})},Nt={async fetchClasses(){const{data:e,error:t}=await M.from("gym_classes").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching classes:",t),t;return(e||[]).map(n=>({id:n.id,name:n.name,description:n.description,imageUrl:n.image_url,videoUrl:n.video_url,difficulty:n.difficulty,category:n.category,coach:n.coach_name,capacity:n.capacity,duration:60,schedule:n.schedule||[],price:n.price,locationType:n.location_type,gymId:n.gym_id}))},async fetchMyClasses(){const{data:{user:e}}=await M.auth.getUser();if(!e)return[];const{data:t,error:n}=await M.from("gym_classes").select("*").eq("gym_id",e.id).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching my classes:",n),n;return(t||[]).map(r=>({id:r.id,name:r.name,description:r.description,imageUrl:r.image_url,videoUrl:r.video_url,difficulty:r.difficulty,category:r.category,coach:r.coach_name,capacity:r.capacity,duration:60,schedule:r.schedule||[],price:r.price,locationType:r.location_type,gymId:r.gym_id}))},async createClass(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Usuario no autenticado");const n={name:e.name,description:e.description,image_url:e.imageUrl,video_url:e.videoUrl,difficulty:e.difficulty,category:e.category,coach_name:e.coach,capacity:e.capacity,schedule:e.schedule,price:e.price,location_type:e.locationType,gym_id:t.id},{data:r,error:s}=await M.from("gym_classes").insert(n).select().single();if(s)throw console.error("Error creating class:",s),s;return r},async bookClass(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("Debes iniciar sesin para reservar");const{data:n}=await M.from("bookings").select("id").eq("class_id",e).eq("user_id",t.id).maybeSingle();if(n)throw new Error("Ya tienes una reserva para esta clase.");const{error:r}=await M.from("bookings").insert({user_id:t.id,class_id:e,status:"pending_confirmation"});if(r)throw console.error("Error booking class:",r),r;return!0},async getAttendees(e){const{data:t,error:n}=await M.from("bookings").select(`
                id,
                status,
                created_at,
                user:user_id (
                    email,
                    raw_user_meta_data
                ),
                profiles:user_id (
                    full_name,
                    avatar_url
                )
            `).eq("class_id",e);if(n)throw n;return t.map(r=>{var s,a,o,l,c;return{id:r.id,status:r.status,joinedAt:r.created_at,user:{email:(s=r.user)==null?void 0:s.email,name:((a=r.profiles)==null?void 0:a.full_name)||((l=(o=r.user)==null?void 0:o.raw_user_meta_data)==null?void 0:l.full_name)||"Usuario",avatar:(c=r.profiles)==null?void 0:c.avatar_url}}})},async cancelBooking(e){const{error:t}=await M.from("bookings").delete().eq("id",e);if(t)throw t},async updateClass(e,t){const{error:n}=await M.from("gym_classes").update(t).eq("id",e);if(n)throw n},async deleteClass(e){const{error:t}=await M.from("gym_classes").delete().eq("id",e);if(t)throw t}},Io=({icon:e,label:t,value:n,color:r})=>i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${r}`,children:e}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 text-sm",children:t}),i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:n})]})]}),E3=({text:e})=>i.jsxs("div",{className:"relative flex items-center group ml-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 bg-slate-800 text-white text-sm rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10 shadow-lg",children:[e,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-slate-800"})]})]}),C3=({allClasses:e})=>{const t=E.useMemo(()=>{const n={};return e.forEach(r=>{n[r.coach]||(n[r.coach]=[]),n[r.coach].push(...r.schedule)}),n},[e]);return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Disponibilidad de Entrenadores"}),i.jsx("div",{className:"space-y-4",children:Object.entries(t).length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay entrenadores con clases programadas."}):Object.entries(t).map(([n,r])=>i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-700",children:n}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.map((s,a)=>i.jsxs("span",{className:"px-2 py-1 text-xs font-medium text-slate-600 bg-slate-100 rounded-full",children:["Ocupado: ",s.day," ",s.time]},a))})]},n))})]})},k3=()=>{const[e,t]=E.useState("Todas"),[n,r]=E.useState([]),[s,a]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const m=await Nt.fetchClasses();r(m)}catch(m){console.error("Error loading classes:",m),a(!1)}finally{a(!1)}})()},[]);const o=E.useMemo(()=>["Todas","Mis Reservas",...Array.from(new Set(n.map(m=>m.category).filter(Boolean)))].sort(),[n]),l=E.useMemo(()=>n.filter(p=>(p.capacity||0)>0),[n]),c=E.useMemo(()=>e==="Todas"?l:e==="Mis Reservas"?[]:l.filter(p=>p.category===e),[e,l]);if(s)return i.jsx("div",{className:"p-12 text-center",children:"Cargando clases..."});const u=l.length,d=new Set(n.map(p=>p.coach)).size;return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in",children:[i.jsxs("div",{className:"mb-8 md:mb-12",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900",children:"Clases Grupales"}),i.jsx(E3,{text:"Explora y reserva tu lugar en nuestras clases grupales. Filtra por tipo de clase y revisa los horarios para planificar tu semana."})]}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 max-w-2xl",children:"nete a nuestras clases grupales y entrena con la comunidad FitnessFlow"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 md:mb-12",children:[i.jsx(Io,{icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),label:"Clases Disponibles",value:u,color:"bg-blue-100"}),i.jsx(Io,{icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"Mis Reservas",value:0,color:"bg-green-100"}),i.jsx(Io,{icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"Esta Semana",value:u,color:"bg-orange-100"}),i.jsx(Io,{icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),label:"Coaches",value:d,color:"bg-purple-100"})]}),i.jsx("div",{className:"border-b border-slate-200 mb-8",children:i.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:o.map(p=>i.jsx("button",{onClick:()=>t(p),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${e===p?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:p},p))})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:c.length===0?i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-8 text-center",children:[i.jsx("h3",{className:"text-xl font-medium text-slate-700",children:"No hay clases disponibles"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No se encontraron clases en esta categora."}),e==="Todas"&&i.jsx("p",{className:"text-sm mt-4 text-slate-400",children:"Los gimnasios y entrenadores publicarn sus clases aqu pronto."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:c.map(p=>i.jsx(N3,{classData:p,onBook:async m=>{try{await Nt.bookClass(m),alert("Reserva exitosa!");const g=await Nt.fetchClasses();r(g)}catch(g){alert(g.message||"Error al reservar")}}},p.id))})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(C3,{allClasses:n})})]})]})},Mo=["#00A896","#02C39A","#48D2B4","#7CE0CF","#AEEFE9"],T3=({data:e})=>{const r=Math.min(300,250)/2-20,s=r*.6,a=e.reduce((c,u)=>c+u.value,0);let o=-Math.PI/2;const l=e.map((c,u)=>{const d=c.value/a*2*Math.PI,p=o+d,m=300/2+r*Math.cos(o),g=250/2+r*Math.sin(o),v=300/2+r*Math.cos(p),x=250/2+r*Math.sin(p),w=300/2+s*Math.cos(o),y=250/2+s*Math.sin(o),b=300/2+s*Math.cos(p),_=250/2+s*Math.sin(p),S=d>Math.PI?1:0,T=[`M ${m} ${g}`,`A ${r} ${r} 0 ${S} 1 ${v} ${x}`,`L ${b} ${_}`,`A ${s} ${s} 0 ${S} 0 ${w} ${y}`,"Z"].join(" ");return o=p,{path:T,color:Mo[u%Mo.length]}});return i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center h-full",children:[i.jsxs("svg",{viewBox:"0 0 300 250",className:"w-full h-full max-w-[300px]",children:[i.jsx("g",{transform:`translate(${300/2}, ${250/2})`,children:l.map((c,u)=>i.jsx("path",{d:c.path,fill:c.color},u))}),i.jsxs("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"font-bold text-3xl fill-slate-800",children:[a,"%"]}),i.jsx("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"middle",className:"text-sm fill-slate-500",children:"Total Focus"})]}),i.jsx("div",{className:"mt-4 md:mt-0 md:ml-6 space-y-2",children:e.map((c,u)=>i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:Mo[u%Mo.length]}}),i.jsx("span",{className:"text-slate-600",children:c.name}),i.jsxs("span",{className:"ml-auto font-semibold text-slate-800",children:[c.value,"%"]})]},c.name))})]})},j3=({data:e})=>i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"Rendimiento: Esta Semana vs. Anterior"}),i.jsx("div",{className:"space-y-6",children:e.map((t,n)=>{const r=t.current-t.previous,s=t.previous>0?(r/t.previous*100).toFixed(1):"0",a=r>=0,o=Math.max(t.current,t.previous)*1.2;return i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-semibold text-slate-600",children:t.label}),i.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[a?"":""," ",Math.abs(Number(s)),"%"]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium",children:[i.jsx("span",{className:"w-16 text-slate-500",children:"Anterior"}),i.jsx("div",{className:"flex-grow h-2 bg-slate-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-slate-300 rounded-full",style:{width:`${t.previous/o*100}%`}})}),i.jsxs("span",{className:"w-12 text-right text-slate-500",children:[t.previous," ",t.unit]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold",children:[i.jsx("span",{className:"w-16 text-brand-primary-dark",children:"Actual"}),i.jsx("div",{className:"flex-grow h-2 bg-slate-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-brand-primary rounded-full transition-all duration-1000 ease-out",style:{width:`${t.current/o*100}%`}})}),i.jsxs("span",{className:"w-12 text-right text-brand-primary-dark",children:[t.current," ",t.unit]})]})]},n)})})]}),Do=({icon:e,value:t,label:n})=>i.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg border border-slate-100 transition-transform hover:scale-105",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"text-3xl bg-slate-100 p-3 rounded-full",children:e}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t}),i.jsx("p",{className:"text-slate-500 text-sm",children:n})]})]})}),A3=()=>{const[e,t]=Xe.useState([]),[n,r]=Xe.useState({unlocked:[],locked:[]}),[s,a]=Xe.useState([]),[o,l]=Xe.useState({totalWorkouts:0,timeInvestedMinutes:0,caloriesBurned:0}),[c,u]=Xe.useState(!0),[d,p]=Xe.useState([]),[m,g]=Xe.useState([]),[v,x]=Xe.useState(null);Xe.useEffect(()=>{(async()=>{u(!0);try{const[_,S,T,N,C,I,A]=await Promise.all([Ze.fetchPersonalRecords(),Ze.fetchAchievements(),Ze.fetchProgressLogs(),Ze.fetchUserStats(),Ze.fetchWeeklyStats(),Ze.fetchMuscleFocusStats(),Ze.fetchMyEvaluation()]);t(_),r(S),a(T),l(N),p(C),g(I),x(A)}catch(_){console.error("Error loading progress:",_)}finally{u(!1)}})()},[]);const w=n.unlocked,y=n.locked;return c?i.jsx("div",{className:"p-12 text-center",children:"Cargando progreso..."}):i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900",children:"Mi Progreso"}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 max-w-2xl",children:"Tu panel de control personal de rendimiento y logros."})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Do,{icon:"",value:o.totalWorkouts.toString(),label:"Entrenamientos Totales"}),i.jsx(Do,{icon:"",value:`${o.caloriesBurned}`,label:"Caloras Quemadas"}),i.jsx(Do,{icon:"",value:`${(o.timeInvestedMinutes/60).toFixed(1)}h`,label:"Tiempo Entrenado"}),i.jsx(Do,{icon:"",value:e.length.toString(),label:"Rcords Personales Batidos"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[Array.isArray(d)&&d.length>0&&i.jsx(j3,{data:d}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Progreso de Peso Corporal (kg)"}),i.jsx("div",{className:"h-64",children:i.jsx("div",{className:"overflow-y-auto h-full",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-sm text-slate-500 sticky top-0 bg-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-semibold",children:"Fecha"}),i.jsx("th",{className:"p-2 font-semibold",children:"Peso (kg)"}),i.jsx("th",{className:"p-2 font-semibold",children:"Grasa (%)"})]})}),i.jsx("tbody",{children:s.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-4 text-center text-slate-500",children:"No hay registros de peso an."})}):s.map((b,_)=>i.jsxs("tr",{className:"border-t border-slate-200 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 font-medium text-slate-700",children:new Date(b.date).toLocaleDateString()}),i.jsxs("td",{className:"p-2 font-bold text-brand-primary",children:[b.weight_kg," kg"]}),i.jsx("td",{className:"p-2 text-slate-500",children:b.body_fat_percentage?`${b.body_fat_percentage}%`:"-"})]},_))})]})})})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Rcords Personales (PRs)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"text-sm text-slate-500",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 font-semibold",children:"Ejercicio"}),i.jsx("th",{className:"p-2 font-semibold",children:"Peso"}),i.jsx("th",{className:"p-2 font-semibold",children:"Fecha"})]})}),i.jsx("tbody",{children:e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-4 text-center text-slate-500",children:"No hay rcords registrados an."})}):e.map((b,_)=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"p-2 font-medium text-slate-700",children:b.exercise}),i.jsxs("td",{className:"p-2 font-bold text-brand-primary",children:[b.weight," kg"]}),i.jsx("td",{className:"p-2 text-slate-500",children:new Date(b.date).toLocaleDateString()})]},_))})]})})]})]}),i.jsxs("div",{className:"space-y-8",children:[v&&i.jsxs("div",{className:"bg-gradient-to-br from-brand-primary to-brand-secondary p-6 rounded-xl shadow-lg shadow-brand-primary/20 text-white relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 text-9xl",children:""}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-white/20 pb-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold",children:"Feedback de tu Entrenador"}),i.jsx("p",{className:"text-sm opacity-90",children:"Evaluacin reciente de progreso"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm",children:[i.jsx("span",{className:"block text-xs font-bold uppercase opacity-70 mb-1",children:"Calificacin"}),i.jsx("div",{className:"flex text-yellow-300 gap-1 text-lg",children:[1,2,3,4,5].map(b=>i.jsx("span",{children:b<=(v.rating||0)?"":""},b))})]}),i.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm",children:[i.jsx("span",{className:"block text-xs font-bold uppercase opacity-70 mb-1",children:"Estado"}),i.jsx("span",{className:"font-bold text-lg",children:v.general_valuation||"En Progreso"})]})]}),i.jsxs("div",{className:"space-y-3",children:[v.feedback&&i.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm",children:[i.jsx("span",{className:"block text-xs font-bold uppercase opacity-70 mb-1",children:"Feedback Tcnico"}),i.jsx("p",{className:"text-sm leading-relaxed",children:v.feedback})]}),v.recommendations&&i.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm border-l-4 border-yellow-400",children:[i.jsx("span",{className:"block text-xs font-bold uppercase opacity-70 mb-1",children:"Recomendacin Clave"}),i.jsx("p",{className:"text-sm font-medium",children:v.recommendations})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Logros Desbloqueados"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:w.length===0?i.jsx("p",{className:"col-span-2 text-center text-slate-500 text-sm",children:"An no has desbloqueado logros."}):w.map(b=>i.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50 border border-green-200 transition-transform hover:scale-105",children:[i.jsx("div",{className:"text-4xl",children:b.icon}),i.jsx("h4",{className:"font-semibold text-slate-800 mt-2 text-sm",children:b.name}),i.jsx("p",{className:"text-xs text-slate-500",children:b.description})]},b.id))})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Prximos Logros"}),i.jsx("ul",{className:"space-y-3",children:y.length===0?i.jsx("p",{className:"text-center text-slate-500 text-sm",children:"Has completado todos los logros!"}):y.slice(0,5).map(b=>i.jsxs("li",{className:"flex items-center gap-4 opacity-70",children:[i.jsx("div",{className:"text-3xl bg-slate-200 p-2 rounded-full grayscale",children:b.icon}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-600",children:b.name}),i.jsx("p",{className:"text-sm text-slate-500",children:b.description})]})]},b.id))})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[i.jsx("div",{className:"flex items-center gap-2 mb-4",children:i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Enfoque Muscular"})}),i.jsx("div",{className:"h-64",children:i.jsx(T3,{data:m})})]})]})]})]})};function R3(e){let t="";const n=e.byteLength;for(let r=0;r<n;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function I3(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return r}async function M3(e,t,n,r){const s=new Int16Array(e.buffer),a=s.length/r,o=t.createBuffer(r,a,n);for(let l=0;l<r;l++){const c=o.getChannelData(l);for(let u=0;u<a;u++)c[u]=s[u*r+l]/32768}return o}const lh=()=>i.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-purple-400 to-pink-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:"AI"}),D3=({name:e})=>i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-600 dark:text-slate-300 font-bold text-sm flex-shrink-0",children:e.substring(0,1).toUpperCase()}),P3=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),L3=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-14 0m7 6v4m0 0H9m4 0h-4m-1-11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1h-2a1 1 0 01-1-1v-5z"})," "]}),U3=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})," ",i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 10h6v4H9z"})," "]}),O3=({message:e})=>i.jsxs("div",{className:"flex gap-3 my-4",children:[i.jsx(lh,{}),i.jsxs("div",{className:"bg-white dark:bg-slate-700 p-3 rounded-lg rounded-tl-none shadow-sm border border-slate-200 dark:border-slate-600 max-w-lg animate-fade-in transition-colors",children:[i.jsx("p",{className:"text-slate-700 dark:text-slate-200 whitespace-pre-wrap",children:e.text}),e.sources&&e.sources.length>0&&i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200/60 dark:border-slate-600/60",children:[i.jsx("h5",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Fuentes:"}),i.jsx("ul",{className:"space-y-1",children:e.sources.map((t,n)=>i.jsx("li",{className:"text-xs",children:i.jsxs("a",{href:t.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate block",children:[i.jsx(P3,{}),t.title||t.uri]})},n))})]})]})]}),z3=({text:e,name:t})=>i.jsxs("div",{className:"flex gap-3 my-4 justify-end",children:[i.jsx("div",{className:"bg-brand-primary text-white p-3 rounded-lg rounded-br-none shadow-sm max-w-lg animate-fade-in",children:i.jsx("p",{className:"whitespace-pre-wrap",children:e})}),i.jsx(D3,{name:t})]}),B3=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const a=await n3();t(a)}catch{t("Recuerda que cada pequeo paso cuenta en tu camino hacia el bienestar. Sigue adelante!")}finally{r(!1)}})()},[]),i.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/40 dark:to-orange-900/40 p-6 rounded-xl shadow-lg border border-yellow-200 dark:border-yellow-700/50 transition-colors",children:[i.jsx("h3",{className:"font-bold text-yellow-900 dark:text-yellow-100 mb-3 text-lg flex items-center gap-2",children:" Consejo de Bienestar del Da"}),n?i.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm animate-pulse",children:"Generando tu consejo..."}):i.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:e})]})},q3=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState([]),[s,a]=E.useState(""),o=E.useRef(null),l=E.useRef(null),c=E.useRef(null),u=E.useRef(null),d=E.useRef(null),p=async()=>{try{const g=await navigator.mediaDevices.getUserMedia({audio:!0});l.current=g;const v=new s1({apiKey:"AIzaSyDCeRcwPFN6S_1N9uKQxKoK3jblWb7XcDI"}),x=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});c.current=x;const w=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),y=w.createGain();y.connect(w.destination);let b=0;const _=new Set,S=v.live.connect({model:"gemini-2.5-flash",callbacks:{onopen:()=>{t(!0),r(["AI: Hola! Soy tu coach de voz. En qu puedo ayudarte?"]);const T=x.createMediaStreamSource(g);d.current=T;const N=x.createScriptProcessor(4096,1,1);u.current=N,N.onaudioprocess=C=>{const I=C.inputBuffer.getChannelData(0),A=I.length,R=new Int16Array(A);for(let D=0;D<A;D++)R[D]=I[D]*32768;const O={data:R3(new Uint8Array(R.buffer)),mimeType:"audio/pcm;rate=16000"};S.then(D=>{D.sendRealtimeInput({media:O})})},T.connect(N),N.connect(x.destination)},onmessage:async T=>{var C,I,A,R,O,D,G,W,K,B,P;if((C=T.serverContent)!=null&&C.inputTranscription&&a(T.serverContent.inputTranscription.text||""),(I=T.serverContent)!=null&&I.turnComplete){const L=s;L&&r(V=>[...V,`T: ${L}`]),a("")}const N=(G=(D=(O=(R=(A=T.serverContent)==null?void 0:A.modelTurn)==null?void 0:R.parts)==null?void 0:O[0])==null?void 0:D.inlineData)==null?void 0:G.data;if(N){(P=(B=(K=(W=T.serverContent)==null?void 0:W.modelTurn)==null?void 0:K.parts)==null?void 0:B[0])!=null&&P.text&&r(k=>{var q,$,j,ne;return[...k,`AI: ${(ne=(j=($=(q=T.serverContent)==null?void 0:q.modelTurn)==null?void 0:$.parts)==null?void 0:j[0])==null?void 0:ne.text}`]}),b=Math.max(b,w.currentTime);const L=await M3(I3(N),w,24e3,1),V=w.createBufferSource();V.buffer=L,V.connect(y),V.addEventListener("ended",()=>_.delete(V)),V.start(b),b+=L.duration,_.add(V)}},onerror:T=>{console.error("Live session error:",T),r(N=>[...N,"Error: Hubo un problema con la conexin."]),m()},onclose:()=>{m()}},config:{responseModalities:[qi.AUDIO],inputAudioTranscription:{}}});o.current=S}catch(g){console.error("Failed to start session:",g),alert("No se pudo acceder al micrfono. Por favor, verifica los permisos.")}},m=()=>{var g,v,x,w,y;(g=o.current)==null||g.then(b=>b.close()),o.current=null,(v=l.current)==null||v.getTracks().forEach(b=>b.stop()),l.current=null,(x=u.current)==null||x.disconnect(),u.current=null,(w=d.current)==null||w.disconnect(),d.current=null,(y=c.current)==null||y.close(),c.current=null,t(!1),a("")};return E.useEffect(()=>()=>{e&&m()},[e]),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700 transition-colors",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2 text-lg",children:" AI Live Coach"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Habla directamente con tu coach para obtener respuestas y motivacin al instante."}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 p-4 rounded-lg min-h-[150px] max-h-[300px] overflow-y-auto text-sm text-slate-700 dark:text-slate-200 space-y-2 border border-slate-200 dark:border-slate-700",children:[n.map((g,v)=>i.jsx("p",{children:g},v)),s&&i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 italic",children:["T: ",s,"..."]})]}),i.jsx("div",{className:"mt-4",children:e?i.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 bg-red-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-600 transition-colors shadow-lg hover:shadow-red-500/20",children:[i.jsx(U3,{})," Detener Conversacin"]}):i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-colors shadow-lg hover:shadow-green-500/20",children:[i.jsx(L3,{})," Iniciar Conversacin"]})})]})},Hg=({user:e})=>{const[t,n]=E.useState([{sender:"ai",text:`Hola, ${e.name.split(" ")[0]}!  Soy tu Coach de Bienestar de FitnessFlow.

Estoy aqu para ayudarte con tus dudas sobre fitness, nutricin o para darte un empujn de motivacin. En qu te puedo ayudar hoy?`}]),[r,s]=E.useState(""),[a,o]=E.useState(!1),l=E.useRef(null);E.useEffect(()=>{var u;(u=l.current)==null||u.scrollIntoView({behavior:"smooth"})},[t]);const c=async()=>{if(r.trim()===""||a)return;const u={sender:"user",text:r};n(p=>[...p,u]);const d=r;s(""),o(!0);try{const{text:p,sources:m}=await t3(d,e.name),g={sender:"ai",text:p,sources:m};n(v=>[...v,g])}catch{const m={sender:"ai",text:"Lo siento, hubo un error al procesar tu solicitud."};n(g=>[...g,m])}finally{o(!1)}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white transition-colors",children:"Centro de Bienestar AI"}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 dark:text-slate-300 transition-colors max-w-2xl",children:"Tu espacio para el equilibrio entre mente y cuerpo."})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col h-[70vh] lg:h-auto transition-colors",children:[i.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(lh,{}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Coach de Bienestar FitnessFlow "}),i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-semibold",children:"En lnea"})]})]})}),i.jsxs("div",{className:"flex-grow p-4 overflow-y-auto bg-slate-50 dark:bg-slate-900 h-96 transition-colors",children:[t.map((u,d)=>u.sender==="ai"?i.jsx(O3,{message:u},d):i.jsx(z3,{text:u.text,name:e.name},d)),a&&i.jsxs("div",{className:"flex gap-3 my-4",children:[i.jsx(lh,{}),i.jsx("div",{className:"bg-white dark:bg-slate-700 p-3 rounded-lg rounded-tl-none shadow-sm border border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse [animation-delay:0.1s]"}),i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse [animation-delay:0.2s]"})]})})]}),i.jsx("div",{ref:l})]}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 rounded-b-xl transition-colors",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:r,onChange:u=>s(u.target.value),onKeyDown:u=>u.key==="Enter"&&c(),placeholder:"Escribe tu pregunta sobre bienestar...",className:"w-full pl-4 pr-12 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-full text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 focus:ring-2 focus:ring-brand-primary focus:outline-none transition-colors",disabled:a}),i.jsx("button",{onClick:c,disabled:a,className:"absolute inset-y-0 right-0 flex items-center justify-center w-12 h-full text-white bg-brand-primary rounded-full hover:bg-brand-secondary disabled:bg-slate-400 transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(B3,{}),i.jsx(q3,{})]})]})]})},i1=[{name:"Ana Garca",email:"ana.garcia@email.com",password:"password123",accountType:"user",plan:"premium",subscriptionStatus:"subscribed",isGymMember:!0,trialEndDate:null,notifications:[{id:1,message:"Bienvenida a FitnessFlow Pro!",date:"2024-07-20",read:!0}],profile:{goal:"lose_fat",level:"intermediate",daysPerWeek:4,equipment:["Mancuernas","Caminadora"]}},{name:"Gimnasio El Templo",email:"contacto@gimnasioeltemplo.com",password:"password123",accountType:"gym",plan:"premium",subscriptionStatus:"subscribed",isGymMember:!1,trialEndDate:null,notifications:[]},{name:"Juan Valdez",email:"juan.valdez@email.com",password:"password123",accountType:"entrenador",plan:"premium",subscriptionStatus:"subscribed",isGymMember:!1,trialEndDate:null,notifications:[{id:1,message:"Carlos Rodrguez ha solicitado una sesin.",date:"2024-07-21",read:!1}],profession:"Entrenador Personal Certificado",professionalDescription:"Especialista en entrenamiento de fuerza y acondicionamiento fsico.",phone:"3001234567",address:"Calle 10 #43A-50, Medelln",availability:[{day:"Lunes",hours:["08:00","09:00","10:00","14:00","15:00"]},{day:"Mircoles",hours:["08:00","09:00","10:00","14:00","15:00"]},{day:"Viernes",hours:["08:00","09:00","10:00"]},{day:"Sbado",hours:["09:00","10:00","11:00"]}]}],G3=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Vg=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),H3=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Fg=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),V3=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(null),[o,l]=E.useState(!1),[c,u]=E.useState(null),[d,p]=E.useState(null),m=E.useMemo(()=>i1.filter(x=>x.accountType==="gym").map(x=>x.name.toLowerCase()),[]);E.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(x=>{r({latitude:x.coords.latitude,longitude:x.coords.longitude}),a(null)},x=>{console.error("Error getting geolocation:",x.message),a("No se pudo obtener tu ubicacin. Asegrate de activar el GPS.")}):a("La geolocalizacin no es soportada por tu navegador.")},[]);const g=async()=>{if(!e.trim()||!n){n||a("Necesitamos tu ubicacin para encontrar gimnasios cercanos.");return}l(!0),u(null),p(null);try{const x=await r3(e,n);p(x)}catch(x){console.error(x),u("Hubo un error al buscar. Por favor, intenta de nuevo ms tarde.")}finally{l(!1)}},v=x=>{const w=x.toLowerCase(),y=m.some(_=>w.includes(_)),b=w.includes("smart")||w.includes("body")||w.includes("fitness");return y||b};return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 min-h-screen flex flex-col",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white",children:"Explora tu Zona"}),i.jsxs("p",{className:"mt-2 text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto",children:["Encuentra los mejores gimnasios cerca de ti. ",i.jsx("span",{className:"text-brand-primary font-bold",children:"Identificamos automticamente"})," los que usan FitnessFlow para una experiencia integrada."]})]}),i.jsxs("div",{className:"max-w-2xl mx-auto w-full sticky top-4 z-20",children:[i.jsxs("div",{className:"relative shadow-lg rounded-full",children:[i.jsx("input",{type:"text",value:e,onChange:x=>t(x.target.value),onKeyDown:x=>x.key==="Enter"&&g(),placeholder:s?"Ubicacin no disponible":"Ej: Gimnasios con piscina abiertos ahora",className:"w-full pl-6 pr-32 py-4 border-none rounded-full focus:ring-2 focus:ring-brand-primary outline-none text-slate-800 bg-white dark:bg-slate-800 dark:text-white placeholder-slate-400",disabled:o||!!s}),i.jsx("button",{onClick:g,disabled:o||!!s,className:"absolute inset-y-1 right-1 px-6 font-bold text-white bg-brand-primary rounded-full hover:bg-brand-secondary disabled:bg-slate-400 transition-all duration-200 flex items-center gap-2",children:o?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(G3,{}),i.jsx("span",{className:"hidden sm:inline",children:"Buscar"})]})})]}),s&&i.jsx("p",{className:"text-red-500 text-xs text-center mt-2 font-medium bg-red-50 dark:bg-red-900/20 py-1 rounded-lg",children:s})]}),i.jsxs("div",{className:"flex-grow mt-12",children:[c&&i.jsxs("div",{className:"max-w-md mx-auto bg-red-50 text-red-700 p-4 rounded-xl text-center border border-red-100",children:[i.jsx("p",{className:"font-bold",children:"Ups!"}),i.jsx("p",{children:c})]}),!d&&!o&&!c&&i.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-300 dark:text-slate-600 mt-12",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-32 w-32 mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 3l6-3m0 0l6 3m-6-3v10"})}),i.jsx("p",{children:"Realiza una bsqueda para ver el mapa"})]}),d&&i.jsxs("div",{className:"max-w-5xl mx-auto animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800 p-6 rounded-2xl mb-8 border border-blue-100 dark:border-slate-700 flex gap-4 items-start",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white dark:bg-slate-700 flex items-center justify-center text-2xl shadow-sm flex-shrink-0",children:""}),i.jsx("div",{className:"prose prose-sm prose-slate dark:prose-invert max-w-none",children:i.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:d.text})})]}),d.sources&&d.sources.length>0?i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[i.jsx("span",{className:"text-red-500",children:i.jsx(Vg,{})}),"Lugares Encontrados"]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.sources.map((x,w)=>{const y=v(x.title);return i.jsxs("div",{className:`group bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-xl overflow-hidden transition-all duration-300 hover:-translate-y-1 flex flex-col ${y?"border-2 border-brand-primary ring-2 ring-brand-primary/10 relative":"border border-slate-200 dark:border-slate-700"}`,children:[y&&i.jsxs("div",{className:"absolute top-3 right-3 z-20 bg-brand-primary text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md flex items-center gap-1 animate-pulse",children:[i.jsx(Fg,{}),"Aliado FitnessFlow"]}),i.jsxs("div",{className:"h-32 bg-slate-100 dark:bg-slate-700 relative flex items-center justify-center overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/map-cube.png')]"}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shadow-md z-10 group-hover:scale-110 transition-transform ${y?"bg-brand-primary text-white":"bg-white dark:bg-slate-800"}`,children:i.jsx(Vg,{})})]}),i.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[i.jsx("h4",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2 line-clamp-1 group-hover:text-brand-primary transition-colors",children:x.title}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4 line-clamp-2",children:y?"Este gimnasio usa FitnessFlow! Conecta tu cuenta para acceder automticamente.":"Haz clic para ver horarios, fotos y reseas en Google Maps."}),i.jsx("div",{className:"mt-auto pt-4 border-t border-slate-100 dark:border-slate-700",children:y?i.jsxs("button",{className:"w-full flex items-center justify-center gap-2 text-sm font-bold text-white bg-brand-primary py-2 rounded-lg hover:bg-brand-secondary transition-colors shadow-lg shadow-brand-primary/20",children:[i.jsx(Fg,{}),"Ver Perfil Aliado"]}):i.jsxs("a",{href:x.uri,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 text-sm font-bold text-brand-primary bg-brand-primary/5 py-2 rounded-lg group-hover:bg-brand-primary group-hover:text-white transition-colors",children:[i.jsx(H3,{}),"Cmo llegar"]})})]})]},w)})})]}):i.jsx("div",{className:"text-center p-8 bg-slate-50 dark:bg-slate-800 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700",children:i.jsx("p",{className:"text-slate-500",children:"La IA respondi, pero no devolvi ubicaciones especficas de mapa esta vez. Intenta ser ms especfico en tu bsqueda."})})]})]})]})},F3=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),$3=({navItems:e,activeItem:t,onNavigate:n})=>{const[r,s]=E.useState(!1),a=E.useRef(null),o=E.useRef(null);E.useEffect(()=>{const g=v=>{a.current&&!a.current.contains(v.target)&&o.current&&!o.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const c=e.length>5,u=c?e.slice(0,4):e,d=c?e.slice(4):[],p=g=>{n(g),s(!1)},m=d.some(g=>g.name===t);return i.jsxs(i.Fragment,{children:[r&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-40 md:hidden",onClick:()=>s(!1)}),i.jsxs("div",{ref:a,className:"md:hidden fixed bottom-24 right-4 w-64 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 animate-scale-in flex flex-col overflow-hidden origin-bottom-right",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Ms Mdulos"}),i.jsx("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.jsx("div",{className:"py-2 max-h-[60vh] overflow-y-auto",children:d.map(g=>i.jsxs("button",{onClick:()=>p(g.name),className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-all duration-200 hover:bg-slate-50 dark:hover:bg-slate-700/50 border-l-4 ${t===g.name?"border-brand-primary text-brand-primary bg-green-50 dark:bg-green-900/10 font-semibold":"border-transparent text-slate-600 dark:text-slate-300"}`,children:[i.jsx("div",{className:`w-5 h-5 ${t===g.name?"text-brand-primary":"text-slate-400"}`,children:g.icon}),i.jsx("span",{className:"text-sm",children:g.name})]},g.name))})]})]}),i.jsx("nav",{className:"md:hidden fixed bottom-4 left-1/2 -translate-x-1/2 w-[95%] max-w-sm bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl rounded-2xl shadow-2xl z-50 border border-slate-200 dark:border-slate-700 ring-1 ring-black/5",children:i.jsxs("div",{className:"flex justify-around items-stretch h-16 px-1",children:[u.map(g=>i.jsxs("button",{onClick:()=>p(g.name),className:`flex-1 flex flex-col items-center justify-center transition-all duration-200 p-1 rounded-xl focus:outline-none active:scale-95 ${t===g.name?"text-brand-primary":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,"aria-current":t===g.name?"page":void 0,children:[i.jsx("div",{className:`w-6 h-6 transition-transform duration-200 ${t===g.name?"-translate-y-1 scale-110":""}`,children:g.icon}),i.jsx("span",{className:`text-[10px] mt-1 truncate max-w-full px-1 ${t===g.name?"font-bold opacity-100":"font-normal opacity-80"}`,children:g.name}),t===g.name&&i.jsx("span",{className:"w-1 h-1 bg-brand-primary rounded-full mt-1 absolute bottom-1.5"})]},g.name)),c&&i.jsxs("button",{ref:o,onClick:()=>s(!r),className:`flex-1 flex flex-col items-center justify-center transition-all duration-200 p-1 rounded-xl focus:outline-none active:scale-95 ${r||m?"text-brand-primary":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:[i.jsx("div",{className:`w-6 h-6 transition-transform duration-200 ${r?"-translate-y-1 scale-110":""}`,children:i.jsx(F3,{})}),i.jsx("span",{className:`text-[10px] mt-1 ${r||m?"font-bold":"font-normal"}`,children:"Ms"}),(r||m)&&i.jsx("span",{className:"w-1 h-1 bg-brand-primary rounded-full mt-1 absolute bottom-1.5"})]})]})})]})},J3=({steps:e,onComplete:t})=>{const[n,r]=E.useState(0),[s,a]=E.useState(null);E.useEffect(()=>{const d=document.getElementById(e[n].targetId);if(d){d.scrollIntoView({behavior:"smooth",block:"center"}),a(d.getBoundingClientRect());const p=()=>{d&&a(d.getBoundingClientRect())};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)}else n<e.length-1?r(p=>p+1):t()},[n,e,t]);const o=()=>{n<e.length-1?r(d=>d+1):t()};if(!s)return null;const l=e[n];let c={};const u=12;return l.position==="right"?c={top:s.top+s.height/2-60,left:s.right+u}:l.position==="bottom"?c={top:s.bottom+u,left:s.left}:l.position==="left"?c={top:s.top,right:window.innerWidth-s.left+u}:l.position==="top"&&(c={bottom:window.innerHeight-s.top+u,left:s.left}),sy.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[9999] overflow-hidden",children:[i.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[i.jsx("defs",{children:i.jsxs("mask",{id:"tour-mask",children:[i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i.jsx("rect",{x:s.left-4,y:s.top-4,width:s.width+8,height:s.height+8,fill:"black",rx:"8"})]})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#tour-mask)"})]}),i.jsx("div",{className:"absolute border-2 border-white rounded-lg animate-pulse pointer-events-none",style:{top:s.top-4,left:s.left-4,width:s.width+8,height:s.height+8}}),i.jsxs("div",{className:"absolute w-72 bg-white rounded-xl shadow-2xl p-4 animate-scale-in",style:c,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:l.title}),i.jsxs("span",{className:"text-xs font-semibold text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",children:[n+1," / ",e.length]})]}),i.jsx("p",{className:"text-slate-600 text-sm mb-4 leading-relaxed",children:l.content}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:t,className:"text-xs text-slate-400 hover:text-slate-600 font-medium",children:"Saltar tour"}),i.jsx("button",{onClick:o,className:"bg-brand-primary text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-brand-secondary transition-colors",children:n===e.length-1?"Finalizar":"Siguiente"})]}),l.position==="right"&&i.jsx("div",{className:"absolute top-16 -left-2 w-4 h-4 bg-white transform rotate-45"}),l.position==="bottom"&&i.jsx("div",{className:"absolute -top-2 left-6 w-4 h-4 bg-white transform rotate-45"}),l.position==="top"&&i.jsx("div",{className:"absolute -bottom-2 left-6 w-4 h-4 bg-white transform rotate-45"})]})]}),document.body)},Y3=({data:e})=>{const r={top:20,right:20,bottom:30,left:40},s=Math.max(...e.map(d=>d.income),...e.map(d=>d.expenses)),a=s===0?100:s,o=d=>r.left+d*(500-r.left-r.right)/e.length,l=d=>250-r.bottom-d/a*(250-r.top-r.bottom),c=(500-r.left-r.right)/e.length*.4,u=Array.from({length:5},(d,p)=>{const m=p/4*a;return{value:Math.round(m),y:l(m)}});return i.jsxs("svg",{viewBox:"0 0 500 250",className:"w-full h-full",preserveAspectRatio:"xMidYMid meet",children:[u.map(({value:d,y:p},m)=>i.jsxs("g",{children:[i.jsx("line",{x1:r.left,x2:500-r.right,y1:p,y2:p,stroke:"#e2e8f0",strokeWidth:"1"}),i.jsxs("text",{x:r.left-8,y:p,dy:"0.32em",textAnchor:"end",className:"text-xs fill-current text-slate-500",children:[d,"k"]})]},m)),e.map((d,p)=>i.jsx("text",{x:o(p)+c,y:250-r.bottom+15,textAnchor:"middle",className:"text-xs fill-current text-slate-500",children:d.name},p)),e.map((d,p)=>i.jsxs("g",{children:[i.jsx("rect",{x:o(p),y:l(d.income),width:c,height:250-r.bottom-l(d.income),fill:"#02C39A",rx:"2"}),i.jsx("rect",{x:o(p)+c,y:l(d.expenses),width:c,height:250-r.bottom-l(d.expenses),fill:"#f87171",rx:"2"})]},p))]})};function K3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const W3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,X3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Q3={};function $g(e,t){return(Q3.jsx?X3:W3).test(e)}const Z3=/[ \t\n\f\r]/g;function e5(e){return typeof e=="object"?e.type==="text"?Jg(e.value):!1:Jg(e)}function Jg(e){return e.replace(Z3,"")===""}class no{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}no.prototype.normal={};no.prototype.property={};no.prototype.space=void 0;function o1(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new no(n,r,t)}function ch(e){return e.toLowerCase()}class jt{constructor(t,n){this.attribute=n,this.property=t}}jt.prototype.attribute="";jt.prototype.booleanish=!1;jt.prototype.boolean=!1;jt.prototype.commaOrSpaceSeparated=!1;jt.prototype.commaSeparated=!1;jt.prototype.defined=!1;jt.prototype.mustUseProperty=!1;jt.prototype.number=!1;jt.prototype.overloadedBoolean=!1;jt.prototype.property="";jt.prototype.spaceSeparated=!1;jt.prototype.space=void 0;let t5=0;const ie=gs(),qe=gs(),uh=gs(),H=gs(),Ee=gs(),oa=gs(),Mt=gs();function gs(){return 2**++t5}const dh=Object.freeze(Object.defineProperty({__proto__:null,boolean:ie,booleanish:qe,commaOrSpaceSeparated:Mt,commaSeparated:oa,number:H,overloadedBoolean:uh,spaceSeparated:Ee},Symbol.toStringTag,{value:"Module"})),Tu=Object.keys(dh);class Uf extends jt{constructor(t,n,r,s){let a=-1;if(super(t,n),Yg(this,"space",s),typeof r=="number")for(;++a<Tu.length;){const o=Tu[a];Yg(this,Tu[a],(r&dh[o])===dh[o])}}}Uf.prototype.defined=!0;function Yg(e,t,n){n&&(e[t]=n)}function Ma(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new Uf(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[ch(r)]=r,n[ch(a.attribute)]=r}return new no(t,n,e.space)}const l1=Ma({properties:{ariaActiveDescendant:null,ariaAtomic:qe,ariaAutoComplete:null,ariaBusy:qe,ariaChecked:qe,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:Ee,ariaCurrent:null,ariaDescribedBy:Ee,ariaDetails:null,ariaDisabled:qe,ariaDropEffect:Ee,ariaErrorMessage:null,ariaExpanded:qe,ariaFlowTo:Ee,ariaGrabbed:qe,ariaHasPopup:null,ariaHidden:qe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ee,ariaLevel:H,ariaLive:null,ariaModal:qe,ariaMultiLine:qe,ariaMultiSelectable:qe,ariaOrientation:null,ariaOwns:Ee,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:qe,ariaReadOnly:qe,ariaRelevant:null,ariaRequired:qe,ariaRoleDescription:Ee,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:qe,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function c1(e,t){return t in e?e[t]:t}function u1(e,t){return c1(e,t.toLowerCase())}const n5=Ma({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oa,acceptCharset:Ee,accessKey:Ee,action:null,allow:null,allowFullScreen:ie,allowPaymentRequest:ie,allowUserMedia:ie,alt:null,as:null,async:ie,autoCapitalize:null,autoComplete:Ee,autoFocus:ie,autoPlay:ie,blocking:Ee,capture:null,charSet:null,checked:ie,cite:null,className:Ee,cols:H,colSpan:null,content:null,contentEditable:qe,controls:ie,controlsList:Ee,coords:H|oa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ie,defer:ie,dir:null,dirName:null,disabled:ie,download:uh,draggable:qe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ie,formTarget:null,headers:Ee,height:H,hidden:uh,high:H,href:null,hrefLang:null,htmlFor:Ee,httpEquiv:Ee,id:null,imageSizes:null,imageSrcSet:null,inert:ie,inputMode:null,integrity:null,is:null,isMap:ie,itemId:null,itemProp:Ee,itemRef:Ee,itemScope:ie,itemType:Ee,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ie,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:ie,muted:ie,name:null,nonce:null,noModule:ie,noValidate:ie,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ie,optimum:H,pattern:null,ping:Ee,placeholder:null,playsInline:ie,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ie,referrerPolicy:null,rel:Ee,required:ie,reversed:ie,rows:H,rowSpan:H,sandbox:Ee,scope:null,scoped:ie,seamless:ie,selected:ie,shadowRootClonable:ie,shadowRootDelegatesFocus:ie,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:qe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:ie,useMap:null,value:qe,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ee,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ie,declare:ie,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:ie,noHref:ie,noShade:ie,noWrap:ie,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:qe,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ie,disableRemotePlayback:ie,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:u1}),r5=Ma({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Mt,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:Ee,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:ie,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oa,g2:oa,glyphName:oa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:Mt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ee,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Mt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Mt,rev:Mt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Mt,requiredFeatures:Mt,requiredFonts:Mt,requiredFormats:Mt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:Mt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Mt,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Mt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:c1}),d1=Ma({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),h1=Ma({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:u1}),f1=Ma({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),s5={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},a5=/[A-Z]/g,Kg=/-[a-z]/g,i5=/^data[-\w.:]+$/i;function o5(e,t){const n=ch(t);let r=t,s=jt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&i5.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Kg,c5);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Kg.test(a)){let o=a.replace(a5,l5);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=Uf}return new s(r,t)}function l5(e){return"-"+e.toLowerCase()}function c5(e){return e.charAt(1).toUpperCase()}const u5=o1([l1,n5,d1,h1,f1],"html"),Of=o1([l1,r5,d1,h1,f1],"svg");function d5(e){return e.join(" ").trim()}var zf={},Wg=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,h5=/\n/g,f5=/^\s*/,m5=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,p5=/^:\s*/,g5=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,x5=/^[;\s]*/,y5=/^\s+|\s+$/g,v5=`
`,Xg="/",Qg="*",Xr="",b5="comment",w5="declaration";function _5(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(v){var x=v.match(h5);x&&(n+=x.length);var w=v.lastIndexOf(v5);r=~w?v.length-w:r+v.length}function a(){var v={line:n,column:r};return function(x){return x.position=new o(v),u(),x}}function o(v){this.start=v,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(v){var x=new Error(t.source+":"+n+":"+r+": "+v);if(x.reason=v,x.filename=t.source,x.line=n,x.column=r,x.source=e,!t.silent)throw x}function c(v){var x=v.exec(e);if(x){var w=x[0];return s(w),e=e.slice(w.length),x}}function u(){c(f5)}function d(v){var x;for(v=v||[];x=p();)x!==!1&&v.push(x);return v}function p(){var v=a();if(!(Xg!=e.charAt(0)||Qg!=e.charAt(1))){for(var x=2;Xr!=e.charAt(x)&&(Qg!=e.charAt(x)||Xg!=e.charAt(x+1));)++x;if(x+=2,Xr===e.charAt(x-1))return l("End of comment missing");var w=e.slice(2,x-2);return r+=2,s(w),e=e.slice(x),r+=2,v({type:b5,comment:w})}}function m(){var v=a(),x=c(m5);if(x){if(p(),!c(p5))return l("property missing ':'");var w=c(g5),y=v({type:w5,property:Zg(x[0].replace(Wg,Xr)),value:w?Zg(w[0].replace(Wg,Xr)):Xr});return c(x5),y}}function g(){var v=[];d(v);for(var x;x=m();)x!==!1&&(v.push(x),d(v));return v}return u(),g()}function Zg(e){return e?e.replace(y5,Xr):Xr}var S5=_5,N5=ll&&ll.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zf,"__esModule",{value:!0});zf.default=C5;const E5=N5(S5);function C5(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,E5.default)(e),s=typeof t=="function";return r.forEach(a=>{if(a.type!=="declaration")return;const{property:o,value:l}=a;s?t(o,l,a):l&&(n=n||{},n[o]=l)}),n}var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.camelCase=void 0;var k5=/^--[a-zA-Z0-9_-]+$/,T5=/-([a-z])/g,j5=/^[^-]+$/,A5=/^-(webkit|moz|ms|o|khtml)-/,R5=/^-(ms)-/,I5=function(e){return!e||j5.test(e)||k5.test(e)},M5=function(e,t){return t.toUpperCase()},ex=function(e,t){return"".concat(t,"-")},D5=function(e,t){return t===void 0&&(t={}),I5(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(R5,ex):e=e.replace(A5,ex),e.replace(T5,M5))};Cc.camelCase=D5;var P5=ll&&ll.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},L5=P5(zf),U5=Cc;function hh(e,t){var n={};return!e||typeof e!="string"||(0,L5.default)(e,function(r,s){r&&s&&(n[(0,U5.camelCase)(r,t)]=s)}),n}hh.default=hh;var O5=hh;const z5=Wl(O5),m1=p1("end"),Bf=p1("start");function p1(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function B5(e){const t=Bf(e),n=m1(e);if(t&&n)return{start:t,end:n}}function yi(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?tx(e.position):"start"in e||"end"in e?tx(e):"line"in e||"column"in e?fh(e):""}function fh(e){return nx(e&&e.line)+":"+nx(e&&e.column)}function tx(e){return fh(e&&e.start)+"-"+fh(e&&e.end)}function nx(e){return e&&typeof e=="number"?e:1}class ft extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(o=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=yi(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ft.prototype.file="";ft.prototype.name="";ft.prototype.reason="";ft.prototype.message="";ft.prototype.stack="";ft.prototype.column=void 0;ft.prototype.line=void 0;ft.prototype.ancestors=void 0;ft.prototype.cause=void 0;ft.prototype.fatal=void 0;ft.prototype.place=void 0;ft.prototype.ruleId=void 0;ft.prototype.source=void 0;const qf={}.hasOwnProperty,q5=new Map,G5=/[A-Z]/g,H5=new Set(["table","tbody","thead","tfoot","tr"]),V5=new Set(["td","th"]),g1="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function F5(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Z5(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Q5(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Of:u5,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=x1(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function x1(e,t,n){if(t.type==="element")return $5(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return J5(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return K5(e,t,n);if(t.type==="mdxjsEsm")return Y5(e,t);if(t.type==="root")return W5(e,t,n);if(t.type==="text")return X5(e,t)}function $5(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Of,e.schema=s),e.ancestors.push(t);const a=v1(e,t.tagName,!1),o=e6(e,t);let l=Hf(e,t);return H5.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!e5(c):!0})),y1(e,o,a,t),Gf(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function J5(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Gi(e,t.position)}function Y5(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Gi(e,t.position)}function K5(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Of,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:v1(e,t.name,!0),o=t6(e,t),l=Hf(e,t);return y1(e,o,a,t),Gf(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function W5(e,t,n){const r={};return Gf(r,Hf(e,t)),e.create(t,e.Fragment,r,n)}function X5(e,t){return t.value}function y1(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Gf(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Q5(e,t,n){return r;function r(s,a,o,l){const u=Array.isArray(o.children)?n:t;return l?u(a,o,l):u(a,o)}}function Z5(e,t){return n;function n(r,s,a,o){const l=Array.isArray(a.children),c=Bf(r);return t(s,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function e6(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&qf.call(t.properties,s)){const a=n6(e,s,t.properties[s]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&V5.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function t6(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Gi(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else Gi(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Hf(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:q5;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=x1(e,a,o);l!==void 0&&n.push(l)}return n}function n6(e,t,n){const r=o5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?K3(n):d5(n)),r.property==="style"){let s=typeof n=="object"?n:r6(e,String(n));return e.stylePropertyNameCase==="css"&&(s=s6(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?s5[r.property]||r.property:r.attribute,n]}}function r6(e,t){try{return z5(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new ft("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=g1+"#cannot-parse-style-attribute",s}}function v1(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,o;for(;++a<s.length;){const l=$g(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=$g(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return qf.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Gi(e)}function Gi(e,t){const n=new ft("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=g1+"#cannot-handle-mdx-estrees-without-createevaluater",n}function s6(e){const t={};let n;for(n in e)qf.call(e,n)&&(t[a6(n)]=e[n]);return t}function a6(e){let t=e.replace(G5,i6);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function i6(e){return"-"+e.toLowerCase()}const ju={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},o6={};function l6(e,t){const n=o6,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return b1(e,r,s)}function b1(e,t,n){if(c6(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return rx(e.children,t,n)}return Array.isArray(e)?rx(e,t,n):""}function rx(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=b1(e[s],t,n);return r.join("")}function c6(e){return!!(e&&typeof e=="object")}const sx=document.createElement("i");function Vf(e){const t="&"+e+";";sx.innerHTML=t;const n=sx.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Cn(e,t,n,r){const s=e.length;let a=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Zt(e,t){return e.length>0?(Cn(e,e.length,0,t),e):t}const ax={}.hasOwnProperty;function u6(e){const t={};let n=-1;for(;++n<e.length;)d6(t,e[n]);return t}function d6(e,t){let n;for(n in t){const s=(ax.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){ax.call(s,o)||(s[o]=[]);const l=a[o];h6(s[o],Array.isArray(l)?l:l?[l]:[])}}}function h6(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Cn(e,0,0,r)}function w1(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function la(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const wn=Lr(/[A-Za-z]/),Bt=Lr(/[\dA-Za-z]/),f6=Lr(/[#-'*+\--9=?A-Z^-~]/);function mh(e){return e!==null&&(e<32||e===127)}const ph=Lr(/\d/),m6=Lr(/[\dA-Fa-f]/),p6=Lr(/[!-/:-@[-`{-~]/);function ee(e){return e!==null&&e<-2}function Ct(e){return e!==null&&(e<0||e===32)}function fe(e){return e===-2||e===-1||e===32}const g6=Lr(new RegExp("\\p{P}|\\p{S}","u")),x6=Lr(/\s/);function Lr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Da(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Bt(e.charCodeAt(n+1))&&Bt(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),s=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Ce(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return fe(c)?(e.enter(n),l(c)):t(c)}function l(c){return fe(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const y6={tokenize:v6};function v6(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ce(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return ee(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const b6={tokenize:w6},ix={tokenize:_6};function w6(e){const t=this,n=[];let r=0,s,a,o;return l;function l(_){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(_)}return u(_)}function c(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&b();const S=t.events.length;let T=S,N;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){N=t.events[T][1].end;break}y(r);let C=S;for(;C<t.events.length;)t.events[C][1].end={...N},C++;return Cn(t.events,T+1,0,t.events.slice(S)),t.events.length=C,u(_)}return l(_)}function u(_){if(r===n.length){if(!s)return m(_);if(s.currentConstruct&&s.currentConstruct.concrete)return v(_);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ix,d,p)(_)}function d(_){return s&&b(),y(r),m(_)}function p(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,v(_)}function m(_){return t.containerState={},e.attempt(ix,g,v)(_)}function g(_){return r++,n.push([t.currentConstruct,t.containerState]),m(_)}function v(_){if(_===null){s&&b(),y(0),e.consume(_);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),x(_)}function x(_){if(_===null){w(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return ee(_)?(e.consume(_),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(_),x)}function w(_,S){const T=t.sliceStream(_);if(S&&T.push(null),_.previous=a,a&&(a.next=_),a=_,s.defineSkip(_.start),s.write(T),t.parser.lazy[_.start.line]){let N=s.events.length;for(;N--;)if(s.events[N][1].start.offset<o&&(!s.events[N][1].end||s.events[N][1].end.offset>o))return;const C=t.events.length;let I=C,A,R;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(A){R=t.events[I][1].end;break}A=!0}for(y(r),N=C;N<t.events.length;)t.events[N][1].end={...R},N++;Cn(t.events,I+1,0,t.events.slice(C)),t.events.length=N}}function y(_){let S=n.length;for(;S-- >_;){const T=n[S];t.containerState=T[1],T[0].exit.call(t,e)}n.length=_}function b(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function _6(e,t,n){return Ce(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ox(e){if(e===null||Ct(e)||x6(e))return 1;if(g6(e))return 2}function Ff(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const gh={name:"attention",resolveAll:S6,tokenize:N6};function S6(e,t){let n=-1,r,s,a,o,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},m={...e[n][1].start};lx(p,-c),lx(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Zt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Zt(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=Zt(u,Ff(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Zt(u,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=Zt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Cn(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function N6(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=ox(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const u=e.exit("attentionSequence"),d=ox(c),p=!d||d===2&&s||n.includes(c),m=!s||s===2&&d||n.includes(r);return u._open=!!(a===42?p:p&&(s||!m)),u._close=!!(a===42?m:m&&(d||!p)),t(c)}}function lx(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const E6={name:"autolink",tokenize:C6};function C6(e,t,n){let r=0;return s;function s(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(g){return wn(g)?(e.consume(g),o):g===64?n(g):u(g)}function o(g){return g===43||g===45||g===46||Bt(g)?(r=1,l(g)):u(g)}function l(g){return g===58?(e.consume(g),r=0,c):(g===43||g===45||g===46||Bt(g))&&r++<32?(e.consume(g),l):(r=0,u(g))}function c(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||mh(g)?n(g):(e.consume(g),c)}function u(g){return g===64?(e.consume(g),d):f6(g)?(e.consume(g),u):n(g)}function d(g){return Bt(g)?p(g):n(g)}function p(g){return g===46?(e.consume(g),r=0,d):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||Bt(g))&&r++<63){const v=g===45?m:p;return e.consume(g),v}return n(g)}}const kc={partial:!0,tokenize:k6};function k6(e,t,n){return r;function r(a){return fe(a)?Ce(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||ee(a)?t(a):n(a)}}const _1={continuation:{tokenize:j6},exit:A6,name:"blockQuote",tokenize:T6};function T6(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return fe(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function j6(e,t,n){const r=this;return s;function s(o){return fe(o)?Ce(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(_1,t,n)(o)}}function A6(e){e.exit("blockQuote")}const S1={name:"characterEscape",tokenize:R6};function R6(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return p6(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const N1={name:"characterReference",tokenize:I6};function I6(e,t,n){const r=this;let s=0,a,o;return l;function l(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=Bt,d(p))}function u(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=m6,d):(e.enter("characterReferenceValue"),a=7,o=ph,d(p))}function d(p){if(p===59&&s){const m=e.exit("characterReferenceValue");return o===Bt&&!Vf(r.sliceSerialize(m))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(p)&&s++<a?(e.consume(p),d):n(p)}}const cx={partial:!0,tokenize:D6},ux={concrete:!0,name:"codeFenced",tokenize:M6};function M6(e,t,n){const r=this,s={partial:!0,tokenize:T};let a=0,o=0,l;return c;function c(N){return u(N)}function u(N){const C=r.events[r.events.length-1];return a=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===l?(o++,e.consume(N),d):o<3?n(N):(e.exit("codeFencedFenceSequence"),fe(N)?Ce(e,p,"whitespace")(N):p(N))}function p(N){return N===null||ee(N)?(e.exit("codeFencedFence"),r.interrupt?t(N):e.check(cx,x,S)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||ee(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(N)):fe(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ce(e,g,"whitespace")(N)):N===96&&N===l?n(N):(e.consume(N),m)}function g(N){return N===null||ee(N)?p(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),v(N))}function v(N){return N===null||ee(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(N)):N===96&&N===l?n(N):(e.consume(N),v)}function x(N){return e.attempt(s,S,w)(N)}function w(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),y}function y(N){return a>0&&fe(N)?Ce(e,b,"linePrefix",a+1)(N):b(N)}function b(N){return N===null||ee(N)?e.check(cx,x,S)(N):(e.enter("codeFlowValue"),_(N))}function _(N){return N===null||ee(N)?(e.exit("codeFlowValue"),b(N)):(e.consume(N),_)}function S(N){return e.exit("codeFenced"),t(N)}function T(N,C,I){let A=0;return R;function R(K){return N.enter("lineEnding"),N.consume(K),N.exit("lineEnding"),O}function O(K){return N.enter("codeFencedFence"),fe(K)?Ce(N,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):D(K)}function D(K){return K===l?(N.enter("codeFencedFenceSequence"),G(K)):I(K)}function G(K){return K===l?(A++,N.consume(K),G):A>=o?(N.exit("codeFencedFenceSequence"),fe(K)?Ce(N,W,"whitespace")(K):W(K)):I(K)}function W(K){return K===null||ee(K)?(N.exit("codeFencedFence"),C(K)):I(K)}}}function D6(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Au={name:"codeIndented",tokenize:L6},P6={partial:!0,tokenize:U6};function L6(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Ce(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):ee(u)?e.attempt(P6,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||ee(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function U6(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):ee(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ce(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):ee(o)?s(o):n(o)}}const O6={name:"codeText",previous:B6,resolve:z6,tokenize:q6};function z6(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function B6(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function q6(e,t,n){let r=0,s,a;return o;function o(p){return e.enter("codeText"),e.enter("codeTextSequence"),l(p)}function l(p){return p===96?(e.consume(p),r++,l):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(a=e.enter("codeTextSequence"),s=0,d(p)):ee(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||ee(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),u)}function d(p){return p===96?(e.consume(p),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(a.type="codeTextData",u(p))}}class G6{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Ja(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ja(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ja(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Ja(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ja(this.left,n.reverse())}}}function Ja(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function E1(e){const t={};let n=-1,r,s,a,o,l,c,u;const d=new G6(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,H6(d,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Cn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function H6(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,p,m=-1,g=n,v=0,x=0;const w=[x];for(;g;){for(;e.get(++s)[1]!==g;);a.push(s),g._tokenizer||(d=r.sliceStream(g),g.next||d.push(null),p&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(x=m+1,w.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):w.pop(),m=w.length;m--;){const y=l.slice(w[m],w[m+1]),b=a.pop();c.push([b,b+y.length-1]),e.splice(b,2,y)}for(c.reverse(),m=-1;++m<c.length;)u[v+c[m][0]]=v+c[m][1],v+=c[m][1]-c[m][0]-1;return u}const V6={resolve:$6,tokenize:J6},F6={partial:!0,tokenize:Y6};function $6(e){return E1(e),e}function J6(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):ee(l)?e.check(F6,o,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Y6(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ce(e,a,"linePrefix")}function a(o){if(o===null||ee(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function C1(e,t,n,r,s,a,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return p;function p(y){return y===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(y),e.exit(a),m):y===null||y===32||y===41||mh(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),x(y))}function m(y){return y===62?(e.enter(a),e.consume(y),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===62?(e.exit("chunkString"),e.exit(l),m(y)):y===null||y===60||ee(y)?n(y):(e.consume(y),y===92?v:g)}function v(y){return y===60||y===62||y===92?(e.consume(y),g):g(y)}function x(y){return!d&&(y===null||y===41||Ct(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,x):y===41?(e.consume(y),d--,x):y===null||y===32||y===40||mh(y)?n(y):(e.consume(y),y===92?w:x)}function w(y){return y===40||y===41||y===92?(e.consume(y),x):x(y)}}function k1(e,t,n,r,s,a){const o=this;let l=0,c;return u;function u(g){return e.enter(r),e.enter(s),e.consume(g),e.exit(s),e.enter(a),d}function d(g){return l>999||g===null||g===91||g===93&&!c||g===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(e.exit(a),e.enter(s),e.consume(g),e.exit(s),e.exit(r),t):ee(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||ee(g)||l++>999?(e.exit("chunkString"),d(g)):(e.consume(g),c||(c=!fe(g)),g===92?m:p)}function m(g){return g===91||g===92||g===93?(e.consume(g),l++,p):p(g)}}function T1(e,t,n,r,s,a){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),o=m===40?41:m,c):n(m)}function c(m){return m===o?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(a),u(m))}function u(m){return m===o?(e.exit(a),c(o)):m===null?n(m):ee(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Ce(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||ee(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?p:d)}function p(m){return m===o||m===92?(e.consume(m),d):d(m)}}function vi(e,t){let n;return r;function r(s){return ee(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):fe(s)?Ce(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const K6={name:"definition",tokenize:X6},W6={partial:!0,tokenize:Q6};function X6(e,t,n){const r=this;let s;return a;function a(g){return e.enter("definition"),o(g)}function o(g){return k1.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function l(g){return s=la(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),c):n(g)}function c(g){return Ct(g)?vi(e,u)(g):u(g)}function u(g){return C1(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return e.attempt(W6,p,p)(g)}function p(g){return fe(g)?Ce(e,m,"whitespace")(g):m(g)}function m(g){return g===null||ee(g)?(e.exit("definition"),r.parser.defined.push(s),t(g)):n(g)}}function Q6(e,t,n){return r;function r(l){return Ct(l)?vi(e,s)(l):n(l)}function s(l){return T1(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return fe(l)?Ce(e,o,"whitespace")(l):o(l)}function o(l){return l===null||ee(l)?t(l):n(l)}}const Z6={name:"hardBreakEscape",tokenize:eD};function eD(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return ee(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const tD={name:"headingAtx",resolve:nD,tokenize:rD};function nD(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Cn(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function rD(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||Ct(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||ee(d)?(e.exit("atxHeading"),t(d)):fe(d)?Ce(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Ct(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const sD=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dx=["pre","script","style","textarea"],aD={concrete:!0,name:"htmlFlow",resolveTo:lD,tokenize:cD},iD={partial:!0,tokenize:dD},oD={partial:!0,tokenize:uD};function lD(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function cD(e,t,n){const r=this;let s,a,o,l,c;return u;function u(j){return d(j)}function d(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),p}function p(j){return j===33?(e.consume(j),m):j===47?(e.consume(j),a=!0,x):j===63?(e.consume(j),s=3,r.interrupt?t:k):wn(j)?(e.consume(j),o=String.fromCharCode(j),w):n(j)}function m(j){return j===45?(e.consume(j),s=2,g):j===91?(e.consume(j),s=5,l=0,v):wn(j)?(e.consume(j),s=4,r.interrupt?t:k):n(j)}function g(j){return j===45?(e.consume(j),r.interrupt?t:k):n(j)}function v(j){const ne="CDATA[";return j===ne.charCodeAt(l++)?(e.consume(j),l===ne.length?r.interrupt?t:D:v):n(j)}function x(j){return wn(j)?(e.consume(j),o=String.fromCharCode(j),w):n(j)}function w(j){if(j===null||j===47||j===62||Ct(j)){const ne=j===47,_e=o.toLowerCase();return!ne&&!a&&dx.includes(_e)?(s=1,r.interrupt?t(j):D(j)):sD.includes(o.toLowerCase())?(s=6,ne?(e.consume(j),y):r.interrupt?t(j):D(j)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):a?b(j):_(j))}return j===45||Bt(j)?(e.consume(j),o+=String.fromCharCode(j),w):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:D):n(j)}function b(j){return fe(j)?(e.consume(j),b):R(j)}function _(j){return j===47?(e.consume(j),R):j===58||j===95||wn(j)?(e.consume(j),S):fe(j)?(e.consume(j),_):R(j)}function S(j){return j===45||j===46||j===58||j===95||Bt(j)?(e.consume(j),S):T(j)}function T(j){return j===61?(e.consume(j),N):fe(j)?(e.consume(j),T):_(j)}function N(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),c=j,C):fe(j)?(e.consume(j),N):I(j)}function C(j){return j===c?(e.consume(j),c=null,A):j===null||ee(j)?n(j):(e.consume(j),C)}function I(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Ct(j)?T(j):(e.consume(j),I)}function A(j){return j===47||j===62||fe(j)?_(j):n(j)}function R(j){return j===62?(e.consume(j),O):n(j)}function O(j){return j===null||ee(j)?D(j):fe(j)?(e.consume(j),O):n(j)}function D(j){return j===45&&s===2?(e.consume(j),B):j===60&&s===1?(e.consume(j),P):j===62&&s===4?(e.consume(j),q):j===63&&s===3?(e.consume(j),k):j===93&&s===5?(e.consume(j),V):ee(j)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(iD,$,G)(j)):j===null||ee(j)?(e.exit("htmlFlowData"),G(j)):(e.consume(j),D)}function G(j){return e.check(oD,W,$)(j)}function W(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),K}function K(j){return j===null||ee(j)?G(j):(e.enter("htmlFlowData"),D(j))}function B(j){return j===45?(e.consume(j),k):D(j)}function P(j){return j===47?(e.consume(j),o="",L):D(j)}function L(j){if(j===62){const ne=o.toLowerCase();return dx.includes(ne)?(e.consume(j),q):D(j)}return wn(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),L):D(j)}function V(j){return j===93?(e.consume(j),k):D(j)}function k(j){return j===62?(e.consume(j),q):j===45&&s===2?(e.consume(j),k):D(j)}function q(j){return j===null||ee(j)?(e.exit("htmlFlowData"),$(j)):(e.consume(j),q)}function $(j){return e.exit("htmlFlow"),t(j)}}function uD(e,t,n){const r=this;return s;function s(o){return ee(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function dD(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(kc,t,n)}}const hD={name:"htmlText",tokenize:fD};function fD(e,t,n){const r=this;let s,a,o;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),T):k===63?(e.consume(k),_):wn(k)?(e.consume(k),I):n(k)}function u(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),a=0,v):wn(k)?(e.consume(k),b):n(k)}function d(k){return k===45?(e.consume(k),g):n(k)}function p(k){return k===null?n(k):k===45?(e.consume(k),m):ee(k)?(o=p,P(k)):(e.consume(k),p)}function m(k){return k===45?(e.consume(k),g):p(k)}function g(k){return k===62?B(k):k===45?m(k):p(k)}function v(k){const q="CDATA[";return k===q.charCodeAt(a++)?(e.consume(k),a===q.length?x:v):n(k)}function x(k){return k===null?n(k):k===93?(e.consume(k),w):ee(k)?(o=x,P(k)):(e.consume(k),x)}function w(k){return k===93?(e.consume(k),y):x(k)}function y(k){return k===62?B(k):k===93?(e.consume(k),y):x(k)}function b(k){return k===null||k===62?B(k):ee(k)?(o=b,P(k)):(e.consume(k),b)}function _(k){return k===null?n(k):k===63?(e.consume(k),S):ee(k)?(o=_,P(k)):(e.consume(k),_)}function S(k){return k===62?B(k):_(k)}function T(k){return wn(k)?(e.consume(k),N):n(k)}function N(k){return k===45||Bt(k)?(e.consume(k),N):C(k)}function C(k){return ee(k)?(o=C,P(k)):fe(k)?(e.consume(k),C):B(k)}function I(k){return k===45||Bt(k)?(e.consume(k),I):k===47||k===62||Ct(k)?A(k):n(k)}function A(k){return k===47?(e.consume(k),B):k===58||k===95||wn(k)?(e.consume(k),R):ee(k)?(o=A,P(k)):fe(k)?(e.consume(k),A):B(k)}function R(k){return k===45||k===46||k===58||k===95||Bt(k)?(e.consume(k),R):O(k)}function O(k){return k===61?(e.consume(k),D):ee(k)?(o=O,P(k)):fe(k)?(e.consume(k),O):A(k)}function D(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,G):ee(k)?(o=D,P(k)):fe(k)?(e.consume(k),D):(e.consume(k),W)}function G(k){return k===s?(e.consume(k),s=void 0,K):k===null?n(k):ee(k)?(o=G,P(k)):(e.consume(k),G)}function W(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||Ct(k)?A(k):(e.consume(k),W)}function K(k){return k===47||k===62||Ct(k)?A(k):n(k)}function B(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function P(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),L}function L(k){return fe(k)?Ce(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):V(k)}function V(k){return e.enter("htmlTextData"),o(k)}}const $f={name:"labelEnd",resolveAll:xD,resolveTo:yD,tokenize:vD},mD={tokenize:bD},pD={tokenize:wD},gD={tokenize:_D};function xD(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Cn(e,0,e.length,n),e}function yD(e,t){let n=e.length,r=0,s,a,o,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Zt(l,e.slice(a+1,a+r+3)),l=Zt(l,[["enter",d,t]]),l=Zt(l,Ff(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=Zt(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=Zt(l,e.slice(o+1)),l=Zt(l,[["exit",c,t]]),Cn(e,a,e.length,l),e}function vD(e,t,n){const r=this;let s=r.events.length,a,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(m){return a?a._inactive?p(m):(o=r.parser.defined.includes(la(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):n(m)}function c(m){return m===40?e.attempt(mD,d,o?d:p)(m):m===91?e.attempt(pD,d,o?u:p)(m):o?d(m):p(m)}function u(m){return e.attempt(gD,d,p)(m)}function d(m){return t(m)}function p(m){return a._balanced=!0,n(m)}}function bD(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),s}function s(p){return Ct(p)?vi(e,a)(p):a(p)}function a(p){return p===41?d(p):C1(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return Ct(p)?vi(e,c)(p):d(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?T1(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):d(p)}function u(p){return Ct(p)?vi(e,d)(p):d(p)}function d(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function wD(e,t,n){const r=this;return s;function s(l){return k1.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(la(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function _D(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const SD={name:"labelStartImage",resolveAll:$f.resolveAll,tokenize:ND};function ND(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ED={name:"labelStartLink",resolveAll:$f.resolveAll,tokenize:CD};function CD(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Ru={name:"lineEnding",tokenize:kD};function kD(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ce(e,t,"linePrefix")}}const il={name:"thematicBreak",tokenize:TD};function TD(e,t,n){let r=0,s;return a;function a(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||ee(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),fe(u)?Ce(e,l,"whitespace")(u):l(u))}}const wt={continuation:{tokenize:ID},exit:DD,name:"list",tokenize:RD},jD={partial:!0,tokenize:PD},AD={partial:!0,tokenize:MD};function RD(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:ph(g)){if(r.containerState.type||(r.containerState.type=v,e.enter(v,{_container:!0})),v==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(il,n,u)(g):u(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(g)}return n(g)}function c(g){return ph(g)&&++o<10?(e.consume(g),c):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),u(g)):n(g)}function u(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(kc,r.interrupt?n:d,e.attempt(jD,m,p))}function d(g){return r.containerState.initialBlankLine=!0,a++,m(g)}function p(g){return fe(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function ID(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(kc,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ce(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!fe(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(AD,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ce(e,e.attempt(wt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function MD(e,t,n){const r=this;return Ce(e,s,"listItemIndent",r.containerState.size+1);function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function DD(e){e.exit(this.containerState.type)}function PD(e,t,n){const r=this;return Ce(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const o=r.events[r.events.length-1];return!fe(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const hx={name:"setextUnderline",resolveTo:LD,tokenize:UD};function LD(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function UD(e,t,n){const r=this;let s;return a;function a(u){let d=r.events.length,p;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){p=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),s=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),fe(u)?Ce(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||ee(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const OD={tokenize:zD};function zD(e){const t=this,n=e.attempt(kc,r,e.attempt(this.parser.constructs.flowInitial,s,Ce(e,e.attempt(this.parser.constructs.flow,s,e.attempt(V6,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const BD={resolveAll:A1()},qD=j1("string"),GD=j1("text");function j1(e){return{resolveAll:A1(e==="text"?HD:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,o,l);return o;function o(d){return u(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const p=s[d];let m=-1;if(p)for(;++m<p.length;){const g=p[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function A1(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function HD(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,o=-1,l=0,c;for(;a--;){const u=s[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const VD={42:wt,43:wt,45:wt,48:wt,49:wt,50:wt,51:wt,52:wt,53:wt,54:wt,55:wt,56:wt,57:wt,62:_1},FD={91:K6},$D={[-2]:Au,[-1]:Au,32:Au},JD={35:tD,42:il,45:[hx,il],60:aD,61:hx,95:il,96:ux,126:ux},YD={38:N1,92:S1},KD={[-5]:Ru,[-4]:Ru,[-3]:Ru,33:SD,38:N1,42:gh,60:[E6,hD],91:ED,92:[Z6,S1],93:$f,95:gh,96:O6},WD={null:[gh,BD]},XD={null:[42,95]},QD={null:[]},ZD=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:XD,contentInitial:FD,disable:QD,document:VD,flow:JD,flowInitial:$D,insideSpan:WD,string:YD,text:KD},Symbol.toStringTag,{value:"Module"}));function eP(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let o=[],l=[];const c={attempt:C(T),check:C(N),consume:b,enter:_,exit:S,interrupt:C(N,{interrupt:!0})},u={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:p};let d=t.tokenize.call(u,c);return t.resolveAll&&a.push(t),u;function p(O){return o=Zt(o,O),w(),o[o.length-1]!==null?[]:(I(t,0),u.events=Ff(a,u.events,u),u.events)}function m(O,D){return nP(g(O),D)}function g(O){return tP(o,O)}function v(){const{_bufferIndex:O,_index:D,line:G,column:W,offset:K}=r;return{_bufferIndex:O,_index:D,line:G,column:W,offset:K}}function x(O){s[O.line]=O.column,R()}function w(){let O;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(O){d=d(O)}function b(O){ee(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,R()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=O}function _(O,D){const G=D||{};return G.type=O,G.start=v(),u.events.push(["enter",G,u]),l.push(G),G}function S(O){const D=l.pop();return D.end=v(),u.events.push(["exit",D,u]),D}function T(O,D){I(O,D.from)}function N(O,D){D.restore()}function C(O,D){return G;function G(W,K,B){let P,L,V,k;return Array.isArray(W)?$(W):"tokenize"in W?$([W]):q(W);function q(Se){return Yt;function Yt(dt){const jn=dt!==null&&Se[dt],xs=dt!==null&&Se.null,ao=[...Array.isArray(jn)?jn:jn?[jn]:[],...Array.isArray(xs)?xs:xs?[xs]:[]];return $(ao)(dt)}}function $(Se){return P=Se,L=0,Se.length===0?B:j(Se[L])}function j(Se){return Yt;function Yt(dt){return k=A(),V=Se,Se.partial||(u.currentConstruct=Se),Se.name&&u.parser.constructs.disable.null.includes(Se.name)?_e():Se.tokenize.call(D?Object.assign(Object.create(u),D):u,c,ne,_e)(dt)}}function ne(Se){return O(V,k),K}function _e(Se){return k.restore(),++L<P.length?j(P[L]):B}}}function I(O,D){O.resolveAll&&!a.includes(O)&&a.push(O),O.resolve&&Cn(u.events,D,u.events.length-D,O.resolve(u.events.slice(D),u)),O.resolveTo&&(u.events=O.resolveTo(u.events,u))}function A(){const O=v(),D=u.previous,G=u.currentConstruct,W=u.events.length,K=Array.from(l);return{from:W,restore:B};function B(){r=O,u.previous=D,u.currentConstruct=G,u.events.length=W,l=K,R()}}function R(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function tP(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,a)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[s].slice(0,a))}return o}function nP(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(a)}s=a===-2,r.push(o)}return r.join("")}function rP(e){const r={constructs:u6([ZD,...(e||{}).extensions||[]]),content:s(y6),defined:[],document:s(b6),flow:s(OD),lazy:{},string:s(qD),text:s(GD)};return r;function s(a){return o;function o(l){return eP(r,a,l)}}}function sP(e){for(;!E1(e););return e}const fx=/[\0\t\n\r]/g;function aP(){let e=1,t="",n=!0,r;return s;function s(a,o,l){const c=[];let u,d,p,m,g;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),p=0,t="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(fx.lastIndex=p,u=fx.exec(a),m=u&&u.index!==void 0?u.index:a.length,g=a.charCodeAt(m),!u){t=a.slice(p);break}if(g===10&&p===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<m&&(c.push(a.slice(p,m)),e+=m-p),g){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=m+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const iP=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function oP(e){return e.replace(iP,lP)}function lP(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return w1(n.slice(a?2:1),a?16:10)}return Vf(n)||e}const R1={}.hasOwnProperty;function cP(e,t,n){return typeof t!="string"&&(n=t,t=void 0),uP(n)(sP(rP(n).document().write(aP()(e,t,!0))))}function uP(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(rm),autolinkProtocol:A,autolinkEmail:A,atxHeading:a(em),blockQuote:a(xs),characterEscape:A,characterReference:A,codeFenced:a(ao),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(ao,o),codeText:a(e_,o),codeTextData:A,data:A,codeFlowValue:A,definition:a(t_),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(n_),hardBreakEscape:a(tm),hardBreakTrailing:a(tm),htmlFlow:a(nm,o),htmlFlowData:A,htmlText:a(nm,o),htmlTextData:A,image:a(r_),label:o,link:a(rm),listItem:a(s_),listItemValue:m,listOrdered:a(sm,p),listUnordered:a(sm),paragraph:a(a_),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(em),strong:a(i_),thematicBreak:a(l_)},exit:{atxHeading:c(),atxHeadingSequence:T,autolink:c(),autolinkEmail:jn,autolinkProtocol:dt,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:_e,characterReferenceMarkerNumeric:_e,characterReferenceValue:Se,characterReference:Yt,codeFenced:c(w),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:R,codeIndented:c(y),codeText:c(K),codeTextData:R,data:R,definition:c(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:_,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c(G),htmlFlowData:R,htmlText:c(W),htmlTextData:R,image:c(P),label:V,labelText:L,lineEnding:O,link:c(B),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ne,resourceDestinationString:k,resourceTitleString:q,resource:$,setextHeading:c(I),setextHeadingLineSequence:C,setextHeadingText:N,strong:c(),thematicBreak:c()}};I1(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(U){let F={type:"root",children:[]};const re={stack:[F],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:n},ue=[];let be=-1;for(;++be<U.length;)if(U[be][1].type==="listOrdered"||U[be][1].type==="listUnordered")if(U[be][0]==="enter")ue.push(be);else{const cn=ue.pop();be=s(U,cn,be)}for(be=-1;++be<U.length;){const cn=t[U[be][0]];R1.call(cn,U[be][1].type)&&cn[U[be][1].type].call(Object.assign({sliceSerialize:U[be][2].sliceSerialize},re),U[be][1])}if(re.tokenStack.length>0){const cn=re.tokenStack[re.tokenStack.length-1];(cn[1]||mx).call(re,void 0,cn[0])}for(F.position={start:sr(U.length>0?U[0][1].start:{line:1,column:1,offset:0}),end:sr(U.length>0?U[U.length-2][1].end:{line:1,column:1,offset:0})},be=-1;++be<t.transforms.length;)F=t.transforms[be](F)||F;return F}function s(U,F,re){let ue=F-1,be=-1,cn=!1,Ur,An,Pa,La;for(;++ue<=re;){const At=U[ue];switch(At[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{At[0]==="enter"?be++:be--,La=void 0;break}case"lineEndingBlank":{At[0]==="enter"&&(Ur&&!La&&!be&&!Pa&&(Pa=ue),La=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:La=void 0}if(!be&&At[0]==="enter"&&At[1].type==="listItemPrefix"||be===-1&&At[0]==="exit"&&(At[1].type==="listUnordered"||At[1].type==="listOrdered")){if(Ur){let ys=ue;for(An=void 0;ys--;){const Rn=U[ys];if(Rn[1].type==="lineEnding"||Rn[1].type==="lineEndingBlank"){if(Rn[0]==="exit")continue;An&&(U[An][1].type="lineEndingBlank",cn=!0),Rn[1].type="lineEnding",An=ys}else if(!(Rn[1].type==="linePrefix"||Rn[1].type==="blockQuotePrefix"||Rn[1].type==="blockQuotePrefixWhitespace"||Rn[1].type==="blockQuoteMarker"||Rn[1].type==="listItemIndent"))break}Pa&&(!An||Pa<An)&&(Ur._spread=!0),Ur.end=Object.assign({},An?U[An][1].start:At[1].end),U.splice(An||ue,0,["exit",Ur,At[2]]),ue++,re++}if(At[1].type==="listItemPrefix"){const ys={type:"listItem",_spread:!1,start:Object.assign({},At[1].start),end:void 0};Ur=ys,U.splice(ue,0,["enter",ys,At[2]]),ue++,re++,Pa=void 0,La=!0}}}return U[F][1]._spread=cn,re}function a(U,F){return re;function re(ue){l.call(this,U(ue),ue),F&&F.call(this,ue)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(U,F,re){this.stack[this.stack.length-1].children.push(U),this.stack.push(U),this.tokenStack.push([F,re||void 0]),U.position={start:sr(F.start),end:void 0}}function c(U){return F;function F(re){U&&U.call(this,re),u.call(this,re)}}function u(U,F){const re=this.stack.pop(),ue=this.tokenStack.pop();if(ue)ue[0].type!==U.type&&(F?F.call(this,U,ue[0]):(ue[1]||mx).call(this,U,ue[0]));else throw new Error("Cannot close `"+U.type+"` ("+yi({start:U.start,end:U.end})+"): its not open");re.position.end=sr(U.end)}function d(){return l6(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function m(U){if(this.data.expectingFirstListItemValue){const F=this.stack[this.stack.length-2];F.start=Number.parseInt(this.sliceSerialize(U),10),this.data.expectingFirstListItemValue=void 0}}function g(){const U=this.resume(),F=this.stack[this.stack.length-1];F.lang=U}function v(){const U=this.resume(),F=this.stack[this.stack.length-1];F.meta=U}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const U=this.resume(),F=this.stack[this.stack.length-1];F.value=U.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const U=this.resume(),F=this.stack[this.stack.length-1];F.value=U.replace(/(\r?\n|\r)$/g,"")}function b(U){const F=this.resume(),re=this.stack[this.stack.length-1];re.label=F,re.identifier=la(this.sliceSerialize(U)).toLowerCase()}function _(){const U=this.resume(),F=this.stack[this.stack.length-1];F.title=U}function S(){const U=this.resume(),F=this.stack[this.stack.length-1];F.url=U}function T(U){const F=this.stack[this.stack.length-1];if(!F.depth){const re=this.sliceSerialize(U).length;F.depth=re}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function C(U){const F=this.stack[this.stack.length-1];F.depth=this.sliceSerialize(U).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function A(U){const re=this.stack[this.stack.length-1].children;let ue=re[re.length-1];(!ue||ue.type!=="text")&&(ue=o_(),ue.position={start:sr(U.start),end:void 0},re.push(ue)),this.stack.push(ue)}function R(U){const F=this.stack.pop();F.value+=this.sliceSerialize(U),F.position.end=sr(U.end)}function O(U){const F=this.stack[this.stack.length-1];if(this.data.atHardBreak){const re=F.children[F.children.length-1];re.position.end=sr(U.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(F.type)&&(A.call(this,U),R.call(this,U))}function D(){this.data.atHardBreak=!0}function G(){const U=this.resume(),F=this.stack[this.stack.length-1];F.value=U}function W(){const U=this.resume(),F=this.stack[this.stack.length-1];F.value=U}function K(){const U=this.resume(),F=this.stack[this.stack.length-1];F.value=U}function B(){const U=this.stack[this.stack.length-1];if(this.data.inReference){const F=this.data.referenceType||"shortcut";U.type+="Reference",U.referenceType=F,delete U.url,delete U.title}else delete U.identifier,delete U.label;this.data.referenceType=void 0}function P(){const U=this.stack[this.stack.length-1];if(this.data.inReference){const F=this.data.referenceType||"shortcut";U.type+="Reference",U.referenceType=F,delete U.url,delete U.title}else delete U.identifier,delete U.label;this.data.referenceType=void 0}function L(U){const F=this.sliceSerialize(U),re=this.stack[this.stack.length-2];re.label=oP(F),re.identifier=la(F).toLowerCase()}function V(){const U=this.stack[this.stack.length-1],F=this.resume(),re=this.stack[this.stack.length-1];if(this.data.inReference=!0,re.type==="link"){const ue=U.children;re.children=ue}else re.alt=F}function k(){const U=this.resume(),F=this.stack[this.stack.length-1];F.url=U}function q(){const U=this.resume(),F=this.stack[this.stack.length-1];F.title=U}function $(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function ne(U){const F=this.resume(),re=this.stack[this.stack.length-1];re.label=F,re.identifier=la(this.sliceSerialize(U)).toLowerCase(),this.data.referenceType="full"}function _e(U){this.data.characterReferenceType=U.type}function Se(U){const F=this.sliceSerialize(U),re=this.data.characterReferenceType;let ue;re?(ue=w1(F,re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ue=Vf(F);const be=this.stack[this.stack.length-1];be.value+=ue}function Yt(U){const F=this.stack.pop();F.position.end=sr(U.end)}function dt(U){R.call(this,U);const F=this.stack[this.stack.length-1];F.url=this.sliceSerialize(U)}function jn(U){R.call(this,U);const F=this.stack[this.stack.length-1];F.url="mailto:"+this.sliceSerialize(U)}function xs(){return{type:"blockquote",children:[]}}function ao(){return{type:"code",lang:null,meta:null,value:""}}function e_(){return{type:"inlineCode",value:""}}function t_(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function n_(){return{type:"emphasis",children:[]}}function em(){return{type:"heading",depth:0,children:[]}}function tm(){return{type:"break"}}function nm(){return{type:"html",value:""}}function r_(){return{type:"image",title:null,url:"",alt:null}}function rm(){return{type:"link",title:null,url:"",children:[]}}function sm(U){return{type:"list",ordered:U.type==="listOrdered",start:null,spread:U._spread,children:[]}}function s_(U){return{type:"listItem",spread:U._spread,checked:null,children:[]}}function a_(){return{type:"paragraph",children:[]}}function i_(){return{type:"strong",children:[]}}function o_(){return{type:"text",value:""}}function l_(){return{type:"thematicBreak"}}}function sr(e){return{line:e.line,column:e.column,offset:e.offset}}function I1(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?I1(e,r):dP(e,r)}}function dP(e,t){let n;for(n in t)if(R1.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function mx(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+yi({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+yi({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+yi({start:t.start,end:t.end})+") is still open")}function hP(e){const t=this;t.parser=n;function n(r){return cP(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function fP(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function mP(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function pP(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function gP(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xP(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yP(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Da(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function vP(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bP(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function M1(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function wP(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return M1(e,t);const s={src:Da(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function _P(e,t){const n={src:Da(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function SP(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function NP(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return M1(e,t);const s={href:Da(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function EP(e,t){const n={href:Da(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function CP(e,t,n){const r=e.all(t),s=n?kP(n):D1(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let p;d&&d.type==="element"&&d.tagName==="p"?p=d:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,u),e.applyData(t,u)}function kP(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=D1(n[r])}return t}function D1(e){const t=e.spread;return t??e.children.length>1}function TP(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function jP(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function AP(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function RP(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IP(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Bf(t.children[1]),c=m1(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function MP(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const p=t.children[c],m={},g=o?o[c]:void 0;g&&(m.align=g);let v={type:"element",tagName:a,properties:m,children:[]};p&&(v.children=e.all(p),e.patch(p,v),v=e.applyData(p,v)),u.push(v)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function DP(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const px=9,gx=32;function PP(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(xx(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(xx(t.slice(s),s>0,!1)),a.join("")}function xx(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===px||a===gx;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===px||a===gx;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function LP(e,t){const n={type:"text",value:PP(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function UP(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const OP={blockquote:fP,break:mP,code:pP,delete:gP,emphasis:xP,footnoteReference:yP,heading:vP,html:bP,imageReference:wP,image:_P,inlineCode:SP,linkReference:NP,link:EP,listItem:CP,list:TP,paragraph:jP,root:AP,strong:RP,table:IP,tableCell:DP,tableRow:MP,text:LP,thematicBreak:UP,toml:Po,yaml:Po,definition:Po,footnoteDefinition:Po};function Po(){}const P1=-1,Tc=0,bi=1,Yl=2,Jf=3,Yf=4,Kf=5,Wf=6,L1=7,U1=8,yx=typeof self=="object"?self:globalThis,zP=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case Tc:case P1:return n(o,s);case bi:{const l=n([],s);for(const c of o)l.push(r(c));return l}case Yl:{const l=n({},s);for(const[c,u]of o)l[r(c)]=r(u);return l}case Jf:return n(new Date(o),s);case Yf:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Kf:{const l=n(new Map,s);for(const[c,u]of o)l.set(r(c),r(u));return l}case Wf:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case L1:{const{name:l,message:c}=o;return n(new yx[l](c),s)}case U1:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new yx[a](o),s)};return r},vx=e=>zP(new Map,e)(0),Ts="",{toString:BP}={},{keys:qP}=Object,Ya=e=>{const t=typeof e;if(t!=="object"||!e)return[Tc,t];const n=BP.call(e).slice(8,-1);switch(n){case"Array":return[bi,Ts];case"Object":return[Yl,Ts];case"Date":return[Jf,Ts];case"RegExp":return[Yf,Ts];case"Map":return[Kf,Ts];case"Set":return[Wf,Ts];case"DataView":return[bi,n]}return n.includes("Array")?[bi,n]:n.includes("Error")?[L1,n]:[Yl,n]},Lo=([e,t])=>e===Tc&&(t==="function"||t==="symbol"),GP=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=Ya(o);switch(l){case Tc:{let d=o;switch(c){case"bigint":l=U1,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([P1],o)}return s([l,d],o)}case bi:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),s([c,[...m]],o)}const d=[],p=s([l,d],o);for(const m of o)d.push(a(m));return p}case Yl:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],p=s([l,d],o);for(const m of qP(o))(e||!Lo(Ya(o[m])))&&d.push([a(m),a(o[m])]);return p}case Jf:return s([l,o.toISOString()],o);case Yf:{const{source:d,flags:p}=o;return s([l,{source:d,flags:p}],o)}case Kf:{const d=[],p=s([l,d],o);for(const[m,g]of o)(e||!(Lo(Ya(m))||Lo(Ya(g))))&&d.push([a(m),a(g)]);return p}case Wf:{const d=[],p=s([l,d],o);for(const m of o)(e||!Lo(Ya(m)))&&d.push(a(m));return p}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return a},bx=(e,{json:t,lossy:n}={})=>{const r=[];return GP(!(t||n),!!t,new Map,r)(e),r},Kl=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?vx(bx(e,t)):structuredClone(e):(e,t)=>vx(bx(e,t));function HP(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function VP(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function FP(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||HP,r=e.options.footnoteBackLabel||VP,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),p=String(u.identifier).toUpperCase(),m=Da(p.toLowerCase());let g=0;const v=[],x=e.footnoteCounts.get(p);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,g);typeof b=="string"&&(b={type:"text",value:b}),v.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,g),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const b=w.children[w.children.length-1];b&&b.type==="text"?b.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...v)}else d.push(...v);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Kl(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const O1=function(e){if(e==null)return KP;if(typeof e=="function")return jc(e);if(typeof e=="object")return Array.isArray(e)?$P(e):JP(e);if(typeof e=="string")return YP(e);throw new Error("Expected function, string, or object as test")};function $P(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=O1(e[n]);return jc(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function JP(e){const t=e;return jc(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function YP(e){return jc(t);function t(n){return n&&n.type===e}}function jc(e){return t;function t(n,r,s){return!!(WP(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function KP(){return!0}function WP(e){return e!==null&&typeof e=="object"&&"type"in e}const z1=[],XP=!0,wx=!1,QP="skip";function ZP(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=O1(s),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=z1,v,x,w;if((!t||a(c,u,d[d.length-1]||void 0))&&(g=eL(n(c,d)),g[0]===wx))return g;if("children"in c&&c.children){const y=c;if(y.children&&g[0]!==QP)for(x=(r?y.children.length:-1)+o,w=d.concat(y);x>-1&&x<y.children.length;){const b=y.children[x];if(v=l(b,x,w)(),v[0]===wx)return v;x=typeof v[1]=="number"?v[1]:x+o}}return g}}}function eL(e){return Array.isArray(e)?e:typeof e=="number"?[XP,e]:e==null?z1:[e]}function B1(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),ZP(e,a,l,s);function l(c,u){const d=u[u.length-1],p=d?d.children.indexOf(c):void 0;return o(c,p,d)}}const xh={}.hasOwnProperty,tL={};function nL(e,t){const n=t||tL,r=new Map,s=new Map,a=new Map,o={...OP,...n.handlers},l={all:u,applyData:sL,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:rL,wrap:iL};return B1(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const p=d.type==="definition"?r:s,m=String(d.identifier).toUpperCase();p.has(m)||p.set(m,d)}}),l;function c(d,p){const m=d.type,g=l.handlers[m];if(xh.call(l.handlers,m)&&g)return g(l,d,p);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in d){const{children:x,...w}=d,y=Kl(w);return y.children=l.all(d),y}return Kl(d)}return(l.options.unknownHandler||aL)(l,d,p)}function u(d){const p=[];if("children"in d){const m=d.children;let g=-1;for(;++g<m.length;){const v=l.one(m[g],d);if(v){if(g&&m[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=_x(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=_x(x.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function rL(e,t){e.position&&(t.position=B5(e))}function sL(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Kl(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function aL(e,t){const n=t.data||{},r="value"in t&&!(xh.call(n,"hProperties")||xh.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function iL(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function _x(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Sx(e,t){const n=nL(e,t),r=n.one(e,void 0),s=FP(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function oL(e,t){return e&&"run"in e?async function(n,r){const s=Sx(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Sx(n,{file:r,...e||t})}}function Nx(e){if(e)throw e}var ol=Object.prototype.hasOwnProperty,q1=Object.prototype.toString,Ex=Object.defineProperty,Cx=Object.getOwnPropertyDescriptor,kx=function(t){return typeof Array.isArray=="function"?Array.isArray(t):q1.call(t)==="[object Array]"},Tx=function(t){if(!t||q1.call(t)!=="[object Object]")return!1;var n=ol.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&ol.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||ol.call(t,s)},jx=function(t,n){Ex&&n.name==="__proto__"?Ex(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Ax=function(t,n){if(n==="__proto__")if(ol.call(t,n)){if(Cx)return Cx(t,n).value}else return;return t[n]},lL=function e(){var t,n,r,s,a,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Ax(l,n),s=Ax(t,n),l!==s&&(d&&s&&(Tx(s)||(a=kx(s)))?(a?(a=!1,o=r&&kx(r)?r:[]):o=r&&Tx(r)?r:{},jx(l,{name:n,newValue:e(d,o,s)})):typeof s<"u"&&jx(l,{name:n,newValue:s}));return l};const Iu=Wl(lL);function yh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function cL(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const d=e[++a];let p=-1;if(c){o(c);return}for(;++p<s.length;)(u[p]===null||u[p]===void 0)&&(u[p]=s[p]);s=u,d?uL(d,l)(...u):o(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function uL(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(o,...l){n||(n=!0,t(o,...l))}function a(o){s(null,o)}}const bn={basename:dL,dirname:hL,extname:fL,join:mL,sep:"/"};function dL(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ro(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else o<0&&(a=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function hL(e){if(ro(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function fL(e){ro(e);let t=e.length,n=-1,r=0,s=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function mL(...e){let t=-1,n;for(;++t<e.length;)ro(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":pL(n)}function pL(e){ro(e);const t=e.codePointAt(0)===47;let n=gL(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function gL(e,t){let n="",r=0,s=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(n.length>0){n="",r=0,s=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function ro(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const xL={cwd:yL};function yL(){return"/"}function vh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function vL(e){if(typeof e=="string")e=new URL(e);else if(!vh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return bL(e)}function bL(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Mu=["history","path","basename","stem","extname","dirname"];class G1{constructor(t){let n;t?vh(t)?n={path:t}:typeof t=="string"||wL(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":xL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Mu.length;){const a=Mu[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Mu.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?bn.basename(this.path):void 0}set basename(t){Pu(t,"basename"),Du(t,"basename"),this.path=bn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?bn.dirname(this.path):void 0}set dirname(t){Rx(this.basename,"dirname"),this.path=bn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?bn.extname(this.path):void 0}set extname(t){if(Du(t,"extname"),Rx(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=bn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){vh(t)&&(t=vL(t)),Pu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?bn.basename(this.path,this.extname):void 0}set stem(t){Pu(t,"stem"),Du(t,"stem"),this.path=bn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new ft(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Du(e,t){if(e&&e.includes(bn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+bn.sep+"`")}function Pu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Rx(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function wL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _L=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},SL={}.hasOwnProperty;class Xf extends _L{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=cL()}copy(){const t=new Xf;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Iu(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Ou("data",this.frozen),this.namespace[t]=n,this):SL.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Ou("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Uo(t),r=this.parser||this.Parser;return Lu("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Lu("process",this.parser||this.Parser),Uu("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,o){const l=Uo(t),c=r.parse(l);r.run(c,l,function(d,p,m){if(d||!p||!m)return u(d);const g=p,v=r.stringify(g,m);CL(v)?m.value=v:m.result=v,u(d,m)});function u(d,p){d||!p?o(d):a?a(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),Lu("processSync",this.parser||this.Parser),Uu("processSync",this.compiler||this.Compiler),this.process(t,s),Mx("processSync","process",n),r;function s(a,o){n=!0,Nx(a),r=o}}run(t,n,r){Ix(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=Uo(n);s.run(t,c,u);function u(d,p,m){const g=p||t;d?l(d):o?o(g):r(void 0,g,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),Mx("runSync","run",r),s;function a(o,l){Nx(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=Uo(n),s=this.compiler||this.Compiler;return Uu("stringify",s),Ix(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Ou("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...p]=u;c(d,p)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Iu(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const p=u[d];a(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let p=-1,m=-1;for(;++p<r.length;)if(r[p][0]===u){m=p;break}if(m===-1)r.push([u,...d]);else if(d.length>0){let[g,...v]=d;const x=r[m][1];yh(x)&&yh(g)&&(g=Iu(!0,x,g)),r[m]=[u,g,...v]}}}}const NL=new Xf().freeze();function Lu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Uu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Ou(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ix(e){if(!yh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Mx(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Uo(e){return EL(e)?e:new G1(e)}function EL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function CL(e){return typeof e=="string"||kL(e)}function kL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const TL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Dx=[],Px={allowDangerousHtml:!0},jL=/^(https?|ircs?|mailto|xmpp)$/i,AL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function RL(e){const t=IL(e),n=ML(e);return DL(t.runSync(t.parse(n),n),e)}function IL(e){const t=e.rehypePlugins||Dx,n=e.remarkPlugins||Dx,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Px}:Px;return NL().use(hP).use(n).use(oL,r).use(t)}function ML(e){const t=e.children||"",n=new G1;return typeof t=="string"&&(n.value=t),n}function DL(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||PL;for(const d of AL)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+TL+d.id,void 0);return B1(e,u),F5(e,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(d,p,m){if(d.type==="raw"&&m&&typeof p=="number")return o?m.children.splice(p,1):m.children[p]={type:"text",value:d.value},p;if(d.type==="element"){let g;for(g in ju)if(Object.hasOwn(ju,g)&&Object.hasOwn(d.properties,g)){const v=d.properties[g],x=ju[g];(x===null||x.includes(d.tagName))&&(d.properties[g]=c(String(v||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(d,p,m)),g&&m&&typeof p=="number")return l&&d.children?m.children.splice(p,1,...d.children):m.children.splice(p,1),p}}}function PL(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||jL.test(e.slice(0,t))?e:""}const LL=()=>{const[e,t]=E.useState([{sender:"ai",text:"Hola. Soy tu consultor de gestin. En qu puedo ayudarte hoy para mejorar tu gimnasio?"}]),[n,r]=E.useState(""),[s,a]=E.useState(!1),o=E.useRef(null),l=()=>{var u;(u=o.current)==null||u.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{l()},[e]);const c=async()=>{if(!n.trim()||s)return;const u=n.trim();r(""),t(d=>[...d,{sender:"user",text:u}]),a(!0);try{const d=await s3(u);t(p=>[...p,{sender:"ai",text:d.text}])}catch{t(p=>[...p,{sender:"ai",text:"Lo siento, hubo un error de conexin. Intenta de nuevo."}])}finally{a(!1)}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col h-[500px]",children:[i.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 rounded-t-2xl flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/10 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"IA Bienestar (Admin)"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Consultor de Negocios 24/7"})]})]})}),i.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4 custom-scrollbar",children:[e.map((u,d)=>i.jsx("div",{className:`flex ${u.sender==="user"?"justify-end":"justify-start"}`,children:i.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm ${u.sender==="user"?"bg-brand-primary text-white rounded-tr-none":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-tl-none"}`,children:u.sender==="ai"?i.jsx(RL,{components:{ul:({node:p,...m})=>i.jsx("ul",{className:"list-disc ml-4 my-2",...m}),strong:({node:p,...m})=>i.jsx("strong",{className:"font-bold text-slate-900 dark:text-white",...m})},children:u.text}):u.text})},d)),s&&i.jsx("div",{className:"flex justify-start",children:i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-2xl rounded-tl-none flex gap-2 items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-100"}),i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-200"})]})}),i.jsx("div",{ref:o})]}),i.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),onKeyDown:u=>u.key==="Enter"&&c(),placeholder:"Pregunta sobre retencin, marketing...",className:"flex-grow p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-brand-primary focus:border-transparent outline-none transition-all placeholder:text-slate-400",disabled:s}),i.jsx("button",{onClick:c,disabled:s||!n.trim(),className:"bg-brand-primary text-white p-3 rounded-xl hover:bg-brand-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:i.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})})})]})})]})},UL=[],Oo=({icon:e,value:t,label:n,sublabel:r,trend:s})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-start justify-between transition-all hover:shadow-md hover:-translate-y-1",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:n}),i.jsx("h3",{className:"text-2xl font-extrabold text-slate-800 dark:text-white mb-1",children:t}),i.jsxs("p",{className:"text-slate-400 dark:text-slate-500 text-xs flex items-center gap-1",children:[s==="up"&&i.jsx("span",{className:"text-green-500 font-bold",children:""}),s==="down"&&i.jsx("span",{className:"text-red-500 font-bold",children:""}),r]})]}),i.jsx("div",{className:"text-2xl bg-slate-50 dark:bg-slate-700 w-10 h-10 rounded-xl flex items-center justify-center shadow-inner",children:e})]}),OL={"Al da":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",Vencido:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},Lx=({onNavigate:e})=>{const[t,n]=E.useState([]),[r,s]=E.useState([]),[a,o]=E.useState([]),[l,c]=E.useState(null),[u,d]=E.useState(!1),[p]=E.useState([]),[m]=E.useState(null),[g,v]=E.useState(!0),{showToast:x}=vn(),[w,y]=Xe.useState(!1),[b,_]=Xe.useState(null),[S,T]=E.useState(!1),[N,C]=E.useState({name:"",description:"",coach:"",date:"",time:"",capacity:20,category:"Funcional"}),[I,A]=E.useState(!1),[R,O]=E.useState({title:"",description:"",xp_reward:100,type:"consistencia",target_value:3,target_unit:"das",deadline:""});E.useEffect(()=>{(async()=>{v(!0);try{const[$,j,ne]=await Promise.all([De.fetchMembers(),De.fetchActiveChallenges(),Nt.fetchClasses()]);n($),s(j),o(ne)}catch($){console.error("Error loading dashboard:",$),x("Error al cargar datos del tablero","error")}finally{v(!1)}})()},[x]);const D=E.useMemo(()=>{const q=t.length,$=t.filter(_e=>_e.status==="Al da").length,j=t.filter(_e=>_e.status==="Vencido"),ne=$*3e4;return{total:q,active:$,atRisk:j,income:ne,activeChallenges:r.length}},[t]),G=()=>{x("Reporte generado y enviado a tu correo.","success")},W=q=>{_(q),y(!0)},K=async q=>{if(b){y(!1);try{q?(await De.createNotification(null,`Campaa "Recuperacin" activada para ${b.full_name}`,"info"),x(` Campaa "Recuperacin de Riesgo" activada para ${b.full_name}.`,"success")):(await De.createNotification(null,`Recordatorio de pago enviado a ${b.full_name}`,"payment"),x(` Recordatorio de pago enviado a ${b.full_name}.`,"info"))}catch($){console.error($),x("Accin registrada localmente (Error backend notificacin)","warning")}_(null)}},B=async q=>{try{await De.deleteChallenge(q),x("Reto finalizado exitosamente","success");const $=await De.fetchActiveChallenges();s($)}catch($){console.error("Error deleting challenge:",$),x("Error al finalizar reto","error")}},P=async q=>{if(confirm("Ests seguro de eliminar esta clase?"))try{await Nt.deleteClass(q),x("Clase eliminada exitosamente","success");const $=await Nt.fetchClasses();o($)}catch($){console.error("Error deleting class:",$),x("Error al eliminar clase","error")}},L=q=>{var $,j,ne,_e;C({name:q.name,description:q.description||"",coach:q.coach,capacity:q.capacity||20,category:q.category||"Funcional",time:((j=($=q.schedule)==null?void 0:$[0])==null?void 0:j.time)||"",date:((_e=(ne=q.schedule)==null?void 0:ne[0])==null?void 0:_e.day)||""}),c(q.id),T(!0)},V=async()=>{try{const q={name:N.name,description:N.description,coach:N.coach,capacity:N.capacity,category:N.category,imageUrl:"https://images.unsplash.com/photo-1518611012118-696072aa579a?auto=format&fit=crop&w=800&q=80",videoUrl:"",difficulty:"Intermedio",schedule:[{day:N.date,time:N.time}],duration:60,price:0,locationType:"Gimnasio",gymId:""};l?(await Nt.updateClass(l,q),x("Clase actualizada exitosamente","success")):(await Nt.createClass(q),x("Clase publicada exitosamente","success")),T(!1),c(null);const $=await Nt.fetchClasses();o($)}catch(q){console.error(q),x("Error al guardar clase","error")}},k=[{id:"1",label:"Configura el horario de tu gimnasio",isCompleted:!0},{id:"2",label:"Registra tu primer miembro",isCompleted:D.total>0,actionLabel:"Ir a Miembros",onAction:()=>e("Miembros")},{id:"3",label:"Aade equipo al inventario",isCompleted:!1,actionLabel:"Gestionar Inventario",onAction:()=>e("Inventario")},{id:"4",label:"Crea un Reto Semanal",isCompleted:r.length>0,actionLabel:"Gamificacin",onAction:()=>A(!0)}];return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-10 space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4 border-b border-slate-200 dark:border-slate-700 pb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-white",children:"Panel de Control"}),i.jsxs("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:["Resumen operativo de ",i.jsx("span",{className:"font-bold text-brand-primary",children:"Gimnasio El Templo"})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>e("Miembros"),className:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-sm",children:"+ Miembro"}),i.jsx("button",{onClick:G,className:"bg-brand-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-brand-secondary transition-colors text-sm shadow-lg shadow-brand-primary/20",children:"Crear Reporte"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Oo,{icon:"",value:D.total,label:"Miembros Totales",sublabel:"+5% vs mes anterior",trend:"up"}),i.jsx(Oo,{icon:"",value:D.active,label:"Miembros Activos",sublabel:`${D.total>0?Math.round(D.active/D.total*100):0}% Retencin`,trend:"neutral"}),i.jsx(Oo,{icon:"",value:`$${(D.income/1e3).toFixed(1)}k`,label:"Ingresos Est.",sublabel:"Basado en activos",trend:"up"}),i.jsx(Oo,{icon:"",value:D.activeChallenges,label:"Retos Activos",sublabel:"Gamificacin"})]}),i.jsx(dw,{title:"Tareas Administrativas",items:k}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Rendimiento Financiero"}),i.jsxs("select",{className:"bg-slate-50 dark:bg-slate-700 border-none text-xs rounded-md p-2 text-slate-600 dark:text-slate-300 focus:ring-0 cursor-pointer",children:[i.jsx("option",{children:"ltimos 6 meses"}),i.jsx("option",{children:"Este Ao"})]})]}),i.jsx("div",{className:"h-64",children:i.jsx(Y3,{data:UL})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Miembros Recientes"}),i.jsx("button",{onClick:()=>e("Miembros"),className:"text-sm font-bold text-brand-primary hover:underline",children:"Ver Todos"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 font-semibold rounded-l-lg",children:"Miembro"}),i.jsx("th",{className:"p-3 font-semibold",children:"Plan"}),i.jsx("th",{className:"p-3 font-semibold text-center",children:"Estado"}),i.jsx("th",{className:"p-3 font-semibold rounded-r-lg",children:"Ingreso"})]})}),i.jsx("tbody",{className:"text-sm",children:g?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando..."})}):t.slice(0,5).map(q=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[i.jsx("td",{className:"p-3 font-bold text-slate-700 dark:text-slate-200",children:q.full_name}),i.jsx("td",{className:"p-3 text-slate-500 dark:text-slate-400 capitalize",children:q.plan}),i.jsx("td",{className:"p-3 text-center",children:i.jsx("span",{className:`px-2 py-1 text-[10px] font-bold uppercase rounded-full ${OL[q.status]}`,children:q.status})}),i.jsx("td",{className:"p-3 text-slate-400",children:q.join_date})]},q.id))})]})})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(LL,{}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Alertas de Riesgo"}),i.jsx("span",{className:"bg-red-100 text-red-600 text-xs font-bold px-2 py-1 rounded-full",children:D.atRisk.length})]}),D.atRisk.length>0?i.jsx("div",{className:"space-y-3",children:D.atRisk.map(q=>i.jsxs("div",{className:"flex justify-between items-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/30",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-red-800 dark:text-red-300 text-sm",children:q.full_name}),i.jsxs("p",{className:"text-[10px] text-red-600 dark:text-red-400",children:["Venci: ",q.last_payment_date]})]}),i.jsx("button",{onClick:()=>W(q),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Accin"})]},q.id))}):i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-green-600 font-medium text-sm",children:"Todo en orden!"})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Clases Grupales"}),i.jsx("button",{onClick:()=>{C({name:"",description:"",coach:"",capacity:20,time:"",date:"",category:"Funcional"}),T(!0)},className:"bg-brand-primary text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-brand-primary-dark transition-colors",children:"+ Publicar"})]}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Gestiona tus clases activas."}),i.jsx("div",{className:"space-y-3 mb-4",children:a.length===0?i.jsx("p",{className:"text-xs text-center text-slate-400 py-2",children:"No hay clases publicadas."}):a.map(q=>{var $,j,ne,_e;return i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl border border-slate-200 dark:border-slate-600 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:q.name}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[(j=($=q.schedule)==null?void 0:$[0])==null?void 0:j.day," - ",(_e=(ne=q.schedule)==null?void 0:ne[0])==null?void 0:_e.time]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>L(q),className:"text-blue-500 hover:text-blue-700 p-1",title:"Editar",children:""}),i.jsx("button",{onClick:()=>P(q.id),className:"text-red-500 hover:text-red-700 p-1",title:"Eliminar",children:""})]})]},q.id)})}),i.jsx("div",{className:"text-center bg-slate-50 dark:bg-slate-700/50 rounded-xl p-4 border border-dashed border-slate-300 dark:border-slate-600 cursor-pointer hover:bg-slate-100 transition-colors",onClick:()=>{C({name:"",description:"",coach:"",capacity:20,time:"",date:"",category:"Funcional"}),T(!0)},children:i.jsx("p",{className:"font-bold text-slate-400 dark:text-slate-500 text-sm",children:"Crear Nueva Clase"})})]})]})]}),S&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white",children:"Publicar Nueva Clase"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Nombre de la Clase"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:N.name,onChange:q=>C({...N,name:q.target.value}),placeholder:"Ej: Yoga al Amanecer"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Entrenador"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:N.coach,onChange:q=>C({...N,coach:q.target.value}),placeholder:"Nombre del instructor"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Da"}),i.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:N.date,onChange:q=>C({...N,date:q.target.value}),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"Lunes",children:"Lunes"}),i.jsx("option",{value:"Martes",children:"Martes"}),i.jsx("option",{value:"Mircoles",children:"Mircoles"}),i.jsx("option",{value:"Jueves",children:"Jueves"}),i.jsx("option",{value:"Viernes",children:"Viernes"}),i.jsx("option",{value:"Sbado",children:"Sbado"}),i.jsx("option",{value:"Domingo",children:"Domingo"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Hora"}),i.jsx("input",{type:"time",className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:N.time,onChange:q=>C({...N,time:q.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Categora"}),i.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:N.category,onChange:q=>C({...N,category:q.target.value}),children:[i.jsx("option",{value:"Funcional",children:"Funcional"}),i.jsx("option",{value:"Yoga",children:"Yoga"}),i.jsx("option",{value:"Cardio",children:"Cardio"}),i.jsx("option",{value:"Fuerza",children:"Fuerza"}),i.jsx("option",{value:"Baile",children:"Baile"})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:V,className:"flex-1 py-2 bg-brand-primary text-white font-bold rounded-lg hover:bg-brand-primary-dark transition-colors",children:l?"Guardar Cambios":"Publicar"})]})]})}),u&&m&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Asistentes: ",m.name]}),i.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-500",children:""})]}),i.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 mb-4",children:p.length===0?i.jsx("p",{className:"text-center text-slate-500 py-4",children:"No hay reservas an."}):p.map(q=>{var $,j,ne;return i.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary/20 text-brand-primary flex items-center justify-center font-bold text-xs",children:((j=($=q.user)==null?void 0:$.name)==null?void 0:j.substring(0,2).toUpperCase())||"U"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:(ne=q.user)==null?void 0:ne.name}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(q.joinedAt).toLocaleDateString()})]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:q.status==="confirmed"?"Confirmado":q.status})]},q.id)})}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-slate-100 text-slate-700 font-bold rounded-lg hover:bg-slate-200",children:"Cerrar"})})]})}),w&&b&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center text-2xl mb-4 mx-auto",children:""}),i.jsxs("h3",{className:"text-xl font-bold text-center text-slate-900 dark:text-white mb-2",children:["Gestionar Riesgo: ",b.full_name]}),i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Este usuario lleva ms de 7 das ausente y su cuota ha vencido. Qu accin estratgica deseas tomar?"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>K(!0),className:"w-full flex items-center justify-center gap-3 p-4 rounded-xl border-2 border-green-500 bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 transition-all group",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white group-hover:text-green-700 dark:group-hover:text-green-400",children:'Activar "Recuperacin"'}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Enva promo de regreso va WhatsApp (Automatizacin)."})]})]}),i.jsxs("button",{onClick:()=>K(!1),className:"w-full flex items-center justify-center gap-3 p-4 rounded-xl border border-slate-200 hover:border-slate-300 bg-white hover:bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 transition-all",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Solo Cobrar"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Generar enlace de pago y enviar."})]})]})]})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 flex justify-center border-t border-slate-100 dark:border-slate-700",children:i.jsx("button",{onClick:()=>y(!1),className:"text-sm font-bold text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-white",children:"Cancelar"})})]})}),I&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white",children:r.length>0?"Gestionar Retos Activos":"Crear Nuevo Reto"}),r.length>0&&i.jsxs("div",{className:"mb-6 space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Retos actuales:"}),r.map(q=>i.jsxs("div",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-3 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:q.title}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fin: ",new Date(q.deadline).toLocaleDateString()]})]}),i.jsx("button",{onClick:()=>B(q.id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors",title:"Eliminar Reto",children:""})]},q.id)),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 my-4"}),i.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-white mb-2",children:"Crear otro reto:"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Ttulo del Reto"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:R.title,onChange:q=>O({...R,title:q.target.value}),placeholder:"Ej: Semana de Cardio"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:R.description,onChange:q=>O({...R,description:q.target.value}),rows:2})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Tipo"}),i.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:R.type,onChange:q=>O({...R,type:q.target.value}),children:[i.jsx("option",{value:"consistencia",children:"Consistencia"}),i.jsx("option",{value:"cardio",children:"Cardio"}),i.jsx("option",{value:"fuerza",children:"Fuerza"}),i.jsx("option",{value:"social",children:"Social"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Recompensa (XP)"}),i.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:R.xp_reward,onChange:q=>O({...R,xp_reward:Number(q.target.value)})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Fecha Lmite"}),i.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:R.deadline,onChange:q=>O({...R,deadline:q.target.value})})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{try{const q={...R,deadline:R.deadline||new Date(Date.now()+6048e5).toISOString().split("T")[0]};await De.createChallenge(q),x("Reto creado exitosamente","success"),A(!1);const $=await De.fetchActiveChallenges();s($)}catch(q){console.error(q),x("Error al crear reto","error")}},className:"flex-1 py-2 bg-brand-primary text-white font-bold rounded-lg hover:bg-brand-primary-dark transition-colors",children:"Guardar Reto"})]})]})})]})},zo=({id:e,name:t,label:n,type:r,value:s,onChange:a,required:o})=>i.jsxs("div",{children:[i.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-slate-700 mb-1",children:[n,o&&" *"]}),i.jsx("input",{type:r,id:e,name:t,value:s,onChange:a,required:o,className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"})]}),zL=({onClose:e,onAddMember:t})=>{const[n,r]=E.useState(""),[s,a]=E.useState(""),[o,l]=E.useState("bsico"),[c,u]=E.useState(3e4),[d,p]=E.useState(new Date().toISOString().split("T")[0]),[m,g]=E.useState(new Date().toISOString().split("T")[0]),[v,x]=E.useState("");Xe.useEffect(()=>{o==="bsico"?u(3e4):o==="premium"&&u(5e4)},[o]);const w=y=>{if(y.preventDefault(),!n.trim()||!d||!s.trim()||!m||c<=0){x("Por favor, completa todos los campos obligatorios.");return}if(!/^\S+@\S+\.\S+$/.test(s)){x("Por favor, introduce un correo electrnico vlido.");return}x(""),t({name:n,email:s,password:"",plan:o,joinDate:d,firstPaymentDate:m,amount:c})};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"add-member-modal-title",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",onClick:y=>y.stopPropagation(),children:i.jsxs("form",{onSubmit:w,children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[i.jsx("h2",{id:"add-member-modal-title",className:"text-xl font-bold text-slate-800",children:"Aadir Nuevo Miembro"}),i.jsx("button",{type:"button",onClick:e,className:"text-slate-400 hover:text-slate-800","aria-label":"Cerrar modal",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(zo,{id:"name",name:"name",label:"Nombre Completo",type:"text",value:n,onChange:y=>r(y.target.value),required:!0}),i.jsx(zo,{id:"email",name:"email",label:"Correo Electrnico",type:"email",value:s,onChange:y=>a(y.target.value),required:!0}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium text-slate-700 mb-1",children:"Plan *"}),i.jsxs("select",{id:"plan",value:o,onChange:y=>l(y.target.value),className:"w-full p-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-brand-primary",children:[i.jsx("option",{value:"bsico",children:"Bsico"}),i.jsx("option",{value:"premium",children:"Premium"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 mb-1",children:"Valor Mensual *"}),i.jsx("input",{id:"amount",type:"number",value:c,onChange:y=>u(Number(y.target.value)),className:"w-full p-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-brand-primary",min:"0",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(zo,{id:"joinDate",name:"joinDate",label:"Fecha de Ingreso",type:"date",value:d,onChange:y=>p(y.target.value),required:!0}),i.jsx(zo,{id:"firstPaymentDate",name:"firstPaymentDate",label:"Fecha de Primer Pago",type:"date",value:m,onChange:y=>g(y.target.value),required:!0})]}),v&&i.jsx("p",{className:"text-sm text-red-600",children:v})]}),i.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-semibold text-white bg-brand-primary rounded-lg hover:bg-brand-secondary",children:"Guardar Miembro"})]})]})})})},BL=({member:e,onClose:t,onUpdateMember:n})=>{const[r,s]=E.useState(e);E.useEffect(()=>{s(e)},[e]);const a=l=>{const{name:c,value:u}=l.target;s(d=>({...d,[c]:u}))},o=l=>{l.preventDefault(),!(!r.full_name.trim()||!r.email.trim())&&n(r)};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"edit-member-modal-title",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[i.jsx("h2",{id:"edit-member-modal-title",className:"text-xl font-bold text-slate-800",children:"Editar Miembro"}),i.jsx("button",{type:"button",onClick:t,className:"text-slate-400 hover:text-slate-800","aria-label":"Cerrar modal",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre Completo *"}),i.jsx("input",{type:"text",id:"full_name",name:"full_name",value:r.full_name,onChange:a,required:!0,className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Correo Electrnico (Solo lectura)"}),i.jsx("input",{type:"email",id:"email",name:"email",value:r.email,disabled:!0,className:"w-full p-2 border border-slate-300 rounded-lg bg-slate-100 focus:outline-none cursor-not-allowed"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium text-slate-700 mb-1",children:"Plan *"}),i.jsxs("select",{id:"plan",name:"plan",value:r.plan,onChange:a,className:"w-full p-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-brand-primary",children:[i.jsx("option",{value:"bsico",children:"Bsico"}),i.jsx("option",{value:"premium",children:"Premium"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 mb-1",children:"Estado del Pago *"}),i.jsxs("select",{id:"status",name:"status",value:r.status,onChange:a,className:"w-full p-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-brand-primary",children:[i.jsx("option",{value:"Al da",children:"Al da"}),i.jsx("option",{value:"Vencido",children:"Vencido"})]})]})]}),i.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-semibold text-white bg-brand-primary rounded-lg hover:bg-brand-secondary",children:"Guardar Cambios"})]})]})})})},qL=({member:e,onClose:t,onConfirmDelete:n})=>i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"delete-member-modal-title",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",onClick:r=>r.stopPropagation(),children:[i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex-shrink-0 flex items-center justify-center",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsxs("div",{children:[i.jsx("h2",{id:"delete-member-modal-title",className:"text-xl font-bold text-slate-800",children:"Eliminar Miembro"}),i.jsxs("p",{className:"mt-2 text-slate-600",children:["Ests seguro de que deseas eliminar a ",i.jsx("span",{className:"font-bold text-slate-900",children:e.full_name}),"? Esta accin no se puede deshacer."]})]})]})}),i.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-lg hover:bg-red-700",children:"Eliminar"})]})]})}),GL={"Al da":"bg-green-100 text-green-800",Vencido:"bg-red-100 text-red-800"},HL={bsico:"bg-blue-100 text-blue-800",premium:"bg-yellow-100 text-yellow-800",gratis:"bg-gray-100 text-gray-800"},Ux=e=>{const t=Ok.find(n=>e.includes(n.userName)||n.userName.includes(e.split(" ")[0]));if(t){const n=[...Gl].reverse().find(r=>t.xp>=r.minXP)||Gl[0];return{level:n.level,title:n.title,xp:t.xp}}return{level:1,title:"Novato",xp:0}},VL=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(""),[o,l]=E.useState("Todos"),[c,u]=E.useState(!1),[d,p]=E.useState(null),[m,g]=E.useState(null);E.useEffect(()=>{v()},[]);const v=async()=>{r(!0);try{const _=await De.fetchMembers();t(_)}catch(_){console.error("Error loading members:",_)}finally{r(!1)}},x=E.useMemo(()=>e.filter(_=>{var N;const S=((N=_.full_name)==null?void 0:N.toLowerCase().includes(s.toLowerCase()))||!1,T=o==="Todos"||_.status===o;return S&&T}),[e,s,o]),w=async _=>{try{await De.createMember({name:_.name,email:_.email,plan:_.plan,joinDate:_.joinDate,firstPaymentDate:_.firstPaymentDate,amount:_.amount}),u(!1),v()}catch(S){console.error(S),alert("Error al registrar miembro: "+S.message)}},y=async _=>{try{await De.updateMember(_.id,{full_name:_.full_name,plan:_.plan}),await v(),p(null)}catch(S){console.error("Failed to update member",S),alert("Error al actualizar miembro")}},b=async()=>{if(m)try{await De.deleteMember(m.id),t(_=>_.filter(S=>S.id!==m.id)),g(null)}catch(_){console.error("Error deleting member:",_),alert("Error al eliminar el miembro.")}};return n?i.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando miembros..."}):i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900",children:"Gestin de Miembros"}),i.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Administra, busca y filtra los miembros de tu gimnasio."})]}),i.jsxs("button",{onClick:()=>u(!0),className:"bg-brand-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-brand-secondary transition-colors flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Aadir Miembro"]})]}),i.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-slate-200 mb-8",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar miembro por nombre...",value:s,onChange:_=>a(_.target.value),className:"w-full pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"}),i.jsxs("select",{value:o,onChange:_=>l(_.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none bg-white",children:[i.jsx("option",{value:"Todos",children:"Todos los estados"}),i.jsx("option",{value:"Al da",children:"Al da"}),i.jsx("option",{value:"Vencido",children:"Vencido"})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-slate-50 text-sm text-slate-600",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 font-semibold",children:"ID"}),i.jsx("th",{className:"p-4 font-semibold",children:"Nombre"}),i.jsx("th",{className:"p-4 font-semibold",children:"Correo"}),i.jsx("th",{className:"p-4 font-semibold text-center",children:"Nivel"}),i.jsx("th",{className:"p-4 font-semibold text-center",children:"Plan"}),i.jsx("th",{className:"p-4 font-semibold text-center",children:"Estado"}),i.jsx("th",{className:"p-4 font-semibold",children:"Mensualidad"}),i.jsx("th",{className:"p-4 font-semibold",children:"ltimo Pago"}),i.jsx("th",{className:"p-4 font-semibold",children:"Fecha de Ingreso"}),i.jsx("th",{className:"p-4 font-semibold text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:x.map(_=>i.jsxs("tr",{className:"border-t border-slate-200 hover:bg-slate-50",children:[i.jsx("td",{className:"p-4 text-slate-500 text-xs",children:_.id}),i.jsx("td",{className:"p-4 font-medium text-slate-800",children:_.full_name}),i.jsx("td",{className:"p-4 text-slate-700",children:_.email}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("span",{className:"font-bold text-slate-800 bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs",children:["Lvl ",Ux(_.full_name).level]}),i.jsx("span",{className:"text-[10px] text-slate-500",children:Ux(_.full_name).title})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full capitalize ${HL[_.plan]}`,children:_.plan})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${GL[_.status]}`,children:_.status})}),i.jsx("td",{className:"p-4 text-slate-700",children:_.monthly_fee?`$${_.monthly_fee.toLocaleString()}`:"-"}),i.jsx("td",{className:"p-4 text-slate-700",children:_.last_payment_date||"-"}),i.jsx("td",{className:"p-4 text-slate-700",children:new Date(_.join_date).toLocaleDateString()}),i.jsxs("td",{className:"p-4 text-center space-x-2",children:[i.jsx("button",{onClick:()=>p(_),className:"text-slate-500 hover:text-brand-primary p-1",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[i.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),i.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})}),i.jsx("button",{onClick:()=>g(_),className:"text-slate-500 hover:text-red-500 p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},_.id))})]})})}),c&&i.jsx(zL,{onClose:()=>u(!1),onAddMember:w}),d&&i.jsx(BL,{member:d,onClose:()=>p(null),onUpdateMember:y}),m&&i.jsx(qL,{member:m,onClose:()=>g(null),onConfirmDelete:b})]})},FL=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState({item_name:"",brand:"",category:"General",status:"Operativo",quantity:1,serial_number:"",last_maintenance:""});E.useEffect(()=>{d()},[]);const d=async()=>{try{const x=await De.fetchEquipment();t(x)}catch(x){console.error("Error loading equipment:",x)}finally{r(!1)}},p=x=>{l(x),u({item_name:x.item_name,brand:x.brand||"",category:x.category,status:x.status,quantity:x.quantity,serial_number:x.serial_number||"",last_maintenance:x.last_maintenance||""}),a(!0)},m=async x=>{x.preventDefault();try{o?await De.updateEquipment(o.id,c):await De.addEquipment(c),a(!1),l(null),v(),d()}catch(w){console.error("Error saving equipment:",w),alert("Error al guardar el equipo")}},g=async x=>{if(window.confirm("Ests seguro de eliminar este equipo?"))try{await De.deleteEquipment(x),d()}catch(w){console.error("Error deleting equipment:",w)}},v=()=>{u({item_name:"",brand:"",category:"General",status:"Operativo",quantity:1,serial_number:"",last_maintenance:""})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Inventario de Equipos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Gestiona maquinaria, pesas y activos fijos."})]}),i.jsxs("button",{onClick:()=>{a(!s),l(null),v()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx("span",{className:"text-xl",children:s?"":"+"}),s?"Cerrar Formulario":"Nuevo Equipo"]})]}),s&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 animate-in slide-in-from-top-4 duration-300",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-800 dark:text-white",children:o?"Editar Equipo":"Registrar Nuevo Equipo"}),i.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nombre del Equipo"}),i.jsx("input",{type:"text",required:!0,value:c.item_name,onChange:x=>u({...c,item_name:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Ej. Caminadora Pro X5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Marca / Modelo"}),i.jsx("input",{type:"text",value:c.brand,onChange:x=>u({...c,brand:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Ej. LifeFitness"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Categora"}),i.jsxs("select",{value:c.category,onChange:x=>u({...c,category:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[i.jsx("option",{value:"Cardio",children:"Cardio"}),i.jsx("option",{value:"Fuerza",children:"Fuerza"}),i.jsx("option",{value:"Peso Libre",children:"Peso Libre"}),i.jsx("option",{value:"Funcional",children:"Funcional"}),i.jsx("option",{value:"General",children:"General"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estado"}),i.jsxs("select",{value:c.status,onChange:x=>u({...c,status:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[i.jsx("option",{value:"Operativo",children:"Operativo"}),i.jsx("option",{value:"En Mantenimiento",children:"En Mantenimiento"}),i.jsx("option",{value:"Fuera de Servicio",children:"Fuera de Servicio"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"ltimo Mantenimiento"}),i.jsx("input",{type:"date",value:c.last_maintenance,onChange:x=>u({...c,last_maintenance:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-3 flex justify-end gap-3 mt-4 border-t pt-4 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-sm transition-colors",children:o?"Guardar Cambios":"Registrar Equipo"})]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Nombre"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Marca"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Categora"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Estado"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Mantenimiento"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300 text-right",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:n?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"Cargando equipos..."})}):e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"No hay equipos registrados."})}):e.map(x=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[i.jsx("td",{className:"p-4 font-medium text-slate-800 dark:text-white",children:x.item_name}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:x.brand||"-"}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-xs rounded-full text-slate-600 dark:text-slate-300",children:x.category})}),i.jsx("td",{className:"p-4",children:i.jsx($L,{status:x.status})}),i.jsx("td",{className:"p-4 text-sm text-slate-500 dark:text-slate-400",children:x.last_maintenance?new Date(x.last_maintenance).toLocaleDateString():"Pendiente"}),i.jsxs("td",{className:"p-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>p(x),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>g(x.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Eliminar"})]})]},x.id))})]})})})]})},$L=({status:e})=>{const n={Operativo:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400","En Mantenimiento":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400","Fuera de Servicio":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}[e]||"bg-slate-100 text-slate-700";return i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${n}`,children:e})},JL=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState({name:"",brand:"",category:"Suplementos",price:0,stock_quantity:0,sku:"",expiration_date:""});E.useEffect(()=>{d()},[]);const d=async()=>{try{const x=await De.fetchProducts();t(x)}catch(x){console.error("Error loading products:",x)}finally{r(!1)}},p=x=>{l(x),u({name:x.name,brand:x.brand||"",category:x.category,price:x.price,stock_quantity:x.stock_quantity,sku:x.sku||"",expiration_date:x.expiration_date||""}),a(!0)},m=async x=>{x.preventDefault();try{o?await De.updateProduct(o.id,c):await De.addProduct(c),a(!1),l(null),v(),d()}catch(w){console.error("Error saving product:",w),alert("Error al guardar el producto")}},g=async x=>{if(window.confirm("Ests seguro de eliminar este producto?"))try{await De.deleteProduct(x),d()}catch(w){console.error("Error deleting product:",w)}},v=()=>{u({name:"",brand:"",category:"Suplementos",price:0,stock_quantity:0,sku:"",expiration_date:""})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Inventario de Productos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Tienda, suplementos y ventas."})]}),i.jsxs("button",{onClick:()=>{a(!s),l(null),v()},className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx("span",{className:"text-xl",children:s?"":"+"}),s?"Cerrar Formulario":"Nuevo Producto"]})]}),s&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 animate-in slide-in-from-top-4 duration-300",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-800 dark:text-white",children:o?"Editar Producto":"Registrar Nuevo Producto"}),i.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nombre del Producto"}),i.jsx("input",{type:"text",required:!0,value:c.name,onChange:x=>u({...c,name:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Ej. Whey Protein Chocolate"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Marca"}),i.jsx("input",{type:"text",value:c.brand,onChange:x=>u({...c,brand:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Ej. Optimum Nutrition"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Categora"}),i.jsxs("select",{value:c.category,onChange:x=>u({...c,category:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:[i.jsx("option",{value:"Suplementos",children:"Suplementos"}),i.jsx("option",{value:"Bebidas",children:"Bebidas"}),i.jsx("option",{value:"Ropa",children:"Ropa"}),i.jsx("option",{value:"Accesorios",children:"Accesorios"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Precio Venta ($)"}),i.jsx("input",{type:"number",min:"0",step:"100",required:!0,value:c.price,onChange:x=>u({...c,price:parseFloat(x.target.value)||0}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Stock"}),i.jsx("input",{type:"number",min:"0",required:!0,value:c.stock_quantity,onChange:x=>u({...c,stock_quantity:parseInt(x.target.value)||0}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Vencimiento"}),i.jsx("input",{type:"date",value:c.expiration_date,onChange:x=>u({...c,expiration_date:x.target.value}),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-4 flex justify-end gap-3 mt-4 border-t pt-4 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg shadow-sm transition-colors",children:o?"Guardar Cambios":"Registrar Producto"})]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Nombre"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Marca"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Precio"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Stock"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Vencimiento"}),i.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 dark:text-slate-300 text-right",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:n?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"Cargando productos..."})}):e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"No hay productos registrados."})}):e.map(x=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[i.jsx("td",{className:"p-4 font-medium text-slate-800 dark:text-white",children:x.name}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:x.brand||"-"}),i.jsxs("td",{className:"p-4 font-semibold text-emerald-600 dark:text-emerald-400",children:["$ ",x.price.toLocaleString()]}),i.jsx("td",{className:"p-4",children:i.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.stock_quantity<=5?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:[x.stock_quantity," un."]})}),i.jsx("td",{className:"p-4 text-sm text-slate-500 dark:text-slate-400",children:x.expiration_date?new Date(x.expiration_date).toLocaleDateString():"-"}),i.jsxs("td",{className:"p-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>p(x),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>g(x.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Eliminar"})]})]},x.id))})]})})})]})},YL=()=>{const[e,t]=E.useState("equipment");return i.jsxs("div",{className:"p-6 md:p-8 max-w-7xl mx-auto",children:[i.jsxs("header",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white tracking-tight",children:"Gestin de Inventario"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Administra tus equipos y productos comerciales desde un solo lugar."})]}),i.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>t("equipment"),className:`pb-3 px-2 text-sm font-medium transition-colors relative ${e==="equipment"?"text-blue-600 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:["MAQUINARIA Y EQUIPOS",e==="equipment"&&i.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400 rounded-t-full"})]}),i.jsxs("button",{onClick:()=>t("products"),className:`pb-3 px-2 text-sm font-medium transition-colors relative ${e==="products"?"text-emerald-600 dark:text-emerald-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:["PRODUCTOS Y TIENDA",e==="products"&&i.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-emerald-600 dark:bg-emerald-400 rounded-t-full"})]})]}),i.jsx("div",{className:"animate-in fade-in duration-300",children:e==="equipment"?i.jsx(FL,{}):i.jsx(JL,{})})]})},zu=["Membresas","Venta de Productos","Entrenamiento Personal","Otro"],Ox=["Salarios","Arriendo","Servicios Pblicos","Mantenimiento","Marketing","Otro"],KL=({onClose:e,onAdd:t})=>{const[n,r]=E.useState("Ingreso"),[s,a]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(zu[0]),[d,p]=E.useState(new Date().toISOString().split("T")[0]),[m,g]=E.useState(""),v=y=>{const b=y.target.value;r(b),u(b==="Ingreso"?zu[0]:Ox[0])},x=y=>{y.preventDefault();const b=parseFloat(o);if(!s.trim()||!o.trim()||isNaN(b)||b<=0){g("Por favor, completa todos los campos con valores vlidos.");return}g(""),t({date:d,description:s,type:n,amount:b,category:c})},w=n==="Ingreso"?zu:Ox;return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:e,children:i.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",onClick:y=>y.stopPropagation(),children:i.jsxs("form",{onSubmit:x,children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Registrar Transaccin"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo de Transaccin *"}),i.jsxs("select",{id:"type",value:n,onChange:v,className:"w-full p-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-brand-primary",children:[i.jsx("option",{value:"Ingreso",children:"Ingreso"}),i.jsx("option",{value:"Gasto",children:"Gasto"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Descripcin *"}),i.jsx("input",{type:"text",id:"description",value:s,onChange:y=>a(y.target.value),required:!0,className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 mb-1",children:"Monto (COP) *"}),i.jsx("input",{type:"number",id:"amount",value:o,onChange:y=>l(y.target.value),required:!0,className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none",placeholder:"Ej: 50000"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-slate-700 mb-1",children:"Fecha *"}),i.jsx("input",{type:"date",id:"date",value:d,onChange:y=>p(y.target.value),required:!0,className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 mb-1",children:"Categora *"}),i.jsx("select",{id:"category",value:c,onChange:y=>u(y.target.value),className:"w-full p-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-brand-primary",children:w.map(y=>i.jsx("option",{value:y,children:y},y))})]}),m&&i.jsx("p",{className:"text-sm text-red-600",children:m})]}),i.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-semibold text-white bg-brand-primary rounded-lg hover:bg-brand-secondary",children:"Guardar Transaccin"})]})]})})})},Bo=({label:e,value:t,color:n,icon:r})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 relative overflow-hidden",children:[r&&i.jsx("div",{className:"absolute right-4 top-4 opacity-10 text-4xl",children:r}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase",children:e}),i.jsx("p",{className:`text-3xl font-black mt-1 ${n}`,children:t})]}),WL={Ingreso:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",Gasto:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",Comisin:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",Fianza:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"},XL=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState("Todos"),[o,l]=E.useState(!1);E.useEffect(()=>{c()},[]);const c=async()=>{try{const m=await De.fetchTransactions();t(m)}catch(m){console.error("Error loading transactions:",m)}finally{r(!1)}},u=E.useMemo(()=>{const m=e.filter(y=>y.type==="Ingreso").reduce((y,b)=>y+b.amount,0),g=e.filter(y=>y.type==="Gasto"||y.type==="Comisin").reduce((y,b)=>y+b.amount,0),v=e.filter(y=>y.type==="Comisin").reduce((y,b)=>y+b.amount,0),x=e.filter(y=>y.type==="Fianza").reduce((y,b)=>y+b.amount,0),w=[{name:"Actual",income:m,expenses:g}];return{monthlyIncome:m,monthlyExpenses:g,netProfit:m-g,commissions:v,bails:x,chartData:w}},[e]),d=E.useMemo(()=>s==="Todos"?e:e.filter(m=>m.type===s),[e,s]),p=async m=>{try{await De.addTransaction(m),c(),l(!1)}catch(g){console.error("Error adding transaction:",g),alert("Error al registrar la transaccin")}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 border-b border-slate-200 dark:border-slate-700 pb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 dark:text-white",children:"Gestin Financiera"}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 dark:text-slate-400",children:"Control total de ingresos, pagos a entrenadores y fianzas."})]}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-brand-primary text-white font-bold py-2 px-6 rounded-lg hover:bg-brand-secondary transition-colors flex items-center gap-2 self-start md:self-center shadow-lg shadow-brand-primary/20",children:[i.jsx("span",{className:"text-xl",children:"+"})," Registrar Movimiento"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Bo,{label:"Ingresos Totales",value:`$${(u.monthlyIncome/1e6).toFixed(2)}M`,color:"text-green-600 dark:text-green-400",icon:""}),i.jsx(Bo,{label:"Gastos Operativos",value:`$${(u.monthlyExpenses/1e6).toFixed(2)}M`,color:"text-red-600 dark:text-red-400",icon:""}),i.jsx(Bo,{label:"Pagos a Entrenadores",value:`$${u.commissions.toLocaleString()}`,color:"text-purple-600 dark:text-purple-400",icon:""}),i.jsx(Bo,{label:"Fianzas Activas",value:`$${u.bails.toLocaleString()}`,color:"text-yellow-600 dark:text-yellow-400",icon:""})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Libro de Movimientos"}),i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0",children:["Todos","Ingreso","Gasto","Comisin","Fianza"].map(m=>i.jsx("button",{onClick:()=>a(m),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${s===m?"bg-slate-900 text-white dark:bg-white dark:text-slate-900 shadow-md":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:m},m))})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 font-semibold rounded-l-lg",children:"Fecha"}),i.jsx("th",{className:"p-4 font-semibold",children:"Descripcin"}),i.jsx("th",{className:"p-4 font-semibold",children:"Categora"}),i.jsx("th",{className:"p-4 font-semibold text-center",children:"Tipo"}),i.jsx("th",{className:"p-4 font-semibold text-right rounded-r-lg",children:"Monto"})]})}),i.jsx("tbody",{className:"text-sm",children:n?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"Cargando movimientos..."})}):d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No hay movimientos registrados."})}):d.map(m=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[i.jsx("td",{className:"p-4 font-mono text-slate-500 dark:text-slate-400",children:m.date}),i.jsx("td",{className:"p-4 font-medium text-slate-800 dark:text-white",children:m.description}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:m.category}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:`px-3 py-1 text-[10px] font-bold uppercase rounded-full ${WL[m.type]||"bg-slate-100 text-slate-600"}`,children:m.type})}),i.jsxs("td",{className:`p-4 text-right font-bold ${m.type==="Ingreso"?"text-green-600 dark:text-green-400":m.type==="Gasto"?"text-red-500 dark:text-red-400":"text-slate-800 dark:text-white"}`,children:[m.type==="Ingreso"?"+":"-"," $",m.amount.toLocaleString("es-CO")]})]},m.id))})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Proyeccin Financiera"}),i.jsx("div",{className:"h-80 w-full flex items-center justify-center text-slate-400",children:i.jsx("p",{children:"Registra datos para ver proyecciones."})})]}),o&&i.jsx(KL,{onClose:()=>l(!1),onAdd:p})]})};class so{constructor(t=0,n="Network Error"){this.status=t,this.text=n}}const QL=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},it={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:QL()},Qf=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},ZL=(e,t="https://api.emailjs.com")=>{if(!e)return;const n=Qf(e);it.publicKey=n.publicKey,it.blockHeadless=n.blockHeadless,it.storageProvider=n.storageProvider,it.blockList=n.blockList,it.limitRate=n.limitRate,it.origin=n.origin||t},H1=async(e,t,n={})=>{const r=await fetch(it.origin+e,{method:"POST",headers:n,body:t}),s=await r.text(),a=new so(r.status,s);if(r.ok)return a;throw a},V1=(e,t,n)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},eU=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},F1=e=>e.webdriver||!e.languages||e.languages.length===0,$1=()=>new so(451,"Unavailable For Headless Browser"),tU=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},nU=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},rU=(e,t)=>e instanceof FormData?e.get(t):e[t],J1=(e,t)=>{if(nU(e))return!1;tU(e.list,e.watchVariable);const n=rU(t,e.watchVariable);return typeof n!="string"?!1:e.list.includes(n)},Y1=()=>new so(403,"Forbidden"),sU=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},aU=async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r},K1=async(e,t,n)=>{if(!t.throttle||!n)return!1;sU(t.throttle,t.id);const r=t.id||e;return await aU(r,t.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},W1=()=>new so(429,"Too Many Requests"),iU=async(e,t,n,r)=>{const s=Qf(r),a=s.publicKey||it.publicKey,o=s.blockHeadless||it.blockHeadless,l=s.storageProvider||it.storageProvider,c={...it.blockList,...s.blockList},u={...it.limitRate,...s.limitRate};return o&&F1(navigator)?Promise.reject($1()):(V1(a,e,t),eU(n),n&&J1(c,n)?Promise.reject(Y1()):await K1(location.pathname,u,l)?Promise.reject(W1()):H1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:e,template_id:t,template_params:n}),{"Content-type":"application/json"}))},oU=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},lU=e=>typeof e=="string"?document.querySelector(e):e,cU=async(e,t,n,r)=>{const s=Qf(r),a=s.publicKey||it.publicKey,o=s.blockHeadless||it.blockHeadless,l=it.storageProvider||s.storageProvider,c={...it.blockList,...s.blockList},u={...it.limitRate,...s.limitRate};if(o&&F1(navigator))return Promise.reject($1());const d=lU(n);V1(a,e,t),oU(d);const p=new FormData(d);return J1(c,p)?Promise.reject(Y1()):await K1(location.pathname,u,l)?Promise.reject(W1()):(p.append("lib_version","4.4.1"),p.append("service_id",e),p.append("template_id",t),p.append("user_id",a),H1("/api/v1.0/email/send-form",p))},zx={init:ZL,send:iU,sendForm:cU,EmailJSResponseStatus:so},Bu="emailjs_config",vr={saveConfig:e=>{localStorage.setItem(Bu,JSON.stringify(e)),zx.init(e.publicKey)},getConfig:()=>{const e=localStorage.getItem(Bu);return e?JSON.parse(e):null},clearConfig:()=>{localStorage.removeItem(Bu)},sendEmail:async(e,t,n,r="Notificacin FitnessFlow")=>{const s=vr.getConfig();if(!s||!s.publicKey)return console.warn("EmailJS no configurado. Simulando envo."),{success:!1,error:"Faltan credenciales de EmailJS"};try{const a={to_email:e,to_name:t,message:n,subject:r,from_name:"FitnessFlow App"},o=await zx.send(s.serviceId,s.templateId,a,s.publicKey);return console.log("Email enviado:",o),{success:!0,response:o}}catch(a){return console.error("Error enviando email:",a),{success:!1,error:a}}},isReady:()=>{const e=vr.getConfig();return!!(e!=null&&e.serviceId&&(e!=null&&e.templateId)&&(e!=null&&e.publicKey))}},uU=({onClose:e})=>{const[t,n]=E.useState({serviceId:"",templateId:"",publicKey:""}),{showToast:r}=vn();E.useEffect(()=>{const l=vr.getConfig();l&&n(l)},[]);const s=l=>{n({...t,[l.target.name]:l.target.value})},a=()=>{if(!t.serviceId||!t.templateId||!t.publicKey){r("Por favor completa todos los campos","error");return}vr.saveConfig(t),r("Configuracin guardada exitosamente","success"),e()},o=async()=>{if(!t.serviceId||!t.templateId||!t.publicKey){r("Guarda primero la configuracin","error");return}vr.saveConfig(t),r("Enviando correo de prueba...","info");const l=await vr.sendEmail("test@example.com","Test User","Este es un correo de prueba de validacin.","Validacin Configuracin EmailJS");l.success?r("Prueba exitosa! Revisa la consola o tu bandeja.","success"):(r("Error en la prueba. Revisa las credenciales.","error"),console.error(l.error))};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm animate-fade-in p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-extrabold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""})," Configurar Email Real"]}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Para enviar correos reales, necesitas una cuenta gratuita de ",i.jsx("strong",{children:"EmailJS"}),".",i.jsx("br",{}),i.jsx("a",{href:"https://www.emailjs.com/",target:"_blank",rel:"noopener noreferrer",className:"underline font-bold hover:text-blue-600",children:"Crear cuenta gratis aqu"})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Service ID"}),i.jsx("input",{name:"serviceId",value:t.serviceId,onChange:s,placeholder:"service_xxxxx",className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2.5 text-sm outline-none focus:ring-2 focus:ring-brand-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Template ID"}),i.jsx("input",{name:"templateId",value:t.templateId,onChange:s,placeholder:"template_xxxxx",className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2.5 text-sm outline-none focus:ring-2 focus:ring-brand-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Public Key"}),i.jsx("input",{name:"publicKey",value:t.publicKey,onChange:s,placeholder:"Public key (ej. user_xxxxx)",className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md p-2.5 text-sm outline-none focus:ring-2 focus:ring-brand-primary"})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:o,className:"flex-1 py-2.5 px-4 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-white font-bold rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Probar"}),i.jsx("button",{onClick:a,className:"flex-1 py-2.5 px-4 bg-brand-primary text-white font-bold rounded-lg hover:bg-brand-secondary transition-colors shadow-lg shadow-brand-primary/25",children:"Guardar Configuracin"})]})]})})})},dU=[{id:"1",name:"Recuperacin de Riesgo",trigger:"Ausencia > 7 das",status:"active",message:"Hola {nombre}, te extraamos en el gimnasio!  Tu salud es lo primero. Vuelve esta semana y recibe un batido de cortesa.",stats:{sent:142,opened:"68%",roi:"High"}},{id:"2",name:"Felicitacin de Cumpleaos",trigger:"Fecha de Nacimiento = Hoy",status:"active",message:"Feliz Cumpleaos {nombre}!  Hoy tu entrenamiento corre por nuestra cuenta. Psala increble!",stats:{sent:45,opened:"92%",roi:"N/A"}},{id:"3",name:"Renovacin de Plan",trigger:"Vencimiento en 3 das",status:"paused",message:"{nombre}, tu plan est por vencer. Renueva hoy online para asegurar tu tarifa actual.",stats:{sent:89,opened:"45%",roi:"Med"}},{id:"4",name:"Bienvenida Nuevo Miembro",trigger:"Nuevo Registro",status:"active",message:"Bienvenido a la familia, {nombre}. Recuerda agendar tu valoracin fsica inicial desde la app.",stats:{sent:210,opened:"88%",roi:"N/A"}}],hU=({users:e,onSendNotification:t})=>{const[n,r]=E.useState(dU),[s,a]=E.useState([]),[o,l]=E.useState(!1),{showToast:c}=vn(),u=m=>{r(g=>g.map(v=>{if(v.id===m){const x=v.status==="active"?"paused":"active";return c(`Campaa "${v.name}" ${x==="active"?"activada":"pausada"}`,x==="active"?"success":"info"),{...v,status:x}}return v}))},d=(m,g)=>{r(v=>v.map(x=>x.id===m?{...x,message:g}:x))},p=async m=>{const g=vr.isReady();if(!g&&window.confirm(`EmailJS no est configurado. Deseas configurarlo ahora para enviar correos REALES? 
Cancelar = Simulacin`)){l(!0);return}const v=e.slice(0,3);let x=0,w=0;c(g?"Iniciando envo real via EmailJS...":"Iniciando simulacin de envo...","info");for(const y of v){const b=m.message.replace("{nombre}",y.name.split(" ")[0]);t(y.email,` ${m.name}: ${b}`);let _="sent",S="Simulado";if(g){const N=await vr.sendEmail(y.email,y.name,b,`FitnessFlow: ${m.name}`);N.success?(_="delivered",S="Enviado via Gmail/Outlook"):(_="failed",console.error("Fallo EmailJS:",N.error),S="Error de conexin EmailJS",w++)}const T={id:Date.now()+Math.random(),campaignName:m.name,recipient:y.email,status:_,timestamp:new Date().toLocaleTimeString(),details:S};a(N=>[T,...N]),_!=="failed"&&x++}r(y=>y.map(b=>b.id===m.id?{...b,stats:{...b.stats,sent:b.stats.sent+x}}:b)),w>0?c(`Campaa finalizada. ${x} enviados, ${w} fallidos.`,"warning"):c(`Campaa disparada exitosamente a ${x} usuarios.`,"success")};return i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in space-y-8 relative",children:[o&&i.jsx(uU,{onClose:()=>l(!1)}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-8 gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 dark:text-white",children:"Automatizacin y Retencin"}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 dark:text-slate-400",children:"El piloto automtico para el crecimiento de tu gimnasio."})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-white rounded-lg font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors shadow-sm border border-slate-200 dark:border-slate-600",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:"Configurar Email Real"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:n.map(m=>i.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-xl shadow-sm border transition-all duration-300 ${m.status==="active"?"border-green-200 dark:border-green-900/30 shadow-green-100/50":"border-slate-200 dark:border-slate-700 opacity-90"}`,children:i.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${m.status==="active"?"bg-green-500 animate-pulse":"bg-slate-400"}`}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:m.name}),i.jsxs("span",{className:"text-xs font-mono text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:["Trigger: ",m.trigger]})]})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:m.status==="active",onChange:()=>u(m.id)}),i.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-100 dark:border-slate-700",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Mensaje"}),i.jsx("textarea",{className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md p-3 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-brand-primary outline-none resize-none h-24",value:m.message,onChange:g=>d(m.id,g.target.value)}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsxs("button",{onClick:()=>p(m),className:"text-xs font-bold bg-brand-primary text-white px-3 py-1.5 rounded-lg hover:bg-brand-secondary transition-colors flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Ejecutar Ahora"]})})]}),i.jsxs("div",{className:"flex flex-col justify-center space-y-4 px-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 dark:border-slate-700 pb-2",children:[i.jsx("span",{className:"text-slate-500 text-sm",children:"Enviados Totales"}),i.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:m.stats.sent})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 dark:border-slate-700 pb-2",children:[i.jsx("span",{className:"text-slate-500 text-sm",children:"Tasa Apertura"}),i.jsx("span",{className:"font-bold text-green-500 text-lg",children:m.stats.opened})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-500 text-sm",children:"ROI Estimado"}),i.jsx("span",{className:"font-bold text-brand-primary text-lg",children:m.stats.roi})]})]})]})]})},m.id))}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 p-6 h-fit sticky top-6",children:[i.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[i.jsxs("span",{className:"relative flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),"Actividad en Vivo"]}),i.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:s.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-400 text-sm",children:["No hay actividad reciente.",i.jsx("br",{}),"Ejecuta una campaa para ver el log."]}):s.map(m=>i.jsxs("div",{className:"text-sm border-l-2 border-green-500 pl-3 py-1 animate-slide-in-right",children:[i.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-200",children:m.campaignName}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[i.jsxs("span",{children:["Para: ",m.recipient]}),i.jsx("span",{children:m.timestamp})]}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("span",{className:`inline-block text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wider ${m.status==="failed"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:m.status==="delivered"?"Enviado Real":m.status}),m.details&&i.jsx("span",{className:"text-[10px] text-slate-400 truncate max-w-[120px]",title:m.details,children:m.details})]})]},m.id))})]})]})]})},Rt=({featureName:e})=>i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 m-4",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 p-4 rounded-full mb-6",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:[e," es una funcin Premium"]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-md mb-8",children:"Esta funcionalidad est reservada para usuarios del plan Premium. Desbloquea todo el potencial de FitnessFlow hoy mismo."}),i.jsxs("button",{onClick:()=>alert("Redirigiendo a la pasarela de pagos para actualizar tu plan!"),className:"bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-8 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[i.jsx("span",{children:"Actualizar a Premium"}),i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})]})]}),Oe={async fetchMyServices(){const{data:{user:e}}=await M.auth.getUser();if(!e)throw new Error("No autenticado");const{data:t,error:n}=await M.from("coach_services").select("*").eq("coach_id",e.id);if(n)throw n;return(t||[]).map(r=>({id:r.id,name:r.name,description:r.description,price:r.price,duration:r.duration_min,activeClients:r.active_clients||0,imageUrl:r.image_url,videoUrl:r.video_url,locationType:r.location_type}))},async createService(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("No autenticado");const n={coach_id:t.id,name:e.name,description:e.description,price:e.price,duration_min:e.duration,image_url:e.imageUrl,video_url:e.videoUrl,location_type:e.locationType,active_clients:0},{data:r,error:s}=await M.from("coach_services").insert([n]).select().single();if(s)throw s;return{id:r.id,name:r.name,description:r.description,price:r.price,duration:r.duration_min,imageUrl:r.image_url,videoUrl:r.video_url,locationType:r.location_type,activeClients:r.active_clients}},async updateService(e,t){const n={};t.name&&(n.name=t.name),t.description&&(n.description=t.description),t.price&&(n.price=t.price),t.duration&&(n.duration_min=t.duration),t.imageUrl&&(n.image_url=t.imageUrl),t.videoUrl&&(n.video_url=t.videoUrl),t.locationType&&(n.location_type=t.locationType);const{data:r,error:s}=await M.from("coach_services").update(n).eq("id",e).select().single();if(s)throw s;return{id:r.id,name:r.name,description:r.description,price:r.price,duration:r.duration_min,imageUrl:r.image_url,videoUrl:r.video_url,locationType:r.location_type,activeClients:r.active_clients}},async deleteService(e){const{error:t}=await M.from("coach_services").delete().eq("id",e);if(t)throw t},async fetchMyClients(){const{data:{user:e}}=await M.auth.getUser();if(!e)return[];const{data:t}=await M.from("coach_services").select("id").eq("coach_id",e.id),n=(t==null?void 0:t.map(m=>m.id))||[],{data:r}=await M.from("gym_classes").select("id").eq("gym_id",e.id),s=(r==null?void 0:r.map(m=>m.id))||[];if(n.length===0&&s.length===0)return[];let a=[];if(n.length>0){const{data:m}=await M.from("bookings").select("user_id, booking_date, status").in("service_id",n).in("status",["confirmed"]);a=m||[]}let o=[];if(s.length>0){const{data:m}=await M.from("bookings").select("user_id, booking_date, status").in("class_id",s);o=m||[]}const l=[...a,...o].sort((m,g)=>new Date(g.booking_date).getTime()-new Date(m.booking_date).getTime()),c=[...new Set(l.map(m=>m.user_id))];if(c.length===0)return[];const{data:u}=await M.from("profiles").select("*").in("id",c),{data:d}=await M.from("coach_client_notes").select("*").eq("coach_id",e.id).in("client_id",c).order("created_at",{ascending:!1});return c.map(m=>u==null?void 0:u.find(g=>g.id===m)).filter(Boolean).map(m=>{if(!m)return null;const g=(d==null?void 0:d.filter(y=>y.client_id===m.id).map(y=>y.note))||[],v=a.some(y=>y.user_id===m.id),x=o.some(y=>y.user_id===m.id);let w="service";return v&&x?w="both":x&&(w="class"),{id:m.id,name:m.full_name||"Cliente",email:"cliente@email.com",phone:m.phone||"",joinDate:m.created_at,objective:w==="class"?"Clase Grupal":"Entrenamiento Personal",memberships:"Activo",lastVisit:"Hoy",status:"active",avatar:m.avatar_url,progress:50,goal:"General",notes:g,source:w}}).filter(m=>m!==null)},async addClientNote(e,t){const{data:{user:n}}=await M.auth.getUser();if(!n)throw new Error("No autenticado");const{error:r}=await M.from("coach_client_notes").insert({coach_id:n.id,client_id:e,note:t});if(r)throw r},async fetchSchedule(){const{data:{user:e}}=await M.auth.getUser();if(!e)return[];const{data:t,error:n}=await M.from("bookings").select(`
                id, status, booking_date,
                service:coach_services!inner(name, coach_id),
                user:profiles(full_name)
            `).eq("coach_services.coach_id",e.id);n&&console.error("Error fetching service bookings:",n);const{data:r}=await M.from("gym_classes").select("id, name").eq("gym_id",e.id),s=(r==null?void 0:r.map(l=>l.id))||[];let a=[];if(s.length>0){const{data:l,error:c}=await M.from("bookings").select(`
                    id, status, booking_date, class_id,
                    user:profiles(full_name)
                `).in("class_id",s);c&&console.error("Error fetching class bookings:",c),a=(l||[]).map(u=>{var d;return{...u,isClass:!0,service:{name:((d=r==null?void 0:r.find(p=>p.id===u.class_id))==null?void 0:d.name)||"Clase"}}})}return[...t||[],...a].map(l=>{var c;return{id:l.id,name:l.service.name,bookedBy:((c=l.user)==null?void 0:c.full_name)||"Usuario",status:l.status,schedule:[{day:new Date(l.booking_date).toLocaleDateString(),time:new Date(l.booking_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}],clientAddress:"No especificada",rawDate:l.booking_date,category:l.isClass?"Clase":"Personalizado",coach:"Yo"}})},async updateBookingStatus(e,t){const{error:n}=await M.from("bookings").update({status:t}).eq("id",e);if(n)throw n},async fetchReviews(){const{data:{user:e}}=await M.auth.getUser();if(!e)return[];const{data:t,error:n}=await M.from("coach_reviews").select("*, client:client_id (full_name)").eq("coach_id",e.id).order("created_at",{ascending:!1}).limit(5);return n?(console.error("Error fetching reviews:",n),[]):t.map(r=>{var s;return{id:r.id,client:((s=r.client)==null?void 0:s.full_name)||"Usuario",rating:r.rating,comment:r.comment,date:new Date(r.created_at).toLocaleDateString()}})},async getStats(){const{data:{user:e}}=await M.auth.getUser();if(!e)return{income:0,rating:0,clients:0};const t=await this.fetchMyServices(),n=t.map(c=>c.id);let r=0;if(n.length>0){const{data:c}=await M.from("bookings").select("service_id, status").in("service_id",n).eq("status","confirmed");c&&c.forEach(u=>{const d=t.find(p=>p.id===u.service_id);d&&(r+=Number(d.price||0))})}const{data:s}=await M.from("coach_reviews").select("rating").eq("coach_id",e.id),a=(s==null?void 0:s.reduce((c,u)=>c+u.rating,0))||0,o=s&&s.length>0?a/s.length:0,l=await this.fetchMyClients();return{income:r,rating:o,clients:l.length}},async fetchAllServices(){const{data:e,error:t}=await M.from("coach_services").select("*");if(t)throw t;return(e||[]).map(n=>({id:n.id,name:n.name,description:n.description,price:n.price,duration:n.duration_min,activeClients:n.active_clients||0,imageUrl:n.image_url,videoUrl:n.video_url,locationType:n.location_type,availability:n.availability}))},async bookService(e,t,n,r){var d;const{data:{user:s}}=await M.auth.getUser();if(!s)throw new Error("Debes iniciar sesin para reservar.");const{data:a,error:o}=await M.from("coach_services").select("coach_id, name").eq("id",e).single();if(o||!a)throw new Error("Servicio no encontrado.");const l=new Date(`${t}T${n}`),{error:c}=await M.from("bookings").insert([{user_id:s.id,service_id:e,booking_date:l.toISOString(),status:"pending_confirmation",notes:r?`Direccin Cliente: ${r}`:""}]);if(c)throw c;const{error:u}=await M.from("notifications").insert([{user_id:a.coach_id,message:`Nueva reserva: ${((d=s.user_metadata)==null?void 0:d.full_name)||s.email} ha reservado "${a.name}" para el ${t} a las ${n}.`,type:"booking",read:!1,created_at:new Date().toISOString()}]);u&&console.error("Error creating notification:",u),u&&console.error("Error creating notification:",u)},async saveClientEvaluation(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("No autenticado");const{error:n}=await M.from("coach_client_evaluations").insert([{...e,coach_id:t.id}]);if(n)throw n},async getClientEvaluation(e){const{data:{user:t}}=await M.auth.getUser();if(!t)return null;const{data:n,error:r}=await M.from("coach_client_evaluations").select("*").eq("coach_id",t.id).eq("client_id",e).order("created_at",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")throw r;return n},async fetchAvailability(){const{data:{user:e}}=await M.auth.getUser();if(!e)return[];const{data:t,error:n}=await M.from("coach_details").select("availability").eq("profile_id",e.id).single();if(n&&n.code!=="PGRST116")throw n;return(t==null?void 0:t.availability)||[]},async updateAvailability(e){const{data:{user:t}}=await M.auth.getUser();if(!t)throw new Error("No autenticado");const{error:n}=await M.from("coach_details").upsert({profile_id:t.id,availability:e});if(n)throw n},async blockTime(e,t,n){const{data:{user:r}}=await M.auth.getUser();if(!r)throw new Error("No autenticado");const s=new Date(`${e}T${t}`),{error:a}=await M.from("bookings").insert([{user_id:r.id,service_id:null,class_id:null,booking_date:s.toISOString(),status:"blocked"}]);if(a)throw a},async unblockTime(e){const{error:t}=await M.from("bookings").delete().eq("id",e).eq("status","blocked");if(t)throw t},async fetchBlockedTimes(){const{data:{user:e}}=await M.auth.getUser();if(!e)return[];const{data:t,error:n}=await M.from("bookings").select("id, booking_date").eq("user_id",e.id).eq("status","blocked");if(n)throw n;return t.map(r=>({id:r.id,date:new Date(r.booking_date).toLocaleDateString(),time:new Date(r.booking_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),fullDate:r.booking_date,note:"Bloqueado"}))}},qo=({label:e,value:t,icon:n,colorClass:r="text-slate-800 dark:text-white"})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center gap-4 transition-transform hover:scale-105",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-50 dark:bg-slate-700 flex items-center justify-center text-2xl shadow-inner",children:n}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-2xl font-black ${r}`,children:t})]})]}),fU=({service:e})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:e.name}),i.jsxs("span",{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 text-xs font-bold px-2 py-1 rounded-lg",children:["$",e.price]})]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-4 line-clamp-2",children:e.description}),i.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-400 dark:text-slate-500",children:[i.jsxs("span",{children:[" ",e.activeClients||0," Activos"]}),i.jsx("span",{children:" 4.9"})]})]}),Bx=({onNavigate:e})=>{const[t,n]=E.useState([]),[r,s]=E.useState([]),[a,o]=E.useState([]),[l,c]=E.useState([]),[u,d]=E.useState({income:0,rating:0,clients:0}),[p,m]=E.useState(!0),{showToast:g}=vn(),[v,x]=E.useState(!1),[w,y]=E.useState({name:"",description:"",coach:"",date:"",time:"",capacity:20,category:"Funcional"}),[b,_]=E.useState(null);E.useEffect(()=>{(async()=>{try{m(!0);const[I,A,R,O,D]=await Promise.all([Oe.getStats(),Oe.fetchMyServices(),Nt.fetchMyClasses(),Oe.fetchMyClients(),Oe.fetchReviews()]);d(I),n(A),s(R),o(O),c(D)}catch(I){console.error("Error loading dashboard:",I),g("Error al cargar el panel.","error")}finally{m(!1)}})()},[]);const S=C=>{var I,A,R,O;_(C.id),y({name:C.name,description:C.description||"",coach:C.coach||"",date:((A=(I=C.schedule)==null?void 0:I[0])==null?void 0:A.day)||"",time:((O=(R=C.schedule)==null?void 0:R[0])==null?void 0:O.time)||"",capacity:C.capacity||20,category:C.category||"Funcional"}),x(!0)},T=async()=>{try{const C={name:w.name,description:w.description,coach:w.coach,capacity:w.capacity,category:w.category,schedule:[{day:w.date,time:w.time}]};b?(await Nt.updateClass(b,C),g("Clase actualizada exitosamente","success")):(await Nt.createClass({...C,imageUrl:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?auto=format&fit=crop&w=800&q=80",videoUrl:"",difficulty:"Intermedio",price:0,locationType:"Gimnasio",gymId:""}),g("Clase publicada exitosamente","success"));const I=await Nt.fetchMyClasses();s(I),x(!1),_(null),y({name:"",description:"",coach:"",date:"",time:"",capacity:20,category:"Funcional"})}catch(C){console.error(C),g("Error al guardar clase","error")}},N=async C=>{if(window.confirm("Seguro que deseas eliminar esta clase?"))try{await Nt.deleteClass(C),s(I=>I.filter(A=>A.id!==C)),g("Clase eliminada","success")}catch(I){console.error(I),g("Error al eliminar clase","error")}};return p?i.jsx("div",{className:"p-10 text-center",children:"Cargando panel..."}):i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-10 space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4 border-b border-slate-200 dark:border-slate-700 pb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-white",children:"Panel de Entrenador"}),i.jsxs("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:["Gestiona tus clientes y servicios en ",i.jsx("span",{className:"font-bold text-brand-secondary",children:"FitnessFlow"})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsx("button",{onClick:()=>{_(null),y({name:"",description:"",coach:"",date:"",time:"",capacity:20,category:"Funcional"}),x(!0)},className:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-200 transition-colors text-sm",children:"+ Publicar Clase"})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(qo,{label:"Total Clientes",value:u.clients,icon:""}),i.jsx(qo,{label:"Ingresos Activos",value:`$${u.income.toLocaleString()}`,icon:"",colorClass:"text-green-500"}),i.jsx(qo,{label:"Calificacin",value:u.rating.toFixed(1),icon:"",colorClass:"text-yellow-500"}),i.jsx(qo,{label:"Servicios Activos",value:t.length,icon:"",colorClass:"text-brand-primary"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Mis Clases Grupales"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No has publicado clases grupales an."}):r.map(C=>{var I,A,R,O,D,G;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border-l-4 border-brand-secondary flex justify-between items-center hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm",children:C.name}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-1",children:[i.jsxs("span",{children:[" ",((A=(I=C.schedule)==null?void 0:I[0])==null?void 0:A.day)||"Fecha pendiente"]}),i.jsxs("span",{children:[" ",((O=(R=C.schedule)==null?void 0:R[0])==null?void 0:O.time)||"Hora pendiente"]})]}),i.jsx("div",{className:"mt-2",children:i.jsx("span",{className:"text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-500",children:(G=(D=C.schedule)==null?void 0:D[0])!=null&&G.day&&new Date(C.schedule[0].day)<new Date?"Finalizada":"Activa"})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>S(C),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",title:"Editar",children:""}),i.jsx("button",{onClick:()=>N(C.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Eliminar",children:""})]})]},C.id)})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Mis Servicios"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.length===0?i.jsx("p",{className:"text-slate-500",children:"No tienes servicios activos. Crea uno nuevo!"}):t.map(C=>i.jsx(fU,{service:C},C.id))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Clientes Recientes"}),i.jsx("button",{onClick:()=>e("clients"),className:"text-sm font-bold text-brand-secondary hover:underline",children:"Ver Todos"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 font-semibold rounded-l-lg",children:"Cliente"}),i.jsx("th",{className:"p-3 font-semibold",children:"Membresa"}),i.jsx("th",{className:"p-3 font-semibold text-center",children:"Progreso"}),i.jsx("th",{className:"p-3 font-semibold rounded-r-lg",children:"Accin"})]})}),i.jsx("tbody",{className:"text-sm",children:a.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-slate-500",children:"No tienes clientes an."})}):a.slice(0,5).map(C=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[i.jsx("td",{className:"p-3 font-bold text-slate-700 dark:text-slate-200",children:C.name}),i.jsx("td",{className:"p-3 text-slate-500 dark:text-slate-400",children:C.memberships}),i.jsx("td",{className:"p-3 text-center",children:i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-1.5 mt-1 relative",children:i.jsx("div",{className:"bg-green-500 h-1.5 rounded-full absolute top-0 left-0",style:{width:`${C.progress}%`}})})}),i.jsx("td",{className:"p-3",children:i.jsx("button",{onClick:()=>e("clients"),className:"text-xs font-bold text-brand-secondary hover:underline",children:"Ver Detalles"})})]},C.id))})]})})]})]}),i.jsx("div",{className:"space-y-8",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Opiniones"}),i.jsx("span",{className:"text-xs text-slate-400",children:"Feedback Real"})]}),i.jsx("div",{className:"space-y-4",children:l.length===0?i.jsx("p",{className:"text-xs text-slate-500",children:"Sin reseas an."}):l.map(C=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-xl border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-sm",children:C.client}),i.jsx("span",{className:"text-[10px] text-slate-400",children:C.date})]}),i.jsx("div",{className:"flex text-yellow-400 text-xs mb-2",children:[...Array(5)].map((I,A)=>i.jsx("span",{children:A<C.rating?"":""},A))}),i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300 italic",children:['"',C.comment,'"']})]},C.id))})]})})]}),v&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 dark:text-white",children:b?"Editar Clase":"Publicar Nueva Clase"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Nombre",className:"w-full p-2 border rounded",value:w.name,onChange:C=>y({...w,name:C.target.value})}),i.jsx("input",{type:"text",placeholder:"Entrenador",className:"w-full p-2 border rounded",value:w.coach,onChange:C=>y({...w,coach:C.target.value})}),i.jsx("input",{type:"number",placeholder:"Cupos",className:"w-full p-2 border rounded",value:w.capacity,onChange:C=>y({...w,capacity:parseInt(C.target.value)||0})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:w.date,onChange:C=>y({...w,date:C.target.value})}),i.jsx("input",{type:"time",className:"w-full p-2 border rounded",value:w.time,onChange:C=>y({...w,time:C.target.value})})]}),i.jsx("textarea",{placeholder:"Descripcin",className:"w-full p-2 border rounded",rows:3,value:w.description,onChange:C=>y({...w,description:C.target.value})})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-2 text-slate-500",children:"Cancelar"}),i.jsx("button",{onClick:T,className:"flex-1 py-2 bg-brand-secondary text-white rounded",children:b?"Guardar Cambios":"Publicar"})]})]})})]})},mU=({client:e,onClose:t})=>{const[n,r]=E.useState(0),[s,a]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(""),[d,p]=E.useState("En Progreso"),[m,g]=E.useState(!1),{showToast:v}=vn();E.useEffect(()=>{(async()=>{try{const y=await Oe.getClientEvaluation(e.id.toString());y&&(r(y.rating||0),a(y.feedback||""),l(y.recommendations||""),u(y.observations||""),p(y.general_valuation||"En Progreso"))}catch{}})()},[e.id]);const x=async()=>{g(!0);try{await Oe.saveClientEvaluation({client_id:e.id.toString(),rating:n,feedback:s,recommendations:o,observations:c,general_valuation:d}),v("Evaluacin guardada correctamente","success"),t()}catch(w){console.error(w),v("Error al guardar evaluacin","error")}finally{g(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:w=>w.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:["Evaluacin de Progreso: ",e.name]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:""})]}),i.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Calificacin de Desempeo"}),i.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(w=>i.jsx("button",{onClick:()=>r(w),className:`text-3xl transition-transform hover:scale-110 ${w<=n?"text-yellow-400":"text-slate-300 dark:text-slate-600"}`,children:""},w))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Feedback Tcnico"}),i.jsx("textarea",{value:s,onChange:w=>a(w.target.value),rows:4,placeholder:"Mejoras en tcnica, fuerza...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Recomendaciones"}),i.jsx("textarea",{value:o,onChange:w=>l(w.target.value),rows:4,placeholder:"Nutricin, descanso, hbitos...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none resize-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{value:c,onChange:w=>u(w.target.value),rows:3,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Valoracin Global"}),i.jsxs("select",{value:d,onChange:w=>p(w.target.value),className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none",children:[i.jsx("option",{children:"Excelente Progreso"}),i.jsx("option",{children:"Buen Progreso"}),i.jsx("option",{children:"Estancado"}),i.jsx("option",{children:"Requiere Atencin"}),i.jsx("option",{children:"En Progreso"})]})]})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-700/30 rounded-b-2xl",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium",children:"Cancelar"}),i.jsx("button",{onClick:x,disabled:m,className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary font-bold shadow-lg shadow-brand-primary/20 disabled:opacity-50",children:m?"Guardando...":"Guardar Evaluacin"})]})]})})},pU=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(null),[s,a]=E.useState(!1),[o,l]=E.useState(!0),[c,u]=E.useState(""),{showToast:d}=vn();E.useEffect(()=>{p()},[]);const p=async()=>{l(!0);try{const g=await Oe.fetchMyClients();t(g)}catch(g){console.error("Error fetching clients:",g),d("Error al cargar clientes","error")}finally{l(!1)}},m=e.filter(g=>g.name.toLowerCase().includes(c.toLowerCase()));return o?i.jsx("div",{className:"p-10 text-center",children:"Cargando tus clientes..."}):i.jsxs("div",{className:"container mx-auto px-4 py-8 animate-fade-in space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Mis Clientes"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Expedientes y seguimiento detallado"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 relative w-full md:w-64",children:[i.jsx("input",{type:"text",placeholder:"Buscar cliente...",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary dark:text-white",value:c,onChange:g=>u(g.target.value)}),i.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400",children:""})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1 space-y-4",children:m.length===0?i.jsx("div",{className:"text-center p-8 bg-white dark:bg-slate-800 rounded-xl",children:i.jsx("p",{className:"text-slate-500",children:"No se encontraron clientes."})}):m.map(g=>i.jsx("div",{onClick:()=>r(g),className:`p-4 rounded-xl cursor-pointer transition-all border ${(n==null?void 0:n.id)===g.id?"bg-brand-primary/10 border-brand-primary ring-1 ring-brand-primary":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 hover:border-brand-primary/50"}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:g.avatar?i.jsx("img",{src:g.avatar,alt:g.name,className:"w-full h-full object-cover"}):i.jsx("span",{className:"flex items-center justify-center h-full text-xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:g.name}),g.source&&i.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${g.source==="class"?"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-300":g.source==="both"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":"bg-brand-secondary/10 text-brand-secondary"}`,children:g.source==="class"?"Clase":g.source==="both"?"Ambos":"Privado"})]}),i.jsx("p",{className:"text-xs text-brand-secondary mt-0.5",children:g.goal})]})]})},g.id))}),i.jsx("div",{className:"lg:col-span-2",children:n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-100 dark:border-slate-700 animate-slide-up",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden text-3xl flex items-center justify-center",children:n.avatar?i.jsx("img",{src:n.avatar,alt:n.name,className:"w-full h-full object-cover"}):""}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n.name}),i.jsxs("p",{className:"text-slate-500",children:["Miembro desde ",n.joinDate?new Date(n.joinDate).toLocaleDateString():"N/A"]})]})]}),i.jsxs("button",{onClick:()=>a(!0),className:"bg-brand-secondary text-white px-4 py-2 rounded-lg hover:brightness-110 flex items-center gap-2 text-sm font-bold shadow-md hover:shadow-lg transition-all",children:[i.jsx("span",{children:""})," Evaluar Progreso"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl",children:[i.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:"Telfono"}),i.jsx("span",{className:"text-slate-800 dark:text-slate-200 font-medium",children:n.phone||"No registrado"})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl",children:[i.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:"Objetivo"}),i.jsx("span",{className:"text-slate-800 dark:text-slate-200 font-medium",children:n.goal||"General"})]})]}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4 border-b border-slate-100 pb-2",children:"Expediente & Notas"}),i.jsx("div",{className:"space-y-4 max-h-[300px] overflow-y-auto pr-2",children:n.notes&&n.notes.length>0?n.notes.map((g,v)=>i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-xl border border-amber-100 dark:border-amber-800/30",children:[i.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm whitespace-pre-wrap",children:g}),i.jsx("span",{className:"text-[10px] text-slate-400 mt-2 block text-right",children:"Registrado por Entrenador"})]},v)):i.jsx("p",{className:"text-slate-400 italic text-center py-4",children:"No hay notas registradas para este cliente."})}),s&&n&&i.jsx(mU,{client:n,onClose:()=>a(!1)})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-white dark:bg-slate-800 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700 h-full text-center",children:[i.jsx("span",{className:"text-4xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Selecciona un cliente"}),i.jsx("p",{className:"text-slate-500 max-w-xs mx-auto mt-2",children:"Haz clic en un cliente de la lista para ver su expediente completo y gestionar notas."})]})})]})]})},gU=({requests:e,onConfirm:t,onCancel:n})=>e.length===0?i.jsx("div",{className:"p-8 text-center text-slate-500 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:"No hay solicitudes pendientes."}):i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-200",children:i.jsxs("table",{className:"w-full text-left bg-white",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold text-xs uppercase tracking-wider border-b border-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4",children:"Cliente"}),i.jsx("th",{className:"p-4",children:"Servicio / Clase"}),i.jsx("th",{className:"p-4",children:"Fecha & Hora"}),i.jsx("th",{className:"p-4 text-right",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(r=>i.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[i.jsx("td",{className:"p-4 font-medium text-slate-800",children:r.bookedBy}),i.jsxs("td",{className:"p-4 text-slate-600",children:[r.name," ",r.category==="Clase"&&i.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded ml-2",children:"Grupal"})]}),i.jsxs("td",{className:"p-4 text-slate-600",children:[r.schedule[0].day," ",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-slate-400",children:r.schedule[0].time})]}),i.jsxs("td",{className:"p-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>n(r.id),className:"text-red-500 hover:text-red-700 text-sm font-medium px-2 py-1",children:"Rechazar"}),i.jsx("button",{onClick:()=>t(r.id),className:"bg-brand-primary text-white text-sm font-bold px-4 py-1.5 rounded-lg hover:bg-brand-secondary transition-colors shadow-sm",children:"Confirmar"})]})]},r.id))})]})}),xU=({sessions:e})=>e.length===0?i.jsx("div",{className:"p-8 text-center text-slate-500 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:"No hay historial de sesiones."}):i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-200",children:i.jsxs("table",{className:"w-full text-left bg-white",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold text-xs uppercase tracking-wider border-b border-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4",children:"Fecha"}),i.jsx("th",{className:"p-4",children:"Cliente"}),i.jsx("th",{className:"p-4",children:"Actividad"}),i.jsx("th",{className:"p-4",children:"Estado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(t=>i.jsxs("tr",{className:"hover:bg-slate-50/50",children:[i.jsxs("td",{className:"p-4 text-slate-600",children:[t.schedule[0].day,i.jsx("span",{className:"block text-xs text-slate-400",children:t.schedule[0].time})]}),i.jsx("td",{className:"p-4 text-slate-800",children:t.bookedBy}),i.jsx("td",{className:"p-4 text-slate-600 font-medium",children:t.name}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${t.status==="completed"?"bg-green-100 text-green-700":t.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:t.status==="completed"?"Completada":t.status==="cancelled"?"Cancelada":t.status})})]},t.id))})]})}),yU=({availability:e,onSave:t,isSaving:n})=>{const r=["Lunes","Martes","Mircoles","Jueves","Viernes","Sbado","Domingo"],s=Array.from({length:15},(c,u)=>`${u+6}:00`.padStart(5,"0")),[a,o]=E.useState(e);E.useEffect(()=>{o(e)},[e]);const l=(c,u)=>{o(d=>{const p=d.find(m=>m.day===c);if(p){const g=p.hours.includes(u)?p.hours.filter(x=>x!==u):[...p.hours,u],v=d.filter(x=>x.day!==c);return g.length>0?[...v,{day:c,hours:g}]:v}else return[...d,{day:c,hours:[u]}]})};return i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Horario Base Semanal"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Define tus franjas horarias generales."})]}),i.jsx("button",{onClick:()=>t(a),disabled:n,className:"bg-brand-primary text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-secondary transition-colors disabled:opacity-50",children:n?"Guardando...":"Guardar Cambios"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4",children:r.map(c=>i.jsxs("div",{className:"border border-slate-100 rounded-lg p-3 bg-slate-50/50",children:[i.jsx("h4",{className:"font-bold text-center text-slate-700 mb-3 text-sm",children:c}),i.jsx("div",{className:"grid grid-cols-2 gap-1",children:s.map(u=>{var p;const d=(p=a.find(m=>m.day===c))==null?void 0:p.hours.includes(u);return i.jsx("button",{onClick:()=>l(c,u),className:`text-xs py-1 rounded transition-colors ${d?"bg-brand-primary text-white font-bold":"bg-white text-slate-400 hover:bg-slate-200"}`,children:u},u)})})]},c))})]})},vU=({upcomingSessions:e,blockedTimes:t,onBlockTime:n,onUnblockTime:r})=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[i.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[i.jsx("h3",{className:"font-bold text-slate-700",children:"Prximas Sesiones"}),i.jsxs("span",{className:"text-xs font-semibold bg-brand-primary/10 text-brand-primary px-2 py-0.5 rounded-full",children:[e.length," Activas"]})]}),e.length>0?i.jsx("div",{className:"divide-y divide-slate-100",children:e.map(s=>i.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"bg-indigo-100 text-indigo-600 w-12 h-12 rounded-lg flex flex-col items-center justify-center font-bold text-xs leading-none",children:[i.jsx("span",{className:"text-lg",children:s.schedule[0].day.split("/")[0]}),i.jsx("span",{className:"uppercase text-[10px] opacity-75",children:"DIC"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-800",children:s.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:[s.bookedBy,"  ",s.schedule[0].time]})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded border ${s.category==="Personalizado"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100"}`,children:s.category})})]},s.id))}):i.jsx("div",{className:"p-8 text-center text-slate-400 italic",children:"No tienes sesiones prximas confirmadas."})]})}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-slate-800 text-white rounded-xl p-6 shadow-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Bloqueos Excepcionales"}),i.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Gestiona tiempos no disponibles fuera de tu horario base."}),i.jsx("button",{onClick:n,className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm font-bold border border-white/20 mb-4 transition-colors",children:"+ Aadir Bloqueo (Da Libre)"}),i.jsxs("div",{className:"space-y-2",children:[t.map(s=>i.jsxs("div",{className:"bg-slate-700/50 p-3 rounded flex justify-between items-center text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block font-bold text-slate-200",children:s.date}),i.jsxs("span",{className:"text-xs text-slate-400",children:[s.time||"Todo el da"," - ",s.note]})]}),i.jsx("button",{onClick:()=>r(s.id),className:"text-red-400 hover:text-red-300",children:""})]},s.id)),t.length===0&&i.jsx("p",{className:"text-xs text-slate-500 italic",children:"No hay bloqueos activos."})]})]})})]}),bU=()=>{const[e,t]=E.useState("agenda"),[n,r]=E.useState([]),[s,a]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(!0),{showToast:d}=vn(),p=async()=>{u(!0);try{const[S,T,N]=await Promise.all([Oe.fetchSchedule(),Oe.fetchAvailability(),Oe.fetchBlockedTimes()]);r(S),a(T),l(N||[])}catch(S){console.error(S),d("Error cargando datos","error")}finally{u(!1)}};E.useEffect(()=>{p()},[]);const m=E.useMemo(()=>n.filter(S=>S.status==="pending_confirmation"),[n]),g=E.useMemo(()=>n.filter(S=>S.status!=="confirmed"?!1:S.rawDate?new Date(S.rawDate)>=new Date:!0).sort((S,T)=>new Date(S.rawDate||S.schedule[0].day).getTime()-new Date(T.rawDate||T.schedule[0].day).getTime()),[n]),v=E.useMemo(()=>n.filter(S=>{const T=S.status==="confirmed"&&S.rawDate&&new Date(S.rawDate)<new Date;return["completed","cancelled"].includes(S.status)||T}).sort((S,T)=>new Date(T.rawDate||T.schedule[0].day).getTime()-new Date(S.rawDate||S.schedule[0].day).getTime()),[n]),x=async S=>{try{await Oe.updateBookingStatus(S,"confirmed"),d("Solicitud confirmada","success"),p()}catch{d("Error al confirmar","error")}},w=async S=>{if(confirm("Rechazar solicitud?"))try{await Oe.updateBookingStatus(S,"cancelled"),d("Solicitud rechazada","info"),p()}catch{d("Error","error")}},y=async S=>{try{await Oe.updateAvailability(S),a(S),d("Disponibilidad actualizada","success")}catch{d("Error guardando","error")}},b=async()=>{const S=prompt("Ingresa la fecha a bloquear (YYYY-MM-DD):");if(!S)return;const T=prompt("Hora (HH:MM) o dejalo vacio para todo el dia:","08:00");if(T)try{await Oe.blockTime(S,T,"Bloqueo manual"),d("Bloqueo aadido","success"),p()}catch(N){console.error(N),d("Error","error")}},_=async S=>{if(confirm("Eliminar bloqueo?"))try{await Oe.unblockTime(S),d("Bloqueo eliminado","success"),p()}catch{d("Error","error")}};return c?i.jsx("div",{className:"p-12 text-center animate-pulse text-slate-400",children:"Cargando Gestor de Agenda..."}):i.jsxs("div",{className:"container mx-auto px-4 py-8 animate-fade-in space-y-8",children:[i.jsxs("header",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 border-b border-slate-100 pb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold text-slate-900",children:"Mi Horario"}),i.jsx("p",{className:"text-slate-500",children:"Gestin centralizada de tu tiempo y sesiones."})]}),i.jsx("div",{className:"flex bg-slate-100 p-1 rounded-xl overflow-hidden shadow-sm",children:["agenda","solicitudes","historial","config"].map(S=>i.jsxs("button",{onClick:()=>t(S),className:`px-4 py-2 text-sm font-bold rounded-lg transition-all ${e===S?"bg-white text-brand-primary shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[S.charAt(0).toUpperCase()+S.slice(1),S==="solicitudes"&&m.length>0&&i.jsx("span",{className:"ml-2 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:m.length})]},S))})]}),i.jsxs("main",{children:[e==="agenda"&&i.jsx(vU,{upcomingSessions:g,blockedTimes:o,onBlockTime:b,onUnblockTime:_}),e==="solicitudes"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Solicitudes por Confirmar"}),i.jsx(gU,{requests:m,onConfirm:x,onCancel:w})]}),e==="historial"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Historial de Actividad"}),i.jsx(xU,{sessions:v})]}),e==="config"&&i.jsx(yU,{availability:s,onSave:y,isSaving:!1})]})]})},wU=({service:e,onViewDetails:t,isCoachView:n=!1,onEdit:r,onDelete:s})=>{const a=E.useRef(null),[o,l]=E.useState(!1),[c,u]=E.useState(!1);E.useEffect(()=>{const p=a.current;if(!p)return;let m;o?(p.ended&&(p.currentTime=0),p.readyState>=2||c||p.load(),m=p.play(),m!==void 0&&m.catch(g=>{g.name!=="AbortError"&&console.log("Video play interrupted")})):(p.pause(),p.currentTime=0)},[o,c]);const d=()=>{u(!0)};return i.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-slate-200 flex flex-col overflow-hidden ${n?"":"transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl"}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:i.jsxs("div",{className:"flex flex-col flex-grow text-left focus:outline-none rounded-lg disabled:cursor-default group relative",children:[i.jsxs("div",{className:"relative w-full h-48 bg-black overflow-hidden cursor-pointer",onClick:()=>!n&&t(e),children:[e.videoUrl?i.jsxs(i.Fragment,{children:[i.jsx("video",{ref:a,src:e.videoUrl,poster:e.imageUrl,className:`w-full h-full object-cover transition-opacity duration-300 ${o&&c?"opacity-100":"opacity-0 absolute inset-0"}`,muted:!0,loop:!0,playsInline:!0,preload:"metadata",onLoadedData:d}),i.jsx("img",{src:e.imageUrl,alt:e.name,className:`w-full h-full object-cover transition-transform duration-500 ${o?"scale-105":""} ${o&&c?"opacity-0":"opacity-100"}`}),o&&!c&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-[1px] z-20",children:i.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}):i.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.videoUrl&&!o&&i.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black/30 backdrop-blur-sm p-2 rounded-full border border-white/20 transition-opacity duration-300",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 z-10",children:i.jsxs("p",{className:"text-white text-xs font-bold flex items-center gap-1",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.coach]})})]}),i.jsxs("div",{className:"p-4 flex flex-col flex-grow bg-white relative z-10",children:[i.jsx("h3",{className:"font-bold text-slate-800 line-clamp-1",children:e.name}),i.jsx("p",{className:"text-sm text-slate-600 mt-1 flex-grow line-clamp-2",children:e.description}),i.jsxs("div",{className:"text-xs text-slate-500 mt-3 flex justify-between items-center pt-3 border-t border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{children:[e.duration," min"]})]}),i.jsxs("span",{className:"font-bold text-brand-primary text-base",children:["$",e.price.toLocaleString("es-CO")]})]})]}),n?i.jsxs("div",{className:"px-4 pb-4 bg-white mt-auto flex gap-2",children:[i.jsxs("button",{onClick:p=>{p.stopPropagation(),r&&r(e)},className:"flex-1 py-2 px-3 text-sm font-bold text-slate-600 bg-slate-100 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]}),i.jsxs("button",{onClick:p=>{p.stopPropagation(),s&&s(e)},className:"flex-1 py-2 px-3 text-sm font-bold text-slate-600 bg-slate-100 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors flex items-center justify-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})]}):i.jsx("div",{className:"px-4 pb-4 bg-white mt-auto cursor-pointer",onClick:()=>t(e),children:i.jsx("div",{className:"w-full bg-slate-50 text-brand-primary font-bold text-sm py-2.5 px-4 rounded-lg text-center border border-brand-primary/20 group-hover:bg-brand-primary group-hover:text-white transition-colors",children:"Ver Detalles y Reservar"})})]})})},_U={0:"Domingo",1:"Lunes",2:"Martes",3:"Mircoles",4:"Jueves",5:"Viernes",6:"Sbado"},qr=()=>{const e=[];for(let t=6;t<=21;t++)e.push(`${t.toString().padStart(2,"0")}:00`);return e},SU=[{day:"Lunes",hours:qr()},{day:"Martes",hours:qr()},{day:"Mircoles",hours:qr()},{day:"Jueves",hours:qr()},{day:"Viernes",hours:qr()},{day:"Sbado",hours:qr()},{day:"Domingo",hours:qr()}],NU=({service:e,onClose:t,onConfirm:n})=>{const[r,s]=E.useState(""),[a,o]=E.useState(""),[l,c]=E.useState(""),[u,d]=E.useState(""),p=E.useMemo(()=>e.availability&&e.availability.length>0?e.availability:SU,[e.availability]),m=E.useMemo(()=>{if(!r)return[];const v=new Date(`${r}T12:00:00`),x=_U[v.getDay()],w=p.find(y=>y.day===x);return w?w.hours:[]},[r,p]),g=()=>{if(!r||!a){d("Por favor, selecciona una fecha y hora.");return}if(e.locationType==="A Domicilio"&&!l.trim()){d("Por favor, ingresa tu direccin para el servicio a domicilio.");return}d(""),n(e,r,a,l),t()};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto flex flex-col",onClick:v=>v.stopPropagation(),children:[i.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center sticky top-0 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm z-10",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:e.name}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-800 dark:hover:text-white",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-auto object-cover rounded-xl shadow-md mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:e.description}),i.jsxs("div",{className:"mt-4 text-sm space-y-2 text-slate-700 dark:text-slate-300",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Coach:"})," ",e.coach]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Duracin:"})," ",e.duration," minutos"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Ubicacin:"})," ",e.locationType]}),i.jsxs("p",{className:"text-xl font-bold text-brand-primary mt-2",children:["$",e.price.toLocaleString("es-CO")]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Agendar tu sesin"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"booking-date",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"1. Selecciona la fecha"}),i.jsx("input",{type:"date",id:"booking-date",value:r,onChange:v=>{s(v.target.value),o("")},min:new Date().toISOString().split("T")[0],className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"booking-time",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"2. Selecciona la hora"}),i.jsxs("select",{id:"booking-time",value:a,onChange:v=>o(v.target.value),disabled:!r||m.length===0,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-primary disabled:bg-slate-100 dark:disabled:bg-slate-800 dark:disabled:text-slate-500",children:[i.jsxs("option",{value:"",children:["-- ",m.length>0?"Horas disponibles":"No hay horas disponibles"," --"]}),m.map(v=>i.jsx("option",{value:v,children:v},v))]})]}),e.locationType==="A Domicilio"&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"client-address",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"3. Ingresa tu direccin *"}),i.jsx("input",{type:"text",id:"client-address",value:l,onChange:v=>c(v.target.value),placeholder:"Ej: Calle 10 #43A-50, Apto 123",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white mb-2",children:"Disponibilidad (Horario General)"}),i.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto",children:p.length>0?p.map((v,x)=>i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded-lg text-sm w-full",children:[i.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200 block",children:v.day}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs",children:v.hours.length>5?`${v.hours[0]} - ${v.hours[v.hours.length-1]} (${v.hours.length} slots)`:v.hours.join(", ")})]},x)):i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay horarios definidos."})}),u&&i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-2 rounded",children:u})]})]}),i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 sticky bottom-0",children:i.jsx("button",{onClick:g,disabled:!r||!a,className:"w-full bg-brand-primary text-white font-bold py-3 px-6 rounded-lg hover:bg-brand-secondary transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed shadow-lg",children:"Enviar Solicitud de Reserva"})})]})})},EU=({onClose:e,onSave:t,initialService:n})=>{const r=!!n,[s,a]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState("60"),[d,p]=E.useState("50000"),[m,g]=E.useState(""),[v,x]=E.useState("Gimnasio"),[w,y]=E.useState(""),[b,_]=E.useState(!1);E.useEffect(()=>{var T,N;n&&(a(n.name),l(n.description),u(((T=n.duration)==null?void 0:T.toString())||"60"),p(((N=n.price)==null?void 0:N.toString())||"0"),g(n.imageUrl||""))},[n]);const S=async T=>{if(T.preventDefault(),!s.trim()||!o.trim()||!c||!d||!m){y("Por favor, completa todos los campos, incluyendo la imagen.");return}y(""),_(!0);try{let N=m;if(!N){const{keyword:C}=await qg(s,o);N=`https://source.unsplash.com/featured/?${encodeURIComponent(C)},fitness`}await t({...n?{id:n.id}:{},name:s,description:o,duration:parseInt(c),price:parseInt(d),imageUrl:N,locationType:v}),e()}catch(N){console.error(N),y("Error al guardar el servicio. Intntalo de nuevo.")}finally{_(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex justify-center items-center p-4 animate-fade-in",onClick:e,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-[90%] md:w-full max-w-2xl max-h-[60vh] md:max-h-[90vh] mb-24 md:mb-0 flex flex-col",onClick:T=>T.stopPropagation(),children:i.jsxs("form",{onSubmit:S,className:"flex flex-col h-full overflow-hidden",children:[i.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 shrink-0",children:i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:r?"Editar Servicio":"Aadir Nuevo Servicio"})}),i.jsx("div",{className:"p-4 overflow-y-auto custom-scrollbar flex-1",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-slate-700 dark:text-slate-300 text-sm font-bold mb-1",children:"Nombre"}),i.jsx("input",{type:"text",value:s,onChange:T=>a(T.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none",placeholder:"Ej: Entrenamiento Hipertrofia",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Duracin (min)"}),i.jsx("input",{type:"number",value:c,onChange:T=>u(T.target.value),required:!0,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Precio (COP)"}),i.jsx("input",{type:"number",value:d,onChange:T=>p(T.target.value),required:!0,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),i.jsxs("select",{value:v,onChange:T=>x(T.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary",children:[i.jsx("option",{value:"Gimnasio",children:"Gimnasio"}),i.jsx("option",{value:"A Domicilio",children:"A Domicilio"}),i.jsx("option",{value:"Virtual",children:"Virtual"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Descripcin"}),i.jsx("textarea",{value:o,onChange:T=>l(T.target.value),rows:4,required:!0,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-brand-primary focus:outline-none resize-none"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Imagen del Servicio (IA)"}),i.jsx("div",{className:"rounded-xl overflow-hidden bg-slate-100 dark:bg-slate-700 aspect-video flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-inner relative group",children:m?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("button",{type:"button",onClick:()=>g(""),className:"text-white text-xs font-bold bg-red-500 px-3 py-1.5 rounded-full hover:bg-red-600 transition-colors shadow-lg",children:"Eliminar imagen"})})]}):i.jsxs("div",{className:"text-center p-4",children:[i.jsx("span",{className:"text-4xl mb-2 block animate-pulse",children:""}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Generacin automtica con IA"})]})}),i.jsx("button",{type:"button",onClick:async()=>{if(!s&&!o){y("Ingresa un nombre o descripcin para generar la imagen.");return}_(!0),y("");const T={fuerza:"https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&w=800&q=80",hipertrofia:"https://images.unsplash.com/photo-1581009146145-b5ef050c2e1e?auto=format&fit=crop&w=800&q=80",cardio:"https://images.unsplash.com/photo-1538805060512-e2d966d1129f?auto=format&fit=crop&w=800&q=80",yoga:"https://images.unsplash.com/photo-1544367563-12123d8965cd?auto=format&fit=crop&w=800&q=80",pilates:"https://images.unsplash.com/photo-1518611012118-696072aa579a?auto=format&fit=crop&w=800&q=80",crossfit:"https://images.unsplash.com/photo-1517963879433-6ad2b056d712?auto=format&fit=crop&w=800&q=80",general:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?auto=format&fit=crop&w=800&q=80"};try{let N="fitness";try{N=(await qg(s,o)).keyword}catch(A){console.warn("AI Generation failed, falling back to local analysis",A);const R=(s+" "+o).toLowerCase();R.includes("yoga")?N="yoga":R.includes("cardio")||R.includes("correr")?N="cardio":R.includes("fuerza")||R.includes("pesas")?N="fuerza":R.includes("pilates")?N="pilates":R.includes("crossfit")&&(N="crossfit")}let C=T[N.toLowerCase()]||T.general;C=(A=>(A=A.toLowerCase(),A.includes("yoga")||A.includes("flexibility")?T.yoga:A.includes("run")||A.includes("cardio")||A.includes("endurance")?T.cardio:A.includes("strength")||A.includes("muscle")||A.includes("weight")||A.includes("hypertrophy")||A.includes("gym")?T.fuerza:A.includes("pilates")?T.pilates:A.includes("crossfit")||A.includes("hiit")?T.crossfit:T.general))(N),g(C),y("")}catch(N){console.error(N),g(T.general),y("")}finally{_(!1)}},disabled:b,className:"w-full py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold rounded-lg shadow-md hover:shadow-lg hover:brightness-110 active:scale-95 transition-all flex items-center justify-center gap-2 text-sm",children:b?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),i.jsx("span",{children:"Generando..."})]}):i.jsx(i.Fragment,{children:i.jsx("span",{children:" Generar Nueva Imagen"})})}),w&&i.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium flex items-center gap-2",children:[" ",w]})}),i.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500 leading-relaxed",children:i.jsxs("p",{children:[" ",i.jsx("strong",{children:"Tip:"})," Describe bien tu servicio para obtener la mejor imagen posible. La IA seleccionar palabras clave basadas en tu ttulo y descripcin."]})})]})]})}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 shrink-0 rounded-b-2xl",children:[i.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 text-sm font-bold text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",disabled:b,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-5 py-2 text-sm font-bold text-white bg-brand-primary rounded-lg hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-brand-primary/20 transition-all hover:shadow-brand-primary/40",disabled:b,children:b?"Guardando...":r?"Guardar Cambios":"Crear Servicio"})]})]})})})},CU=({text:e})=>i.jsxs("div",{className:"relative flex items-center group ml-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 bg-slate-800 text-white text-sm rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10 shadow-lg",children:[e,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-slate-800"})]})]}),kU={pending_confirmation:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"},TU={pending_confirmation:"Pendiente de Confirmacin",confirmed:"Confirmada",completed:"Completada",cancelled:"Cancelada"},qx=({user:e,allClasses:t,isCoachView:n=!1})=>{const[r,s]=E.useState([]),[a,o]=E.useState(!0),[l,c]=E.useState(null),[u,d]=E.useState(!1),[p,m]=E.useState(null),{showToast:g}=vn(),v=(t==null?void 0:t.filter(N=>N.bookedBy===e.name&&N.category==="Personalizado"))||[],x=async()=>{o(!0);try{const N=n?await Oe.fetchMyServices():await Oe.fetchAllServices();s(N)}catch(N){console.error("Error loading services",N),g("Error al cargar servicios","error")}finally{o(!1)}};E.useEffect(()=>{x()},[n]);const w=async(N,C,I,A)=>{try{await Oe.bookService(N.id,C,I,A),g("Servicio reservado correctamente","success"),c(null)}catch(R){console.error(R),g("Error al reservar servicio","error")}},y=async N=>{try{p?(await Oe.updateService(p.id,N),g("Servicio actualizado exitosamente","success")):(await Oe.createService(N),g("Servicio creado exitosamente","success")),d(!1),m(null),x()}catch(C){console.error(C),g("Error al guardar servicio","error")}},b=N=>{m(N),d(!0)},_=async N=>{if(window.confirm(`Seguro que deseas eliminar el servicio "${N.name}"?`))try{await Oe.deleteService(N.id),g("Servicio eliminado","success"),x()}catch(C){console.error(C),g("Error al eliminar servicio","error")}},S=n?"Gestin de Servicios":"Entrenamiento Personal",T=n?"As es como los usuarios ven los servicios que ofreces. Aade nuevos para expandir tu oferta.":"Reserva sesiones uno a uno con nuestros entrenadores expertos.";return a?i.jsx("div",{className:"p-12 text-center text-slate-500",children:"Cargando servicios..."}):i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-12 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900",children:S}),!n&&i.jsx(CU,{text:"Haz clic en 'Ver Detalles y Reservar' en cualquier servicio para ver la disponibilidad del entrenador y agendar tu sesin personalizada."})]}),i.jsx("p",{className:"mt-2 text-lg text-slate-600 max-w-2xl",children:T})]}),n&&i.jsxs("button",{onClick:()=>{m(null),d(!0)},className:"bg-brand-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-brand-secondary transition-colors flex items-center gap-2 mt-4 md:mt-0",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Aadir Nuevo Servicio"]})]}),!n&&v.length>0&&i.jsxs("div",{className:"mb-12",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Sesiones Agendadas"}),i.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-slate-200 space-y-3",children:v.map(N=>{var C;return i.jsxs("div",{className:"p-3 border-b last:border-b-0 flex flex-col sm:flex-row justify-between sm:items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-700",children:N.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:["con ",N.coach]}),N.status==="confirmed"&&((C=N.schedule)==null?void 0:C[0])&&i.jsxs("p",{className:"text-sm text-green-600 font-semibold",children:[N.schedule[0].day,", ",N.schedule[0].time]})]}),i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full mt-2 sm:mt-0 ${kU[N.status||"pending_confirmation"]}`,children:TU[N.status||"pending_confirmation"]})]},N.id)})})]}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:n?"Mis Servicios Actuales":"Servicios Disponibles"}),r.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(N=>i.jsx(wU,{service:N,onViewDetails:c,isCoachView:n,onEdit:b,onDelete:_},N.id))}):i.jsx("div",{className:"text-center py-12 text-slate-500 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:n?"An no has creado servicios. Crea el primero para empezar a recibir clientes!":"No hay servicios de entrenamiento personal disponibles en este momento."}),l&&i.jsx(NU,{service:l,onClose:()=>c(null),onConfirm:w}),u&&i.jsx(EU,{onClose:()=>{d(!1),m(null)},onSave:y,initialService:p})]})},Zf=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),jU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),AU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),RU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.125-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.125-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),IU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),X1=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.871 4.871a2.25 2.25 0 013.182 0l1.82 1.819a2.25 2.25 0 003.182 0l1.82-1.82a2.25 2.25 0 013.182 0l1.82 1.82a2.25 2.25 0 003.182 0l1.82-1.82a2.25 2.25 0 013.182 0M4.87 19.129a2.25 2.25 0 003.182 0l1.82-1.82a2.25 2.25 0 013.182 0l1.82 1.82a2.25 2.25 0 003.182 0l1.82-1.82a2.25 2.25 0 013.182 0"})}),MU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1a6 6 0 00-1.781-4.121"})}),DU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),PU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),LU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.125-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.125-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),UU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Q1=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2h2"})}),OU=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),zU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),BU=[{name:"Dashboard",icon:i.jsx(Zf,{})},{name:"Mis Rutinas",icon:i.jsx(jU,{})},{name:"Biblioteca",icon:i.jsx(AU,{})},{name:"Clases Grupales",icon:i.jsx(RU,{})},{name:"Entrenamiento Personal",icon:i.jsx(Q1,{})},{name:"Explorar Gimnasios",icon:i.jsx(OU,{})},{name:"Mi Progreso",icon:i.jsx(IU,{})},{name:"Bienestar AI",icon:i.jsx(X1,{})}],qU=[{name:"Dashboard",icon:i.jsx(Zf,{})},{name:"Miembros",icon:i.jsx(MU,{})},{name:"Automatizacin",icon:i.jsx(zU,{})},{name:"Inventario",icon:i.jsx(DU,{})},{name:"Finanzas",icon:i.jsx(PU,{})}],GU=[{name:"Dashboard",icon:i.jsx(Zf,{})},{name:"Mis Clientes",icon:i.jsx(LU,{})},{name:"Mi Horario",icon:i.jsx(UU,{})},{name:"Servicios",icon:i.jsx(Q1,{})},{name:"Bienestar AI",icon:i.jsx(X1,{})}],HU=({user:e,users:t,onLogout:n,theme:r,onToggleTheme:s,onSendNotification:a,onMarkNotificationsAsRead:o,onNavigateToLogin:l,onNavigateToRegister:c})=>{const[u,d]=E.useState(!1);E.useEffect(()=>{sessionStorage.getItem("isNewRegistration")==="true"&&e.hasCompletedOnboarding&&d(!0)},[e.email,e.hasCompletedOnboarding]);const p=()=>{d(!1),localStorage.setItem(`tour_seen_${e.email}`,"true"),sessionStorage.removeItem("isNewRegistration")};E.useEffect(()=>{},[e.accountType]);const m=E.useMemo(()=>{switch(e.accountType){case"gym":return qU;case"entrenador":return GU;case"user":default:return BU}},[e.accountType]),[g,v]=E.useState(m[0].name);E.useEffect(()=>{m.some(S=>S.name===g)||v(m[0].name)},[m]);const x=e.plan==="premium"||e.subscriptionStatus==="trial",w=e.plan==="bsico"||e.plan==="premium"||e.subscriptionStatus==="trial",y=()=>{if(e.accountType==="user")switch(g){case"Dashboard":return i.jsx(Gg,{user:e,onNavigate:v});case"Biblioteca":return i.jsx(_3,{onNavigate:v});case"Explorar Gimnasios":return i.jsx(V3,{});case"Mis Rutinas":return w?i.jsx(m3,{}):i.jsx(Rt,{featureName:"Rutinas Personalizadas"});case"Mi Progreso":return w?i.jsx(A3,{user:e}):i.jsx(Rt,{featureName:"Seguimiento de Progreso"});case"Clases Grupales":return x?i.jsx(k3,{}):i.jsx(Rt,{featureName:"Clases Grupales"});case"Bienestar AI":return x?i.jsx(Hg,{user:e}):i.jsx(Rt,{featureName:"AI Coach"});case"Entrenamiento Personal":return x?i.jsx(qx,{user:e}):i.jsx(Rt,{featureName:"Entrenamiento Personal"});default:return i.jsx(Gg,{user:e,onNavigate:v})}if(e.accountType==="gym")switch(g){case"Dashboard":return i.jsx(Lx,{onNavigate:v});case"Miembros":return w?i.jsx(VL,{onNavigate:v}):i.jsx(Rt,{featureName:"Gestin de Miembros"});case"Inventario":return w?i.jsx(YL,{}):i.jsx(Rt,{featureName:"Inventario"});case"Automatizacin":return x?i.jsx(hU,{users:t,onSendNotification:a}):i.jsx(Rt,{featureName:"Automatizacin y Marketing"});case"Finanzas":return x?i.jsx(XL,{}):i.jsx(Rt,{featureName:"Gestin Financiera"});default:return i.jsx(Lx,{onNavigate:v})}if(e.accountType==="entrenador")switch(g){case"Dashboard":return i.jsx(Bx,{onNavigate:v});case"Mis Clientes":return w?i.jsx(pU,{}):i.jsx(Rt,{featureName:"Gestin de Clientes"});case"Mi Horario":return w?i.jsx(bU,{}):i.jsx(Rt,{featureName:"Agenda Inteligente"});case"Servicios":return x?i.jsx(qx,{isCoachView:!0,user:e}):i.jsx(Rt,{featureName:"Gestin de Servicios"});case"Bienestar AI":return x?i.jsx(Hg,{user:e}):i.jsx(Rt,{featureName:"AI Coach Pro"});default:return i.jsx(Bx,{onNavigate:v})}return null},b=()=>e.accountType==="user"?[{targetId:"nav-item-0",title:"Tu Centro de Control",content:"Aqu vers un resumen de tu actividad diaria, prximas clases y consejos rpidos.",position:"right"},{targetId:"nav-item-1",title:"Rutinas con IA",content:"Genera planes de entrenamiento personalizados en segundos usando nuestra inteligencia artificial.",position:"right"},{targetId:"nav-item-7",title:"Tu Coach Personal",content:"Habla con nuestra IA sobre nutricin, bienestar o dudas de ejercicios 24/7.",position:"right"}]:e.accountType==="gym"?[{targetId:"nav-item-0",title:"Gestin Total",content:"Monitorea KPIs clave, ingresos y miembros en riesgo desde un solo lugar.",position:"right"},{targetId:"nav-item-1",title:"Base de Miembros",content:"Administra suscripciones, estados de pago y perfiles de tus clientes.",position:"right"},{targetId:"nav-item-3",title:"Salud Financiera",content:"Registra ingresos y gastos para mantener la rentabilidad de tu negocio.",position:"right"}]:[{targetId:"nav-item-0",title:"Tu Oficina Digital",content:"Gestiona tus clientes, prximas sesiones y disponibilidad.",position:"right"},{targetId:"nav-item-2",title:"Agenda Inteligente",content:"Revisa solicitudes de clases y confirma tu horario semanal.",position:"right"},{targetId:"nav-item-3",title:"Tus Servicios",content:"Define qu ofreces y a qu precio. Los usuarios podrn reservarte directamente.",position:"right"}];return i.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[i.jsx(Ik,{navItems:m,activeItem:g,onNavigate:v,onLogout:n}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[i.jsx(Rk,{user:e,onLogout:n,theme:r,onToggleTheme:s,onMarkNotificationsAsRead:o,onNavigateToLogin:l,onNavigateToRegister:c}),i.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pb-20 md:pb-0 scroll-smooth",children:y()}),i.jsx($3,{navItems:m,activeItem:g,onNavigate:v})]}),u&&i.jsx("div",{className:"hidden md:block",children:i.jsx(J3,{steps:b(),onComplete:p})})]})},VU=({onClose:e,onPaymentSuccess:t})=>{const[n,r]=E.useState("confirmation");E.useEffect(()=>{if(n==="processing"){const a=setTimeout(()=>{r("success")},3e3);return()=>clearTimeout(a)}if(n==="success"){const a=setTimeout(()=>{t()},2e3);return()=>clearTimeout(a)}},[n,t]);const s=()=>{r("processing")};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:e,children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md",onClick:a=>a.stopPropagation(),children:[n==="confirmation"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar Pago"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Revisa los detalles de tu suscripcin."})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center text-slate-700",children:[i.jsx("span",{children:"Plan Premium FitnessFlow"}),i.jsx("span",{className:"font-bold text-lg",children:"$20.000 COP"})]}),i.jsx("p",{className:"text-xs text-slate-500 bg-slate-100 p-3 rounded-lg",children:"Sers redirigido a una pasarela de pagos segura para completar tu transaccin. Este es un entorno de demostracin."})]}),i.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-semibold text-white bg-brand-primary rounded-lg hover:bg-brand-secondary",children:"Ir a Pagar"})]})]}),n==="processing"&&i.jsxs("div",{className:"p-12 flex flex-col items-center justify-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-brand-primary border-solid border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"text-slate-600 font-semibold",children:"Procesando tu pago..."}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Por favor espera un momento."})]}),n==="success"&&i.jsxs("div",{className:"p-12 flex flex-col items-center justify-center gap-4 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Pago Exitoso!"}),i.jsx("p",{className:"text-slate-600",children:"Tu suscripcin ha sido activada. Gracias!"})]})]})})},FU=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-brand-primary",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),$U=[{name:"Bsica",price:"15.000",description:"Perfecto para comenzar tu journey fitness",features:["Acceso al gimnasio","Rutinas bsicas","Seguimiento de progreso","Biblioteca de ejercicios"],isPopular:!1},{name:"Premium",price:"20.000",description:"La experiencia completa para resultados serios",features:["Todo del plan Bsico","Rutinas personalizadas","Clases grupales ilimitadas","AI Coach personalizado","Anlisis de progreso avanzado"],isPopular:!0}],JU=({plan:e,onSelectPlan:t})=>i.jsxs("div",{className:`border rounded-xl p-6 flex flex-col ${e.isPopular?"border-brand-primary border-2":"border-slate-200"}`,children:[e.isPopular&&i.jsx("span",{className:"bg-brand-primary text-white text-xs font-bold px-3 py-1 rounded-full self-start mb-4",children:"Ms Popular"}),i.jsx("h3",{className:"text-xl font-bold",children:e.name}),i.jsxs("p",{className:"text-4xl font-extrabold my-2",children:["$",e.price,i.jsx("span",{className:"text-base font-medium text-slate-500",children:"/mes"})]}),i.jsx("p",{className:"text-slate-600 mb-6 h-12",children:e.description}),i.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:e.features.map(n=>i.jsxs("li",{className:"flex items-center gap-3",children:[i.jsx(FU,{}),i.jsx("span",{className:"text-slate-700",children:n})]},n))}),i.jsx("button",{onClick:t,className:`w-full py-3 rounded-lg font-semibold transition-colors ${e.isPopular?"bg-brand-primary text-white hover:bg-brand-secondary":"bg-white text-brand-primary border border-brand-primary hover:bg-green-50"}`,children:"Elegir Plan"})]}),YU=({onSubscriptionSuccess:e,isGymMember:t})=>{const[n,r]=E.useState(!1),s=()=>{r(!0)};return i.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:[t?i.jsx("div",{className:"container mx-auto text-center max-w-xl",children:i.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-slate-200",children:[i.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-4",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-slate-900",children:"Membresa Vencida"}),i.jsx("p",{className:"mt-4 text-slate-600",children:"Tu acceso a la plataforma ha sido suspendido porque tu pago se encuentra vencido."}),i.jsx("p",{className:"mt-2 font-semibold text-slate-700",children:"Por favor, contacta a la administracin de tu gimnasio para renovar tu membresa y reactivar tu cuenta."})]})}):i.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900",children:"Tu perodo de prueba ha terminado"}),i.jsx("p",{className:"mt-4 text-lg text-slate-600 max-w-2xl mx-auto",children:"Gracias por probar FitnessFlow! Para seguir disfrutando de todas las funcionalidades, por favor elige un plan."}),i.jsx("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-2 gap-8",children:$U.map(a=>i.jsx(JU,{plan:a,onSelectPlan:s},a.name))})]}),n&&i.jsx(VU,{onClose:()=>r(!1),onPaymentSuccess:e})]})},KU={loginWithGoogle:async e=>{let n=`${window.location.origin}/Fitness-ProIA/`;e&&(n+=`?intent=${e}`),console.log("Iniciando OAuth con RedirectTo:",n);const{data:r,error:s}=await M.auth.signInWithOAuth({provider:"google",options:{redirectTo:n,...e?{data:{account_type:e}}:{},queryParams:{access_type:"offline",prompt:"consent"}}});if(s)throw console.error("Error en login con Google:",s),s;return r},getCurrentUser:async()=>{const{data:{user:e}}=await M.auth.getUser();return e},logout:async()=>{const{error:e}=await M.auth.signOut();if(e)throw e}},WU=({onClose:e})=>{const t=async()=>{try{const n=localStorage.getItem("pendingAccountType");console.log("Iniciando Google Auth. Tipo de cuenta pendiente:",n),await KU.loginWithGoogle(n||void 0)}catch(n){console.error(n),alert("Error al iniciar sesin con Google"),e()}};return i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"google-login-title",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-6 text-center",onClick:n=>n.stopPropagation(),children:[i.jsx("h2",{id:"google-login-title",className:"text-xl font-bold text-slate-800 mb-4",children:"Iniciar con Google"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"Sers redirigido a Google para verificar tu identidad de forma segura."}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("button",{onClick:t,className:"w-full py-3 px-4 bg-brand-primary text-white rounded-lg font-bold hover:bg-brand-primary-dark transition-colors flex items-center justify-center gap-2",children:"Continuar"}),i.jsx("button",{onClick:e,className:"w-full py-2 text-slate-500 hover:text-slate-700 font-medium",children:"Cancelar"})]})]})})},XU=({user:e,onComplete:t})=>{const[n,r]=E.useState(0),[s,a]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState("06:00"),[d,p]=E.useState(""),m=()=>{r(w=>w+1)},g=()=>n===0?i.jsxs("div",{className:"text-center animate-fade-in",children:[i.jsx("div",{className:"w-24 h-24 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:["Bienvenido, ",e.name.split(" ")[0],"!"]}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Estamos emocionados de acompaarte en tu viaje fitness. Antes de empezar, vamos a personalizar tu experiencia."}),i.jsx("button",{onClick:m,className:"bg-brand-primary text-white font-bold py-3 px-8 rounded-lg hover:bg-brand-secondary transition-transform transform hover:scale-105 shadow-lg",children:"Comencemos"})]}):n===1?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Cul es tu objetivo principal?"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["Ganar Msculo","Perder Grasa","Mejorar Resistencia","Salud General"].map(w=>i.jsx("button",{onClick:()=>{a(w),m()},className:`p-4 border-2 rounded-xl transition-all text-left group ${s===w?"border-brand-primary bg-green-50":"border-slate-200 hover:border-brand-primary hover:bg-green-50"}`,children:i.jsx("span",{className:`font-bold group-hover:text-brand-primary ${s===w?"text-brand-primary":"text-slate-700"}`,children:w})},w))})]}):n===2?i.jsxs("div",{className:"text-center animate-fade-in",children:[i.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Todo Listo!"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Hemos configurado tu dashboard. Preprate para transformar tu cuerpo."}),i.jsx("button",{onClick:()=>t({goal:s}),className:"bg-brand-primary text-white font-bold py-3 px-8 rounded-lg hover:bg-brand-secondary shadow-lg",children:"Ir a mi Dashboard"})]}):null,v=()=>n===0?i.jsxs("div",{className:"text-center animate-fade-in",children:[i.jsx("div",{className:"w-24 h-24 bg-brand-dark/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Bienvenido a FitnessFlow Business"}),i.jsxs("p",{className:"text-slate-600 mb-8",children:["La herramienta definitiva para gestionar ",e.name,". Optimicemos tu gimnasio."]}),i.jsx("button",{onClick:m,className:"bg-brand-dark text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-transform transform hover:scale-105 shadow-lg",children:"Configurar Gimnasio"})]}):n===1?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Capacidad y Aforo"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Aforo Mximo Permitido"}),i.jsx("input",{type:"number",value:o,onChange:w=>l(w.target.value),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-brand-dark",placeholder:"Ej: 150"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Horario de Apertura"}),i.jsx("input",{type:"time",value:c,onChange:w=>u(w.target.value),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-brand-dark"})]}),i.jsx("button",{onClick:m,className:"w-full mt-4 bg-brand-dark text-white font-bold py-3 rounded-lg hover:bg-blue-700",children:"Continuar"})]})]}):n===2?i.jsxs("div",{className:"text-center animate-fade-in",children:[i.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 text-brand-dark",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Configuracin Completa"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Tu panel de administracin est listo. Empieza a registrar miembros y controlar tus finanzas."}),i.jsx("button",{onClick:()=>t({capacity:o,openingHours:c}),className:"bg-brand-dark text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 shadow-lg",children:"Ir al Panel"})]}):null,x=()=>n===0?i.jsxs("div",{className:"text-center animate-fade-in",children:[i.jsx("div",{className:"w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:["Hola, Coach ",e.name.split(" ")[0]]}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Lleva tu carrera al siguiente nivel. Gestiona clientes y agenda sesiones fcilmente."}),i.jsx("button",{onClick:m,className:"bg-purple-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-purple-700 transition-transform transform hover:scale-105 shadow-lg",children:"Crear Perfil Pro"})]}):n===1?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Tu Especialidad"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:["Musculacin","Yoga","CrossFit","Funcional","Rehabilitacin","Nutricin"].map(w=>i.jsx("button",{onClick:()=>{p(w),m()},className:`p-3 border rounded-lg hover:bg-purple-50 hover:border-purple-500 font-medium transition-colors ${d===w?"bg-purple-50 border-purple-500 text-purple-700":"text-slate-700"}`,children:w},w))})]}):n===2?i.jsxs("div",{className:"text-center animate-fade-in",children:[i.jsx("div",{className:"w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6 text-purple-600",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Perfil Listo!"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Ya puedes empezar a recibir reservas y conectar con clientes."}),i.jsx("button",{onClick:()=>t({specialty:d}),className:"bg-purple-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-purple-700 shadow-lg",children:"Ver mi Agenda"})]}):null;return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[500px]",children:[i.jsxs("div",{className:`w-full md:w-2/5 p-8 flex flex-col justify-between text-white ${e.accountType==="gym"?"bg-brand-dark":e.accountType==="entrenador"?"bg-purple-600":"bg-brand-primary"}`,children:[i.jsxs("div",{children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-lg inline-block mb-4",children:i.jsx(Ta,{})}),i.jsx("h1",{className:"text-3xl font-extrabold mb-2",children:"FitnessFlow"}),i.jsx("p",{className:"opacity-90",children:"Configuracin Inicial"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${n>=0?"bg-white":"bg-white/30"}`}),i.jsx("div",{className:`h-1 flex-1 rounded-full ${n>=1?"bg-white":"bg-white/30"}`}),i.jsx("div",{className:`w-3 h-3 rounded-full ${n>=1?"bg-white":"bg-white/30"}`}),i.jsx("div",{className:`h-1 flex-1 rounded-full ${n>=2?"bg-white":"bg-white/30"}`}),i.jsx("div",{className:`w-3 h-3 rounded-full ${n>=2?"bg-white":"bg-white/30"}`})]}),i.jsxs("p",{className:"text-xs opacity-75 text-right",children:["Paso ",n+1," de 3"]})]})]}),i.jsxs("div",{className:"w-full md:w-3/5 p-8 flex flex-col justify-center relative",children:[e.accountType==="user"&&i.jsx(g,{}),e.accountType==="gym"&&i.jsx(v,{}),e.accountType==="entrenador"&&i.jsx(x,{})]})]})})},QU=()=>{const[e,t]=E.useState(null),[n,r]=E.useState(!1),[s,a]=E.useState(!1);E.useEffect(()=>{const l=c=>{c.preventDefault(),t(c)};return window.addEventListener("beforeinstallprompt",l),window.matchMedia("(display-mode: standalone)").matches&&r(!0),()=>window.removeEventListener("beforeinstallprompt",l)},[]);const o=l=>{l.preventDefault(),e?(e.prompt(),e.userChoice.then(c=>{c.outcome==="accepted"?console.log("User accepted the PWA prompt"):console.log("User dismissed the PWA prompt"),t(null)})):alert(`Para instalar la aplicacin:

1. En PC: Busca el icono (+) en la barra de direcciones.
2. En Mvil (Chrome): Toca el men () y selecciona 'Agregar a pantalla de inicio'.
3. En iOS (Safari): Toca 'Compartir' y luego 'Agregar al inicio'.`)};return n?null:s?i.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-fade-in print:hidden",children:i.jsx("button",{onClick:()=>a(!1),className:"bg-slate-800 text-brand-primary p-3 rounded-full shadow-lg border border-brand-primary/30 hover:scale-110 transition-transform",title:"Mostrar instalacin de App","aria-label":"Mostrar instalacin",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})}):i.jsxs("div",{className:"fixed bottom-4 right-4 z-50 animate-slide-up print:hidden flex flex-col items-end",children:[i.jsx("button",{onClick:l=>{l.stopPropagation(),a(!0)},className:"mb-2 bg-slate-800/80 text-white hover:text-brand-primary p-1.5 rounded-full backdrop-blur-sm transition-colors shadow-sm",title:"Ocultar botn","aria-label":"Ocultar",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),i.jsxs("button",{onClick:o,className:`flex items-center gap-2 px-4 py-3 rounded-full shadow-neon font-bold transition-all duration-300 transform hover:scale-105 ${e?"bg-brand-primary text-brand-dark hover:bg-brand-secondary":"bg-slate-700 text-slate-300 cursor-help"}`,title:e?"Instalar Aplicacin":"Instalar manualmente","aria-label":"Instalar aplicacin",children:[i.jsx("div",{className:"bg-white/10 p-1 rounded-full",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),i.jsx("span",{className:"hidden sm:inline text-sm",children:e?"Instalar App":"Instalar (Ayuda)"})]})]})},ZU=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState(!1);E.useEffect(()=>{typeof window<"u"&&"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(o=>{o&&o.addEventListener("updatefound",()=>{const l=o.installing;l&&l.addEventListener("statechange",()=>{l.state==="installed"&&navigator.serviceWorker.controller&&t(!0)})})}).catch(o=>console.log("SW registration check failed",o))},[]);const s=()=>{r(!1),t(!1)},a=o=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(l=>{var c;for(const u of l)(c=u.waiting)==null||c.postMessage({type:"SKIP_WAITING"});window.location.reload()})};return!n&&!e?null:i.jsxs("div",{className:"fixed bottom-4 right-4 z-[10000] bg-slate-800 dark:bg-white text-white dark:text-slate-900 p-4 rounded-xl shadow-2xl border border-slate-700 flex flex-col gap-3 max-w-xs animate-slide-up",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"text-2xl",children:n?"":""}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-sm",children:n?"Lista para usar offline":"Nueva versin disponible"}),i.jsx("p",{className:"text-xs opacity-80 mt-1",children:n?"La aplicacin ha sido guardada en tu dispositivo.":"Haz clic en actualizar para ver las ltimas mejoras."})]})]}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[e&&i.jsx("button",{onClick:()=>a(),className:"bg-brand-primary text-white px-3 py-1.5 rounded-lg text-xs font-bold hover:opacity-90 transition-opacity",children:"Actualizar"}),i.jsx("button",{onClick:s,className:"px-3 py-1.5 rounded-lg text-xs opacity-70 hover:opacity-100 hover:bg-slate-700/10 transition-colors",children:"Cerrar"})]})]})},Gx={name:"Invitado",email:"guest@fitnessflow.pro",accountType:"user",plan:"bsico",subscriptionStatus:"subscribed",isGymMember:!1,trialEndDate:null,notifications:[],hasCompletedOnboarding:!0},e8=()=>{const[e,t]=E.useState("light"),[n,r]=E.useState(i1),[s,a]=E.useState(null),[o,l]=E.useState("landing"),[c,u]=E.useState({accountType:"user",plan:"bsico"}),[d,p]=E.useState(!1),m=Xe.useRef(null);E.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("intent");L&&(m.current=L)},[]),E.useEffect(()=>{M.auth.getSession().then(({data:{session:L}})=>{L!=null&&L.user&&g(L.user)});const{data:{subscription:P}}=M.auth.onAuthStateChange((L,V)=>{V!=null&&V.user?g(V.user):s&&s.email!==Gx.email&&(a(null),l("landing"))});return()=>P.unsubscribe()},[]);const g=async P=>{var L,V,k,q;try{const $=await(await ss(async()=>{const{userService:ne}=await Promise.resolve().then(()=>Nu);return{userService:ne}},void 0)).userService.fetchUserProfile(),j=(L=P.user_metadata)==null?void 0:L.account_type;if($){let ne=$.role||"user";ne==="user"&&(j==="gym"||j==="entrenador")&&(ne=j);const _e=localStorage.getItem(`onboarding_completed_${P.email}`)==="true",Se={name:$.full_name||((V=P.email)==null?void 0:V.split("@")[0])||"Usuario",email:$.email||P.email,accountType:ne,plan:$.plan||"bsico",subscriptionStatus:$.subscription_status||"trial",isGymMember:$.is_gym_member||!1,trialEndDate:$.trial_end_date?new Date($.trial_end_date):null,notifications:[],hasCompletedOnboarding:$.has_completed_onboarding||_e||!1,...$.user_details&&$.user_details.length>0?{profile:$.user_details[0]}:{},...ne==="entrenador"&&$.coach_details&&$.coach_details.length>0?{profession:$.coach_details[0].profession,professionalDescription:$.coach_details[0].description,phone:$.coach_details[0].phone,address:$.coach_details[0].address,cc:"",availability:[]}:{}};a(Se),r(Yt=>Yt.find(dt=>dt.email===Se.email)?Yt.map(dt=>dt.email===Se.email?Se:dt):[...Yt,Se]),(o==="login"||o==="register"||o==="landing"||o==="onboarding")&&(Se.hasCompletedOnboarding?l("main"):l("onboarding"))}else{const _e=new URLSearchParams(window.location.search).get("intent"),Se=localStorage.getItem("pendingAccountType")||sessionStorage.getItem("pendingAccountType");let Yt=j||m.current||_e||Se||"user";localStorage.removeItem("pendingAccountType"),sessionStorage.removeItem("pendingAccountType");try{await(await ss(async()=>{const{userService:jn}=await Promise.resolve().then(()=>Nu);return{userService:jn}},void 0)).userService.createProfile(P,Yt)}catch{}const dt={name:((k=P.user_metadata)==null?void 0:k.full_name)||((q=P.email)==null?void 0:q.split("@")[0])||"Usuario",email:P.email||"",accountType:Yt,plan:"bsico",subscriptionStatus:"trial",isGymMember:!1,trialEndDate:new Date(Date.now()+15*24*60*60*1e3),notifications:[],hasCompletedOnboarding:!1};a(dt),dt.hasCompletedOnboarding?l("main"):l("onboarding")}}catch($){console.error("Error handling supabase user:",$)}};E.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),s&&s.subscriptionStatus==="trial"&&s.trialEndDate&&new Date>new Date(s.trialEndDate)&&(D(s.email,{...s,subscriptionStatus:"expired"}),o!=="subscription"&&l("subscription"))},[e,s,o]);const v=()=>{t(P=>P==="light"?"dark":"light")},x=()=>l("login"),w=(P,L)=>{u({accountType:P,plan:L}),l("register")},y=({email:P})=>{const L=n.find(V=>V.email.toLowerCase()===P.toLowerCase());if(L){let V=L.subscriptionStatus;if(V==="trial"&&L.trialEndDate&&new Date>new Date(L.trialEndDate)){V="expired";const k={...L,subscriptionStatus:"expired"};D(L.email,k),a(k),l("subscription");return}V==="expired"?(a(L),l("subscription")):(localStorage.getItem(`onboarding_completed_${L.email}`)==="true"&&!L.hasCompletedOnboarding&&(L.hasCompletedOnboarding=!0),a(L),L.hasCompletedOnboarding?l("main"):l("onboarding"))}else alert("Usuario no encontrado.")},b=()=>{p(!0)},_=P=>{const L=new Date;L.setDate(L.getDate()+15);const V={name:P.name||"Nuevo Usuario",email:P.email,password:P.password,accountType:P.accountType,plan:P.plan,subscriptionStatus:"trial",isGymMember:!1,trialEndDate:L,notifications:[{id:1,message:"Bienvenido a tu prueba Premium de 15 das!",date:new Date().toLocaleDateString(),read:!1}],hasCompletedOnboarding:!1,...P.accountType==="user"&&{profile:void 0},...P.accountType==="entrenador"&&{profession:P.profession||"",professionalDescription:P.professionalDescription||"",phone:P.phone||"",address:P.address||"",cc:P.cc||"",availability:[]}};r(k=>[...k,V]),a(V),l("onboarding")},S=async P=>{if(s)try{console.log("Completando onboarding con datos:",P);try{await(await ss(async()=>{const{userService:k}=await Promise.resolve().then(()=>Nu);return{userService:k}},void 0)).userService.completeOnboarding()}catch(V){console.error("Warning: Could not save onboarding status to DB (possible offline mode or missing column):",V)}localStorage.setItem(`onboarding_completed_${s.email}`,"true");const L={...s,hasCompletedOnboarding:!0};D(s.email,L),l("main")}catch(L){console.error("Critical Error in onboarding flow:",L)}},T=async()=>{await M.auth.signOut(),a(null),l("landing")},N=()=>{a(Gx),l("main")},C=()=>{a(null),l("landing")},I=()=>{a(null),l("login")},A=()=>{a(null),w("user","bsico")},R=()=>{if(s)D(s.email,{...s,subscriptionStatus:"subscribed"}),l("main");else{const P="ana.garcia@email.com",L=n.find(V=>V.email===P);if(L){const V={...L,subscriptionStatus:"subscribed"};r(k=>k.map(q=>q.email===P?V:q)),a(V),l("main")}else l("login")}},O=P=>r(L=>[...L,P]),D=(P,L)=>{r(V=>V.map(k=>k.email===P?L:k)),s&&s.email===P&&a(L)},G=P=>r(L=>L.filter(V=>V.email!==P)),W=(P,L)=>{r(V=>V.map(k=>{if(k.email===P){const q={id:Date.now(),message:L,date:new Date().toLocaleString(),read:!1};return{...k,notifications:[q,...k.notifications]}}return k}))},K=()=>{if(s){const P={...s,notifications:s.notifications.map(L=>({...L,read:!0}))};a(P),r(L=>L.map(V=>V.email===s.email?P:V))}},B=()=>{if(s&&o==="main")return i.jsx(HU,{user:s,users:n,onLogout:T,theme:e,onToggleTheme:v,onAddUser:O,onUpdateUser:D,onDeleteUser:G,onSendNotification:W,onMarkNotificationsAsRead:K,onNavigateToLogin:I,onNavigateToRegister:A});switch(o){case"login":return i.jsx(s0,{onNavigateToRegister:()=>w("user","bsico"),onNavigateBack:C,onLoginSuccess:y,onGoogleLogin:b});case"register":return i.jsx(bk,{onNavigateToLogin:x,onNavigateBack:C,onRegisterSuccess:_,onGoogleLogin:b,initialAccountType:c.accountType,initialPlan:c.plan});case"subscription":return i.jsx(YU,{onSubscriptionSuccess:R,isGymMember:s==null?void 0:s.isGymMember});case"onboarding":return s?i.jsx(XU,{user:s,onComplete:S}):i.jsx(s0,{onNavigateToRegister:()=>w("user","bsico"),onNavigateBack:C,onLoginSuccess:y,onGoogleLogin:b});case"landing":default:return i.jsx(ok,{onStartRegistration:w,onNavigateToLogin:x,onGuestLogin:N})}};return i.jsxs(a3,{children:[i.jsx("a",{href:"#main-content",className:"skip-link",children:"Saltar al contenido principal"}),B(),i.jsx(QU,{}),i.jsx(ZU,{}),d&&i.jsx(WU,{onClose:()=>p(!1)})]})},Z1=document.getElementById("root");if(!Z1)throw new Error("Could not find root element to mount to");const t8=aN.createRoot(Z1);t8.render(i.jsx(Xe.StrictMode,{children:i.jsx(e8,{})}));
